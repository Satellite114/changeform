ARM GAS  C:\usertemp\ccTKhvO9.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 1
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"ff.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.file 1 "Middlewares/Third_Party/FatFs/src/ff.c"
  19              		.section	.text.ld_word,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	ld_word:
  26              	.LVL0:
  27              	.LFB338:
   1:Middlewares/Third_Party/FatFs/src/ff.c **** /*----------------------------------------------------------------------------/
   2:Middlewares/Third_Party/FatFs/src/ff.c **** /  FatFs - Generic FAT file system module  R0.12c                             /
   3:Middlewares/Third_Party/FatFs/src/ff.c **** /-----------------------------------------------------------------------------/
   4:Middlewares/Third_Party/FatFs/src/ff.c **** /
   5:Middlewares/Third_Party/FatFs/src/ff.c **** / Copyright (C) 2017, ChaN, all right reserved.
   6:Middlewares/Third_Party/FatFs/src/ff.c **** /
   7:Middlewares/Third_Party/FatFs/src/ff.c **** / FatFs module is an open source software. Redistribution and use of FatFs in
   8:Middlewares/Third_Party/FatFs/src/ff.c **** / source and binary forms, with or without modification, are permitted provided
   9:Middlewares/Third_Party/FatFs/src/ff.c **** / that the following condition is met:
  10:Middlewares/Third_Party/FatFs/src/ff.c **** /
  11:Middlewares/Third_Party/FatFs/src/ff.c **** / 1. Redistributions of source code must retain the above copyright notice,
  12:Middlewares/Third_Party/FatFs/src/ff.c **** /    this condition and the following disclaimer.
  13:Middlewares/Third_Party/FatFs/src/ff.c **** /
  14:Middlewares/Third_Party/FatFs/src/ff.c **** / This software is provided by the copyright holder and contributors "AS IS"
  15:Middlewares/Third_Party/FatFs/src/ff.c **** / and any warranties related to this software are DISCLAIMED.
  16:Middlewares/Third_Party/FatFs/src/ff.c **** / The copyright owner or contributors be NOT LIABLE for any damages caused
  17:Middlewares/Third_Party/FatFs/src/ff.c **** / by use of this software.
  18:Middlewares/Third_Party/FatFs/src/ff.c **** /----------------------------------------------------------------------------*/
  19:Middlewares/Third_Party/FatFs/src/ff.c **** 
  20:Middlewares/Third_Party/FatFs/src/ff.c **** 
  21:Middlewares/Third_Party/FatFs/src/ff.c **** #include "ff.h"			/* Declarations of FatFs API */
  22:Middlewares/Third_Party/FatFs/src/ff.c **** #include "diskio.h"		/* Declarations of device I/O functions */
  23:Middlewares/Third_Party/FatFs/src/ff.c **** 
  24:Middlewares/Third_Party/FatFs/src/ff.c **** 
  25:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
  26:Middlewares/Third_Party/FatFs/src/ff.c **** 
  27:Middlewares/Third_Party/FatFs/src/ff.c ****    Module Private Definitions
  28:Middlewares/Third_Party/FatFs/src/ff.c **** 
  29:Middlewares/Third_Party/FatFs/src/ff.c **** ---------------------------------------------------------------------------*/
  30:Middlewares/Third_Party/FatFs/src/ff.c **** 
  31:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FATFS != 68300	/* Revision ID */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 2


  32:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong include file (ff.h).
  33:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
  34:Middlewares/Third_Party/FatFs/src/ff.c **** 
  35:Middlewares/Third_Party/FatFs/src/ff.c **** 
  36:Middlewares/Third_Party/FatFs/src/ff.c **** /* DBCS code ranges and SBCS upper conversion tables */
  37:Middlewares/Third_Party/FatFs/src/ff.c **** 
  38:Middlewares/Third_Party/FatFs/src/ff.c **** #if _CODE_PAGE == 932	/* Japanese Shift-JIS */
  39:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81	/* DBC 1st byte range 1 start */
  40:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0x9F	/* DBC 1st byte range 1 end */
  41:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF2S	0xE0	/* DBC 1st byte range 2 start */
  42:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF2E	0xFC	/* DBC 1st byte range 2 end */
  43:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40	/* DBC 2nd byte range 1 start */
  44:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E	/* DBC 2nd byte range 1 end */
  45:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x80	/* DBC 2nd byte range 2 start */
  46:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFC	/* DBC 2nd byte range 2 end */
  47:Middlewares/Third_Party/FatFs/src/ff.c **** 
  48:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 936	/* Simplified Chinese GBK */
  49:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
  50:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
  51:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40
  52:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E
  53:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x80
  54:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFE
  55:Middlewares/Third_Party/FatFs/src/ff.c **** 
  56:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 949	/* Korean */
  57:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
  58:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
  59:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x41
  60:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x5A
  61:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0x61
  62:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0x7A
  63:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS3S	0x81
  64:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS3E	0xFE
  65:Middlewares/Third_Party/FatFs/src/ff.c **** 
  66:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 950	/* Traditional Chinese Big5 */
  67:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0x81
  68:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1E	0xFE
  69:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1S	0x40
  70:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS1E	0x7E
  71:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2S	0xA1
  72:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DS2E	0xFE
  73:Middlewares/Third_Party/FatFs/src/ff.c **** 
  74:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 437	/* U.S. */
  75:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
  76:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x45,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F, \
  77:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
  78:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
  79:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
  80:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
  81:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
  82:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
  83:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
  84:Middlewares/Third_Party/FatFs/src/ff.c **** 
  85:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 720	/* Arabic */
  86:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
  87:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
  88:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 3


  89:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
  90:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
  91:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
  92:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
  93:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
  94:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
  95:Middlewares/Third_Party/FatFs/src/ff.c **** 
  96:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 737	/* Greek */
  97:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
  98:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
  99:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x93,0x94,0x95,0x96,0x97,0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87, \
 100:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F,0x90,0x91,0xAA,0x92,0x93,0x94,0x95,0x96, \
 101:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 102:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 103:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 104:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x97,0xEA,0xEB,0xEC,0xE4,0xED,0xEE,0xEF,0xF5,0xF0,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 105:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 106:Middlewares/Third_Party/FatFs/src/ff.c **** 
 107:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 771	/* KBL */
 108:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 109:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 110:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 111:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 112:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 113:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 114:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDC,0xDE,0xDE, \
 115:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 116:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF8,0xFA,0xFA,0xFC,0xFC,0xFE,0xFF}
 117:Middlewares/Third_Party/FatFs/src/ff.c **** 
 118:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 775	/* Baltic */
 119:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 120:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x91,0xA0,0x8E,0x95,0x8F,0x80,0xAD,0xED,0x8A,0x8A,0xA1,0x8D,0x8E,0x8F, \
 121:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0xE2,0x99,0x95,0x96,0x97,0x97,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9F, \
 122:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0xE0,0xA3,0xA3,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 123:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 124:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 125:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xB6,0xB7,0xB8,0xBD,0xBE,0xC6,0xC7,0xA5,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 126:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE3,0xE8,0xE8,0xEA,0xEA,0xEE,0xED,0xEE,0xEF, \
 127:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 128:Middlewares/Third_Party/FatFs/src/ff.c **** 
 129:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 850	/* Latin 1 */
 130:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 131:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x43,0x55,0x45,0x41,0x41,0x41,0x41,0x43,0x45,0x45,0x45,0x49,0x49,0x49,0x41,0x41, \
 132:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x45,0x92,0x92,0x4F,0x4F,0x4F,0x55,0x55,0x59,0x4F,0x55,0x4F,0x9C,0x4F,0x9E,0x9F, \
 133:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 134:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0x41,0x41,0x41,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 135:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0x41,0x41,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 136:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD1,0xD1,0x45,0x45,0x45,0x49,0x49,0x49,0x49,0xD9,0xDA,0xDB,0xDC,0xDD,0x49,0xDF, \
 137:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x4F,0xE1,0x4F,0x4F,0x4F,0x4F,0xE6,0xE8,0xE8,0x55,0x55,0x55,0x59,0x59,0xEE,0xEF, \
 138:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 139:Middlewares/Third_Party/FatFs/src/ff.c **** 
 140:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 852	/* Latin 2 */
 141:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 142:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xDE,0x8F,0x80,0x9D,0xD3,0x8A,0x8A,0xD7,0x8D,0x8E,0x8F, \
 143:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x91,0xE2,0x99,0x95,0x95,0x97,0x97,0x99,0x9A,0x9B,0x9B,0x9D,0x9E,0xAC, \
 144:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA4,0xA4,0xA6,0xA6,0xA8,0xA8,0xAA,0x8D,0xAC,0xB8,0xAE,0xAF, \
 145:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBD,0xBF, \
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 4


 146:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC6,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 147:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD1,0xD1,0xD2,0xD3,0xD2,0xD5,0xD6,0xD7,0xB7,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 148:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE3,0xD5,0xE6,0xE6,0xE8,0xE9,0xE8,0xEB,0xED,0xED,0xDD,0xEF, \
 149:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xEB,0xFC,0xFC,0xFE,0xFF}
 150:Middlewares/Third_Party/FatFs/src/ff.c **** 
 151:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 855	/* Cyrillic */
 152:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 153:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x81,0x81,0x83,0x83,0x85,0x85,0x87,0x87,0x89,0x89,0x8B,0x8B,0x8D,0x8D,0x8F,0x8F, \
 154:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x91,0x91,0x93,0x93,0x95,0x95,0x97,0x97,0x99,0x99,0x9B,0x9B,0x9D,0x9D,0x9F,0x9F, \
 155:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA1,0xA1,0xA3,0xA3,0xA5,0xA5,0xA7,0xA7,0xA9,0xA9,0xAB,0xAB,0xAD,0xAD,0xAE,0xAF, \
 156:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB6,0xB6,0xB8,0xB8,0xB9,0xBA,0xBB,0xBC,0xBE,0xBE,0xBF, \
 157:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 158:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD1,0xD1,0xD3,0xD3,0xD5,0xD5,0xD7,0xD7,0xDD,0xD9,0xDA,0xDB,0xDC,0xDD,0xE0,0xDF, \
 159:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE2,0xE2,0xE4,0xE4,0xE6,0xE6,0xE8,0xE8,0xEA,0xEA,0xEC,0xEC,0xEE,0xEE,0xEF, \
 160:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF8,0xFA,0xFA,0xFC,0xFC,0xFD,0xFE,0xFF}
 161:Middlewares/Third_Party/FatFs/src/ff.c **** 
 162:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 857	/* Turkish */
 163:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 164:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0xB6,0x8E,0xB7,0x8F,0x80,0xD2,0xD3,0xD4,0xD8,0xD7,0x49,0x8E,0x8F, \
 165:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0xE2,0x99,0xE3,0xEA,0xEB,0x98,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9E, \
 166:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB5,0xD6,0xE0,0xE9,0xA5,0xA5,0xA6,0xA6,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 167:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 168:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC7,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 169:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0x49,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 170:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE5,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xDE,0xED,0xEE,0xEF, \
 171:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 172:Middlewares/Third_Party/FatFs/src/ff.c **** 
 173:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 860	/* Portuguese */
 174:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 175:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0x8F,0x8E,0x91,0x86,0x80,0x89,0x89,0x92,0x8B,0x8C,0x98,0x8E,0x8F, \
 176:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x8C,0x99,0xA9,0x96,0x9D,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 177:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x86,0x8B,0x9F,0x96,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 178:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 179:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 180:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 181:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 182:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 183:Middlewares/Third_Party/FatFs/src/ff.c **** 
 184:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 861	/* Icelandic */
 185:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 186:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x8B,0x8B,0x8D,0x8E,0x8F, \
 187:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x4F,0x99,0x8D,0x55,0x97,0x97,0x99,0x9A,0x9D,0x9C,0x9D,0x9E,0x9F, \
 188:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA4,0xA5,0xA6,0xA7,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 189:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 190:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 191:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 192:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 193:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 194:Middlewares/Third_Party/FatFs/src/ff.c **** 
 195:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 862	/* Hebrew */
 196:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 197:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 198:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 199:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 200:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 201:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 202:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 5


 203:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 204:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 205:Middlewares/Third_Party/FatFs/src/ff.c **** 
 206:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 863	/* Canadian-French */
 207:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 208:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x43,0x55,0x45,0x41,0x41,0x41,0x86,0x43,0x45,0x45,0x45,0x49,0x49,0x8D,0x41,0x8F, \
 209:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x45,0x45,0x45,0x4F,0x45,0x49,0x55,0x55,0x98,0x4F,0x55,0x9B,0x9C,0x55,0x55,0x9F, \
 210:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA0,0xA1,0x4F,0x55,0xA4,0xA5,0xA6,0xA7,0x49,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 211:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 212:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 213:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 214:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 215:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 216:Middlewares/Third_Party/FatFs/src/ff.c **** 
 217:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 864	/* Arabic */
 218:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 219:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x45,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F, \
 220:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 221:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 222:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 223:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 224:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 225:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 226:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 227:Middlewares/Third_Party/FatFs/src/ff.c **** 
 228:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 865	/* Nordic */
 229:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 230:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x9A,0x90,0x41,0x8E,0x41,0x8F,0x80,0x45,0x45,0x45,0x49,0x49,0x49,0x8E,0x8F, \
 231:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x92,0x92,0x4F,0x99,0x4F,0x55,0x55,0x59,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 232:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x41,0x49,0x4F,0x55,0xA5,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 233:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 234:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 235:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 236:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xE0,0xE1,0xE2,0xE3,0xE4,0xE5,0xE6,0xE7,0xE8,0xE9,0xEA,0xEB,0xEC,0xED,0xEE,0xEF, \
 237:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xF2,0xF3,0xF4,0xF5,0xF6,0xF7,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 238:Middlewares/Third_Party/FatFs/src/ff.c **** 
 239:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 866	/* Russian */
 240:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 241:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 242:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 243:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 244:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 245:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 246:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xD6,0xD7,0xD8,0xD9,0xDA,0xDB,0xDC,0xDD,0xDE,0xDF, \
 247:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D,0x9E,0x9F, \
 248:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF0,0xF2,0xF2,0xF4,0xF4,0xF6,0xF6,0xF8,0xF9,0xFA,0xFB,0xFC,0xFD,0xFE,0xFF}
 249:Middlewares/Third_Party/FatFs/src/ff.c **** 
 250:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 869	/* Greek 2 */
 251:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 252:Middlewares/Third_Party/FatFs/src/ff.c **** #define _EXCVT {0x80,0x81,0x82,0x83,0x84,0x85,0x86,0x87,0x88,0x89,0x8A,0x8B,0x8C,0x8D,0x8E,0x8F, \
 253:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x90,0x91,0x92,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x86,0x9C,0x8D,0x8F,0x90, \
 254:Middlewares/Third_Party/FatFs/src/ff.c **** 				0x91,0x90,0x92,0x95,0xA4,0xA5,0xA6,0xA7,0xA8,0xA9,0xAA,0xAB,0xAC,0xAD,0xAE,0xAF, \
 255:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xB0,0xB1,0xB2,0xB3,0xB4,0xB5,0xB6,0xB7,0xB8,0xB9,0xBA,0xBB,0xBC,0xBD,0xBE,0xBF, \
 256:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xC0,0xC1,0xC2,0xC3,0xC4,0xC5,0xC6,0xC7,0xC8,0xC9,0xCA,0xCB,0xCC,0xCD,0xCE,0xCF, \
 257:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xD0,0xD1,0xD2,0xD3,0xD4,0xD5,0xA4,0xA5,0xA6,0xD9,0xDA,0xDB,0xDC,0xA7,0xA8,0xDF, \
 258:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xA9,0xAA,0xAC,0xAD,0xB5,0xB6,0xB7,0xB8,0xBD,0xBE,0xC6,0xC7,0xCF,0xCF,0xD0,0xEF, \
 259:Middlewares/Third_Party/FatFs/src/ff.c **** 				0xF0,0xF1,0xD1,0xD2,0xD3,0xF5,0xD4,0xF7,0xF8,0xF9,0xD5,0x96,0x95,0x98,0xFE,0xFF}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 6


 260:Middlewares/Third_Party/FatFs/src/ff.c **** 
 261:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _CODE_PAGE == 1	/* ASCII (for only non-LFN cfg) */
 262:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
 263:Middlewares/Third_Party/FatFs/src/ff.c **** #error Cannot enable LFN without valid code page.
 264:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 265:Middlewares/Third_Party/FatFs/src/ff.c **** #define _DF1S	0
 266:Middlewares/Third_Party/FatFs/src/ff.c **** 
 267:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 268:Middlewares/Third_Party/FatFs/src/ff.c **** #error Unknown code page
 269:Middlewares/Third_Party/FatFs/src/ff.c **** 
 270:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 271:Middlewares/Third_Party/FatFs/src/ff.c **** 
 272:Middlewares/Third_Party/FatFs/src/ff.c **** 
 273:Middlewares/Third_Party/FatFs/src/ff.c **** /* Character code support macros */
 274:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsUpper(c)	(((c)>='A')&&((c)<='Z'))
 275:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsLower(c)	(((c)>='a')&&((c)<='z'))
 276:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDigit(c)	(((c)>='0')&&((c)<='9'))
 277:Middlewares/Third_Party/FatFs/src/ff.c **** 
 278:Middlewares/Third_Party/FatFs/src/ff.c **** #if _DF1S != 0	/* Code page is DBCS */
 279:Middlewares/Third_Party/FatFs/src/ff.c **** 
 280:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _DF2S	/* Two 1st byte areas */
 281:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	(((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E) || ((BYTE)(c) >= _DF2S && (BYTE)(c) 
 282:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* One 1st byte area */
 283:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	((BYTE)(c) >= _DF1S && (BYTE)(c) <= _DF1E)
 284:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 285:Middlewares/Third_Party/FatFs/src/ff.c **** 
 286:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _DS3S	/* Three 2nd byte areas */
 287:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 288:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Two 2nd byte areas */
 289:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	(((BYTE)(c) >= _DS1S && (BYTE)(c) <= _DS1E) || ((BYTE)(c) >= _DS2S && (BYTE)(c) 
 290:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 291:Middlewares/Third_Party/FatFs/src/ff.c **** 
 292:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Code page is SBCS */
 293:Middlewares/Third_Party/FatFs/src/ff.c **** 
 294:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS1(c)	0
 295:Middlewares/Third_Party/FatFs/src/ff.c **** #define IsDBCS2(c)	0
 296:Middlewares/Third_Party/FatFs/src/ff.c **** 
 297:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _DF1S */
 298:Middlewares/Third_Party/FatFs/src/ff.c **** 
 299:Middlewares/Third_Party/FatFs/src/ff.c **** 
 300:Middlewares/Third_Party/FatFs/src/ff.c **** /* Additional file attribute bits for internal use */
 301:Middlewares/Third_Party/FatFs/src/ff.c **** #define	AM_VOL		0x08	/* Volume label */
 302:Middlewares/Third_Party/FatFs/src/ff.c **** #define AM_LFN		0x0F	/* LFN entry */
 303:Middlewares/Third_Party/FatFs/src/ff.c **** #define AM_MASK		0x3F	/* Mask of defined bits */
 304:Middlewares/Third_Party/FatFs/src/ff.c **** 
 305:Middlewares/Third_Party/FatFs/src/ff.c **** 
 306:Middlewares/Third_Party/FatFs/src/ff.c **** /* Additional file access control and file status flags for internal use */
 307:Middlewares/Third_Party/FatFs/src/ff.c **** #define FA_SEEKEND	0x20	/* Seek to end of the file on file open */
 308:Middlewares/Third_Party/FatFs/src/ff.c **** #define FA_MODIFIED	0x40	/* File has been modified */
 309:Middlewares/Third_Party/FatFs/src/ff.c **** #define FA_DIRTY	0x80	/* FIL.buf[] needs to be written-back */
 310:Middlewares/Third_Party/FatFs/src/ff.c **** 
 311:Middlewares/Third_Party/FatFs/src/ff.c **** 
 312:Middlewares/Third_Party/FatFs/src/ff.c **** /* Name status flags in fn[] */
 313:Middlewares/Third_Party/FatFs/src/ff.c **** #define NSFLAG		11		/* Index of the name status byte */
 314:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LOSS		0x01	/* Out of 8.3 format */
 315:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LFN		0x02	/* Force to create LFN entry */
 316:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_LAST		0x04	/* Last segment */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 7


 317:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_BODY		0x08	/* Lower case flag (body) */
 318:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_EXT		0x10	/* Lower case flag (ext) */
 319:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_DOT		0x20	/* Dot entry */
 320:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_NOLFN	0x40	/* Do not find LFN */
 321:Middlewares/Third_Party/FatFs/src/ff.c **** #define NS_NONAME	0x80	/* Not followed */
 322:Middlewares/Third_Party/FatFs/src/ff.c **** 
 323:Middlewares/Third_Party/FatFs/src/ff.c **** 
 324:Middlewares/Third_Party/FatFs/src/ff.c **** /* Limits and boundaries */
 325:Middlewares/Third_Party/FatFs/src/ff.c **** #define MAX_DIR		0x200000		/* Max size of FAT directory */
 326:Middlewares/Third_Party/FatFs/src/ff.c **** #define MAX_DIR_EX	0x10000000		/* Max size of exFAT directory */
 327:Middlewares/Third_Party/FatFs/src/ff.c **** #define MAX_FAT12	0xFF5			/* Max FAT12 clusters (differs from specs, but correct for real DOS/Windo
 328:Middlewares/Third_Party/FatFs/src/ff.c **** #define	MAX_FAT16	0xFFF5			/* Max FAT16 clusters (differs from specs, but correct for real DOS/Wind
 329:Middlewares/Third_Party/FatFs/src/ff.c **** #define	MAX_FAT32	0x0FFFFFF5		/* Max FAT32 clusters (not specified, practical limit) */
 330:Middlewares/Third_Party/FatFs/src/ff.c **** #define	MAX_EXFAT	0x7FFFFFFD		/* Max exFAT clusters (differs from specs, implementation limit) */
 331:Middlewares/Third_Party/FatFs/src/ff.c **** 
 332:Middlewares/Third_Party/FatFs/src/ff.c **** 
 333:Middlewares/Third_Party/FatFs/src/ff.c **** /* FatFs refers the FAT structure as simple byte array instead of structure member
 334:Middlewares/Third_Party/FatFs/src/ff.c **** / because the C structure is not binary compatible between different platforms */
 335:Middlewares/Third_Party/FatFs/src/ff.c **** 
 336:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_JmpBoot			0		/* x86 jump instruction (3-byte) */
 337:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_OEMName			3		/* OEM name (8-byte) */
 338:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_BytsPerSec		11		/* Sector size [byte] (WORD) */
 339:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_SecPerClus		13		/* Cluster size [sector] (BYTE) */
 340:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RsvdSecCnt		14		/* Size of reserved area [sector] (WORD) */
 341:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumFATs			16		/* Number of FATs (BYTE) */
 342:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RootEntCnt		17		/* Size of root directory area for FAT12/16 [entry] (WORD) */
 343:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_TotSec16		19		/* Volume size (16-bit) [sector] (WORD) */
 344:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_Media			21		/* Media descriptor byte (BYTE) */
 345:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FATSz16			22		/* FAT size (16-bit) [sector] (WORD) */
 346:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_SecPerTrk		24		/* Track size for int13h [sector] (WORD) */
 347:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumHeads		26		/* Number of heads for int13h (WORD) */
 348:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_HiddSec			28		/* Volume offset from top of the drive (DWORD) */
 349:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_TotSec32		32		/* Volume size (32-bit) [sector] (DWORD) */
 350:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_DrvNum			36		/* Physical drive number for int13h (BYTE) */
 351:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_NTres			37		/* Error flag (BYTE) */
 352:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootSig			38		/* Extended boot signature (BYTE) */
 353:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolID			39		/* Volume serial number (DWORD) */
 354:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolLab			43		/* Volume label string (8-byte) */
 355:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_FilSysType		54		/* File system type string (8-byte) */
 356:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootCode			62		/* Boot code (448-byte) */
 357:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_55AA				510		/* Signature word (WORD) */
 358:Middlewares/Third_Party/FatFs/src/ff.c **** 
 359:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FATSz32			36		/* FAT32: FAT size [sector] (DWORD) */
 360:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_ExtFlags32		40		/* FAT32: Extended flags (WORD) */
 361:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FSVer32			42		/* FAT32: File system version (WORD) */
 362:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RootClus32		44		/* FAT32: Root directory cluster (DWORD) */
 363:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FSInfo32		48		/* FAT32: Offset of FSINFO sector (WORD) */
 364:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_BkBootSec32		50		/* FAT32: Offset of backup boot sector (WORD) */
 365:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_DrvNum32			64		/* FAT32: Physical drive number for int13h (BYTE) */
 366:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_NTres32			65		/* FAT32: Error flag (BYTE) */
 367:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootSig32		66		/* FAT32: Extended boot signature (BYTE) */
 368:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolID32			67		/* FAT32: Volume serial number (DWORD) */
 369:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_VolLab32			71		/* FAT32: Volume label string (8-byte) */
 370:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_FilSysType32		82		/* FAT32: File system type string (8-byte) */
 371:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootCode32		90		/* FAT32: Boot code (420-byte) */
 372:Middlewares/Third_Party/FatFs/src/ff.c **** 
 373:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_ZeroedEx		11		/* exFAT: MBZ field (53-byte) */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 8


 374:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_VolOfsEx		64		/* exFAT: Volume offset from top of the drive [sector] (QWORD) */
 375:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_TotSecEx		72		/* exFAT: Volume size [sector] (QWORD) */
 376:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FatOfsEx		80		/* exFAT: FAT offset from top of the volume [sector] (DWORD) */
 377:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FatSzEx			84		/* exFAT: FAT size [sector] (DWORD) */
 378:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_DataOfsEx		88		/* exFAT: Data offset from top of the volume [sector] (DWORD) */
 379:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumClusEx		92		/* exFAT: Number of clusters (DWORD) */
 380:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_RootClusEx		96		/* exFAT: Root directory start cluster (DWORD) */
 381:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_VolIDEx			100		/* exFAT: Volume serial number (DWORD) */
 382:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_FSVerEx			104		/* exFAT: File system version (WORD) */
 383:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_VolFlagEx		106		/* exFAT: Volume flags (BYTE) */
 384:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_ActFatEx		107		/* exFAT: Active FAT flags (BYTE) */
 385:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_BytsPerSecEx	108		/* exFAT: Log2 of sector size in unit of byte (BYTE) */
 386:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_SecPerClusEx	109		/* exFAT: Log2 of cluster size in unit of sector (BYTE) */
 387:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_NumFATsEx		110		/* exFAT: Number of FATs (BYTE) */
 388:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_DrvNumEx		111		/* exFAT: Physical drive number for int13h (BYTE) */
 389:Middlewares/Third_Party/FatFs/src/ff.c **** #define BPB_PercInUseEx		112		/* exFAT: Percent in use (BYTE) */
 390:Middlewares/Third_Party/FatFs/src/ff.c **** #define	BPB_RsvdEx			113		/* exFAT: Reserved (7-byte) */
 391:Middlewares/Third_Party/FatFs/src/ff.c **** #define BS_BootCodeEx		120		/* exFAT: Boot code (390-byte) */
 392:Middlewares/Third_Party/FatFs/src/ff.c **** 
 393:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_Name			0		/* Short file name (11-byte) */
 394:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_Attr			11		/* Attribute (BYTE) */
 395:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_NTres			12		/* Lower case flag (BYTE) */
 396:Middlewares/Third_Party/FatFs/src/ff.c **** #define DIR_CrtTime10		13		/* Created time sub-second (BYTE) */
 397:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_CrtTime			14		/* Created time (DWORD) */
 398:Middlewares/Third_Party/FatFs/src/ff.c **** #define DIR_LstAccDate		18		/* Last accessed date (WORD) */
 399:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FstClusHI		20		/* Higher 16-bit of first cluster (WORD) */
 400:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_ModTime			22		/* Modified time (DWORD) */
 401:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FstClusLO		26		/* Lower 16-bit of first cluster (WORD) */
 402:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DIR_FileSize		28		/* File size (DWORD) */
 403:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Ord			0		/* LFN: LFN order and LLE flag (BYTE) */
 404:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Attr			11		/* LFN: LFN attribute (BYTE) */
 405:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Type			12		/* LFN: Entry type (BYTE) */
 406:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_Chksum			13		/* LFN: Checksum of the SFN (BYTE) */
 407:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LDIR_FstClusLO		26		/* LFN: MBZ field (WORD) */
 408:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_Type			0		/* exFAT: Type of exFAT directory entry (BYTE) */
 409:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_NumLabel		1		/* exFAT: Number of volume label characters (BYTE) */
 410:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_Label			2		/* exFAT: Volume label (11-WORD) */
 411:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_CaseSum		4		/* exFAT: Sum of case conversion table (DWORD) */
 412:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_NumSec			1		/* exFAT: Number of secondary entries (BYTE) */
 413:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_SetSum			2		/* exFAT: Sum of the set of directory entries (WORD) */
 414:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_Attr			4		/* exFAT: File attribute (WORD) */
 415:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_CrtTime		8		/* exFAT: Created time (DWORD) */
 416:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_ModTime		12		/* exFAT: Modified time (DWORD) */
 417:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_AccTime		16		/* exFAT: Last accessed time (DWORD) */
 418:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_CrtTime10		20		/* exFAT: Created time subsecond (BYTE) */
 419:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_ModTime10		21		/* exFAT: Modified time subsecond (BYTE) */
 420:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_CrtTZ			22		/* exFAT: Created timezone (BYTE) */
 421:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_ModTZ			23		/* exFAT: Modified timezone (BYTE) */
 422:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_AccTZ			24		/* exFAT: Last accessed timezone (BYTE) */
 423:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_GenFlags		33		/* exFAT: General secondary flags (WORD) */
 424:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_NumName		35		/* exFAT: Number of file name characters (BYTE) */
 425:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_NameHash		36		/* exFAT: Hash of file name (WORD) */
 426:Middlewares/Third_Party/FatFs/src/ff.c **** #define XDIR_ValidFileSize	40		/* exFAT: Valid file size (QWORD) */
 427:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_FstClus		52		/* exFAT: First cluster of the file data (DWORD) */
 428:Middlewares/Third_Party/FatFs/src/ff.c **** #define	XDIR_FileSize		56		/* exFAT: File/Directory size (QWORD) */
 429:Middlewares/Third_Party/FatFs/src/ff.c **** 
 430:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SZDIRE				32		/* Size of a directory entry */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 9


 431:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DDEM				0xE5	/* Deleted directory entry mark set to DIR_Name[0] */
 432:Middlewares/Third_Party/FatFs/src/ff.c **** #define	RDDEM				0x05	/* Replacement of the character collides with DDEM */
 433:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LLEF				0x40	/* Last long entry flag in LDIR_Ord */
 434:Middlewares/Third_Party/FatFs/src/ff.c **** 
 435:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_LeadSig			0		/* FAT32 FSI: Leading signature (DWORD) */
 436:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_StrucSig		484		/* FAT32 FSI: Structure signature (DWORD) */
 437:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_Free_Count		488		/* FAT32 FSI: Number of free clusters (DWORD) */
 438:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FSI_Nxt_Free		492		/* FAT32 FSI: Last allocated cluster (DWORD) */
 439:Middlewares/Third_Party/FatFs/src/ff.c **** 
 440:Middlewares/Third_Party/FatFs/src/ff.c **** #define MBR_Table			446		/* MBR: Offset of partition table in the MBR */
 441:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SZ_PTE				16		/* MBR: Size of a partition table entry */
 442:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_Boot			0		/* MBR PTE: Boot indicator */
 443:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_StHead			1		/* MBR PTE: Start head */
 444:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_StSec			2		/* MBR PTE: Start sector */
 445:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_StCyl			3		/* MBR PTE: Start cylinder */
 446:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_System			4		/* MBR PTE: System ID */
 447:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_EdHead			5		/* MBR PTE: End head */
 448:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_EdSec			6		/* MBR PTE: End sector */
 449:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_EdCyl			7		/* MBR PTE: End cylinder */
 450:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_StLba			8		/* MBR PTE: Start in LBA */
 451:Middlewares/Third_Party/FatFs/src/ff.c **** #define PTE_SizLba			12		/* MBR PTE: Size in LBA */
 452:Middlewares/Third_Party/FatFs/src/ff.c **** 
 453:Middlewares/Third_Party/FatFs/src/ff.c **** 
 454:Middlewares/Third_Party/FatFs/src/ff.c **** /* Post process after fatal error on file operation */
 455:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ABORT(fs, res)		{ fp->err = (BYTE)(res); LEAVE_FF(fs, res); }
 456:Middlewares/Third_Party/FatFs/src/ff.c **** 
 457:Middlewares/Third_Party/FatFs/src/ff.c **** 
 458:Middlewares/Third_Party/FatFs/src/ff.c **** /* Reentrancy related */
 459:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 460:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
 461:Middlewares/Third_Party/FatFs/src/ff.c **** #error Static LFN work area cannot be used at thread-safe configuration
 462:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 463:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ENTER_FF(fs)		{ if (!lock_fs(fs)) return FR_TIMEOUT; }
 464:Middlewares/Third_Party/FatFs/src/ff.c **** #define	LEAVE_FF(fs, res)	{ unlock_fs(fs, res); return res; }
 465:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 466:Middlewares/Third_Party/FatFs/src/ff.c **** #define	ENTER_FF(fs)
 467:Middlewares/Third_Party/FatFs/src/ff.c **** #define LEAVE_FF(fs, res)	return res
 468:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 469:Middlewares/Third_Party/FatFs/src/ff.c **** 
 470:Middlewares/Third_Party/FatFs/src/ff.c **** 
 471:Middlewares/Third_Party/FatFs/src/ff.c **** /* Definitions of volume - partition conversion */
 472:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MULTI_PARTITION
 473:Middlewares/Third_Party/FatFs/src/ff.c **** #define LD2PD(vol) VolToPart[vol].pd	/* Get physical drive number */
 474:Middlewares/Third_Party/FatFs/src/ff.c **** #define LD2PT(vol) VolToPart[vol].pt	/* Get partition index */
 475:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 476:Middlewares/Third_Party/FatFs/src/ff.c **** #define LD2PD(vol) (BYTE)(vol)	/* Each logical drive is bound to the same physical drive number */
 477:Middlewares/Third_Party/FatFs/src/ff.c **** #define LD2PT(vol) 0			/* Find first valid partition or in SFD */
 478:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 479:Middlewares/Third_Party/FatFs/src/ff.c **** 
 480:Middlewares/Third_Party/FatFs/src/ff.c **** 
 481:Middlewares/Third_Party/FatFs/src/ff.c **** /* Definitions of sector size */
 482:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_MAX_SS < _MIN_SS) || (_MAX_SS != 512 && _MAX_SS != 1024 && _MAX_SS != 2048 && _MAX_SS != 4096
 483:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong sector size configuration
 484:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 485:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS == _MIN_SS
 486:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SS(fs)	((UINT)_MAX_SS)	/* Fixed sector size */
 487:Middlewares/Third_Party/FatFs/src/ff.c **** #else
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 10


 488:Middlewares/Third_Party/FatFs/src/ff.c **** #define	SS(fs)	((fs)->ssize)	/* Variable sector size */
 489:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 490:Middlewares/Third_Party/FatFs/src/ff.c **** 
 491:Middlewares/Third_Party/FatFs/src/ff.c **** 
 492:Middlewares/Third_Party/FatFs/src/ff.c **** /* Timestamp */
 493:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_NORTC == 1
 494:Middlewares/Third_Party/FatFs/src/ff.c **** #if _NORTC_YEAR < 1980 || _NORTC_YEAR > 2107 || _NORTC_MON < 1 || _NORTC_MON > 12 || _NORTC_MDAY < 
 495:Middlewares/Third_Party/FatFs/src/ff.c **** #error Invalid _FS_NORTC settings
 496:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 497:Middlewares/Third_Party/FatFs/src/ff.c **** #define GET_FATTIME()	((DWORD)(_NORTC_YEAR - 1980) << 25 | (DWORD)_NORTC_MON << 21 | (DWORD)_NORTC_
 498:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 499:Middlewares/Third_Party/FatFs/src/ff.c **** #define GET_FATTIME()	get_fattime()
 500:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 501:Middlewares/Third_Party/FatFs/src/ff.c **** 
 502:Middlewares/Third_Party/FatFs/src/ff.c **** 
 503:Middlewares/Third_Party/FatFs/src/ff.c **** /* File lock controls */
 504:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 505:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_READONLY
 506:Middlewares/Third_Party/FatFs/src/ff.c **** #error _FS_LOCK must be 0 at read-only configuration
 507:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 508:Middlewares/Third_Party/FatFs/src/ff.c **** typedef struct {
 509:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;		/* Object ID 1, volume (NULL:blank entry) */
 510:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clu;		/* Object ID 2, containing directory (0:root) */
 511:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs;		/* Object ID 3, offset in the directory */
 512:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD ctr;		/* Object open counter, 0:none, 0x01..0xFF:read mode open count, 0x100:write mode */
 513:Middlewares/Third_Party/FatFs/src/ff.c **** } FILESEM;
 514:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 515:Middlewares/Third_Party/FatFs/src/ff.c **** 
 516:Middlewares/Third_Party/FatFs/src/ff.c **** 
 517:Middlewares/Third_Party/FatFs/src/ff.c **** 
 518:Middlewares/Third_Party/FatFs/src/ff.c **** 
 519:Middlewares/Third_Party/FatFs/src/ff.c **** 
 520:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
 521:Middlewares/Third_Party/FatFs/src/ff.c **** 
 522:Middlewares/Third_Party/FatFs/src/ff.c ****    Module Private Work Area
 523:Middlewares/Third_Party/FatFs/src/ff.c **** 
 524:Middlewares/Third_Party/FatFs/src/ff.c **** ---------------------------------------------------------------------------*/
 525:Middlewares/Third_Party/FatFs/src/ff.c **** 
 526:Middlewares/Third_Party/FatFs/src/ff.c **** /* Remark: Variables defined here without initial value shall be guaranteed
 527:Middlewares/Third_Party/FatFs/src/ff.c **** /  zero/null at start-up. If not, the linker option or start-up routine is
 528:Middlewares/Third_Party/FatFs/src/ff.c **** /  not compliance with C standard. */
 529:Middlewares/Third_Party/FatFs/src/ff.c **** 
 530:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES < 1 || _VOLUMES > 10
 531:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _VOLUMES setting
 532:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 533:Middlewares/Third_Party/FatFs/src/ff.c **** static FATFS *FatFs[_VOLUMES];	/* Pointer to the file system objects (logical drives) */
 534:Middlewares/Third_Party/FatFs/src/ff.c **** static WORD Fsid;				/* File system mount ID */
 535:Middlewares/Third_Party/FatFs/src/ff.c **** 
 536:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0 && _VOLUMES >= 2
 537:Middlewares/Third_Party/FatFs/src/ff.c **** static BYTE CurrVol;			/* Current drive */
 538:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 539:Middlewares/Third_Party/FatFs/src/ff.c **** 
 540:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 541:Middlewares/Third_Party/FatFs/src/ff.c **** static FILESEM Files[_FS_LOCK];	/* Open object lock semaphores */
 542:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 543:Middlewares/Third_Party/FatFs/src/ff.c **** 
 544:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 0		/* Non-LFN configuration */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 11


 545:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF
 546:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)
 547:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()
 548:Middlewares/Third_Party/FatFs/src/ff.c **** 
 549:Middlewares/Third_Party/FatFs/src/ff.c **** #else					/* LFN configuration */
 550:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_LFN < 12 || _MAX_LFN > 255
 551:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _MAX_LFN value
 552:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 553:Middlewares/Third_Party/FatFs/src/ff.c **** #define MAXDIRB(nc)	((nc + 44U) / 15 * SZDIRE)
 554:Middlewares/Third_Party/FatFs/src/ff.c **** 
 555:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1		/* LFN enabled with static working buffer */
 556:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 557:Middlewares/Third_Party/FatFs/src/ff.c **** static BYTE	DirBuf[MAXDIRB(_MAX_LFN)];	/* Directory entry block scratchpad buffer */
 558:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 559:Middlewares/Third_Party/FatFs/src/ff.c **** static WCHAR LfnBuf[_MAX_LFN + 1];	/* LFN enabled with static working buffer */
 560:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF
 561:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)
 562:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()
 563:Middlewares/Third_Party/FatFs/src/ff.c **** 
 564:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _USE_LFN == 2 	/* LFN enabled with dynamic working buffer on the stack */
 565:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 566:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF		WCHAR lbuf[_MAX_LFN+1]; BYTE dbuf[MAXDIRB(_MAX_LFN)];
 567:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)	{ (fs)->lfnbuf = lbuf; (fs)->dirbuf = dbuf; }
 568:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()
 569:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 570:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF		WCHAR lbuf[_MAX_LFN+1];
 571:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)	{ (fs)->lfnbuf = lbuf; }
 572:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()
 573:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 574:Middlewares/Third_Party/FatFs/src/ff.c **** 
 575:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _USE_LFN == 3 	/* LFN enabled with dynamic working buffer on the heap */
 576:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 577:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF		WCHAR *lfn;
 578:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)	{ lfn = ff_memalloc((_MAX_LFN+1)*2 + MAXDIRB(_MAX_LFN)); if (!lfn) LEAVE_FF
 579:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()	ff_memfree(lfn)
 580:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 581:Middlewares/Third_Party/FatFs/src/ff.c **** #define	DEF_NAMBUF		WCHAR *lfn;
 582:Middlewares/Third_Party/FatFs/src/ff.c **** #define INIT_NAMBUF(fs)	{ lfn = ff_memalloc((_MAX_LFN+1)*2); if (!lfn) LEAVE_FF(fs, FR_NOT_ENOUGH_C
 583:Middlewares/Third_Party/FatFs/src/ff.c **** #define	FREE_NAMBUF()	ff_memfree(lfn)
 584:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 585:Middlewares/Third_Party/FatFs/src/ff.c **** 
 586:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 587:Middlewares/Third_Party/FatFs/src/ff.c **** #error Wrong _USE_LFN setting
 588:Middlewares/Third_Party/FatFs/src/ff.c **** 
 589:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 590:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* else _USE_LFN == 0 */
 591:Middlewares/Third_Party/FatFs/src/ff.c **** 
 592:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
 593:Middlewares/Third_Party/FatFs/src/ff.c **** static const BYTE ExCvt[] = _EXCVT;	/* Upper conversion table for SBCS extended characters */
 594:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 595:Middlewares/Third_Party/FatFs/src/ff.c **** 
 596:Middlewares/Third_Party/FatFs/src/ff.c **** 
 597:Middlewares/Third_Party/FatFs/src/ff.c **** 
 598:Middlewares/Third_Party/FatFs/src/ff.c **** 
 599:Middlewares/Third_Party/FatFs/src/ff.c **** 
 600:Middlewares/Third_Party/FatFs/src/ff.c **** 
 601:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------------------------
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 12


 602:Middlewares/Third_Party/FatFs/src/ff.c **** 
 603:Middlewares/Third_Party/FatFs/src/ff.c ****    Module Private Functions
 604:Middlewares/Third_Party/FatFs/src/ff.c **** 
 605:Middlewares/Third_Party/FatFs/src/ff.c **** ---------------------------------------------------------------------------*/
 606:Middlewares/Third_Party/FatFs/src/ff.c **** 
 607:Middlewares/Third_Party/FatFs/src/ff.c **** 
 608:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 609:Middlewares/Third_Party/FatFs/src/ff.c **** /* Load/Store multi-byte word in the FAT structure                       */
 610:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 611:Middlewares/Third_Party/FatFs/src/ff.c **** 
 612:Middlewares/Third_Party/FatFs/src/ff.c **** static
 613:Middlewares/Third_Party/FatFs/src/ff.c **** WORD ld_word (const BYTE* ptr)	/*	 Load a 2-byte little-endian word */
 614:Middlewares/Third_Party/FatFs/src/ff.c **** {
  28              		.loc 1 614 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
 615:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD rv;
  33              		.loc 1 615 2 view .LVU1
 616:Middlewares/Third_Party/FatFs/src/ff.c **** 
 617:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = ptr[1];
  34              		.loc 1 617 2 view .LVU2
  35              		.loc 1 617 10 is_stmt 0 view .LVU3
  36 0000 4278     		ldrb	r2, [r0, #1]	@ zero_extendqisi2
  37              	.LVL1:
 618:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[0];
  38              		.loc 1 618 2 is_stmt 1 view .LVU4
  39              		.loc 1 618 20 is_stmt 0 view .LVU5
  40 0002 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
  41              	.LVL2:
 619:Middlewares/Third_Party/FatFs/src/ff.c **** 	return rv;
  42              		.loc 1 619 2 is_stmt 1 view .LVU6
 620:Middlewares/Third_Party/FatFs/src/ff.c **** }
  43              		.loc 1 620 1 is_stmt 0 view .LVU7
  44 0004 40EA0220 		orr	r0, r0, r2, lsl #8
  45              	.LVL3:
  46              		.loc 1 620 1 view .LVU8
  47 0008 7047     		bx	lr
  48              		.cfi_endproc
  49              	.LFE338:
  51              		.section	.text.ld_dword,"ax",%progbits
  52              		.align	1
  53              		.syntax unified
  54              		.thumb
  55              		.thumb_func
  57              	ld_dword:
  58              	.LVL4:
  59              	.LFB339:
 621:Middlewares/Third_Party/FatFs/src/ff.c **** 
 622:Middlewares/Third_Party/FatFs/src/ff.c **** static
 623:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD ld_dword (const BYTE* ptr)	/* Load a 4-byte little-endian word */
 624:Middlewares/Third_Party/FatFs/src/ff.c **** {
  60              		.loc 1 624 1 is_stmt 1 view -0
  61              		.cfi_startproc
  62              		@ args = 0, pretend = 0, frame = 0
  63              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 13


  64              		@ link register save eliminated.
 625:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD rv;
  65              		.loc 1 625 2 view .LVU10
 626:Middlewares/Third_Party/FatFs/src/ff.c **** 
 627:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = ptr[3];
  66              		.loc 1 627 2 view .LVU11
  67              		.loc 1 627 10 is_stmt 0 view .LVU12
  68 0000 C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
  69              	.LVL5:
 628:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[2];
  70              		.loc 1 628 2 is_stmt 1 view .LVU13
  71              		.loc 1 628 20 is_stmt 0 view .LVU14
  72 0002 8278     		ldrb	r2, [r0, #2]	@ zero_extendqisi2
  73              		.loc 1 628 5 view .LVU15
  74 0004 42EA0322 		orr	r2, r2, r3, lsl #8
  75              	.LVL6:
 629:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[1];
  76              		.loc 1 629 2 is_stmt 1 view .LVU16
  77              		.loc 1 629 20 is_stmt 0 view .LVU17
  78 0008 4378     		ldrb	r3, [r0, #1]	@ zero_extendqisi2
  79              		.loc 1 629 5 view .LVU18
  80 000a 43EA0223 		orr	r3, r3, r2, lsl #8
  81              	.LVL7:
 630:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[0];
  82              		.loc 1 630 2 is_stmt 1 view .LVU19
  83              		.loc 1 630 20 is_stmt 0 view .LVU20
  84 000e 0078     		ldrb	r0, [r0]	@ zero_extendqisi2
  85              	.LVL8:
 631:Middlewares/Third_Party/FatFs/src/ff.c **** 	return rv;
  86              		.loc 1 631 2 is_stmt 1 view .LVU21
 632:Middlewares/Third_Party/FatFs/src/ff.c **** }
  87              		.loc 1 632 1 is_stmt 0 view .LVU22
  88 0010 40EA0320 		orr	r0, r0, r3, lsl #8
  89              	.LVL9:
  90              		.loc 1 632 1 view .LVU23
  91 0014 7047     		bx	lr
  92              		.cfi_endproc
  93              	.LFE339:
  95              		.section	.text.st_word,"ax",%progbits
  96              		.align	1
  97              		.syntax unified
  98              		.thumb
  99              		.thumb_func
 101              	st_word:
 102              	.LVL10:
 103              	.LFB340:
 633:Middlewares/Third_Party/FatFs/src/ff.c **** 
 634:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 635:Middlewares/Third_Party/FatFs/src/ff.c **** static
 636:Middlewares/Third_Party/FatFs/src/ff.c **** QWORD ld_qword (const BYTE* ptr)	/* Load an 8-byte little-endian word */
 637:Middlewares/Third_Party/FatFs/src/ff.c **** {
 638:Middlewares/Third_Party/FatFs/src/ff.c **** 	QWORD rv;
 639:Middlewares/Third_Party/FatFs/src/ff.c **** 
 640:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = ptr[7];
 641:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[6];
 642:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[5];
 643:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[4];
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 14


 644:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[3];
 645:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[2];
 646:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[1];
 647:Middlewares/Third_Party/FatFs/src/ff.c **** 	rv = rv << 8 | ptr[0];
 648:Middlewares/Third_Party/FatFs/src/ff.c **** 	return rv;
 649:Middlewares/Third_Party/FatFs/src/ff.c **** }
 650:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 651:Middlewares/Third_Party/FatFs/src/ff.c **** 
 652:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 653:Middlewares/Third_Party/FatFs/src/ff.c **** static
 654:Middlewares/Third_Party/FatFs/src/ff.c **** void st_word (BYTE* ptr, WORD val)	/* Store a 2-byte word in little-endian */
 655:Middlewares/Third_Party/FatFs/src/ff.c **** {
 104              		.loc 1 655 1 is_stmt 1 view -0
 105              		.cfi_startproc
 106              		@ args = 0, pretend = 0, frame = 0
 107              		@ frame_needed = 0, uses_anonymous_args = 0
 108              		@ link register save eliminated.
 656:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 109              		.loc 1 656 2 view .LVU25
 110              		.loc 1 656 9 is_stmt 0 view .LVU26
 111 0000 0170     		strb	r1, [r0]
 112              		.loc 1 656 22 is_stmt 1 view .LVU27
 113              	.LVL11:
 657:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val;
 114              		.loc 1 657 2 view .LVU28
 115              		.loc 1 657 11 is_stmt 0 view .LVU29
 116 0002 090A     		lsrs	r1, r1, #8
 117              		.loc 1 657 9 view .LVU30
 118 0004 4170     		strb	r1, [r0, #1]
 658:Middlewares/Third_Party/FatFs/src/ff.c **** }
 119              		.loc 1 658 1 view .LVU31
 120 0006 7047     		bx	lr
 121              		.cfi_endproc
 122              	.LFE340:
 124              		.section	.text.st_dword,"ax",%progbits
 125              		.align	1
 126              		.syntax unified
 127              		.thumb
 128              		.thumb_func
 130              	st_dword:
 131              	.LVL12:
 132              	.LFB341:
 659:Middlewares/Third_Party/FatFs/src/ff.c **** 
 660:Middlewares/Third_Party/FatFs/src/ff.c **** static
 661:Middlewares/Third_Party/FatFs/src/ff.c **** void st_dword (BYTE* ptr, DWORD val)	/* Store a 4-byte word in little-endian */
 662:Middlewares/Third_Party/FatFs/src/ff.c **** {
 133              		.loc 1 662 1 is_stmt 1 view -0
 134              		.cfi_startproc
 135              		@ args = 0, pretend = 0, frame = 0
 136              		@ frame_needed = 0, uses_anonymous_args = 0
 137              		@ link register save eliminated.
 663:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 138              		.loc 1 663 2 view .LVU33
 139              		.loc 1 663 9 is_stmt 0 view .LVU34
 140 0000 0170     		strb	r1, [r0]
 141              		.loc 1 663 22 is_stmt 1 view .LVU35
 142              	.LVL13:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 15


 664:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 143              		.loc 1 664 2 view .LVU36
 144              		.loc 1 664 11 is_stmt 0 view .LVU37
 145 0002 C1F30723 		ubfx	r3, r1, #8, #8
 146              		.loc 1 664 9 view .LVU38
 147 0006 4370     		strb	r3, [r0, #1]
 148              		.loc 1 664 22 is_stmt 1 view .LVU39
 149              	.LVL14:
 665:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 150              		.loc 1 665 2 view .LVU40
 151              		.loc 1 665 11 is_stmt 0 view .LVU41
 152 0008 C1F30743 		ubfx	r3, r1, #16, #8
 153              		.loc 1 665 9 view .LVU42
 154 000c 8370     		strb	r3, [r0, #2]
 155              		.loc 1 665 22 is_stmt 1 view .LVU43
 156              	.LVL15:
 666:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val;
 157              		.loc 1 666 2 view .LVU44
 158              		.loc 1 666 11 is_stmt 0 view .LVU45
 159 000e 090E     		lsrs	r1, r1, #24
 160              	.LVL16:
 161              		.loc 1 666 9 view .LVU46
 162 0010 C170     		strb	r1, [r0, #3]
 667:Middlewares/Third_Party/FatFs/src/ff.c **** }
 163              		.loc 1 667 1 view .LVU47
 164 0012 7047     		bx	lr
 165              		.cfi_endproc
 166              	.LFE341:
 168              		.section	.text.mem_cpy,"ax",%progbits
 169              		.align	1
 170              		.syntax unified
 171              		.thumb
 172              		.thumb_func
 174              	mem_cpy:
 175              	.LVL17:
 176              	.LFB342:
 668:Middlewares/Third_Party/FatFs/src/ff.c **** 
 669:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 670:Middlewares/Third_Party/FatFs/src/ff.c **** static
 671:Middlewares/Third_Party/FatFs/src/ff.c **** void st_qword (BYTE* ptr, QWORD val)	/* Store an 8-byte word in little-endian */
 672:Middlewares/Third_Party/FatFs/src/ff.c **** {
 673:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 674:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 675:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 676:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 677:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 678:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 679:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val; val >>= 8;
 680:Middlewares/Third_Party/FatFs/src/ff.c **** 	*ptr++ = (BYTE)val;
 681:Middlewares/Third_Party/FatFs/src/ff.c **** }
 682:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 683:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
 684:Middlewares/Third_Party/FatFs/src/ff.c **** 
 685:Middlewares/Third_Party/FatFs/src/ff.c **** 
 686:Middlewares/Third_Party/FatFs/src/ff.c **** 
 687:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 688:Middlewares/Third_Party/FatFs/src/ff.c **** /* String functions                                                      */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 16


 689:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 690:Middlewares/Third_Party/FatFs/src/ff.c **** 
 691:Middlewares/Third_Party/FatFs/src/ff.c **** /* Copy memory to memory */
 692:Middlewares/Third_Party/FatFs/src/ff.c **** static
 693:Middlewares/Third_Party/FatFs/src/ff.c **** void mem_cpy (void* dst, const void* src, UINT cnt) {
 177              		.loc 1 693 53 is_stmt 1 view -0
 178              		.cfi_startproc
 179              		@ args = 0, pretend = 0, frame = 0
 180              		@ frame_needed = 0, uses_anonymous_args = 0
 181              		@ link register save eliminated.
 694:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *d = (BYTE*)dst;
 182              		.loc 1 694 2 view .LVU49
 695:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *s = (const BYTE*)src;
 183              		.loc 1 695 2 view .LVU50
 696:Middlewares/Third_Party/FatFs/src/ff.c **** 
 697:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (cnt) {
 184              		.loc 1 697 2 view .LVU51
 185              		.loc 1 697 5 is_stmt 0 view .LVU52
 186 0000 9446     		mov	ip, r2
 187 0002 32B1     		cbz	r2, .L5
 188              	.LVL18:
 189              	.L7:
 698:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 190              		.loc 1 698 3 is_stmt 1 view .LVU53
 699:Middlewares/Third_Party/FatFs/src/ff.c **** 			*d++ = *s++;
 191              		.loc 1 699 4 view .LVU54
 192              		.loc 1 699 11 is_stmt 0 view .LVU55
 193 0004 0A78     		ldrb	r2, [r1]	@ zero_extendqisi2
 194 0006 0131     		adds	r1, r1, #1
 195              	.LVL19:
 196              		.loc 1 699 9 view .LVU56
 197 0008 0270     		strb	r2, [r0]
 198 000a 0130     		adds	r0, r0, #1
 199              	.LVL20:
 700:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (--cnt);
 200              		.loc 1 700 12 is_stmt 1 discriminator 1 view .LVU57
 201              		.loc 1 700 12 is_stmt 0 discriminator 1 view .LVU58
 202 000c BCF1010C 		subs	ip, ip, #1
 203              	.LVL21:
 204              		.loc 1 700 12 discriminator 1 view .LVU59
 205 0010 F8D1     		bne	.L7
 206              	.LVL22:
 207              	.L5:
 701:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 702:Middlewares/Third_Party/FatFs/src/ff.c **** }
 208              		.loc 1 702 1 view .LVU60
 209 0012 7047     		bx	lr
 210              		.cfi_endproc
 211              	.LFE342:
 213              		.section	.text.mem_set,"ax",%progbits
 214              		.align	1
 215              		.syntax unified
 216              		.thumb
 217              		.thumb_func
 219              	mem_set:
 220              	.LFB343:
 703:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 17


 704:Middlewares/Third_Party/FatFs/src/ff.c **** /* Fill memory block */
 705:Middlewares/Third_Party/FatFs/src/ff.c **** static
 706:Middlewares/Third_Party/FatFs/src/ff.c **** void mem_set (void* dst, int val, UINT cnt) {
 221              		.loc 1 706 45 is_stmt 1 view -0
 222              		.cfi_startproc
 223              		@ args = 0, pretend = 0, frame = 0
 224              		@ frame_needed = 0, uses_anonymous_args = 0
 225              		@ link register save eliminated.
 226              	.LVL23:
 227              	.L9:
 707:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *d = (BYTE*)dst;
 708:Middlewares/Third_Party/FatFs/src/ff.c **** 
 709:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
 228              		.loc 1 709 2 view .LVU62
 710:Middlewares/Third_Party/FatFs/src/ff.c **** 		*d++ = (BYTE)val;
 229              		.loc 1 710 3 view .LVU63
 230              		.loc 1 710 8 is_stmt 0 view .LVU64
 231 0000 0170     		strb	r1, [r0]
 232 0002 0130     		adds	r0, r0, #1
 711:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (--cnt);
 233              		.loc 1 711 11 is_stmt 1 discriminator 1 view .LVU65
 234              	.LVL24:
 235              		.loc 1 711 11 is_stmt 0 discriminator 1 view .LVU66
 236 0004 013A     		subs	r2, r2, #1
 237              	.LVL25:
 238              		.loc 1 711 11 discriminator 1 view .LVU67
 239 0006 FBD1     		bne	.L9
 712:Middlewares/Third_Party/FatFs/src/ff.c **** }
 240              		.loc 1 712 1 view .LVU68
 241 0008 7047     		bx	lr
 242              		.cfi_endproc
 243              	.LFE343:
 245              		.section	.text.mem_cmp,"ax",%progbits
 246              		.align	1
 247              		.syntax unified
 248              		.thumb
 249              		.thumb_func
 251              	mem_cmp:
 252              	.LVL26:
 253              	.LFB344:
 713:Middlewares/Third_Party/FatFs/src/ff.c **** 
 714:Middlewares/Third_Party/FatFs/src/ff.c **** /* Compare memory block */
 715:Middlewares/Third_Party/FatFs/src/ff.c **** static
 716:Middlewares/Third_Party/FatFs/src/ff.c **** int mem_cmp (const void* dst, const void* src, UINT cnt) {	/* ZR:same, NZ:different */
 254              		.loc 1 716 58 is_stmt 1 view -0
 255              		.cfi_startproc
 256              		@ args = 0, pretend = 0, frame = 0
 257              		@ frame_needed = 0, uses_anonymous_args = 0
 258              		@ link register save eliminated.
 259              		.loc 1 716 58 is_stmt 0 view .LVU70
 260 0000 8446     		mov	ip, r0
 717:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *d = (const BYTE *)dst, *s = (const BYTE *)src;
 261              		.loc 1 717 2 is_stmt 1 view .LVU71
 262              	.LVL27:
 718:Middlewares/Third_Party/FatFs/src/ff.c **** 	int r = 0;
 263              		.loc 1 718 2 view .LVU72
 264              	.L12:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 18


 719:Middlewares/Third_Party/FatFs/src/ff.c **** 
 720:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
 265              		.loc 1 720 2 view .LVU73
 721:Middlewares/Third_Party/FatFs/src/ff.c **** 		r = *d++ - *s++;
 266              		.loc 1 721 3 view .LVU74
 267              		.loc 1 721 7 is_stmt 0 view .LVU75
 268 0002 9CF80000 		ldrb	r0, [ip]	@ zero_extendqisi2
 269 0006 0CF1010C 		add	ip, ip, #1
 270              	.LVL28:
 271              		.loc 1 721 14 view .LVU76
 272 000a 0B78     		ldrb	r3, [r1]	@ zero_extendqisi2
 273 000c 0131     		adds	r1, r1, #1
 274              	.LVL29:
 275              		.loc 1 721 5 view .LVU77
 276 000e C01A     		subs	r0, r0, r3
 277              	.LVL30:
 722:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (--cnt && r == 0);
 278              		.loc 1 722 17 is_stmt 1 discriminator 2 view .LVU78
 279              		.loc 1 722 17 is_stmt 0 discriminator 2 view .LVU79
 280 0010 013A     		subs	r2, r2, #1
 281              	.LVL31:
 282              		.loc 1 722 17 discriminator 2 view .LVU80
 283 0012 01D0     		beq	.L10
 284              		.loc 1 722 17 discriminator 1 view .LVU81
 285 0014 0028     		cmp	r0, #0
 286 0016 F4D0     		beq	.L12
 287              	.L10:
 723:Middlewares/Third_Party/FatFs/src/ff.c **** 
 724:Middlewares/Third_Party/FatFs/src/ff.c **** 	return r;
 725:Middlewares/Third_Party/FatFs/src/ff.c **** }
 288              		.loc 1 725 1 view .LVU82
 289 0018 7047     		bx	lr
 290              		.cfi_endproc
 291              	.LFE344:
 293              		.section	.text.chk_chr,"ax",%progbits
 294              		.align	1
 295              		.syntax unified
 296              		.thumb
 297              		.thumb_func
 299              	chk_chr:
 300              	.LVL32:
 301              	.LFB345:
 726:Middlewares/Third_Party/FatFs/src/ff.c **** 
 727:Middlewares/Third_Party/FatFs/src/ff.c **** /* Check if chr is contained in the string */
 728:Middlewares/Third_Party/FatFs/src/ff.c **** static
 729:Middlewares/Third_Party/FatFs/src/ff.c **** int chk_chr (const char* str, int chr) {	/* NZ:contained, ZR:not contained */
 302              		.loc 1 729 40 is_stmt 1 view -0
 303              		.cfi_startproc
 304              		@ args = 0, pretend = 0, frame = 0
 305              		@ frame_needed = 0, uses_anonymous_args = 0
 306              		@ link register save eliminated.
 307              		.loc 1 729 40 is_stmt 0 view .LVU84
 308 0000 0346     		mov	r3, r0
 730:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (*str && *str != chr) str++;
 309              		.loc 1 730 2 is_stmt 1 view .LVU85
 310              		.loc 1 730 8 is_stmt 0 view .LVU86
 311 0002 00E0     		b	.L14
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 19


 312              	.LVL33:
 313              	.L16:
 314              		.loc 1 730 30 is_stmt 1 discriminator 3 view .LVU87
 315              		.loc 1 730 33 is_stmt 0 discriminator 3 view .LVU88
 316 0004 0133     		adds	r3, r3, #1
 317              	.LVL34:
 318              	.L14:
 319              		.loc 1 730 14 is_stmt 1 discriminator 1 view .LVU89
 320              		.loc 1 730 9 is_stmt 0 discriminator 1 view .LVU90
 321 0006 1878     		ldrb	r0, [r3]	@ zero_extendqisi2
 322              		.loc 1 730 14 discriminator 1 view .LVU91
 323 0008 08B1     		cbz	r0, .L15
 324              		.loc 1 730 14 discriminator 2 view .LVU92
 325 000a 8842     		cmp	r0, r1
 326 000c FAD1     		bne	.L16
 327              	.L15:
 731:Middlewares/Third_Party/FatFs/src/ff.c **** 	return *str;
 328              		.loc 1 731 2 is_stmt 1 view .LVU93
 732:Middlewares/Third_Party/FatFs/src/ff.c **** }
 329              		.loc 1 732 1 is_stmt 0 view .LVU94
 330 000e 7047     		bx	lr
 331              		.cfi_endproc
 332              	.LFE345:
 334              		.section	.text.chk_lock,"ax",%progbits
 335              		.align	1
 336              		.syntax unified
 337              		.thumb
 338              		.thumb_func
 340              	chk_lock:
 341              	.LVL35:
 342              	.LFB348:
 733:Middlewares/Third_Party/FatFs/src/ff.c **** 
 734:Middlewares/Third_Party/FatFs/src/ff.c **** 
 735:Middlewares/Third_Party/FatFs/src/ff.c **** 
 736:Middlewares/Third_Party/FatFs/src/ff.c **** 
 737:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 738:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 739:Middlewares/Third_Party/FatFs/src/ff.c **** /* Request/Release grant to access the volume                            */
 740:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 741:Middlewares/Third_Party/FatFs/src/ff.c **** static
 742:Middlewares/Third_Party/FatFs/src/ff.c **** int lock_fs (
 743:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs		/* File system object */
 744:Middlewares/Third_Party/FatFs/src/ff.c **** )
 745:Middlewares/Third_Party/FatFs/src/ff.c **** {
 746:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (fs && ff_req_grant(fs->sobj)) ? 1 : 0;
 747:Middlewares/Third_Party/FatFs/src/ff.c **** }
 748:Middlewares/Third_Party/FatFs/src/ff.c **** 
 749:Middlewares/Third_Party/FatFs/src/ff.c **** 
 750:Middlewares/Third_Party/FatFs/src/ff.c **** static
 751:Middlewares/Third_Party/FatFs/src/ff.c **** void unlock_fs (
 752:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* File system object */
 753:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res		/* Result code to be returned */
 754:Middlewares/Third_Party/FatFs/src/ff.c **** )
 755:Middlewares/Third_Party/FatFs/src/ff.c **** {
 756:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs && res != FR_NOT_ENABLED && res != FR_INVALID_DRIVE && res != FR_TIMEOUT) {
 757:Middlewares/Third_Party/FatFs/src/ff.c **** 		ff_rel_grant(fs->sobj);
 758:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 20


 759:Middlewares/Third_Party/FatFs/src/ff.c **** }
 760:Middlewares/Third_Party/FatFs/src/ff.c **** 
 761:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 762:Middlewares/Third_Party/FatFs/src/ff.c **** 
 763:Middlewares/Third_Party/FatFs/src/ff.c **** 
 764:Middlewares/Third_Party/FatFs/src/ff.c **** 
 765:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 766:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 767:Middlewares/Third_Party/FatFs/src/ff.c **** /* File lock control functions                                           */
 768:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 769:Middlewares/Third_Party/FatFs/src/ff.c **** 
 770:Middlewares/Third_Party/FatFs/src/ff.c **** static
 771:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT chk_lock (	/* Check if the file can be accessed */
 772:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Directory object pointing the file to be checked */
 773:Middlewares/Third_Party/FatFs/src/ff.c **** 	int acc			/* Desired access type (0:Read, 1:Write, 2:Delete/Rename) */
 774:Middlewares/Third_Party/FatFs/src/ff.c **** )
 775:Middlewares/Third_Party/FatFs/src/ff.c **** {
 343              		.loc 1 775 1 is_stmt 1 view -0
 344              		.cfi_startproc
 345              		@ args = 0, pretend = 0, frame = 0
 346              		@ frame_needed = 0, uses_anonymous_args = 0
 347              		@ link register save eliminated.
 348              		.loc 1 775 1 is_stmt 0 view .LVU96
 349 0000 10B4     		push	{r4}
 350              	.LCFI0:
 351              		.cfi_def_cfa_offset 4
 352              		.cfi_offset 4, -4
 776:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, be;
 353              		.loc 1 776 2 is_stmt 1 view .LVU97
 777:Middlewares/Third_Party/FatFs/src/ff.c **** 
 778:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Search file semaphore table */
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = be = 0; i < _FS_LOCK; i++) {
 354              		.loc 1 779 2 view .LVU98
 355              	.LVL36:
 356              		.loc 1 779 14 is_stmt 0 view .LVU99
 357 0002 4FF0000C 		mov	ip, #0
 358              		.loc 1 779 9 view .LVU100
 359 0006 6346     		mov	r3, ip
 360              		.loc 1 779 2 view .LVU101
 361 0008 02E0     		b	.L18
 362              	.LVL37:
 363              	.L25:
 780:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (Files[i].fs == dp->obj.fs &&	 	/* Check if the object matched with an open object */
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->obj.sclust &&
 783:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].ofs == dp->dptr) break;
 784:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {			/* Blank entry */
 785:Middlewares/Third_Party/FatFs/src/ff.c **** 			be = 1;
 364              		.loc 1 785 7 view .LVU102
 365 000a 4FF0010C 		mov	ip, #1
 366              	.LVL38:
 367              	.L19:
 779:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 368              		.loc 1 779 34 is_stmt 1 discriminator 2 view .LVU103
 369 000e 0133     		adds	r3, r3, #1
 370              	.LVL39:
 371              	.L18:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 21


 779:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 372              		.loc 1 779 21 discriminator 1 view .LVU104
 373 0010 012B     		cmp	r3, #1
 374 0012 15D8     		bhi	.L20
 780:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 375              		.loc 1 780 3 view .LVU105
 780:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 376              		.loc 1 780 15 is_stmt 0 view .LVU106
 377 0014 1A01     		lsls	r2, r3, #4
 378 0016 184C     		ldr	r4, .L32
 379 0018 A258     		ldr	r2, [r4, r2]
 780:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs) {	/* Existing entry */
 380              		.loc 1 780 6 view .LVU107
 381 001a 002A     		cmp	r2, #0
 382 001c F5D0     		beq	.L25
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->obj.sclust &&
 383              		.loc 1 781 4 is_stmt 1 view .LVU108
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->obj.sclust &&
 384              		.loc 1 781 30 is_stmt 0 view .LVU109
 385 001e 0468     		ldr	r4, [r0]
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->obj.sclust &&
 386              		.loc 1 781 7 view .LVU110
 387 0020 A242     		cmp	r2, r4
 388 0022 F4D1     		bne	.L19
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].ofs == dp->dptr) break;
 389              		.loc 1 782 13 view .LVU111
 390 0024 144A     		ldr	r2, .L32
 391 0026 02EB0312 		add	r2, r2, r3, lsl #4
 392 002a 5468     		ldr	r4, [r2, #4]
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].ofs == dp->dptr) break;
 393              		.loc 1 782 28 view .LVU112
 394 002c 8268     		ldr	r2, [r0, #8]
 781:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].clu == dp->obj.sclust &&
 395              		.loc 1 781 34 discriminator 1 view .LVU113
 396 002e 9442     		cmp	r4, r2
 397 0030 EDD1     		bne	.L19
 783:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {			/* Blank entry */
 398              		.loc 1 783 13 view .LVU114
 399 0032 114A     		ldr	r2, .L32
 400 0034 02EB0312 		add	r2, r2, r3, lsl #4
 401 0038 9468     		ldr	r4, [r2, #8]
 783:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {			/* Blank entry */
 402              		.loc 1 783 23 view .LVU115
 403 003a 4269     		ldr	r2, [r0, #20]
 782:Middlewares/Third_Party/FatFs/src/ff.c **** 				Files[i].ofs == dp->dptr) break;
 404              		.loc 1 782 36 view .LVU116
 405 003c 9442     		cmp	r4, r2
 406 003e E6D1     		bne	.L19
 407              	.L20:
 786:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 787:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 788:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i == _FS_LOCK) {	/* The object is not opened */
 408              		.loc 1 788 2 is_stmt 1 view .LVU117
 409              		.loc 1 788 5 is_stmt 0 view .LVU118
 410 0040 022B     		cmp	r3, #2
 411 0042 0BD0     		beq	.L30
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 22


 790:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 791:Middlewares/Third_Party/FatFs/src/ff.c **** 
 792:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* The object has been opened. Reject any open against writing file and all write mode open */
 793:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (acc || Files[i].ctr == 0x100) ? FR_LOCKED : FR_OK;
 412              		.loc 1 793 2 is_stmt 1 view .LVU119
 413              		.loc 1 793 52 is_stmt 0 view .LVU120
 414 0044 B1B9     		cbnz	r1, .L27
 415              		.loc 1 793 25 discriminator 2 view .LVU121
 416 0046 0C4A     		ldr	r2, .L32
 417 0048 02EB0313 		add	r3, r2, r3, lsl #4
 418              	.LVL40:
 419              		.loc 1 793 25 discriminator 2 view .LVU122
 420 004c 9B89     		ldrh	r3, [r3, #12]
 421              		.loc 1 793 14 discriminator 2 view .LVU123
 422 004e B3F5807F 		cmp	r3, #256
 423 0052 0DD0     		beq	.L31
 424              		.loc 1 793 52 discriminator 4 view .LVU124
 425 0054 0020     		movs	r0, #0
 426              	.LVL41:
 427              	.L24:
 794:Middlewares/Third_Party/FatFs/src/ff.c **** }
 428              		.loc 1 794 1 view .LVU125
 429 0056 5DF8044B 		ldr	r4, [sp], #4
 430              	.LCFI1:
 431              		.cfi_remember_state
 432              		.cfi_restore 4
 433              		.cfi_def_cfa_offset 0
 434 005a 7047     		bx	lr
 435              	.LVL42:
 436              	.L30:
 437              	.LCFI2:
 438              		.cfi_restore_state
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 439              		.loc 1 789 3 is_stmt 1 view .LVU126
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 440              		.loc 1 789 14 is_stmt 0 view .LVU127
 441 005c 0229     		cmp	r1, #2
 442 005e 14BF     		ite	ne
 443 0060 6346     		movne	r3, ip
 444 0062 4CF00103 		orreq	r3, ip, #1
 445              	.LVL43:
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 446              		.loc 1 789 35 view .LVU128
 447 0066 0BB1     		cbz	r3, .L26
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 448              		.loc 1 789 35 discriminator 1 view .LVU129
 449 0068 0020     		movs	r0, #0
 450              	.LVL44:
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 451              		.loc 1 789 35 discriminator 1 view .LVU130
 452 006a F4E7     		b	.L24
 453              	.LVL45:
 454              	.L26:
 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 455              		.loc 1 789 35 discriminator 2 view .LVU131
 456 006c 1220     		movs	r0, #18
 457              	.LVL46:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 23


 789:Middlewares/Third_Party/FatFs/src/ff.c **** 		return (be || acc == 2) ? FR_OK : FR_TOO_MANY_OPEN_FILES;	/* Is there a blank entry for new objec
 458              		.loc 1 789 35 view .LVU132
 459 006e F2E7     		b	.L24
 460              	.LVL47:
 461              	.L31:
 793:Middlewares/Third_Party/FatFs/src/ff.c **** }
 462              		.loc 1 793 52 discriminator 3 view .LVU133
 463 0070 1020     		movs	r0, #16
 464              	.LVL48:
 793:Middlewares/Third_Party/FatFs/src/ff.c **** }
 465              		.loc 1 793 52 discriminator 3 view .LVU134
 466 0072 F0E7     		b	.L24
 467              	.LVL49:
 468              	.L27:
 793:Middlewares/Third_Party/FatFs/src/ff.c **** }
 469              		.loc 1 793 52 discriminator 3 view .LVU135
 470 0074 1020     		movs	r0, #16
 471              	.LVL50:
 793:Middlewares/Third_Party/FatFs/src/ff.c **** }
 472              		.loc 1 793 52 discriminator 3 view .LVU136
 473 0076 EEE7     		b	.L24
 474              	.L33:
 475              		.align	2
 476              	.L32:
 477 0078 00000000 		.word	Files
 478              		.cfi_endproc
 479              	.LFE348:
 481              		.section	.text.enq_lock,"ax",%progbits
 482              		.align	1
 483              		.syntax unified
 484              		.thumb
 485              		.thumb_func
 487              	enq_lock:
 488              	.LFB349:
 795:Middlewares/Third_Party/FatFs/src/ff.c **** 
 796:Middlewares/Third_Party/FatFs/src/ff.c **** 
 797:Middlewares/Third_Party/FatFs/src/ff.c **** static
 798:Middlewares/Third_Party/FatFs/src/ff.c **** int enq_lock (void)	/* Check if an entry is available for a new object */
 799:Middlewares/Third_Party/FatFs/src/ff.c **** {
 489              		.loc 1 799 1 is_stmt 1 view -0
 490              		.cfi_startproc
 491              		@ args = 0, pretend = 0, frame = 0
 492              		@ frame_needed = 0, uses_anonymous_args = 0
 493              		@ link register save eliminated.
 800:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 494              		.loc 1 800 2 view .LVU138
 801:Middlewares/Third_Party/FatFs/src/ff.c **** 
 802:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 495              		.loc 1 802 2 view .LVU139
 496              	.LVL51:
 497              		.loc 1 802 9 is_stmt 0 view .LVU140
 498 0000 0020     		movs	r0, #0
 499              		.loc 1 802 2 view .LVU141
 500 0002 00E0     		b	.L35
 501              	.LVL52:
 502              	.L37:
 503              		.loc 1 802 44 is_stmt 1 discriminator 4 view .LVU142
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 24


 504 0004 0130     		adds	r0, r0, #1
 505              	.LVL53:
 506              	.L35:
 507              		.loc 1 802 27 discriminator 1 view .LVU143
 508 0006 0128     		cmp	r0, #1
 509 0008 04D8     		bhi	.L36
 510              		.loc 1 802 38 is_stmt 0 discriminator 3 view .LVU144
 511 000a 0301     		lsls	r3, r0, #4
 512 000c 034A     		ldr	r2, .L38
 513 000e D358     		ldr	r3, [r2, r3]
 514              		.loc 1 802 27 discriminator 3 view .LVU145
 515 0010 002B     		cmp	r3, #0
 516 0012 F7D1     		bne	.L37
 517              	.L36:
 803:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (i == _FS_LOCK) ? 0 : 1;
 518              		.loc 1 803 2 is_stmt 1 view .LVU146
 804:Middlewares/Third_Party/FatFs/src/ff.c **** }
 519              		.loc 1 804 1 is_stmt 0 view .LVU147
 520 0014 0238     		subs	r0, r0, #2
 521              	.LVL54:
 522              		.loc 1 804 1 view .LVU148
 523 0016 18BF     		it	ne
 524 0018 0120     		movne	r0, #1
 525              	.LVL55:
 526              		.loc 1 804 1 view .LVU149
 527 001a 7047     		bx	lr
 528              	.L39:
 529              		.align	2
 530              	.L38:
 531 001c 00000000 		.word	Files
 532              		.cfi_endproc
 533              	.LFE349:
 535              		.section	.text.inc_lock,"ax",%progbits
 536              		.align	1
 537              		.syntax unified
 538              		.thumb
 539              		.thumb_func
 541              	inc_lock:
 542              	.LVL56:
 543              	.LFB350:
 805:Middlewares/Third_Party/FatFs/src/ff.c **** 
 806:Middlewares/Third_Party/FatFs/src/ff.c **** 
 807:Middlewares/Third_Party/FatFs/src/ff.c **** static
 808:Middlewares/Third_Party/FatFs/src/ff.c **** UINT inc_lock (	/* Increment object open counter and returns its index (0:Internal error) */
 809:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,	/* Directory object pointing the file to register or increment */
 810:Middlewares/Third_Party/FatFs/src/ff.c **** 	int acc		/* Desired access (0:Read, 1:Write, 2:Delete/Rename) */
 811:Middlewares/Third_Party/FatFs/src/ff.c **** )
 812:Middlewares/Third_Party/FatFs/src/ff.c **** {
 544              		.loc 1 812 1 is_stmt 1 view -0
 545              		.cfi_startproc
 546              		@ args = 0, pretend = 0, frame = 0
 547              		@ frame_needed = 0, uses_anonymous_args = 0
 548              		@ link register save eliminated.
 549              		.loc 1 812 1 is_stmt 0 view .LVU151
 550 0000 70B4     		push	{r4, r5, r6}
 551              	.LCFI3:
 552              		.cfi_def_cfa_offset 12
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 25


 553              		.cfi_offset 4, -12
 554              		.cfi_offset 5, -8
 555              		.cfi_offset 6, -4
 813:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 556              		.loc 1 813 2 is_stmt 1 view .LVU152
 814:Middlewares/Third_Party/FatFs/src/ff.c **** 
 815:Middlewares/Third_Party/FatFs/src/ff.c **** 
 816:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK; i++) {	/* Find the object */
 557              		.loc 1 816 2 view .LVU153
 558              	.LVL57:
 559              		.loc 1 816 9 is_stmt 0 view .LVU154
 560 0002 0023     		movs	r3, #0
 561              		.loc 1 816 2 view .LVU155
 562 0004 00E0     		b	.L41
 563              	.LVL58:
 564              	.L42:
 565              		.loc 1 816 29 is_stmt 1 discriminator 2 view .LVU156
 566 0006 0133     		adds	r3, r3, #1
 567              	.LVL59:
 568              	.L41:
 569              		.loc 1 816 16 discriminator 1 view .LVU157
 570 0008 012B     		cmp	r3, #1
 571 000a 13D8     		bhi	.L43
 817:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == dp->obj.fs &&
 572              		.loc 1 817 3 view .LVU158
 573              		.loc 1 817 15 is_stmt 0 view .LVU159
 574 000c 1A01     		lsls	r2, r3, #4
 575 000e 234C     		ldr	r4, .L57
 576 0010 A458     		ldr	r4, [r4, r2]
 577              		.loc 1 817 29 view .LVU160
 578 0012 0268     		ldr	r2, [r0]
 579              		.loc 1 817 6 view .LVU161
 580 0014 9442     		cmp	r4, r2
 581 0016 F6D1     		bne	.L42
 818:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].clu == dp->obj.sclust &&
 582              		.loc 1 818 12 view .LVU162
 583 0018 204A     		ldr	r2, .L57
 584 001a 02EB0312 		add	r2, r2, r3, lsl #4
 585 001e 5468     		ldr	r4, [r2, #4]
 586              		.loc 1 818 27 view .LVU163
 587 0020 8268     		ldr	r2, [r0, #8]
 817:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == dp->obj.fs &&
 588              		.loc 1 817 33 discriminator 1 view .LVU164
 589 0022 9442     		cmp	r4, r2
 590 0024 EFD1     		bne	.L42
 819:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].ofs == dp->dptr) break;
 591              		.loc 1 819 12 view .LVU165
 592 0026 1D4A     		ldr	r2, .L57
 593 0028 02EB0312 		add	r2, r2, r3, lsl #4
 594 002c 9468     		ldr	r4, [r2, #8]
 595              		.loc 1 819 22 view .LVU166
 596 002e 4269     		ldr	r2, [r0, #20]
 818:Middlewares/Third_Party/FatFs/src/ff.c **** 			Files[i].clu == dp->obj.sclust &&
 597              		.loc 1 818 35 view .LVU167
 598 0030 9442     		cmp	r4, r2
 599 0032 E8D1     		bne	.L42
 600              	.L43:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 26


 820:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 821:Middlewares/Third_Party/FatFs/src/ff.c **** 
 822:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i == _FS_LOCK) {				/* Not opened. Register it as new. */
 601              		.loc 1 822 2 is_stmt 1 view .LVU168
 602              		.loc 1 822 5 is_stmt 0 view .LVU169
 603 0034 022B     		cmp	r3, #2
 604 0036 08D0     		beq	.L56
 605              	.LVL60:
 606              	.L46:
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == _FS_LOCK) return 0;	/* No free entry to register (int err) */
 825:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->obj.fs;
 826:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].clu = dp->obj.sclust;
 827:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ofs = dp->dptr;
 828:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 829:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 830:Middlewares/Third_Party/FatFs/src/ff.c **** 
 831:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (acc && Files[i].ctr) return 0;	/* Access violation (int err) */
 607              		.loc 1 831 2 is_stmt 1 view .LVU170
 608              		.loc 1 831 5 is_stmt 0 view .LVU171
 609 0038 F9B1     		cbz	r1, .L50
 610              		.loc 1 831 21 discriminator 1 view .LVU172
 611 003a 184A     		ldr	r2, .L57
 612 003c 02EB0312 		add	r2, r2, r3, lsl #4
 613 0040 9289     		ldrh	r2, [r2, #12]
 614              		.loc 1 831 10 discriminator 1 view .LVU173
 615 0042 4ABB     		cbnz	r2, .L54
 832:Middlewares/Third_Party/FatFs/src/ff.c **** 
 833:Middlewares/Third_Party/FatFs/src/ff.c **** 	Files[i].ctr = acc ? 0x100 : Files[i].ctr + 1;	/* Set semaphore value */
 616              		.loc 1 833 15 discriminator 2 view .LVU174
 617 0044 4FF48072 		mov	r2, #256
 618 0048 1DE0     		b	.L51
 619              	.LVL61:
 620              	.L56:
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 621              		.loc 1 823 10 view .LVU175
 622 004a 0023     		movs	r3, #0
 623              	.LVL62:
 624              	.L45:
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 625              		.loc 1 823 28 is_stmt 1 discriminator 1 view .LVU176
 626 004c 012B     		cmp	r3, #1
 627 004e 05D8     		bhi	.L47
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 628              		.loc 1 823 39 is_stmt 0 discriminator 3 view .LVU177
 629 0050 1A01     		lsls	r2, r3, #4
 630 0052 124C     		ldr	r4, .L57
 631 0054 A258     		ldr	r2, [r4, r2]
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 632              		.loc 1 823 28 discriminator 3 view .LVU178
 633 0056 0AB1     		cbz	r2, .L47
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 634              		.loc 1 823 45 is_stmt 1 discriminator 4 view .LVU179
 635 0058 0133     		adds	r3, r3, #1
 636              	.LVL63:
 823:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < _FS_LOCK && Files[i].fs; i++) ;
 637              		.loc 1 823 45 is_stmt 0 discriminator 4 view .LVU180
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 27


 638 005a F7E7     		b	.L45
 639              	.L47:
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->obj.fs;
 640              		.loc 1 824 3 is_stmt 1 view .LVU181
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->obj.fs;
 641              		.loc 1 824 6 is_stmt 0 view .LVU182
 642 005c 022B     		cmp	r3, #2
 643 005e 19D0     		beq	.L53
 825:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].clu = dp->obj.sclust;
 644              		.loc 1 825 3 is_stmt 1 view .LVU183
 825:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].clu = dp->obj.sclust;
 645              		.loc 1 825 15 is_stmt 0 view .LVU184
 646 0060 0E4D     		ldr	r5, .L57
 647 0062 1C01     		lsls	r4, r3, #4
 648 0064 05EB0312 		add	r2, r5, r3, lsl #4
 649 0068 0668     		ldr	r6, [r0]
 650 006a 2E51     		str	r6, [r5, r4]
 826:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ofs = dp->dptr;
 651              		.loc 1 826 3 is_stmt 1 view .LVU185
 826:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ofs = dp->dptr;
 652              		.loc 1 826 25 is_stmt 0 view .LVU186
 653 006c 8468     		ldr	r4, [r0, #8]
 826:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ofs = dp->dptr;
 654              		.loc 1 826 16 view .LVU187
 655 006e 5460     		str	r4, [r2, #4]
 827:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 656              		.loc 1 827 3 is_stmt 1 view .LVU188
 827:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 657              		.loc 1 827 20 is_stmt 0 view .LVU189
 658 0070 4069     		ldr	r0, [r0, #20]
 659              	.LVL64:
 827:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = 0;
 660              		.loc 1 827 16 view .LVU190
 661 0072 9060     		str	r0, [r2, #8]
 828:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 662              		.loc 1 828 3 is_stmt 1 view .LVU191
 828:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 663              		.loc 1 828 16 is_stmt 0 view .LVU192
 664 0074 0020     		movs	r0, #0
 665 0076 9081     		strh	r0, [r2, #12]	@ movhi
 666 0078 DEE7     		b	.L46
 667              	.L50:
 668              		.loc 1 833 39 discriminator 1 view .LVU193
 669 007a 084A     		ldr	r2, .L57
 670 007c 02EB0312 		add	r2, r2, r3, lsl #4
 671 0080 9289     		ldrh	r2, [r2, #12]
 672              		.loc 1 833 15 discriminator 1 view .LVU194
 673 0082 0132     		adds	r2, r2, #1
 674 0084 92B2     		uxth	r2, r2
 675              	.L51:
 676              		.loc 1 833 15 discriminator 4 view .LVU195
 677 0086 0549     		ldr	r1, .L57
 678              	.LVL65:
 679              		.loc 1 833 15 discriminator 4 view .LVU196
 680 0088 01EB0311 		add	r1, r1, r3, lsl #4
 681 008c 8A81     		strh	r2, [r1, #12]	@ movhi
 834:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 28


 835:Middlewares/Third_Party/FatFs/src/ff.c **** 	return i + 1;
 682              		.loc 1 835 2 is_stmt 1 view .LVU197
 683              		.loc 1 835 11 is_stmt 0 view .LVU198
 684 008e 581C     		adds	r0, r3, #1
 685              	.L40:
 836:Middlewares/Third_Party/FatFs/src/ff.c **** }
 686              		.loc 1 836 1 view .LVU199
 687 0090 70BC     		pop	{r4, r5, r6}
 688              	.LCFI4:
 689              		.cfi_remember_state
 690              		.cfi_restore 6
 691              		.cfi_restore 5
 692              		.cfi_restore 4
 693              		.cfi_def_cfa_offset 0
 694 0092 7047     		bx	lr
 695              	.LVL66:
 696              	.L53:
 697              	.LCFI5:
 698              		.cfi_restore_state
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->obj.fs;
 699              		.loc 1 824 29 discriminator 1 view .LVU200
 700 0094 0020     		movs	r0, #0
 701              	.LVL67:
 824:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].fs = dp->obj.fs;
 702              		.loc 1 824 29 discriminator 1 view .LVU201
 703 0096 FBE7     		b	.L40
 704              	.L54:
 831:Middlewares/Third_Party/FatFs/src/ff.c **** 
 705              		.loc 1 831 34 discriminator 2 view .LVU202
 706 0098 0020     		movs	r0, #0
 707 009a F9E7     		b	.L40
 708              	.L58:
 709              		.align	2
 710              	.L57:
 711 009c 00000000 		.word	Files
 712              		.cfi_endproc
 713              	.LFE350:
 715              		.section	.text.dec_lock,"ax",%progbits
 716              		.align	1
 717              		.syntax unified
 718              		.thumb
 719              		.thumb_func
 721              	dec_lock:
 722              	.LVL68:
 723              	.LFB351:
 837:Middlewares/Third_Party/FatFs/src/ff.c **** 
 838:Middlewares/Third_Party/FatFs/src/ff.c **** 
 839:Middlewares/Third_Party/FatFs/src/ff.c **** static
 840:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dec_lock (	/* Decrement object open counter */
 841:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i			/* Semaphore index (1..) */
 842:Middlewares/Third_Party/FatFs/src/ff.c **** )
 843:Middlewares/Third_Party/FatFs/src/ff.c **** {
 724              		.loc 1 843 1 is_stmt 1 view -0
 725              		.cfi_startproc
 726              		@ args = 0, pretend = 0, frame = 0
 727              		@ frame_needed = 0, uses_anonymous_args = 0
 728              		@ link register save eliminated.
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 29


 844:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD n;
 729              		.loc 1 844 2 view .LVU204
 845:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 730              		.loc 1 845 2 view .LVU205
 846:Middlewares/Third_Party/FatFs/src/ff.c **** 
 847:Middlewares/Third_Party/FatFs/src/ff.c **** 
 848:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (--i < _FS_LOCK) {	/* Shift index number origin from 0 */
 731              		.loc 1 848 2 view .LVU206
 732              		.loc 1 848 5 is_stmt 0 view .LVU207
 733 0000 0138     		subs	r0, r0, #1
 734              	.LVL69:
 735              		.loc 1 848 5 view .LVU208
 736 0002 0128     		cmp	r0, #1
 737 0004 15D8     		bhi	.L63
 849:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = Files[i].ctr;
 738              		.loc 1 849 3 is_stmt 1 view .LVU209
 739              		.loc 1 849 5 is_stmt 0 view .LVU210
 740 0006 0D4B     		ldr	r3, .L66
 741 0008 03EB0013 		add	r3, r3, r0, lsl #4
 742 000c 9B89     		ldrh	r3, [r3, #12]
 743              	.LVL70:
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 0x100) n = 0;		/* If write mode open, delete the entry */
 744              		.loc 1 850 3 is_stmt 1 view .LVU211
 745              		.loc 1 850 6 is_stmt 0 view .LVU212
 746 000e B3F5807F 		cmp	r3, #256
 747 0012 03D0     		beq	.L64
 851:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n > 0) n--;				/* Decrement read mode open count */
 748              		.loc 1 851 3 is_stmt 1 view .LVU213
 749              		.loc 1 851 6 is_stmt 0 view .LVU214
 750 0014 43B1     		cbz	r3, .L62
 751              		.loc 1 851 14 is_stmt 1 discriminator 1 view .LVU215
 752              		.loc 1 851 15 is_stmt 0 discriminator 1 view .LVU216
 753 0016 013B     		subs	r3, r3, #1
 754              	.LVL71:
 755              		.loc 1 851 15 discriminator 1 view .LVU217
 756 0018 9BB2     		uxth	r3, r3
 757              	.LVL72:
 758              		.loc 1 851 15 discriminator 1 view .LVU218
 759 001a 00E0     		b	.L61
 760              	.L64:
 850:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 0x100) n = 0;		/* If write mode open, delete the entry */
 761              		.loc 1 850 21 discriminator 1 view .LVU219
 762 001c 0023     		movs	r3, #0
 763              	.LVL73:
 764              	.L61:
 852:Middlewares/Third_Party/FatFs/src/ff.c **** 		Files[i].ctr = n;
 765              		.loc 1 852 3 is_stmt 1 view .LVU220
 766              		.loc 1 852 16 is_stmt 0 view .LVU221
 767 001e 074A     		ldr	r2, .L66
 768 0020 02EB0012 		add	r2, r2, r0, lsl #4
 769 0024 9381     		strh	r3, [r2, #12]	@ movhi
 853:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 0) Files[i].fs = 0;	/* Delete the entry if open count gets zero */
 770              		.loc 1 853 3 is_stmt 1 view .LVU222
 771              		.loc 1 853 6 is_stmt 0 view .LVU223
 772 0026 33B9     		cbnz	r3, .L65
 773              	.L62:
 774              	.LVL74:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 30


 775              		.loc 1 853 15 is_stmt 1 discriminator 1 view .LVU224
 776              		.loc 1 853 27 is_stmt 0 discriminator 1 view .LVU225
 777 0028 0301     		lsls	r3, r0, #4
 778 002a 0020     		movs	r0, #0
 779              	.LVL75:
 780              		.loc 1 853 27 discriminator 1 view .LVU226
 781 002c 034A     		ldr	r2, .L66
 782 002e D050     		str	r0, [r2, r3]
 783 0030 7047     		bx	lr
 784              	.LVL76:
 785              	.L63:
 854:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 855:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 856:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_INT_ERR;			/* Invalid index nunber */
 786              		.loc 1 856 7 view .LVU227
 787 0032 0220     		movs	r0, #2
 788              	.LVL77:
 789              		.loc 1 856 7 view .LVU228
 790 0034 7047     		bx	lr
 791              	.LVL78:
 792              	.L65:
 854:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = FR_OK;
 793              		.loc 1 854 7 view .LVU229
 794 0036 0020     		movs	r0, #0
 795              	.LVL79:
 857:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 858:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 796              		.loc 1 858 2 is_stmt 1 view .LVU230
 859:Middlewares/Third_Party/FatFs/src/ff.c **** }
 797              		.loc 1 859 1 is_stmt 0 view .LVU231
 798 0038 7047     		bx	lr
 799              	.L67:
 800 003a 00BF     		.align	2
 801              	.L66:
 802 003c 00000000 		.word	Files
 803              		.cfi_endproc
 804              	.LFE351:
 806              		.section	.text.clear_lock,"ax",%progbits
 807              		.align	1
 808              		.syntax unified
 809              		.thumb
 810              		.thumb_func
 812              	clear_lock:
 813              	.LVL80:
 814              	.LFB352:
 860:Middlewares/Third_Party/FatFs/src/ff.c **** 
 861:Middlewares/Third_Party/FatFs/src/ff.c **** 
 862:Middlewares/Third_Party/FatFs/src/ff.c **** static
 863:Middlewares/Third_Party/FatFs/src/ff.c **** void clear_lock (	/* Clear lock entries of the volume */
 864:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs
 865:Middlewares/Third_Party/FatFs/src/ff.c **** )
 866:Middlewares/Third_Party/FatFs/src/ff.c **** {
 815              		.loc 1 866 1 is_stmt 1 view -0
 816              		.cfi_startproc
 817              		@ args = 0, pretend = 0, frame = 0
 818              		@ frame_needed = 0, uses_anonymous_args = 0
 819              		@ link register save eliminated.
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 31


 867:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 820              		.loc 1 867 2 view .LVU233
 868:Middlewares/Third_Party/FatFs/src/ff.c **** 
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < _FS_LOCK; i++) {
 821              		.loc 1 869 2 view .LVU234
 822              		.loc 1 869 9 is_stmt 0 view .LVU235
 823 0000 0023     		movs	r3, #0
 824              		.loc 1 869 2 view .LVU236
 825 0002 03E0     		b	.L73
 826              	.LVL81:
 827              	.L80:
 828              	.LCFI6:
 829              		.cfi_def_cfa_offset 4
 830              		.cfi_offset 4, -4
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 871:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 872:Middlewares/Third_Party/FatFs/src/ff.c **** }
 831              		.loc 1 872 1 view .LVU237
 832 0004 5DF8044B 		ldr	r4, [sp], #4
 833              	.LCFI7:
 834              		.cfi_restore 4
 835              		.cfi_def_cfa_offset 0
 836 0008 7047     		bx	lr
 837              	.L79:
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 838              		.loc 1 869 29 is_stmt 1 discriminator 2 view .LVU238
 839 000a 0133     		adds	r3, r3, #1
 840              	.LVL82:
 841              	.L73:
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 842              		.loc 1 869 16 discriminator 1 view .LVU239
 843 000c 012B     		cmp	r3, #1
 844 000e 11D8     		bhi	.L78
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 845              		.loc 1 870 3 view .LVU240
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 846              		.loc 1 870 15 is_stmt 0 view .LVU241
 847 0010 1A01     		lsls	r2, r3, #4
 848 0012 0949     		ldr	r1, .L81
 849 0014 8A58     		ldr	r2, [r1, r2]
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 850              		.loc 1 870 6 view .LVU242
 851 0016 8242     		cmp	r2, r0
 852 0018 F7D1     		bne	.L79
 866:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 853              		.loc 1 866 1 view .LVU243
 854 001a 10B4     		push	{r4}
 855              	.LCFI8:
 856              		.cfi_def_cfa_offset 4
 857              		.cfi_offset 4, -4
 858              	.L74:
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 859              		.loc 1 870 26 is_stmt 1 discriminator 1 view .LVU244
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 860              		.loc 1 870 38 is_stmt 0 discriminator 1 view .LVU245
 861 001c 1A01     		lsls	r2, r3, #4
 862 001e 0024     		movs	r4, #0
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 32


 863 0020 8C50     		str	r4, [r1, r2]
 864              	.L70:
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 865              		.loc 1 869 29 is_stmt 1 discriminator 2 view .LVU246
 866 0022 0133     		adds	r3, r3, #1
 867              	.LVL83:
 869:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 868              		.loc 1 869 16 discriminator 1 view .LVU247
 869 0024 012B     		cmp	r3, #1
 870 0026 EDD8     		bhi	.L80
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 871              		.loc 1 870 3 view .LVU248
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 872              		.loc 1 870 15 is_stmt 0 view .LVU249
 873 0028 1A01     		lsls	r2, r3, #4
 874 002a 0349     		ldr	r1, .L81
 875 002c 8A58     		ldr	r2, [r1, r2]
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 876              		.loc 1 870 6 view .LVU250
 877 002e 8242     		cmp	r2, r0
 878 0030 F7D1     		bne	.L70
 879 0032 F3E7     		b	.L74
 880              	.L78:
 881              	.LCFI9:
 882              		.cfi_def_cfa_offset 0
 883              		.cfi_restore 4
 870:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (Files[i].fs == fs) Files[i].fs = 0;
 884              		.loc 1 870 6 view .LVU251
 885 0034 7047     		bx	lr
 886              	.L82:
 887 0036 00BF     		.align	2
 888              	.L81:
 889 0038 00000000 		.word	Files
 890              		.cfi_endproc
 891              	.LFE352:
 893              		.section	.text.clust2sect,"ax",%progbits
 894              		.align	1
 895              		.syntax unified
 896              		.thumb
 897              		.thumb_func
 899              	clust2sect:
 900              	.LVL84:
 901              	.LFB356:
 873:Middlewares/Third_Party/FatFs/src/ff.c **** 
 874:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_LOCK != 0 */
 875:Middlewares/Third_Party/FatFs/src/ff.c **** 
 876:Middlewares/Third_Party/FatFs/src/ff.c **** 
 877:Middlewares/Third_Party/FatFs/src/ff.c **** 
 878:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 879:Middlewares/Third_Party/FatFs/src/ff.c **** /* Move/Flush disk access window in the file system object               */
 880:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 881:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 882:Middlewares/Third_Party/FatFs/src/ff.c **** static
 883:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT sync_window (	/* Returns FR_OK or FR_DISK_ERROR */
 884:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs			/* File system object */
 885:Middlewares/Third_Party/FatFs/src/ff.c **** )
 886:Middlewares/Third_Party/FatFs/src/ff.c **** {
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 33


 887:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD wsect;
 888:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nf;
 889:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 890:Middlewares/Third_Party/FatFs/src/ff.c **** 
 891:Middlewares/Third_Party/FatFs/src/ff.c **** 
 892:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->wflag) {	/* Write back the sector if it is dirty */
 893:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 894:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK) {
 895:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 896:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 897:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 0;
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 900:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 902:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 903:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 904:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 905:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 906:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 907:Middlewares/Third_Party/FatFs/src/ff.c **** }
 908:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 909:Middlewares/Third_Party/FatFs/src/ff.c **** 
 910:Middlewares/Third_Party/FatFs/src/ff.c **** 
 911:Middlewares/Third_Party/FatFs/src/ff.c **** static
 912:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT move_window (	/* Returns FR_OK or FR_DISK_ERROR */
 913:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* File system object */
 914:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sector		/* Sector number to make appearance in the fs->win[] */
 915:Middlewares/Third_Party/FatFs/src/ff.c **** )
 916:Middlewares/Third_Party/FatFs/src/ff.c **** {
 917:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 918:Middlewares/Third_Party/FatFs/src/ff.c **** 
 919:Middlewares/Third_Party/FatFs/src/ff.c **** 
 920:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sector != fs->winsect) {	/* Window offset changed? */
 921:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 922:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = sync_window(fs);		/* Write-back changes */
 923:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 924:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {			/* Fill sector window with new data */
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK) {
 926:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 927:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 928:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 929:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->winsect = sector;
 930:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 931:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 932:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 933:Middlewares/Third_Party/FatFs/src/ff.c **** }
 934:Middlewares/Third_Party/FatFs/src/ff.c **** 
 935:Middlewares/Third_Party/FatFs/src/ff.c **** 
 936:Middlewares/Third_Party/FatFs/src/ff.c **** 
 937:Middlewares/Third_Party/FatFs/src/ff.c **** 
 938:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 939:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 940:Middlewares/Third_Party/FatFs/src/ff.c **** /* Synchronize file system and strage device                             */
 941:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 942:Middlewares/Third_Party/FatFs/src/ff.c **** 
 943:Middlewares/Third_Party/FatFs/src/ff.c **** static
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 34


 944:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT sync_fs (	/* FR_OK:succeeded, !=0:error */
 945:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs		/* File system object */
 946:Middlewares/Third_Party/FatFs/src/ff.c **** )
 947:Middlewares/Third_Party/FatFs/src/ff.c **** {
 948:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 949:Middlewares/Third_Party/FatFs/src/ff.c **** 
 950:Middlewares/Third_Party/FatFs/src/ff.c **** 
 951:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = sync_window(fs);
 952:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 953:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update FSInfo sector if needed */
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->fs_type == FS_FAT32 && fs->fsi_flag == 1) {
 955:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
 956:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(fs->win, 0, SS(fs));
 957:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);
 958:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_LeadSig, 0x41615252);
 959:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_StrucSig, 0x61417272);
 960:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_Free_Count, fs->free_clst);
 961:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_Nxt_Free, fs->last_clst);
 962:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSInfo sector */
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->winsect = fs->volbase + 1;
 964:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 965:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag = 0;
 966:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 967:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Make sure that no pending write process in the physical drive */
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_ioctl(fs->drv, CTRL_SYNC, 0) != RES_OK) res = FR_DISK_ERR;
 969:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 970:Middlewares/Third_Party/FatFs/src/ff.c **** 
 971:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 972:Middlewares/Third_Party/FatFs/src/ff.c **** }
 973:Middlewares/Third_Party/FatFs/src/ff.c **** 
 974:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 975:Middlewares/Third_Party/FatFs/src/ff.c **** 
 976:Middlewares/Third_Party/FatFs/src/ff.c **** 
 977:Middlewares/Third_Party/FatFs/src/ff.c **** 
 978:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 979:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get sector# from cluster#                                             */
 980:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 981:Middlewares/Third_Party/FatFs/src/ff.c **** 
 982:Middlewares/Third_Party/FatFs/src/ff.c **** static
 983:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD clust2sect (	/* !=0:Sector number, 0:Failed (invalid cluster#) */
 984:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* File system object */
 985:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst		/* Cluster# to be converted */
 986:Middlewares/Third_Party/FatFs/src/ff.c **** )
 987:Middlewares/Third_Party/FatFs/src/ff.c **** {
 902              		.loc 1 987 1 is_stmt 1 view -0
 903              		.cfi_startproc
 904              		@ args = 0, pretend = 0, frame = 0
 905              		@ frame_needed = 0, uses_anonymous_args = 0
 906              		@ link register save eliminated.
 988:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst -= 2;
 907              		.loc 1 988 2 view .LVU253
 908              		.loc 1 988 7 is_stmt 0 view .LVU254
 909 0000 0239     		subs	r1, r1, #2
 910              	.LVL85:
 989:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 911              		.loc 1 989 2 is_stmt 1 view .LVU255
 912              		.loc 1 989 16 is_stmt 0 view .LVU256
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 35


 913 0002 8369     		ldr	r3, [r0, #24]
 914              		.loc 1 989 27 view .LVU257
 915 0004 023B     		subs	r3, r3, #2
 916              		.loc 1 989 5 view .LVU258
 917 0006 8B42     		cmp	r3, r1
 918 0008 04D9     		bls	.L85
 990:Middlewares/Third_Party/FatFs/src/ff.c **** 	return clst * fs->csize + fs->database;
 919              		.loc 1 990 2 is_stmt 1 view .LVU259
 920              		.loc 1 990 18 is_stmt 0 view .LVU260
 921 000a 4389     		ldrh	r3, [r0, #10]
 922              		.loc 1 990 30 view .LVU261
 923 000c C06A     		ldr	r0, [r0, #44]
 924              	.LVL86:
 925              		.loc 1 990 26 view .LVU262
 926 000e 01FB0300 		mla	r0, r1, r3, r0
 927 0012 7047     		bx	lr
 928              	.LVL87:
 929              	.L85:
 989:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) return 0;		/* Invalid cluster# */
 930              		.loc 1 989 39 discriminator 1 view .LVU263
 931 0014 0020     		movs	r0, #0
 932              	.LVL88:
 991:Middlewares/Third_Party/FatFs/src/ff.c **** }
 933              		.loc 1 991 1 view .LVU264
 934 0016 7047     		bx	lr
 935              		.cfi_endproc
 936              	.LFE356:
 938              		.section	.text.clmt_clust,"ax",%progbits
 939              		.align	1
 940              		.syntax unified
 941              		.thumb
 942              		.thumb_func
 944              	clmt_clust:
 945              	.LVL89:
 946              	.LFB361:
 992:Middlewares/Third_Party/FatFs/src/ff.c **** 
 993:Middlewares/Third_Party/FatFs/src/ff.c **** 
 994:Middlewares/Third_Party/FatFs/src/ff.c **** 
 995:Middlewares/Third_Party/FatFs/src/ff.c **** 
 996:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 997:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT access - Read value of a FAT entry                                */
 998:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
 999:Middlewares/Third_Party/FatFs/src/ff.c **** 
1000:Middlewares/Third_Party/FatFs/src/ff.c **** static
1001:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD get_fat (	/* 0xFFFFFFFF:Disk error, 1:Internal error, 2..0x7FFFFFFF:Cluster status */
1002:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,	/* Corresponding object */
1003:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst	/* Cluster number to get the value */
1004:Middlewares/Third_Party/FatFs/src/ff.c **** )
1005:Middlewares/Third_Party/FatFs/src/ff.c **** {
1006:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wc, bc;
1007:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val;
1008:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
1009:Middlewares/Third_Party/FatFs/src/ff.c **** 
1010:Middlewares/Third_Party/FatFs/src/ff.c **** 
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) {	/* Check if in valid range */
1012:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
1013:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 36


1014:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 0xFFFFFFFF;	/* Default value falls on disk error */
1016:Middlewares/Third_Party/FatFs/src/ff.c **** 
1017:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
1018:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
1019:Middlewares/Third_Party/FatFs/src/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win[bc++ % SS(fs)];
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
1025:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1026:Middlewares/Third_Party/FatFs/src/ff.c **** 
1027:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT16 :
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 2))) != FR_OK) break;
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));
1030:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1031:Middlewares/Third_Party/FatFs/src/ff.c **** 
1032:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT32 :
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))) != FR_OK) break;
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;
1035:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1036:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1037:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_EXFAT :
1038:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (obj->objsize) {
1039:Middlewares/Third_Party/FatFs/src/ff.c **** 				DWORD cofs = clst - obj->sclust;	/* Offset from start cluster */
1040:Middlewares/Third_Party/FatFs/src/ff.c **** 				DWORD clen = (DWORD)((obj->objsize - 1) / SS(fs)) / fs->csize;	/* Number of clusters - 1 */
1041:Middlewares/Third_Party/FatFs/src/ff.c **** 
1042:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->stat == 2) {	/* Is there no valid chain on the FAT? */
1043:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (cofs <= clen) {
1044:Middlewares/Third_Party/FatFs/src/ff.c **** 						val = (cofs == clen) ? 0x7FFFFFFF : clst + 1;	/* Generate the value */
1045:Middlewares/Third_Party/FatFs/src/ff.c **** 						break;
1046:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1047:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1048:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->stat == 3 && cofs < obj->n_cont) {	/* Is it in the 1st fragment? */
1049:Middlewares/Third_Party/FatFs/src/ff.c **** 					val = clst + 1; 	/* Generate the value */
1050:Middlewares/Third_Party/FatFs/src/ff.c **** 					break;
1051:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1052:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->stat != 2) {	/* Get value from FAT if FAT chain is valid */
1053:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (obj->n_frag != 0) {	/* Is it on the growing edge? */
1054:Middlewares/Third_Party/FatFs/src/ff.c **** 						val = 0x7FFFFFFF;	/* Generate EOC */
1055:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
1056:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (move_window(fs, fs->fatbase + (clst / (SS(fs) / 4))) != FR_OK) break;
1057:Middlewares/Third_Party/FatFs/src/ff.c **** 						val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x7FFFFFFF;
1058:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1059:Middlewares/Third_Party/FatFs/src/ff.c **** 					break;
1060:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1061:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1062:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* go to default */
1063:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1064:Middlewares/Third_Party/FatFs/src/ff.c **** 		default:
1065:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = 1;	/* Internal error */
1066:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1067:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1068:Middlewares/Third_Party/FatFs/src/ff.c **** 
1069:Middlewares/Third_Party/FatFs/src/ff.c **** 	return val;
1070:Middlewares/Third_Party/FatFs/src/ff.c **** }
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 37


1071:Middlewares/Third_Party/FatFs/src/ff.c **** 
1072:Middlewares/Third_Party/FatFs/src/ff.c **** 
1073:Middlewares/Third_Party/FatFs/src/ff.c **** 
1074:Middlewares/Third_Party/FatFs/src/ff.c **** 
1075:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1076:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1077:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT access - Change value of a FAT entry                              */
1078:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1079:Middlewares/Third_Party/FatFs/src/ff.c **** 
1080:Middlewares/Third_Party/FatFs/src/ff.c **** static
1081:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT put_fat (	/* FR_OK(0):succeeded, !=0:error */
1082:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* Corresponding file system object */
1083:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst,		/* FAT index number (cluster number) to be changed */
1084:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val		/* New value to be set to the entry */
1085:Middlewares/Third_Party/FatFs/src/ff.c **** )
1086:Middlewares/Third_Party/FatFs/src/ff.c **** {
1087:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bc;
1088:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *p;
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_INT_ERR;
1090:Middlewares/Third_Party/FatFs/src/ff.c **** 
1091:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= 2 && clst < fs->n_fatent) {	/* Check if in valid range */
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
1093:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :	/* Bitfield items */
1094:Middlewares/Third_Party/FatFs/src/ff.c **** 			bc = (UINT)clst; bc += bc / 2;
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
1096:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1097:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc++ % SS(fs);
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
1099:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
1101:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1102:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc % SS(fs);
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
1104:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
1105:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1106:Middlewares/Third_Party/FatFs/src/ff.c **** 
1107:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT16 :	/* WORD aligned items */
1108:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 2)));
1109:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + clst * 2 % SS(fs), (WORD)val);
1111:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
1112:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1113:Middlewares/Third_Party/FatFs/src/ff.c **** 
1114:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT32 :	/* DWORD aligned items */
1115:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1116:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_EXFAT :
1117:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1118:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (clst / (SS(fs) / 4)));
1119:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1120:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 				val = (val & 0x0FFFFFFF) | (ld_dword(fs->win + clst * 4 % SS(fs)) & 0xF0000000);
1122:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1123:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + clst * 4 % SS(fs), val);
1124:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
1125:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
1126:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1127:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 38


1128:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1129:Middlewares/Third_Party/FatFs/src/ff.c **** }
1130:Middlewares/Third_Party/FatFs/src/ff.c **** 
1131:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
1132:Middlewares/Third_Party/FatFs/src/ff.c **** 
1133:Middlewares/Third_Party/FatFs/src/ff.c **** 
1134:Middlewares/Third_Party/FatFs/src/ff.c **** 
1135:Middlewares/Third_Party/FatFs/src/ff.c **** 
1136:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
1137:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1138:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Accessing FAT and Allocation Bitmap                            */
1139:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1140:Middlewares/Third_Party/FatFs/src/ff.c **** 
1141:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------*/
1142:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find a contiguous free cluster block */
1143:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------*/
1144:Middlewares/Third_Party/FatFs/src/ff.c **** 
1145:Middlewares/Third_Party/FatFs/src/ff.c **** static
1146:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD find_bitmap (	/* 0:Not found, 2..:Cluster block found, 0xFFFFFFFF:Disk error */
1147:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
1148:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst,	/* Cluster number to scan from */
1149:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ncl	/* Number of contiguous clusters to find (1..) */
1150:Middlewares/Third_Party/FatFs/src/ff.c **** )
1151:Middlewares/Third_Party/FatFs/src/ff.c **** {
1152:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE bm, bv;
1153:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
1154:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val, scl, ctr;
1155:Middlewares/Third_Party/FatFs/src/ff.c **** 
1156:Middlewares/Third_Party/FatFs/src/ff.c **** 
1157:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst -= 2;	/* The first bit in the bitmap corresponds to cluster #2 */
1158:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst >= fs->n_fatent - 2) clst = 0;
1159:Middlewares/Third_Party/FatFs/src/ff.c **** 	scl = val = clst; ctr = 0;
1160:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1161:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, fs->database + val / 8 / SS(fs)) != FR_OK) return 0xFFFFFFFF;	/* (assuming bi
1162:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = val / 8 % SS(fs); bm = 1 << (val % 8);
1163:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
1164:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {
1165:Middlewares/Third_Party/FatFs/src/ff.c **** 				bv = fs->win[i] & bm; bm <<= 1;		/* Get bit value */
1166:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++val >= fs->n_fatent - 2) {	/* Next cluster (with wrap-around) */
1167:Middlewares/Third_Party/FatFs/src/ff.c **** 					val = 0; bm = 0; i = SS(fs);
1168:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1169:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!bv) {	/* Is it a free cluster? */
1170:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (++ctr == ncl) return scl + 2;	/* Check if run length is sufficient for required */
1171:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
1172:Middlewares/Third_Party/FatFs/src/ff.c **** 					scl = val; ctr = 0;		/* Encountered a cluster in-use, restart to scan */
1173:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1174:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (val == clst) return 0;	/* All cluster scanned? */
1175:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (bm);
1176:Middlewares/Third_Party/FatFs/src/ff.c **** 			bm = 1;
1177:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (++i < SS(fs));
1178:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1179:Middlewares/Third_Party/FatFs/src/ff.c **** }
1180:Middlewares/Third_Party/FatFs/src/ff.c **** 
1181:Middlewares/Third_Party/FatFs/src/ff.c **** 
1182:Middlewares/Third_Party/FatFs/src/ff.c **** /*----------------------------------------*/
1183:Middlewares/Third_Party/FatFs/src/ff.c **** /* Set/Clear a block of allocation bitmap */
1184:Middlewares/Third_Party/FatFs/src/ff.c **** /*----------------------------------------*/
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 39


1185:Middlewares/Third_Party/FatFs/src/ff.c **** 
1186:Middlewares/Third_Party/FatFs/src/ff.c **** static
1187:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT change_bitmap (
1188:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
1189:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst,	/* Cluster number to change from */
1190:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ncl,	/* Number of clusters to be changed */
1191:Middlewares/Third_Party/FatFs/src/ff.c **** 	int bv		/* bit value to be set (0 or 1) */
1192:Middlewares/Third_Party/FatFs/src/ff.c **** )
1193:Middlewares/Third_Party/FatFs/src/ff.c **** {
1194:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE bm;
1195:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
1196:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sect;
1197:Middlewares/Third_Party/FatFs/src/ff.c **** 
1198:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst -= 2;	/* The first bit corresponds to cluster #2 */
1199:Middlewares/Third_Party/FatFs/src/ff.c **** 	sect = fs->database + clst / 8 / SS(fs);	/* Sector address (assuming bitmap is located top of the 
1200:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = clst / 8 % SS(fs);						/* Byte offset in the sector */
1201:Middlewares/Third_Party/FatFs/src/ff.c **** 	bm = 1 << (clst % 8);						/* Bit mask in the byte */
1202:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1203:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, sect++) != FR_OK) return FR_DISK_ERR;
1204:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
1205:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {
1206:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (bv == (int)((fs->win[i] & bm) != 0)) return FR_INT_ERR;	/* Is the bit expected value? */
1207:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->win[i] ^= bm;	/* Flip the bit */
1208:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->wflag = 1;
1209:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (--ncl == 0) return FR_OK;	/* All bits processed? */
1210:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (bm <<= 1);		/* Next bit */
1211:Middlewares/Third_Party/FatFs/src/ff.c **** 			bm = 1;
1212:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (++i < SS(fs));		/* Next byte */
1213:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = 0;
1214:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1215:Middlewares/Third_Party/FatFs/src/ff.c **** }
1216:Middlewares/Third_Party/FatFs/src/ff.c **** 
1217:Middlewares/Third_Party/FatFs/src/ff.c **** 
1218:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------*/
1219:Middlewares/Third_Party/FatFs/src/ff.c **** /* Fill the first fragment of the FAT chain    */
1220:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------*/
1221:Middlewares/Third_Party/FatFs/src/ff.c **** 
1222:Middlewares/Third_Party/FatFs/src/ff.c **** static
1223:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT fill_first_frag (
1224:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj	/* Pointer to the corresponding object */
1225:Middlewares/Third_Party/FatFs/src/ff.c **** )
1226:Middlewares/Third_Party/FatFs/src/ff.c **** {
1227:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1228:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl, n;
1229:Middlewares/Third_Party/FatFs/src/ff.c **** 
1230:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (obj->stat == 3) {	/* Has the object been changed 'fragmented'? */
1231:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (cl = obj->sclust, n = obj->n_cont; n; cl++, n--) {	/* Create cluster chain on the FAT */
1232:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(obj->fs, cl, cl + 1);
1233:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
1234:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1235:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->stat = 0;	/* Change status 'FAT chain is valid' */
1236:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1237:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1238:Middlewares/Third_Party/FatFs/src/ff.c **** }
1239:Middlewares/Third_Party/FatFs/src/ff.c **** 
1240:Middlewares/Third_Party/FatFs/src/ff.c **** 
1241:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------*/
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 40


1242:Middlewares/Third_Party/FatFs/src/ff.c **** /* Fill the last fragment of the FAT chain     */
1243:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------*/
1244:Middlewares/Third_Party/FatFs/src/ff.c **** 
1245:Middlewares/Third_Party/FatFs/src/ff.c **** static
1246:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT fill_last_frag (
1247:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,	/* Pointer to the corresponding object */
1248:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD lcl,	/* Last cluster of the fragment */
1249:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD term	/* Value to set the last FAT entry */
1250:Middlewares/Third_Party/FatFs/src/ff.c **** )
1251:Middlewares/Third_Party/FatFs/src/ff.c **** {
1252:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1253:Middlewares/Third_Party/FatFs/src/ff.c **** 
1254:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (obj->n_frag > 0) {	/* Create the last chain on the FAT */
1255:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(obj->fs, lcl - obj->n_frag + 1, (obj->n_frag > 1) ? lcl - obj->n_frag + 2 : term);
1256:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
1257:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->n_frag--;
1258:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1259:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1260:Middlewares/Third_Party/FatFs/src/ff.c **** }
1261:Middlewares/Third_Party/FatFs/src/ff.c **** 
1262:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_EXFAT && !_FS_READONLY */
1263:Middlewares/Third_Party/FatFs/src/ff.c **** 
1264:Middlewares/Third_Party/FatFs/src/ff.c **** 
1265:Middlewares/Third_Party/FatFs/src/ff.c **** 
1266:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1267:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1268:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Remove a cluster chain                                 */
1269:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1270:Middlewares/Third_Party/FatFs/src/ff.c **** static
1271:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT remove_chain (	/* FR_OK(0):succeeded, !=0:error */
1272:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,			/* Corresponding object */
1273:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst,			/* Cluster to remove a chain from */
1274:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD pclst			/* Previous cluster of clst (0:an entire chain) */
1275:Middlewares/Third_Party/FatFs/src/ff.c **** )
1276:Middlewares/Third_Party/FatFs/src/ff.c **** {
1277:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
1278:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD nxt;
1279:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
1280:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT || _USE_TRIM
1281:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD scl = clst, ecl = clst;
1282:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1283:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
1284:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD rt[2];
1285:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1286:Middlewares/Third_Party/FatFs/src/ff.c **** 
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Check if in valid range */
1288:Middlewares/Third_Party/FatFs/src/ff.c **** 
1289:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Mark the previous cluster 'EOC' on the FAT if it exists */
1290:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (pclst && (!_FS_EXFAT || fs->fs_type != FS_EXFAT || obj->stat != 2)) {
1291:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, pclst, 0xFFFFFFFF);
1292:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
1293:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1294:Middlewares/Third_Party/FatFs/src/ff.c **** 
1295:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Remove the chain */
1296:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1297:Middlewares/Third_Party/FatFs/src/ff.c **** 		nxt = get_fat(obj, clst);			/* Get cluster status */
1298:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0) break;				/* Empty cluster? */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 41


1299:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
1300:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
1301:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
1302:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, 0);		/* Mark the cluster 'free' on the FAT */
1303:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
1304:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1305:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clst < fs->n_fatent - 2) {	/* Update FSINFO */
1306:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst++;
1307:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
1308:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1309:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT || _USE_TRIM
1310:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ecl + 1 == nxt) {	/* Is next cluster contiguous? */
1311:Middlewares/Third_Party/FatFs/src/ff.c **** 			ecl = nxt;
1312:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* End of contiguous cluster block */
1313:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1314:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
1315:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = change_bitmap(fs, scl, ecl - scl + 1, 0);	/* Mark the cluster block 'free' on the bitmap 
1316:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) return res;
1317:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1318:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1319:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
1320:Middlewares/Third_Party/FatFs/src/ff.c **** 			rt[0] = clust2sect(fs, scl);					/* Start sector */
1321:Middlewares/Third_Party/FatFs/src/ff.c **** 			rt[1] = clust2sect(fs, ecl) + fs->csize - 1;	/* End sector */
1322:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_ioctl(fs->drv, CTRL_TRIM, rt);				/* Inform device the block can be erased */
1323:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1324:Middlewares/Third_Party/FatFs/src/ff.c **** 			scl = ecl = nxt;
1325:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1326:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1327:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = nxt;					/* Next cluster */
1328:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (clst < fs->n_fatent);	/* Repeat while not the last link */
1329:Middlewares/Third_Party/FatFs/src/ff.c **** 
1330:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1331:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {
1332:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (pclst == 0) {	/* Does the object have no chain? */
1333:Middlewares/Third_Party/FatFs/src/ff.c **** 			obj->stat = 0;		/* Change the object status 'initial' */
1334:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1335:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (obj->stat == 3 && pclst >= obj->sclust && pclst <= obj->sclust + obj->n_cont) {	/* Did the c
1336:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->stat = 2;	/* Change the object status 'contiguous' */
1337:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1338:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1339:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1340:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1341:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1342:Middlewares/Third_Party/FatFs/src/ff.c **** }
1343:Middlewares/Third_Party/FatFs/src/ff.c **** 
1344:Middlewares/Third_Party/FatFs/src/ff.c **** 
1345:Middlewares/Third_Party/FatFs/src/ff.c **** 
1346:Middlewares/Third_Party/FatFs/src/ff.c **** 
1347:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1348:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Stretch a chain or Create a new chain                  */
1349:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1350:Middlewares/Third_Party/FatFs/src/ff.c **** static
1351:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD create_chain (	/* 0:No free cluster, 1:Internal error, 0xFFFFFFFF:Disk error, >=2:New cluster
1352:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,			/* Corresponding object */
1353:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst			/* Cluster# to stretch, 0:Create a new chain */
1354:Middlewares/Third_Party/FatFs/src/ff.c **** )
1355:Middlewares/Third_Party/FatFs/src/ff.c **** {
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 42


1356:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cs, ncl, scl;
1357:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1358:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
1359:Middlewares/Third_Party/FatFs/src/ff.c **** 
1360:Middlewares/Third_Party/FatFs/src/ff.c **** 
1361:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0) {	/* Create a new chain */
1362:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = fs->last_clst;				/* Get suggested cluster to start from */
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (scl == 0 || scl >= fs->n_fatent) scl = 1;
1364:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1365:Middlewares/Third_Party/FatFs/src/ff.c **** 	else {				/* Stretch current chain */
1366:Middlewares/Third_Party/FatFs/src/ff.c **** 		cs = get_fat(obj, clst);			/* Check the cluster status */
1367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < 2) return 1;				/* Invalid FAT value */
1368:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
1369:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
1370:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst;
1371:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1372:Middlewares/Third_Party/FatFs/src/ff.c **** 
1373:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1374:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
1375:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = find_bitmap(fs, scl, 1);				/* Find a free cluster */
1376:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl == 0 || ncl == 0xFFFFFFFF) return ncl;	/* No free cluster or hard error? */
1377:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = change_bitmap(fs, ncl, 1, 1);			/* Mark the cluster 'in use' */
1378:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_INT_ERR) return 1;
1379:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_DISK_ERR) return 0xFFFFFFFF;
1380:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (clst == 0) {							/* Is it a new chain? */
1381:Middlewares/Third_Party/FatFs/src/ff.c **** 			obj->stat = 2;							/* Set status 'contiguous' */
1382:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {									/* It is a stretched chain */
1383:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (obj->stat == 2 && ncl != scl + 1) {	/* Is the chain got fragmented? */
1384:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->n_cont = scl - obj->sclust;	/* Set size of the contiguous part */
1385:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->stat = 3;						/* Change status 'just fragmented' */
1386:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1387:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1388:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (obj->stat != 2) {	/* Is the file non-contiguous? */
1389:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == clst + 1) {	/* Is the cluster next to previous one? */
1390:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->n_frag = obj->n_frag ? obj->n_frag + 1 : 2;	/* Increment size of last framgent */
1391:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* New fragment */
1392:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->n_frag == 0) obj->n_frag = 1;
1393:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = fill_last_frag(obj, clst, ncl);	/* Fill last fragment on the FAT and link it to new one *
1394:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) obj->n_frag = 1;
1395:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1396:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1397:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
1398:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1399:Middlewares/Third_Party/FatFs/src/ff.c **** 	{	/* On the FAT12/16/32 volume */
1400:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = scl;	/* Start cluster */
1401:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
1402:Middlewares/Third_Party/FatFs/src/ff.c **** 			ncl++;							/* Next cluster */
1403:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl >= fs->n_fatent) {		/* Check wrap-around */
1404:Middlewares/Third_Party/FatFs/src/ff.c **** 				ncl = 2;
1405:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl > scl) return 0;	/* No free cluster */
1406:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1407:Middlewares/Third_Party/FatFs/src/ff.c **** 			cs = get_fat(obj, ncl);			/* Get the cluster status */
1408:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 0) break;				/* Found a free cluster */
1409:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* An error occurred */
1410:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == scl) return 0;		/* No free cluster */
1411:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1412:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, ncl, 0xFFFFFFFF);	/* Mark the new cluster 'EOC' */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 43


1413:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && clst != 0) {
1414:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, ncl);	/* Link it from the previous one if needed */
1415:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1416:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1417:Middlewares/Third_Party/FatFs/src/ff.c **** 
1418:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {			/* Update FSINFO if function succeeded. */
1419:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = ncl;
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) fs->free_clst--;
1421:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
1422:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = (res == FR_DISK_ERR) ? 0xFFFFFFFF : 1;	/* Failed. Generate error status */
1424:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1425:Middlewares/Third_Party/FatFs/src/ff.c **** 
1426:Middlewares/Third_Party/FatFs/src/ff.c **** 	return ncl;		/* Return new cluster number or error status */
1427:Middlewares/Third_Party/FatFs/src/ff.c **** }
1428:Middlewares/Third_Party/FatFs/src/ff.c **** 
1429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
1430:Middlewares/Third_Party/FatFs/src/ff.c **** 
1431:Middlewares/Third_Party/FatFs/src/ff.c **** 
1432:Middlewares/Third_Party/FatFs/src/ff.c **** 
1433:Middlewares/Third_Party/FatFs/src/ff.c **** 
1434:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
1435:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1436:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT handling - Convert offset into cluster with link map table        */
1437:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1438:Middlewares/Third_Party/FatFs/src/ff.c **** 
1439:Middlewares/Third_Party/FatFs/src/ff.c **** static
1440:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD clmt_clust (	/* <2:Error, >=2:Cluster number */
1441:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
1442:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ofs		/* File offset to be converted to cluster# */
1443:Middlewares/Third_Party/FatFs/src/ff.c **** )
1444:Middlewares/Third_Party/FatFs/src/ff.c **** {
 947              		.loc 1 1444 1 is_stmt 1 view -0
 948              		.cfi_startproc
 949              		@ args = 0, pretend = 0, frame = 0
 950              		@ frame_needed = 0, uses_anonymous_args = 0
 951              		@ link register save eliminated.
1445:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl, ncl, *tbl;
 952              		.loc 1 1445 2 view .LVU266
1446:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = fp->obj.fs;
 953              		.loc 1 1446 2 view .LVU267
 954              		.loc 1 1446 9 is_stmt 0 view .LVU268
 955 0000 0268     		ldr	r2, [r0]
 956              	.LVL90:
1447:Middlewares/Third_Party/FatFs/src/ff.c **** 
1448:Middlewares/Third_Party/FatFs/src/ff.c **** 
1449:Middlewares/Third_Party/FatFs/src/ff.c **** 	tbl = fp->cltbl + 1;	/* Top of CLMT */
 957              		.loc 1 1449 2 is_stmt 1 view .LVU269
 958              		.loc 1 1449 10 is_stmt 0 view .LVU270
 959 0002 C36A     		ldr	r3, [r0, #44]
 960              		.loc 1 1449 6 view .LVU271
 961 0004 0433     		adds	r3, r3, #4
 962              	.LVL91:
1450:Middlewares/Third_Party/FatFs/src/ff.c **** 	cl = (DWORD)(ofs / SS(fs) / fs->csize);	/* Cluster order from top of the file */
 963              		.loc 1 1450 2 is_stmt 1 view .LVU272
 964              		.loc 1 1450 19 is_stmt 0 view .LVU273
 965 0006 490A     		lsrs	r1, r1, #9
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 44


 966              	.LVL92:
 967              		.loc 1 1450 32 view .LVU274
 968 0008 5289     		ldrh	r2, [r2, #10]
 969              	.LVL93:
 970              		.loc 1 1450 5 view .LVU275
 971 000a B1FBF2F1 		udiv	r1, r1, r2
 972              	.LVL94:
 973              		.loc 1 1450 5 view .LVU276
 974 000e 01E0     		b	.L89
 975              	.LVL95:
 976              	.L90:
1451:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
1452:Middlewares/Third_Party/FatFs/src/ff.c **** 		ncl = *tbl++;			/* Number of cluters in the fragment */
1453:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl == 0) return 0;	/* End of table? (error) */
1454:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
1455:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
 977              		.loc 1 1455 3 is_stmt 1 view .LVU277
 978              		.loc 1 1455 6 is_stmt 0 view .LVU278
 979 0010 091A     		subs	r1, r1, r0
 980              	.LVL96:
 981              		.loc 1 1455 14 is_stmt 1 view .LVU279
 982              		.loc 1 1455 17 is_stmt 0 view .LVU280
 983 0012 0833     		adds	r3, r3, #8
 984              	.LVL97:
1451:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
 985              		.loc 1 1451 2 is_stmt 1 view .LVU281
 986              	.L89:
1451:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
 987              		.loc 1 1451 2 view .LVU282
1452:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl == 0) return 0;	/* End of table? (error) */
 988              		.loc 1 1452 3 view .LVU283
1452:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ncl == 0) return 0;	/* End of table? (error) */
 989              		.loc 1 1452 7 is_stmt 0 view .LVU284
 990 0014 1868     		ldr	r0, [r3]
 991              	.LVL98:
1453:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
 992              		.loc 1 1453 3 is_stmt 1 view .LVU285
1453:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cl < ncl) break;	/* In this fragment? */
 993              		.loc 1 1453 6 is_stmt 0 view .LVU286
 994 0016 18B1     		cbz	r0, .L86
1454:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
 995              		.loc 1 1454 3 is_stmt 1 view .LVU287
1454:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl -= ncl; tbl++;		/* Next fragment */
 996              		.loc 1 1454 6 is_stmt 0 view .LVU288
 997 0018 8142     		cmp	r1, r0
 998 001a F9D2     		bcs	.L90
1456:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1457:Middlewares/Third_Party/FatFs/src/ff.c **** 	return cl + *tbl;	/* Return the cluster number */
 999              		.loc 1 1457 2 is_stmt 1 view .LVU289
 1000              		.loc 1 1457 14 is_stmt 0 view .LVU290
 1001 001c 5868     		ldr	r0, [r3, #4]
 1002              	.LVL99:
 1003              		.loc 1 1457 12 view .LVU291
 1004 001e 0844     		add	r0, r0, r1
 1005              	.L86:
1458:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1006              		.loc 1 1458 1 view .LVU292
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 45


 1007 0020 7047     		bx	lr
 1008              		.cfi_endproc
 1009              	.LFE361:
 1011              		.section	.text.ld_clust,"ax",%progbits
 1012              		.align	1
 1013              		.syntax unified
 1014              		.thumb
 1015              		.thumb_func
 1017              	ld_clust:
 1018              	.LVL100:
 1019              	.LFB365:
1459:Middlewares/Third_Party/FatFs/src/ff.c **** 
1460:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_FASTSEEK */
1461:Middlewares/Third_Party/FatFs/src/ff.c **** 
1462:Middlewares/Third_Party/FatFs/src/ff.c **** 
1463:Middlewares/Third_Party/FatFs/src/ff.c **** 
1464:Middlewares/Third_Party/FatFs/src/ff.c **** 
1465:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1466:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Set directory index                              */
1467:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1468:Middlewares/Third_Party/FatFs/src/ff.c **** 
1469:Middlewares/Third_Party/FatFs/src/ff.c **** static
1470:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_sdi (	/* FR_OK(0):succeeded, !=0:error */
1471:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to directory object */
1472:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs		/* Offset of directory table */
1473:Middlewares/Third_Party/FatFs/src/ff.c **** )
1474:Middlewares/Third_Party/FatFs/src/ff.c **** {
1475:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD csz, clst;
1476:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
1477:Middlewares/Third_Party/FatFs/src/ff.c **** 
1478:Middlewares/Third_Party/FatFs/src/ff.c **** 
1479:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ofs >= (DWORD)((_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR) || ofs % SZDIRE)
1480:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
1481:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1482:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dptr = ofs;				/* Set current offset */
1483:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst = dp->obj.sclust;		/* Table start cluster (0:root) */
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0 && fs->fs_type >= FS_FAT32) {	/* Replace cluster# 0 with root cluster# */
1485:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = fs->dirbase;
1486:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_EXFAT) dp->obj.stat = 0;	/* exFAT: Root dir has an FAT chain */
1487:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1488:Middlewares/Third_Party/FatFs/src/ff.c **** 
1489:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0) {	/* Static table (root-directory in FAT12/16) */
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs / SZDIRE >= fs->n_rootdir)	return FR_INT_ERR;	/* Is index out of range? */
1491:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = fs->dirbase;
1492:Middlewares/Third_Party/FatFs/src/ff.c **** 
1493:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {			/* Dynamic table (sub-directory or root-directory in FAT32+) */
1494:Middlewares/Third_Party/FatFs/src/ff.c **** 		csz = (DWORD)fs->csize * SS(fs);	/* Bytes per cluster */
1495:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
1496:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
1497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
1499:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
1500:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1501:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = clust2sect(fs, clst);
1502:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1503:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->clust = clst;					/* Current cluster# */
1504:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect) return FR_INT_ERR;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 46


1505:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
1506:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
1507:Middlewares/Third_Party/FatFs/src/ff.c **** 
1508:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1509:Middlewares/Third_Party/FatFs/src/ff.c **** }
1510:Middlewares/Third_Party/FatFs/src/ff.c **** 
1511:Middlewares/Third_Party/FatFs/src/ff.c **** 
1512:Middlewares/Third_Party/FatFs/src/ff.c **** 
1513:Middlewares/Third_Party/FatFs/src/ff.c **** 
1514:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1515:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Move directory table index next                  */
1516:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1517:Middlewares/Third_Party/FatFs/src/ff.c **** 
1518:Middlewares/Third_Party/FatFs/src/ff.c **** static
1519:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_next (	/* FR_OK(0):succeeded, FR_NO_FILE:End of table, FR_DENIED:Could not stretch */
1520:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
1521:Middlewares/Third_Party/FatFs/src/ff.c **** 	int stretch		/* 0: Do not stretch table, 1: Stretch table if needed */
1522:Middlewares/Third_Party/FatFs/src/ff.c **** )
1523:Middlewares/Third_Party/FatFs/src/ff.c **** {
1524:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs, clst;
1525:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
1526:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1527:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
1528:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1529:Middlewares/Third_Party/FatFs/src/ff.c **** 
1530:Middlewares/Third_Party/FatFs/src/ff.c **** 	ofs = dp->dptr + SZDIRE;	/* Next entry */
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect || ofs >= (DWORD)((_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) re
1532:Middlewares/Third_Party/FatFs/src/ff.c **** 
1533:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ofs % SS(fs) == 0) {	/* Sector changed? */
1534:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect++;				/* Next sector */
1535:Middlewares/Third_Party/FatFs/src/ff.c **** 
1536:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!dp->clust) {		/* Static table */
1537:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
1539:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1540:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1541:Middlewares/Third_Party/FatFs/src/ff.c **** 		else {					/* Dynamic table */
1542:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((ofs / SS(fs) & (fs->csize - 1)) == 0) {		/* Cluster changed? */
1543:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);			/* Get next cluster */
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;				/* Internal error */
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;		/* Disk error */
1546:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= fs->n_fatent) {						/* Reached end of dynamic table */
1547:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1548:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!stretch) {								/* If no stretch, report EOT */
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->sect = 0; return FR_NO_FILE;
1550:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1551:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(&dp->obj, dp->clust);	/* Allocate a cluster */
1552:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
1555:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up the stretched table */
1556:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_EXFAT) dp->obj.stat |= 4;			/* The directory needs to be updated */
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (sync_window(fs) != FR_OK) return FR_DISK_ERR;	/* Flush disk access window */
1558:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (n = 0, fs->winsect = clust2sect(fs, clst); n < fs->csize; n++, fs->winsect++) {	/* Fill t
1560:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (sync_window(fs) != FR_OK) return FR_DISK_ERR;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 47


1562:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
1563:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect -= n;							/* Restore window offset */
1564:Middlewares/Third_Party/FatFs/src/ff.c **** #else
1565:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!stretch) dp->sect = 0;					/* (this line is to suppress compiler warning) */
1566:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->sect = 0; return FR_NO_FILE;			/* Report EOT */
1567:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
1569:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->clust = clst;		/* Initialize data for new cluster */
1570:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = clust2sect(fs, clst);
1571:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1572:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1573:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1574:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dptr = ofs;						/* Current entry */
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + ofs % SS(fs);	/* Pointer to the entry in the win[] */
1576:Middlewares/Third_Party/FatFs/src/ff.c **** 
1577:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
1578:Middlewares/Third_Party/FatFs/src/ff.c **** }
1579:Middlewares/Third_Party/FatFs/src/ff.c **** 
1580:Middlewares/Third_Party/FatFs/src/ff.c **** 
1581:Middlewares/Third_Party/FatFs/src/ff.c **** 
1582:Middlewares/Third_Party/FatFs/src/ff.c **** 
1583:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1584:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1585:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Reserve a block of directory entries             */
1586:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1587:Middlewares/Third_Party/FatFs/src/ff.c **** 
1588:Middlewares/Third_Party/FatFs/src/ff.c **** static
1589:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_alloc (	/* FR_OK(0):succeeded, !=0:error */
1590:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
1591:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nent		/* Number of contiguous entries to allocate */
1592:Middlewares/Third_Party/FatFs/src/ff.c **** )
1593:Middlewares/Third_Party/FatFs/src/ff.c **** {
1594:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1595:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
1596:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
1597:Middlewares/Third_Party/FatFs/src/ff.c **** 
1598:Middlewares/Third_Party/FatFs/src/ff.c **** 
1599:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, 0);
1600:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
1601:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = 0;
1602:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
1603:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, dp->sect);
1604:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
1605:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1606:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((fs->fs_type == FS_EXFAT) ? (int)((dp->dir[XDIR_Type] & 0x80) == 0) : (int)(dp->dir[DIR_Name
1607:Middlewares/Third_Party/FatFs/src/ff.c **** #else
1608:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dir[DIR_Name] == DDEM || dp->dir[DIR_Name] == 0) {
1609:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1610:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++n == nent) break;	/* A block of contiguous free entries is found */
1611:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
1612:Middlewares/Third_Party/FatFs/src/ff.c **** 				n = 0;					/* Not a blank entry. Restart to search */
1613:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1614:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_next(dp, 1);
1615:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);	/* Next entry with table stretch enabled */
1616:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1617:Middlewares/Third_Party/FatFs/src/ff.c **** 
1618:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_NO_FILE) res = FR_DENIED;	/* No directory entry to allocate */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 48


1619:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
1620:Middlewares/Third_Party/FatFs/src/ff.c **** }
1621:Middlewares/Third_Party/FatFs/src/ff.c **** 
1622:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
1623:Middlewares/Third_Party/FatFs/src/ff.c **** 
1624:Middlewares/Third_Party/FatFs/src/ff.c **** 
1625:Middlewares/Third_Party/FatFs/src/ff.c **** 
1626:Middlewares/Third_Party/FatFs/src/ff.c **** 
1627:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1628:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT: Directory handling - Load/Store start cluster number             */
1629:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1630:Middlewares/Third_Party/FatFs/src/ff.c **** 
1631:Middlewares/Third_Party/FatFs/src/ff.c **** static
1632:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD ld_clust (	/* Returns the top cluster value of the SFN entry */
1633:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,		/* Pointer to the fs object */
1634:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* dir	/* Pointer to the key entry */
1635:Middlewares/Third_Party/FatFs/src/ff.c **** )
1636:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1020              		.loc 1 1636 1 is_stmt 1 view -0
 1021              		.cfi_startproc
 1022              		@ args = 0, pretend = 0, frame = 0
 1023              		@ frame_needed = 0, uses_anonymous_args = 0
 1024              		.loc 1 1636 1 is_stmt 0 view .LVU294
 1025 0000 70B5     		push	{r4, r5, r6, lr}
 1026              	.LCFI10:
 1027              		.cfi_def_cfa_offset 16
 1028              		.cfi_offset 4, -16
 1029              		.cfi_offset 5, -12
 1030              		.cfi_offset 6, -8
 1031              		.cfi_offset 14, -4
 1032 0002 0646     		mov	r6, r0
 1033 0004 0D46     		mov	r5, r1
1637:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl;
 1034              		.loc 1 1637 2 is_stmt 1 view .LVU295
1638:Middlewares/Third_Party/FatFs/src/ff.c **** 
1639:Middlewares/Third_Party/FatFs/src/ff.c **** 	cl = ld_word(dir + DIR_FstClusLO);
 1035              		.loc 1 1639 2 view .LVU296
 1036              		.loc 1 1639 7 is_stmt 0 view .LVU297
 1037 0006 01F11A00 		add	r0, r1, #26
 1038              	.LVL101:
 1039              		.loc 1 1639 7 view .LVU298
 1040 000a FFF7FEFF 		bl	ld_word
 1041              	.LVL102:
1640:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32) {
 1042              		.loc 1 1640 2 is_stmt 1 view .LVU299
 1043              		.loc 1 1640 8 is_stmt 0 view .LVU300
 1044 000e 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 1045              		.loc 1 1640 5 view .LVU301
 1046 0010 032B     		cmp	r3, #3
 1047 0012 00D0     		beq	.L94
 1048              	.LVL103:
 1049              	.L91:
1641:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
1642:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1643:Middlewares/Third_Party/FatFs/src/ff.c **** 
1644:Middlewares/Third_Party/FatFs/src/ff.c **** 	return cl;
1645:Middlewares/Third_Party/FatFs/src/ff.c **** }
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 49


 1050              		.loc 1 1645 1 view .LVU302
 1051 0014 70BD     		pop	{r4, r5, r6, pc}
 1052              	.LVL104:
 1053              	.L94:
 1054              		.loc 1 1645 1 view .LVU303
 1055 0016 0446     		mov	r4, r0
1641:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 1056              		.loc 1 1641 3 is_stmt 1 view .LVU304
1641:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 1057              		.loc 1 1641 16 is_stmt 0 view .LVU305
 1058 0018 05F11400 		add	r0, r5, #20
 1059              	.LVL105:
1641:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 1060              		.loc 1 1641 16 view .LVU306
 1061 001c FFF7FEFF 		bl	ld_word
 1062              	.LVL106:
1641:Middlewares/Third_Party/FatFs/src/ff.c **** 		cl |= (DWORD)ld_word(dir + DIR_FstClusHI) << 16;
 1063              		.loc 1 1641 6 discriminator 1 view .LVU307
 1064 0020 44EA0040 		orr	r0, r4, r0, lsl #16
 1065              	.LVL107:
1644:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1066              		.loc 1 1644 2 is_stmt 1 view .LVU308
1644:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1067              		.loc 1 1644 9 is_stmt 0 view .LVU309
 1068 0024 F6E7     		b	.L91
 1069              		.cfi_endproc
 1070              	.LFE365:
 1072              		.section	.text.st_clust,"ax",%progbits
 1073              		.align	1
 1074              		.syntax unified
 1075              		.thumb
 1076              		.thumb_func
 1078              	st_clust:
 1079              	.LVL108:
 1080              	.LFB366:
1646:Middlewares/Third_Party/FatFs/src/ff.c **** 
1647:Middlewares/Third_Party/FatFs/src/ff.c **** 
1648:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1649:Middlewares/Third_Party/FatFs/src/ff.c **** static
1650:Middlewares/Third_Party/FatFs/src/ff.c **** void st_clust (
1651:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* Pointer to the fs object */
1652:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir,	/* Pointer to the key entry */
1653:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl	/* Value to be set */
1654:Middlewares/Third_Party/FatFs/src/ff.c **** )
1655:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1081              		.loc 1 1655 1 is_stmt 1 view -0
 1082              		.cfi_startproc
 1083              		@ args = 0, pretend = 0, frame = 0
 1084              		@ frame_needed = 0, uses_anonymous_args = 0
 1085              		.loc 1 1655 1 is_stmt 0 view .LVU311
 1086 0000 70B5     		push	{r4, r5, r6, lr}
 1087              	.LCFI11:
 1088              		.cfi_def_cfa_offset 16
 1089              		.cfi_offset 4, -16
 1090              		.cfi_offset 5, -12
 1091              		.cfi_offset 6, -8
 1092              		.cfi_offset 14, -4
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 50


 1093 0002 0646     		mov	r6, r0
 1094 0004 0C46     		mov	r4, r1
 1095 0006 1546     		mov	r5, r2
1656:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(dir + DIR_FstClusLO, (WORD)cl);
 1096              		.loc 1 1656 2 is_stmt 1 view .LVU312
 1097 0008 91B2     		uxth	r1, r2
 1098              	.LVL109:
 1099              		.loc 1 1656 2 is_stmt 0 view .LVU313
 1100 000a 04F11A00 		add	r0, r4, #26
 1101              	.LVL110:
 1102              		.loc 1 1656 2 view .LVU314
 1103 000e FFF7FEFF 		bl	st_word
 1104              	.LVL111:
1657:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_FAT32) {
 1105              		.loc 1 1657 2 is_stmt 1 view .LVU315
 1106              		.loc 1 1657 8 is_stmt 0 view .LVU316
 1107 0012 3378     		ldrb	r3, [r6]	@ zero_extendqisi2
 1108              		.loc 1 1657 5 view .LVU317
 1109 0014 032B     		cmp	r3, #3
 1110 0016 00D0     		beq	.L98
 1111              	.L95:
1658:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(dir + DIR_FstClusHI, (WORD)(cl >> 16));
1659:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1660:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1112              		.loc 1 1660 1 view .LVU318
 1113 0018 70BD     		pop	{r4, r5, r6, pc}
 1114              	.LVL112:
 1115              	.L98:
1658:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(dir + DIR_FstClusHI, (WORD)(cl >> 16));
 1116              		.loc 1 1658 3 is_stmt 1 view .LVU319
 1117 001a 290C     		lsrs	r1, r5, #16
 1118 001c 04F11400 		add	r0, r4, #20
 1119 0020 FFF7FEFF 		bl	st_word
 1120              	.LVL113:
 1121              		.loc 1 1660 1 is_stmt 0 view .LVU320
 1122 0024 F8E7     		b	.L95
 1123              		.cfi_endproc
 1124              	.LFE366:
 1126              		.section	.text.get_fileinfo,"ax",%progbits
 1127              		.align	1
 1128              		.syntax unified
 1129              		.thumb
 1130              		.thumb_func
 1132              	get_fileinfo:
 1133              	.LVL114:
 1134              	.LFB371:
1661:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1662:Middlewares/Third_Party/FatFs/src/ff.c **** 
1663:Middlewares/Third_Party/FatFs/src/ff.c **** 
1664:Middlewares/Third_Party/FatFs/src/ff.c **** 
1665:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
1666:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------------------------*/
1667:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: LFN handling                                                  */
1668:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------------------------*/
1669:Middlewares/Third_Party/FatFs/src/ff.c **** static
1670:Middlewares/Third_Party/FatFs/src/ff.c **** const BYTE LfnOfs[] = {1,3,5,7,9,14,16,18,20,22,24,28,30};	/* Offset of LFN characters in the direc
1671:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 51


1672:Middlewares/Third_Party/FatFs/src/ff.c **** 
1673:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------*/
1674:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Compare a part of file name with an LFN entry */
1675:Middlewares/Third_Party/FatFs/src/ff.c **** /*--------------------------------------------------------*/
1676:Middlewares/Third_Party/FatFs/src/ff.c **** static
1677:Middlewares/Third_Party/FatFs/src/ff.c **** int cmp_lfn (				/* 1:matched, 0:not matched */
1678:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfnbuf,	/* Pointer to the LFN working buffer to be compared */
1679:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir				/* Pointer to the directory entry containing the part of LFN */
1680:Middlewares/Third_Party/FatFs/src/ff.c **** )
1681:Middlewares/Third_Party/FatFs/src/ff.c **** {
1682:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1683:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc, uc;
1684:Middlewares/Third_Party/FatFs/src/ff.c **** 
1685:Middlewares/Third_Party/FatFs/src/ff.c **** 
1686:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ld_word(dir + LDIR_FstClusLO) != 0) return 0;	/* Check LDIR_FstClusLO */
1687:Middlewares/Third_Party/FatFs/src/ff.c **** 
1688:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = ((dir[LDIR_Ord] & 0x3F) - 1) * 13;	/* Offset in the LFN buffer */
1689:Middlewares/Third_Party/FatFs/src/ff.c **** 
1690:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (wc = 1, s = 0; s < 13; s++) {		/* Process all characters in the entry */
1691:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
1692:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc) {
1693:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= _MAX_LFN || ff_wtoupper(uc) != ff_wtoupper(lfnbuf[i++])) {	/* Compare it */
1694:Middlewares/Third_Party/FatFs/src/ff.c **** 				return 0;					/* Not matched */
1695:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1696:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = uc;
1697:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1698:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
1699:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1700:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1701:Middlewares/Third_Party/FatFs/src/ff.c **** 
1702:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((dir[LDIR_Ord] & LLEF) && wc && lfnbuf[i]) return 0;	/* Last segment matched but different len
1703:Middlewares/Third_Party/FatFs/src/ff.c **** 
1704:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 1;		/* The part of LFN matched */
1705:Middlewares/Third_Party/FatFs/src/ff.c **** }
1706:Middlewares/Third_Party/FatFs/src/ff.c **** 
1707:Middlewares/Third_Party/FatFs/src/ff.c **** 
1708:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 || _USE_LABEL || _FS_EXFAT
1709:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------*/
1710:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Pick a part of file name from an LFN entry */
1711:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------*/
1712:Middlewares/Third_Party/FatFs/src/ff.c **** static
1713:Middlewares/Third_Party/FatFs/src/ff.c **** int pick_lfn (			/* 1:succeeded, 0:buffer overflow or invalid LFN entry */
1714:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR* lfnbuf,		/* Pointer to the LFN working buffer */
1715:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir			/* Pointer to the LFN entry */
1716:Middlewares/Third_Party/FatFs/src/ff.c **** )
1717:Middlewares/Third_Party/FatFs/src/ff.c **** {
1718:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1719:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc, uc;
1720:Middlewares/Third_Party/FatFs/src/ff.c **** 
1721:Middlewares/Third_Party/FatFs/src/ff.c **** 
1722:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ld_word(dir + LDIR_FstClusLO) != 0) return 0;	/* Check LDIR_FstClusLO is 0 */
1723:Middlewares/Third_Party/FatFs/src/ff.c **** 
1724:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = ((dir[LDIR_Ord] & ~LLEF) - 1) * 13;	/* Offset in the LFN buffer */
1725:Middlewares/Third_Party/FatFs/src/ff.c **** 
1726:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (wc = 1, s = 0; s < 13; s++) {		/* Process all characters in the entry */
1727:Middlewares/Third_Party/FatFs/src/ff.c **** 		uc = ld_word(dir + LfnOfs[s]);		/* Pick an LFN character */
1728:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc) {
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 52


1729:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= _MAX_LFN) return 0;	/* Buffer overflow? */
1730:Middlewares/Third_Party/FatFs/src/ff.c **** 			lfnbuf[i++] = wc = uc;			/* Store it */
1731:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1732:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (uc != 0xFFFF) return 0;		/* Check filler */
1733:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1734:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1735:Middlewares/Third_Party/FatFs/src/ff.c **** 
1736:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dir[LDIR_Ord] & LLEF) {				/* Put terminator if it is the last LFN part */
1737:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i >= _MAX_LFN) return 0;		/* Buffer overflow? */
1738:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfnbuf[i] = 0;
1739:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1740:Middlewares/Third_Party/FatFs/src/ff.c **** 
1741:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 1;		/* The part of LFN is valid */
1742:Middlewares/Third_Party/FatFs/src/ff.c **** }
1743:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1744:Middlewares/Third_Party/FatFs/src/ff.c **** 
1745:Middlewares/Third_Party/FatFs/src/ff.c **** 
1746:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
1747:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------*/
1748:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Create an entry of LFN entries */
1749:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------*/
1750:Middlewares/Third_Party/FatFs/src/ff.c **** static
1751:Middlewares/Third_Party/FatFs/src/ff.c **** void put_lfn (
1752:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfn,	/* Pointer to the LFN */
1753:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dir,			/* Pointer to the LFN entry to be created */
1754:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ord,			/* LFN order (1-20) */
1755:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sum			/* Checksum of the corresponding SFN */
1756:Middlewares/Third_Party/FatFs/src/ff.c **** )
1757:Middlewares/Third_Party/FatFs/src/ff.c **** {
1758:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, s;
1759:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc;
1760:Middlewares/Third_Party/FatFs/src/ff.c **** 
1761:Middlewares/Third_Party/FatFs/src/ff.c **** 
1762:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Chksum] = sum;			/* Set checksum */
1763:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Attr] = AM_LFN;		/* Set attribute. LFN entry */
1764:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Type] = 0;
1765:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(dir + LDIR_FstClusLO, 0);
1766:Middlewares/Third_Party/FatFs/src/ff.c **** 
1767:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = (ord - 1) * 13;				/* Get offset in the LFN working buffer */
1768:Middlewares/Third_Party/FatFs/src/ff.c **** 	s = wc = 0;
1769:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1770:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc != 0xFFFF) wc = lfn[i++];	/* Get an effective character */
1771:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(dir + LfnOfs[s], wc);		/* Put it */
1772:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wc == 0) wc = 0xFFFF;		/* Padding characters for left locations */
1773:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (++s < 13);
1774:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (wc == 0xFFFF || !lfn[i]) ord |= LLEF;	/* Last LFN part is the start of LFN sequence */
1775:Middlewares/Third_Party/FatFs/src/ff.c **** 	dir[LDIR_Ord] = ord;			/* Set the LFN order */
1776:Middlewares/Third_Party/FatFs/src/ff.c **** }
1777:Middlewares/Third_Party/FatFs/src/ff.c **** 
1778:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
1779:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_LFN != 0 */
1780:Middlewares/Third_Party/FatFs/src/ff.c **** 
1781:Middlewares/Third_Party/FatFs/src/ff.c **** 
1782:Middlewares/Third_Party/FatFs/src/ff.c **** 
1783:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0 && !_FS_READONLY
1784:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1785:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Create a Numbered SFN                                        */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 53


1786:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1787:Middlewares/Third_Party/FatFs/src/ff.c **** 
1788:Middlewares/Third_Party/FatFs/src/ff.c **** static
1789:Middlewares/Third_Party/FatFs/src/ff.c **** void gen_numname (
1790:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dst,			/* Pointer to the buffer to store numbered SFN */
1791:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* src,	/* Pointer to SFN */
1792:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfn,	/* Pointer to LFN */
1793:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT seq			/* Sequence number */
1794:Middlewares/Third_Party/FatFs/src/ff.c **** )
1795:Middlewares/Third_Party/FatFs/src/ff.c **** {
1796:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ns[8], c;
1797:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j;
1798:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR wc;
1799:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sr;
1800:Middlewares/Third_Party/FatFs/src/ff.c **** 
1801:Middlewares/Third_Party/FatFs/src/ff.c **** 
1802:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(dst, src, 11);
1803:Middlewares/Third_Party/FatFs/src/ff.c **** 
1804:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (seq > 5) {	/* In case of many collisions, generate a hash number instead of sequential number 
1805:Middlewares/Third_Party/FatFs/src/ff.c **** 		sr = seq;
1806:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (*lfn) {	/* Create a CRC */
1807:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = *lfn++;
1808:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = 0; i < 16; i++) {
1809:Middlewares/Third_Party/FatFs/src/ff.c **** 				sr = (sr << 1) + (wc & 1);
1810:Middlewares/Third_Party/FatFs/src/ff.c **** 				wc >>= 1;
1811:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (sr & 0x10000) sr ^= 0x11021;
1812:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
1813:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1814:Middlewares/Third_Party/FatFs/src/ff.c **** 		seq = (UINT)sr;
1815:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1816:Middlewares/Third_Party/FatFs/src/ff.c **** 
1817:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* itoa (hexdecimal) */
1818:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = 7;
1819:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1820:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (BYTE)((seq % 16) + '0');
1821:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c > '9') c += 7;
1822:Middlewares/Third_Party/FatFs/src/ff.c **** 		ns[i--] = c;
1823:Middlewares/Third_Party/FatFs/src/ff.c **** 		seq /= 16;
1824:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (seq);
1825:Middlewares/Third_Party/FatFs/src/ff.c **** 	ns[i] = '~';
1826:Middlewares/Third_Party/FatFs/src/ff.c **** 
1827:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Append the number */
1828:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (j = 0; j < i && dst[j] != ' '; j++) {
1829:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(dst[j])) {
1830:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (j == i - 1) break;
1831:Middlewares/Third_Party/FatFs/src/ff.c **** 			j++;
1832:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1833:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1834:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1835:Middlewares/Third_Party/FatFs/src/ff.c **** 		dst[j++] = (i < 8) ? ns[i++] : ' ';
1836:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (j < 8);
1837:Middlewares/Third_Party/FatFs/src/ff.c **** }
1838:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_LFN != 0 && !_FS_READONLY */
1839:Middlewares/Third_Party/FatFs/src/ff.c **** 
1840:Middlewares/Third_Party/FatFs/src/ff.c **** 
1841:Middlewares/Third_Party/FatFs/src/ff.c **** 
1842:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 54


1843:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1844:Middlewares/Third_Party/FatFs/src/ff.c **** /* FAT-LFN: Calculate checksum of an SFN entry                           */
1845:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1846:Middlewares/Third_Party/FatFs/src/ff.c **** 
1847:Middlewares/Third_Party/FatFs/src/ff.c **** static
1848:Middlewares/Third_Party/FatFs/src/ff.c **** BYTE sum_sfn (
1849:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* dir		/* Pointer to the SFN entry */
1850:Middlewares/Third_Party/FatFs/src/ff.c **** )
1851:Middlewares/Third_Party/FatFs/src/ff.c **** {
1852:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sum = 0;
1853:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n = 11;
1854:Middlewares/Third_Party/FatFs/src/ff.c **** 
1855:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
1856:Middlewares/Third_Party/FatFs/src/ff.c **** 		sum = (sum >> 1) + (sum << 7) + *dir++;
1857:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (--n);
1858:Middlewares/Third_Party/FatFs/src/ff.c **** 	return sum;
1859:Middlewares/Third_Party/FatFs/src/ff.c **** }
1860:Middlewares/Third_Party/FatFs/src/ff.c **** 
1861:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_LFN != 0 */
1862:Middlewares/Third_Party/FatFs/src/ff.c **** 
1863:Middlewares/Third_Party/FatFs/src/ff.c **** 
1864:Middlewares/Third_Party/FatFs/src/ff.c **** 
1865:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
1866:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1867:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Checksum                                                       */
1868:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
1869:Middlewares/Third_Party/FatFs/src/ff.c **** 
1870:Middlewares/Third_Party/FatFs/src/ff.c **** static
1871:Middlewares/Third_Party/FatFs/src/ff.c **** WORD xdir_sum (			/* Get checksum of the directoly block */
1872:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE* dir		/* Directory entry block to be calculated */
1873:Middlewares/Third_Party/FatFs/src/ff.c **** )
1874:Middlewares/Third_Party/FatFs/src/ff.c **** {
1875:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, szblk;
1876:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD sum;
1877:Middlewares/Third_Party/FatFs/src/ff.c **** 
1878:Middlewares/Third_Party/FatFs/src/ff.c **** 
1879:Middlewares/Third_Party/FatFs/src/ff.c **** 	szblk = (dir[XDIR_NumSec] + 1) * SZDIRE;
1880:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = sum = 0; i < szblk; i++) {
1881:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == XDIR_SetSum) {	/* Skip sum field */
1882:Middlewares/Third_Party/FatFs/src/ff.c **** 			i++;
1883:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
1884:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + dir[i];
1885:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1886:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1887:Middlewares/Third_Party/FatFs/src/ff.c **** 	return sum;
1888:Middlewares/Third_Party/FatFs/src/ff.c **** }
1889:Middlewares/Third_Party/FatFs/src/ff.c **** 
1890:Middlewares/Third_Party/FatFs/src/ff.c **** 
1891:Middlewares/Third_Party/FatFs/src/ff.c **** 
1892:Middlewares/Third_Party/FatFs/src/ff.c **** static
1893:Middlewares/Third_Party/FatFs/src/ff.c **** WORD xname_sum (		/* Get check sum (to be used as hash) of the name */
1894:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* name	/* File name to be calculated */
1895:Middlewares/Third_Party/FatFs/src/ff.c **** )
1896:Middlewares/Third_Party/FatFs/src/ff.c **** {
1897:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR chr;
1898:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD sum = 0;
1899:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 55


1900:Middlewares/Third_Party/FatFs/src/ff.c **** 
1901:Middlewares/Third_Party/FatFs/src/ff.c **** 	while ((chr = *name++) != 0) {
1902:Middlewares/Third_Party/FatFs/src/ff.c **** 		chr = ff_wtoupper(chr);		/* File name needs to be ignored case */
1903:Middlewares/Third_Party/FatFs/src/ff.c **** 		sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + (chr & 0xFF);
1904:Middlewares/Third_Party/FatFs/src/ff.c **** 		sum = ((sum & 1) ? 0x8000 : 0) + (sum >> 1) + (chr >> 8);
1905:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1906:Middlewares/Third_Party/FatFs/src/ff.c **** 	return sum;
1907:Middlewares/Third_Party/FatFs/src/ff.c **** }
1908:Middlewares/Third_Party/FatFs/src/ff.c **** 
1909:Middlewares/Third_Party/FatFs/src/ff.c **** 
1910:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _USE_MKFS
1911:Middlewares/Third_Party/FatFs/src/ff.c **** static
1912:Middlewares/Third_Party/FatFs/src/ff.c **** DWORD xsum32 (
1913:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE  dat,	/* Data to be sumed */
1914:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sum	/* Previous value */
1915:Middlewares/Third_Party/FatFs/src/ff.c **** )
1916:Middlewares/Third_Party/FatFs/src/ff.c **** {
1917:Middlewares/Third_Party/FatFs/src/ff.c **** 	sum = ((sum & 1) ? 0x80000000 : 0) + (sum >> 1) + dat;
1918:Middlewares/Third_Party/FatFs/src/ff.c **** 	return sum;
1919:Middlewares/Third_Party/FatFs/src/ff.c **** }
1920:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1921:Middlewares/Third_Party/FatFs/src/ff.c **** 
1922:Middlewares/Third_Party/FatFs/src/ff.c **** 
1923:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2
1924:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------*/
1925:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Get object information from a directory block */
1926:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------------*/
1927:Middlewares/Third_Party/FatFs/src/ff.c **** 
1928:Middlewares/Third_Party/FatFs/src/ff.c **** static
1929:Middlewares/Third_Party/FatFs/src/ff.c **** void get_xdir_info (
1930:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dirb,			/* Pointer to the direcotry entry block 85+C0+C1s */
1931:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno		/* Buffer to store the extracted file information */
1932:Middlewares/Third_Party/FatFs/src/ff.c **** )
1933:Middlewares/Third_Party/FatFs/src/ff.c **** {
1934:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT di, si;
1935:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w;
1936:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
1937:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nc;
1938:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1939:Middlewares/Third_Party/FatFs/src/ff.c **** 
1940:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get file name */
1941:Middlewares/Third_Party/FatFs/src/ff.c **** 	di = 0;
1942:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
1943:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (si = SZDIRE * 2; di < dirb[XDIR_NumName]; si += 2, di++) {
1944:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((si % SZDIRE) == 0) si += 2;		/* Skip entry type field */
1945:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = ld_word(dirb + si);					/* Get a character */
1946:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (di >= _MAX_LFN) { di = 0; break; }	/* Buffer overflow --> inaccessible object name */
1947:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[di] = w;						/* Store it */
1948:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1949:Middlewares/Third_Party/FatFs/src/ff.c **** #else
1950:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (si = SZDIRE * 2, nc = 0; nc < dirb[XDIR_NumName]; si += 2, nc++) {
1951:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((si % SZDIRE) == 0) si += 2;		/* Skip entry type field */
1952:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = ff_convert(ld_word(dirb + si), 0);	/* Get a character and Unicode -> OEM */
1953:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_DF1S && w >= 0x100) {				/* Is it a double byte char? (always false at SBCS cfg) */
1954:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno->fname[di++] = (char)(w >> 8);	/* Put 1st byte of the DBC */
1955:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
1956:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w == 0 || di >= _MAX_LFN) { di = 0; break; }	/* Invalid char or buffer overflow --> inaccessi
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 56


1957:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[di++] = (char)w;
1958:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
1959:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
1960:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (di == 0) fno->fname[di++] = '?';	/* Inaccessible object name? */
1961:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fname[di] = 0;						/* Terminate file name */
1962:Middlewares/Third_Party/FatFs/src/ff.c **** 
1963:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->altname[0] = 0;							/* No SFN */
1964:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fattrib = dirb[XDIR_Attr];					/* Attribute */
1965:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fsize = (fno->fattrib & AM_DIR) ? 0 : ld_qword(dirb + XDIR_FileSize);	/* Size */
1966:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->ftime = ld_word(dirb + XDIR_ModTime + 0);	/* Time */
1967:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fdate = ld_word(dirb + XDIR_ModTime + 2);	/* Date */
1968:Middlewares/Third_Party/FatFs/src/ff.c **** }
1969:Middlewares/Third_Party/FatFs/src/ff.c **** 
1970:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 */
1971:Middlewares/Third_Party/FatFs/src/ff.c **** 
1972:Middlewares/Third_Party/FatFs/src/ff.c **** 
1973:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------*/
1974:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Get a directry entry block */
1975:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------*/
1976:Middlewares/Third_Party/FatFs/src/ff.c **** 
1977:Middlewares/Third_Party/FatFs/src/ff.c **** static
1978:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT load_xdir (	/* FR_INT_ERR: invalid entry block */
1979:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp			/* Pointer to the reading direcotry object pointing the 85 entry */
1980:Middlewares/Third_Party/FatFs/src/ff.c **** )
1981:Middlewares/Third_Party/FatFs/src/ff.c **** {
1982:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
1983:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, sz_ent;
1984:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dirb = dp->obj.fs->dirbuf;	/* Pointer to the on-memory direcotry entry block 85+C0+C1s */
1985:Middlewares/Third_Party/FatFs/src/ff.c **** 
1986:Middlewares/Third_Party/FatFs/src/ff.c **** 
1987:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Load 85 entry */
1988:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = move_window(dp->obj.fs, dp->sect);
1989:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
1990:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->dir[XDIR_Type] != 0x85) return FR_INT_ERR;
1991:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(dirb + 0, dp->dir, SZDIRE);
1992:Middlewares/Third_Party/FatFs/src/ff.c **** 	sz_ent = (dirb[XDIR_NumSec] + 1) * SZDIRE;
1993:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sz_ent < 3 * SZDIRE || sz_ent > 19 * SZDIRE) return FR_INT_ERR;
1994:Middlewares/Third_Party/FatFs/src/ff.c **** 
1995:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Load C0 entry */
1996:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_next(dp, 0);
1997:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
1998:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = move_window(dp->obj.fs, dp->sect);
1999:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
2000:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->dir[XDIR_Type] != 0xC0) return FR_INT_ERR;
2001:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(dirb + SZDIRE, dp->dir, SZDIRE);
2002:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (MAXDIRB(dirb[XDIR_NumName]) > sz_ent) return FR_INT_ERR;
2003:Middlewares/Third_Party/FatFs/src/ff.c **** 
2004:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Load C1 entries */
2005:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = SZDIRE * 2;	/* C1 offset */
2006:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
2007:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);
2008:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
2009:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->obj.fs, dp->sect);
2010:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
2011:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->dir[XDIR_Type] != 0xC1) return FR_INT_ERR;
2012:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i < MAXDIRB(_MAX_LFN)) mem_cpy(dirb + i, dp->dir, SZDIRE);
2013:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while ((i += SZDIRE) < sz_ent);
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 57


2014:Middlewares/Third_Party/FatFs/src/ff.c **** 
2015:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Sanity check (do it when accessible object name) */
2016:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i <= MAXDIRB(_MAX_LFN)) {
2017:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (xdir_sum(dirb) != ld_word(dirb + XDIR_SetSum)) return FR_INT_ERR;
2018:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2019:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2020:Middlewares/Third_Party/FatFs/src/ff.c **** }
2021:Middlewares/Third_Party/FatFs/src/ff.c **** 
2022:Middlewares/Third_Party/FatFs/src/ff.c **** 
2023:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY || _FS_RPATH != 0
2024:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------*/
2025:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Load the object's directory entry block */
2026:Middlewares/Third_Party/FatFs/src/ff.c **** /*------------------------------------------------*/
2027:Middlewares/Third_Party/FatFs/src/ff.c **** static
2028:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT load_obj_dir (
2029:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Blank directory object to be used to access containing direcotry */
2030:Middlewares/Third_Party/FatFs/src/ff.c **** 	const _FDID* obj	/* Object with its containing directory information */
2031:Middlewares/Third_Party/FatFs/src/ff.c **** )
2032:Middlewares/Third_Party/FatFs/src/ff.c **** {
2033:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2034:Middlewares/Third_Party/FatFs/src/ff.c **** 
2035:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Open object containing directory */
2036:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->obj.fs = obj->fs;
2037:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->obj.sclust = obj->c_scl;
2038:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->obj.stat = (BYTE)obj->c_size;
2039:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->obj.objsize = obj->c_size & 0xFFFFFF00;
2040:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->blk_ofs = obj->c_ofs;
2041:Middlewares/Third_Party/FatFs/src/ff.c **** 
2042:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, dp->blk_ofs);	/* Goto object's entry block */
2043:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2044:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = load_xdir(dp);		/* Load the object's entry block */
2045:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2046:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2047:Middlewares/Third_Party/FatFs/src/ff.c **** }
2048:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2049:Middlewares/Third_Party/FatFs/src/ff.c **** 
2050:Middlewares/Third_Party/FatFs/src/ff.c **** 
2051:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2052:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------*/
2053:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Store the directory block to the media */
2054:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------*/
2055:Middlewares/Third_Party/FatFs/src/ff.c **** static
2056:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT store_xdir (
2057:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp				/* Pointer to the direcotry object */
2058:Middlewares/Third_Party/FatFs/src/ff.c **** )
2059:Middlewares/Third_Party/FatFs/src/ff.c **** {
2060:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2061:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nent;
2062:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dirb = dp->obj.fs->dirbuf;	/* Pointer to the direcotry entry block 85+C0+C1s */
2063:Middlewares/Third_Party/FatFs/src/ff.c **** 
2064:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create set sum */
2065:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(dirb + XDIR_SetSum, xdir_sum(dirb));
2066:Middlewares/Third_Party/FatFs/src/ff.c **** 	nent = dirb[XDIR_NumSec] + 1;
2067:Middlewares/Third_Party/FatFs/src/ff.c **** 
2068:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Store the set of directory to the volume */
2069:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, dp->blk_ofs);
2070:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (res == FR_OK) {
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 58


2071:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(dp->obj.fs, dp->sect);
2072:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
2073:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(dp->dir, dirb, SZDIRE);
2074:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->obj.fs->wflag = 1;
2075:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (--nent == 0) break;
2076:Middlewares/Third_Party/FatFs/src/ff.c **** 		dirb += SZDIRE;
2077:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);
2078:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2079:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (res == FR_OK || res == FR_DISK_ERR) ? res : FR_INT_ERR;
2080:Middlewares/Third_Party/FatFs/src/ff.c **** }
2081:Middlewares/Third_Party/FatFs/src/ff.c **** 
2082:Middlewares/Third_Party/FatFs/src/ff.c **** 
2083:Middlewares/Third_Party/FatFs/src/ff.c **** 
2084:Middlewares/Third_Party/FatFs/src/ff.c **** /*-------------------------------------------*/
2085:Middlewares/Third_Party/FatFs/src/ff.c **** /* exFAT: Create a new directory enrty block */
2086:Middlewares/Third_Party/FatFs/src/ff.c **** /*-------------------------------------------*/
2087:Middlewares/Third_Party/FatFs/src/ff.c **** 
2088:Middlewares/Third_Party/FatFs/src/ff.c **** static
2089:Middlewares/Third_Party/FatFs/src/ff.c **** void create_xdir (
2090:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE* dirb,			/* Pointer to the direcotry entry block buffer */
2091:Middlewares/Third_Party/FatFs/src/ff.c **** 	const WCHAR* lfn	/* Pointer to the nul terminated file name */
2092:Middlewares/Third_Party/FatFs/src/ff.c **** )
2093:Middlewares/Third_Party/FatFs/src/ff.c **** {
2094:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
2095:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE nb, nc;
2096:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR chr;
2097:Middlewares/Third_Party/FatFs/src/ff.c **** 
2098:Middlewares/Third_Party/FatFs/src/ff.c **** 
2099:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create 85+C0 entry */
2100:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(dirb, 0, 2 * SZDIRE);
2101:Middlewares/Third_Party/FatFs/src/ff.c **** 	dirb[XDIR_Type] = 0x85;
2102:Middlewares/Third_Party/FatFs/src/ff.c **** 	dirb[XDIR_Type + SZDIRE] = 0xC0;
2103:Middlewares/Third_Party/FatFs/src/ff.c **** 
2104:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create C1 entries */
2105:Middlewares/Third_Party/FatFs/src/ff.c **** 	nc = 0; nb = 1; chr = 1; i = SZDIRE * 2;
2106:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
2107:Middlewares/Third_Party/FatFs/src/ff.c **** 		dirb[i++] = 0xC1; dirb[i++] = 0;	/* Entry type C1 */
2108:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {	/* Fill name field */
2109:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (chr && (chr = lfn[nc]) != 0) nc++;	/* Get a character if exist */
2110:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(dirb + i, chr); 		/* Store it */
2111:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while ((i += 2) % SZDIRE != 0);
2112:Middlewares/Third_Party/FatFs/src/ff.c **** 		nb++;
2113:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (lfn[nc]);	/* Fill next entry if any char follows */
2114:Middlewares/Third_Party/FatFs/src/ff.c **** 
2115:Middlewares/Third_Party/FatFs/src/ff.c **** 	dirb[XDIR_NumName] = nc;	/* Set name length */
2116:Middlewares/Third_Party/FatFs/src/ff.c **** 	dirb[XDIR_NumSec] = nb;		/* Set block length */
2117:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(dirb + XDIR_NameHash, xname_sum(lfn));	/* Set name hash */
2118:Middlewares/Third_Party/FatFs/src/ff.c **** }
2119:Middlewares/Third_Party/FatFs/src/ff.c **** 
2120:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
2121:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_EXFAT */
2122:Middlewares/Third_Party/FatFs/src/ff.c **** 
2123:Middlewares/Third_Party/FatFs/src/ff.c **** 
2124:Middlewares/Third_Party/FatFs/src/ff.c **** 
2125:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 || _USE_LABEL || _FS_EXFAT
2126:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2127:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read an object from the directory                                     */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 59


2128:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2129:Middlewares/Third_Party/FatFs/src/ff.c **** 
2130:Middlewares/Third_Party/FatFs/src/ff.c **** static
2131:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_read (
2132:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the directory object */
2133:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol			/* Filtered by 0:file/directory or 1:volume label */
2134:Middlewares/Third_Party/FatFs/src/ff.c **** )
2135:Middlewares/Third_Party/FatFs/src/ff.c **** {
2136:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_NO_FILE;
2137:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
2138:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, c;
2139:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2140:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ord = 0xFF, sum = 0xFF;
2141:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2142:Middlewares/Third_Party/FatFs/src/ff.c **** 
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (dp->sect) {
2144:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
2145:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];	/* Test for the entry type */
2147:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) {
2148:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_NO_FILE; break; /* Reached to end of the directory */
2149:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2150:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2151:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2152:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (_USE_LABEL && vol) {
2153:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c == 0x83) break;	/* Volume label entry? */
2154:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2155:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c == 0x85) {		/* Start of the file entry block? */
2156:Middlewares/Third_Party/FatFs/src/ff.c **** 					dp->blk_ofs = dp->dptr;	/* Get location of the block */
2157:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = load_xdir(dp);	/* Load the entry block */
2158:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
2159:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->obj.attr = fs->dirbuf[XDIR_Attr] & AM_MASK;	/* Get attribute */
2160:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2161:Middlewares/Third_Party/FatFs/src/ff.c **** 					break;
2162:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2163:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2164:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else
2165:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2166:Middlewares/Third_Party/FatFs/src/ff.c **** 		{	/* On the FAT12/16/32 volume */
2167:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->obj.attr = a = dp->dir[DIR_Attr] & AM_MASK;	/* Get attribute */
2168:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2169:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == DDEM || c == '.' || (int)((a & ~AM_ARC) == AM_VOL) != vol) {	/* An entry without valid 
2170:Middlewares/Third_Party/FatFs/src/ff.c **** 				ord = 0xFF;
2171:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2172:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (a == AM_LFN) {			/* An LFN entry is found */
2173:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c & LLEF) {			/* Is it start of an LFN sequence? */
2174:Middlewares/Third_Party/FatFs/src/ff.c **** 						sum = dp->dir[LDIR_Chksum];
2175:Middlewares/Third_Party/FatFs/src/ff.c **** 						c &= (BYTE)~LLEF; ord = c;
2176:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = dp->dptr;
2177:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2178:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Check LFN validity and capture it */
2179:Middlewares/Third_Party/FatFs/src/ff.c **** 					ord = (c == ord && sum == dp->dir[LDIR_Chksum] && pick_lfn(fs->lfnbuf, dp->dir)) ? ord - 1 : 0
2180:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* An SFN entry is found */
2181:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ord || sum != sum_sfn(dp->dir)) {	/* Is there a valid LFN? */
2182:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = 0xFFFFFFFF;			/* It has no LFN. */
2183:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2184:Middlewares/Third_Party/FatFs/src/ff.c **** 					break;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 60


2185:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2186:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2187:Middlewares/Third_Party/FatFs/src/ff.c **** #else		/* Non LFN configuration */
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c != DDEM && c != '.' && a != AM_LFN && (int)((a & ~AM_ARC) == AM_VOL) == vol) {	/* Is it a 
2189:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
2190:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2191:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2192:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2193:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);		/* Next entry */
2194:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
2195:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2196:Middlewares/Third_Party/FatFs/src/ff.c **** 
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) dp->sect = 0;		/* Terminate the read operation on error or EOT */
2198:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2199:Middlewares/Third_Party/FatFs/src/ff.c **** }
2200:Middlewares/Third_Party/FatFs/src/ff.c **** 
2201:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_MINIMIZE <= 1 || _USE_LABEL || _FS_RPATH >= 2 */
2202:Middlewares/Third_Party/FatFs/src/ff.c **** 
2203:Middlewares/Third_Party/FatFs/src/ff.c **** 
2204:Middlewares/Third_Party/FatFs/src/ff.c **** 
2205:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2206:Middlewares/Third_Party/FatFs/src/ff.c **** /* Directory handling - Find an object in the directory                  */
2207:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2208:Middlewares/Third_Party/FatFs/src/ff.c **** 
2209:Middlewares/Third_Party/FatFs/src/ff.c **** static
2210:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_find (	/* FR_OK(0):succeeded, !=0:error */
2211:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp			/* Pointer to the directory object with the file name */
2212:Middlewares/Third_Party/FatFs/src/ff.c **** )
2213:Middlewares/Third_Party/FatFs/src/ff.c **** {
2214:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2215:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
2216:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE c;
2217:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2218:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, ord, sum;
2219:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2220:Middlewares/Third_Party/FatFs/src/ff.c **** 
2221:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(dp, 0);			/* Rewind directory object */
2222:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
2223:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2224:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2225:Middlewares/Third_Party/FatFs/src/ff.c **** 		BYTE nc;
2226:Middlewares/Third_Party/FatFs/src/ff.c **** 		UINT di, ni;
2227:Middlewares/Third_Party/FatFs/src/ff.c **** 		WORD hash = xname_sum(fs->lfnbuf);		/* Hash value of the name to find */
2228:Middlewares/Third_Party/FatFs/src/ff.c **** 
2229:Middlewares/Third_Party/FatFs/src/ff.c **** 		while ((res = dir_read(dp, 0)) == FR_OK) {	/* Read an item */
2230:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_LFN < 255
2231:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->dirbuf[XDIR_NumName] > _MAX_LFN) continue;			/* Skip comparison if inaccessible object n
2232:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2233:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->dirbuf + XDIR_NameHash) != hash) continue;	/* Skip comparison if hash mismatched
2234:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (nc = fs->dirbuf[XDIR_NumName], di = SZDIRE * 2, ni = 0; nc; nc--, di += 2, ni++) {	/* Compa
2235:Middlewares/Third_Party/FatFs/src/ff.c **** 				if ((di % SZDIRE) == 0) di += 2;
2236:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ff_wtoupper(ld_word(fs->dirbuf + di)) != ff_wtoupper(fs->lfnbuf[ni])) break;
2237:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2238:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (nc == 0 && !fs->lfnbuf[ni]) break;	/* Name matched? */
2239:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2240:Middlewares/Third_Party/FatFs/src/ff.c **** 		return res;
2241:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 61


2242:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2243:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* On the FAT12/16/32 volume */
2244:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2245:Middlewares/Third_Party/FatFs/src/ff.c **** 	ord = sum = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2246:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2247:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
2248:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
2249:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
2250:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];
2251:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
2252:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2253:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->obj.attr = a = dp->dir[DIR_Attr] & AM_MASK;
2254:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == DDEM || ((a & AM_VOL) && a != AM_LFN)) {	/* An entry without valid data */
2255:Middlewares/Third_Party/FatFs/src/ff.c **** 			ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2256:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
2257:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (a == AM_LFN) {			/* An LFN entry is found */
2258:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_NOLFN)) {
2259:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c & LLEF) {		/* Is it start of LFN sequence? */
2260:Middlewares/Third_Party/FatFs/src/ff.c **** 						sum = dp->dir[LDIR_Chksum];
2261:Middlewares/Third_Party/FatFs/src/ff.c **** 						c &= (BYTE)~LLEF; ord = c;	/* LFN start order */
2262:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->blk_ofs = dp->dptr;	/* Start offset of LFN */
2263:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2264:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Check validity of the LFN entry and compare it with given name */
2265:Middlewares/Third_Party/FatFs/src/ff.c **** 					ord = (c == ord && sum == dp->dir[LDIR_Chksum] && cmp_lfn(fs->lfnbuf, dp->dir)) ? ord - 1 : 0x
2266:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2267:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* An SFN entry is found */
2268:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!ord && sum == sum_sfn(dp->dir)) break;	/* LFN matched? */
2269:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!(dp->fn[NSFLAG] & NS_LOSS) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* SFN matched? */
2270:Middlewares/Third_Party/FatFs/src/ff.c **** 				ord = 0xFF; dp->blk_ofs = 0xFFFFFFFF;	/* Reset LFN sequence */
2271:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2272:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2273:Middlewares/Third_Party/FatFs/src/ff.c **** #else		/* Non LFN configuration */
2274:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->obj.attr = dp->dir[DIR_Attr] & AM_MASK;
2275:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(dp->dir[DIR_Attr] & AM_VOL) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* Is it a valid entry
2276:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2277:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_next(dp, 0);	/* Next entry */
2278:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (res == FR_OK);
2279:Middlewares/Third_Party/FatFs/src/ff.c **** 
2280:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2281:Middlewares/Third_Party/FatFs/src/ff.c **** }
2282:Middlewares/Third_Party/FatFs/src/ff.c **** 
2283:Middlewares/Third_Party/FatFs/src/ff.c **** 
2284:Middlewares/Third_Party/FatFs/src/ff.c **** 
2285:Middlewares/Third_Party/FatFs/src/ff.c **** 
2286:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
2287:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2288:Middlewares/Third_Party/FatFs/src/ff.c **** /* Register an object to the directory                                   */
2289:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2290:Middlewares/Third_Party/FatFs/src/ff.c **** 
2291:Middlewares/Third_Party/FatFs/src/ff.c **** static
2292:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_register (	/* FR_OK:succeeded, FR_DENIED:no free entry or too many SFN collision, FR_DI
2293:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp				/* Target directory with object name to be created */
2294:Middlewares/Third_Party/FatFs/src/ff.c **** )
2295:Middlewares/Third_Party/FatFs/src/ff.c **** {
2296:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2297:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
2298:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 62


2299:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n, nlen, nent;
2300:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE sn[12], sum;
2301:Middlewares/Third_Party/FatFs/src/ff.c **** 
2302:Middlewares/Third_Party/FatFs/src/ff.c **** 
2303:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->fn[NSFLAG] & (NS_DOT | NS_NONAME)) return FR_INVALID_NAME;	/* Check name validity */
2304:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (nlen = 0; fs->lfnbuf[nlen]; nlen++) ;	/* Get lfn length */
2305:Middlewares/Third_Party/FatFs/src/ff.c **** 
2306:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2307:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2308:Middlewares/Third_Party/FatFs/src/ff.c **** 		DIR dj;
2309:Middlewares/Third_Party/FatFs/src/ff.c **** 
2310:Middlewares/Third_Party/FatFs/src/ff.c **** 		nent = (nlen + 14) / 15 + 2;	/* Number of entries to allocate (85+C0+C1s) */
2311:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_alloc(dp, nent);		/* Allocate entries */
2312:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
2313:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->blk_ofs = dp->dptr - SZDIRE * (nent - 1);	/* Set the allocated entry block offset */
2314:Middlewares/Third_Party/FatFs/src/ff.c **** 
2315:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->obj.sclust != 0 && (dp->obj.stat & 4)) {	/* Has the sub-directory been stretched? */
2316:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->obj.objsize += (DWORD)fs->csize * SS(fs);	/* Increase the directory size by cluster size */
2317:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = fill_first_frag(&dp->obj);				/* Fill first fragment on the FAT if needed */
2318:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
2319:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = fill_last_frag(&dp->obj, dp->clust, 0xFFFFFFFF);	/* Fill last fragment on the FAT if neede
2320:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
2321:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = load_obj_dir(&dj, &dp->obj);				/* Load the object status */
2322:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
2323:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_qword(fs->dirbuf + XDIR_FileSize, dp->obj.objsize);		/* Update the allocation status */
2324:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_qword(fs->dirbuf + XDIR_ValidFileSize, dp->obj.objsize);
2325:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbuf[XDIR_GenFlags] = dp->obj.stat | 1;
2326:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = store_xdir(&dj);							/* Store the object status */
2327:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
2328:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2329:Middlewares/Third_Party/FatFs/src/ff.c **** 
2330:Middlewares/Third_Party/FatFs/src/ff.c **** 		create_xdir(fs->dirbuf, fs->lfnbuf);	/* Create on-memory directory block to be written later */
2331:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_OK;
2332:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2333:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2334:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* On the FAT12/16/32 volume */
2335:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_cpy(sn, dp->fn, 12);
2336:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sn[NSFLAG] & NS_LOSS) {			/* When LFN is out of 8.3 format, generate a numbered name */
2337:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = NS_NOLFN;		/* Find only SFN */
2338:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (n = 1; n < 100; n++) {
2339:Middlewares/Third_Party/FatFs/src/ff.c **** 			gen_numname(dp->fn, sn, fs->lfnbuf, n);	/* Generate a numbered name */
2340:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Check if the name collides with existing SFN */
2341:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
2342:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2343:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n == 100) return FR_DENIED;		/* Abort if too many collisions */
2344:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_NO_FILE) return res;	/* Abort if the result is other than 'not collided' */
2345:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = sn[NSFLAG];
2346:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2347:Middlewares/Third_Party/FatFs/src/ff.c **** 
2348:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create an SFN with/without LFNs. */
2349:Middlewares/Third_Party/FatFs/src/ff.c **** 	nent = (sn[NSFLAG] & NS_LFN) ? (nlen + 12) / 13 + 1 : 1;	/* Number of entries to allocate */
2350:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_alloc(dp, nent);		/* Allocate entries */
2351:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && --nent) {	/* Set LFN entry if needed */
2352:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, dp->dptr - nent * SZDIRE);
2353:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
2354:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = sum_sfn(dp->fn);	/* Checksum value of the SFN tied to the LFN */
2355:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {					/* Store LFN entries in bottom first */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 63


2356:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = move_window(fs, dp->sect);
2357:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
2358:Middlewares/Third_Party/FatFs/src/ff.c **** 				put_lfn(fs->lfnbuf, dp->dir, (BYTE)nent, sum);
2359:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->wflag = 1;
2360:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);	/* Next entry */
2361:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (res == FR_OK && --nent);
2362:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2364:Middlewares/Third_Party/FatFs/src/ff.c **** 
2365:Middlewares/Third_Party/FatFs/src/ff.c **** #else	/* Non LFN configuration */
2366:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_alloc(dp, 1);		/* Allocate an entry for SFN */
2367:Middlewares/Third_Party/FatFs/src/ff.c **** 
2368:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2369:Middlewares/Third_Party/FatFs/src/ff.c **** 
2370:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Set SFN entry */
2371:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2372:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
2373:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
2374:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZDIRE);	/* Clean the entry */
2375:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(dp->dir + DIR_Name, dp->fn, 11);	/* Put SFN */
2376:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2377:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->dir[DIR_NTres] = dp->fn[NSFLAG] & (NS_BODY | NS_EXT);	/* Put NT flag */
2378:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2379:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
2380:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2381:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2382:Middlewares/Third_Party/FatFs/src/ff.c **** 
2383:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2384:Middlewares/Third_Party/FatFs/src/ff.c **** }
2385:Middlewares/Third_Party/FatFs/src/ff.c **** 
2386:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
2387:Middlewares/Third_Party/FatFs/src/ff.c **** 
2388:Middlewares/Third_Party/FatFs/src/ff.c **** 
2389:Middlewares/Third_Party/FatFs/src/ff.c **** 
2390:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE == 0
2391:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2392:Middlewares/Third_Party/FatFs/src/ff.c **** /* Remove an object from the directory                                   */
2393:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2394:Middlewares/Third_Party/FatFs/src/ff.c **** 
2395:Middlewares/Third_Party/FatFs/src/ff.c **** static
2396:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT dir_remove (	/* FR_OK:Succeeded, FR_DISK_ERR:A disk error */
2397:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp				/* Directory object pointing the entry to be removed */
2398:Middlewares/Third_Party/FatFs/src/ff.c **** )
2399:Middlewares/Third_Party/FatFs/src/ff.c **** {
2400:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
2401:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
2402:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2403:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD last = dp->dptr;
2404:Middlewares/Third_Party/FatFs/src/ff.c **** 
2405:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = (dp->blk_ofs == 0xFFFFFFFF) ? FR_OK : dir_sdi(dp, dp->blk_ofs);	/* Goto top of the entry blo
2406:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2407:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
2408:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, dp->sect);
2409:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
2410:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Mark an entry 'deleted' */
2411:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (_FS_EXFAT && fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2412:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->dir[XDIR_Type] &= 0x7F;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 64


2413:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* On the FAT12/16/32 volume */
2414:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->dir[DIR_Name] = DDEM;
2415:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2416:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
2417:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dp->dptr >= last) break;	/* If reached last entry then all entries of the object has been de
2418:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_next(dp, 0);	/* Next entry */
2419:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);
2420:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_INT_ERR;
2421:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2422:Middlewares/Third_Party/FatFs/src/ff.c **** #else			/* Non LFN configuration */
2423:Middlewares/Third_Party/FatFs/src/ff.c **** 
2424:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = move_window(fs, dp->sect);
2425:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
2426:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->dir[DIR_Name] = DDEM;
2427:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->wflag = 1;
2428:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2430:Middlewares/Third_Party/FatFs/src/ff.c **** 
2431:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2432:Middlewares/Third_Party/FatFs/src/ff.c **** }
2433:Middlewares/Third_Party/FatFs/src/ff.c **** 
2434:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY && _FS_MINIMIZE == 0 */
2435:Middlewares/Third_Party/FatFs/src/ff.c **** 
2436:Middlewares/Third_Party/FatFs/src/ff.c **** 
2437:Middlewares/Third_Party/FatFs/src/ff.c **** 
2438:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1 || _FS_RPATH >= 2
2439:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2440:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get file information from directory entry                             */
2441:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2442:Middlewares/Third_Party/FatFs/src/ff.c **** 
2443:Middlewares/Third_Party/FatFs/src/ff.c **** static
2444:Middlewares/Third_Party/FatFs/src/ff.c **** void get_fileinfo (		/* No return code */
2445:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
2446:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno	 	/* Pointer to the file information to be filled */
2447:Middlewares/Third_Party/FatFs/src/ff.c **** )
2448:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1135              		.loc 1 2448 1 is_stmt 1 view -0
 1136              		.cfi_startproc
 1137              		@ args = 0, pretend = 0, frame = 0
 1138              		@ frame_needed = 0, uses_anonymous_args = 0
 1139              		.loc 1 2448 1 is_stmt 0 view .LVU322
 1140 0000 38B5     		push	{r3, r4, r5, lr}
 1141              	.LCFI12:
 1142              		.cfi_def_cfa_offset 16
 1143              		.cfi_offset 3, -16
 1144              		.cfi_offset 4, -12
 1145              		.cfi_offset 5, -8
 1146              		.cfi_offset 14, -4
2449:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j;
 1147              		.loc 1 2449 2 is_stmt 1 view .LVU323
2450:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c;
 1148              		.loc 1 2450 2 view .LVU324
2451:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tm;
 1149              		.loc 1 2451 2 view .LVU325
2452:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
2453:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w, lfv;
2454:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 65


2455:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2456:Middlewares/Third_Party/FatFs/src/ff.c **** 
2457:Middlewares/Third_Party/FatFs/src/ff.c **** 
2458:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fname[0] = 0;		/* Invaidate file info */
 1150              		.loc 1 2458 2 view .LVU326
 1151              		.loc 1 2458 16 is_stmt 0 view .LVU327
 1152 0002 0023     		movs	r3, #0
 1153 0004 4B72     		strb	r3, [r1, #9]
2459:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect) return;	/* Exit if read pointer has reached end of directory */
 1154              		.loc 1 2459 2 is_stmt 1 view .LVU328
 1155              		.loc 1 2459 9 is_stmt 0 view .LVU329
 1156 0006 C369     		ldr	r3, [r0, #28]
 1157              		.loc 1 2459 5 view .LVU330
 1158 0008 73B3     		cbz	r3, .L99
 1159 000a 0546     		mov	r5, r0
 1160 000c 0C46     		mov	r4, r1
2460:Middlewares/Third_Party/FatFs/src/ff.c **** 
2461:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2462:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2463:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
2464:Middlewares/Third_Party/FatFs/src/ff.c **** 		get_xdir_info(fs->dirbuf, fno);
2465:Middlewares/Third_Party/FatFs/src/ff.c **** 		return;
2466:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
2467:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2468:Middlewares/Third_Party/FatFs/src/ff.c **** 	{	/* On the FAT12/16/32 volume */
2469:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->blk_ofs != 0xFFFFFFFF) {	/* Get LFN if available */
2470:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = j = 0;
2471:Middlewares/Third_Party/FatFs/src/ff.c **** 			while ((w = fs->lfnbuf[j++]) != 0) {	/* Get an LFN character */
2472:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
2473:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = ff_convert(w, 0);		/* Unicode -> OEM */
2474:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (w == 0) { i = 0; break; }	/* No LFN if it could not be converted */
2475:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (_DF1S && w >= 0x100) {	/* Put 1st byte if it is a DBC (always false at SBCS cfg) */
2476:Middlewares/Third_Party/FatFs/src/ff.c **** 					fno->fname[i++] = (char)(w >> 8);
2477:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2478:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2479:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i >= _MAX_LFN) { i = 0; break; }	/* No LFN if buffer overflow */
2480:Middlewares/Third_Party/FatFs/src/ff.c **** 				fno->fname[i++] = (TCHAR)w;
2481:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2482:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno->fname[i] = 0;	/* Terminate the LFN */
2483:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2484:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2485:Middlewares/Third_Party/FatFs/src/ff.c **** 
2486:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = j = 0;
2487:Middlewares/Third_Party/FatFs/src/ff.c **** 	lfv = fno->fname[i];	/* LFN is exist if non-zero */
2488:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (i < 11) {		/* Copy name body and extension */
2489:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (TCHAR)dp->dir[i++];
2490:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == ' ') continue;				/* Skip padding spaces */
2491:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
2492:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) {						/* Insert a . if extension is exist */
2493:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!lfv) fno->fname[j] = '.';
2494:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno->altname[j++] = '.';
2495:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2496:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
2497:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(c) && i != 8 && i != 11 && IsDBCS2(dp->dir[i])) {
2498:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = c << 8 | dp->dir[i++];
2499:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2500:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = ff_convert(c, 1);	/* OEM -> Unicode */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 66


2501:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!c) c = '?';
2502:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2503:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->altname[j] = c;
2504:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!lfv) {
2505:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsUpper(c) && (dp->dir[DIR_NTres] & ((i >= 9) ? NS_EXT : NS_BODY))) {
2506:Middlewares/Third_Party/FatFs/src/ff.c **** 				c += 0x20;			/* To lower */
2507:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2508:Middlewares/Third_Party/FatFs/src/ff.c **** 			fno->fname[j] = c;
2509:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2510:Middlewares/Third_Party/FatFs/src/ff.c **** 		j++;
2511:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2512:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!lfv) {
2513:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j] = 0;
2514:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!dp->dir[DIR_NTres]) j = 0;	/* Altname is no longer needed if neither LFN nor case info is ex
2515:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2516:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->altname[j] = 0;	/* Terminate the SFN */
2517:Middlewares/Third_Party/FatFs/src/ff.c **** 
2518:Middlewares/Third_Party/FatFs/src/ff.c **** #else	/* Non-LFN configuration */
2519:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = j = 0;
 1161              		.loc 1 2519 8 view .LVU331
 1162 000e 0022     		movs	r2, #0
 1163              		.loc 1 2519 4 view .LVU332
 1164 0010 1346     		mov	r3, r2
 1165 0012 06E0     		b	.L101
 1166              	.LVL115:
 1167              	.L103:
2520:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (i < 11) {		/* Copy name body and extension */
2521:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (TCHAR)dp->dir[i++];
2522:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == ' ') continue;				/* Skip padding spaces */
2523:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
2524:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) fno->fname[j++] = '.';	/* Insert a . if extension is exist */
 1168              		.loc 1 2524 3 is_stmt 1 view .LVU333
 1169              		.loc 1 2524 6 is_stmt 0 view .LVU334
 1170 0014 BCF1090F 		cmp	ip, #9
 1171 0018 0FD0     		beq	.L108
 1172              	.L104:
2525:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j++] = c;
 1173              		.loc 1 2525 3 is_stmt 1 view .LVU335
 1174              	.LVL116:
 1175              		.loc 1 2525 19 is_stmt 0 view .LVU336
 1176 001a A118     		adds	r1, r4, r2
 1177 001c 4B72     		strb	r3, [r1, #9]
 1178              		.loc 1 2525 15 view .LVU337
 1179 001e 0132     		adds	r2, r2, #1
 1180              	.LVL117:
 1181              	.L102:
 1182              		.loc 1 2525 15 view .LVU338
 1183 0020 6346     		mov	r3, ip
 1184              	.LVL118:
 1185              	.L101:
2520:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (i < 11) {		/* Copy name body and extension */
 1186              		.loc 1 2520 11 is_stmt 1 view .LVU339
 1187 0022 0A2B     		cmp	r3, #10
 1188 0024 0ED8     		bhi	.L109
2521:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == ' ') continue;				/* Skip padding spaces */
 1189              		.loc 1 2521 3 view .LVU340
2521:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == ' ') continue;				/* Skip padding spaces */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 67


 1190              		.loc 1 2521 23 is_stmt 0 view .LVU341
 1191 0026 03F1010C 		add	ip, r3, #1
 1192              	.LVL119:
2521:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == ' ') continue;				/* Skip padding spaces */
 1193              		.loc 1 2521 5 view .LVU342
 1194 002a 296A     		ldr	r1, [r5, #32]
 1195 002c CB5C     		ldrb	r3, [r1, r3]	@ zero_extendqisi2
 1196              	.LVL120:
2522:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
 1197              		.loc 1 2522 3 is_stmt 1 view .LVU343
2522:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == RDDEM) c = (TCHAR)DDEM;	/* Restore replaced DDEM character */
 1198              		.loc 1 2522 6 is_stmt 0 view .LVU344
 1199 002e 202B     		cmp	r3, #32
 1200 0030 F6D0     		beq	.L102
2523:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) fno->fname[j++] = '.';	/* Insert a . if extension is exist */
 1201              		.loc 1 2523 3 is_stmt 1 view .LVU345
2523:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) fno->fname[j++] = '.';	/* Insert a . if extension is exist */
 1202              		.loc 1 2523 6 is_stmt 0 view .LVU346
 1203 0032 052B     		cmp	r3, #5
 1204 0034 EED1     		bne	.L103
2523:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) fno->fname[j++] = '.';	/* Insert a . if extension is exist */
 1205              		.loc 1 2523 21 discriminator 1 view .LVU347
 1206 0036 E523     		movs	r3, #229
 1207              	.LVL121:
2523:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 9) fno->fname[j++] = '.';	/* Insert a . if extension is exist */
 1208              		.loc 1 2523 21 discriminator 1 view .LVU348
 1209 0038 ECE7     		b	.L103
 1210              	.LVL122:
 1211              	.L108:
2524:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j++] = c;
 1212              		.loc 1 2524 15 is_stmt 1 discriminator 1 view .LVU349
2524:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j++] = c;
 1213              		.loc 1 2524 31 is_stmt 0 discriminator 1 view .LVU350
 1214 003a A118     		adds	r1, r4, r2
 1215 003c 2E20     		movs	r0, #46
 1216 003e 4872     		strb	r0, [r1, #9]
2524:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j++] = c;
 1217              		.loc 1 2524 27 discriminator 1 view .LVU351
 1218 0040 0132     		adds	r2, r2, #1
 1219              	.LVL123:
2524:Middlewares/Third_Party/FatFs/src/ff.c **** 		fno->fname[j++] = c;
 1220              		.loc 1 2524 27 discriminator 1 view .LVU352
 1221 0042 EAE7     		b	.L104
 1222              	.LVL124:
 1223              	.L109:
2526:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2527:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fname[j] = 0;
 1224              		.loc 1 2527 2 is_stmt 1 view .LVU353
 1225              		.loc 1 2527 16 is_stmt 0 view .LVU354
 1226 0044 2244     		add	r2, r2, r4
 1227              	.LVL125:
 1228              		.loc 1 2527 16 view .LVU355
 1229 0046 0023     		movs	r3, #0
 1230              	.LVL126:
 1231              		.loc 1 2527 16 view .LVU356
 1232 0048 5372     		strb	r3, [r2, #9]
2528:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 68


2529:Middlewares/Third_Party/FatFs/src/ff.c **** 
2530:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fattrib = dp->dir[DIR_Attr];				/* Attribute */
 1233              		.loc 1 2530 2 is_stmt 1 view .LVU357
 1234              		.loc 1 2530 19 is_stmt 0 view .LVU358
 1235 004a 2B6A     		ldr	r3, [r5, #32]
 1236              		.loc 1 2530 15 view .LVU359
 1237 004c DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
 1238 004e 2372     		strb	r3, [r4, #8]
2531:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->fsize = ld_dword(dp->dir + DIR_FileSize);	/* Size */
 1239              		.loc 1 2531 2 is_stmt 1 view .LVU360
 1240              		.loc 1 2531 26 is_stmt 0 view .LVU361
 1241 0050 286A     		ldr	r0, [r5, #32]
 1242              		.loc 1 2531 15 view .LVU362
 1243 0052 1C30     		adds	r0, r0, #28
 1244 0054 FFF7FEFF 		bl	ld_dword
 1245              	.LVL127:
 1246              		.loc 1 2531 13 discriminator 1 view .LVU363
 1247 0058 2060     		str	r0, [r4]
2532:Middlewares/Third_Party/FatFs/src/ff.c **** 	tm = ld_dword(dp->dir + DIR_ModTime);			/* Timestamp */
 1248              		.loc 1 2532 2 is_stmt 1 view .LVU364
 1249              		.loc 1 2532 18 is_stmt 0 view .LVU365
 1250 005a 286A     		ldr	r0, [r5, #32]
 1251              		.loc 1 2532 7 view .LVU366
 1252 005c 1630     		adds	r0, r0, #22
 1253 005e FFF7FEFF 		bl	ld_dword
 1254              	.LVL128:
2533:Middlewares/Third_Party/FatFs/src/ff.c **** 	fno->ftime = (WORD)tm; fno->fdate = (WORD)(tm >> 16);
 1255              		.loc 1 2533 2 is_stmt 1 view .LVU367
 1256              		.loc 1 2533 13 is_stmt 0 view .LVU368
 1257 0062 E080     		strh	r0, [r4, #6]	@ movhi
 1258              		.loc 1 2533 25 is_stmt 1 view .LVU369
 1259              		.loc 1 2533 38 is_stmt 0 view .LVU370
 1260 0064 000C     		lsrs	r0, r0, #16
 1261              	.LVL129:
 1262              		.loc 1 2533 36 view .LVU371
 1263 0066 A080     		strh	r0, [r4, #4]	@ movhi
 1264              	.LVL130:
 1265              	.L99:
2534:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1266              		.loc 1 2534 1 view .LVU372
 1267 0068 38BD     		pop	{r3, r4, r5, pc}
 1268              		.cfi_endproc
 1269              	.LFE371:
 1271              		.section	.rodata.create_name.str1.4,"aMS",%progbits,1
 1272              		.align	2
 1273              	.LC0:
 1274 0000 222A2B2C 		.ascii	"\"*+,:;<=>?[]|\177\000"
 1274      3A3B3C3D 
 1274      3E3F5B5D 
 1274      7C7F00
 1275              		.section	.text.create_name,"ax",%progbits
 1276              		.align	1
 1277              		.syntax unified
 1278              		.thumb
 1279              		.thumb_func
 1281              	create_name:
 1282              	.LVL131:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 69


 1283              	.LFB372:
2535:Middlewares/Third_Party/FatFs/src/ff.c **** 
2536:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 1 || _FS_RPATH >= 2 */
2537:Middlewares/Third_Party/FatFs/src/ff.c **** 
2538:Middlewares/Third_Party/FatFs/src/ff.c **** 
2539:Middlewares/Third_Party/FatFs/src/ff.c **** 
2540:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FIND && _FS_MINIMIZE <= 1
2541:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2542:Middlewares/Third_Party/FatFs/src/ff.c **** /* Pattern matching                                                      */
2543:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2544:Middlewares/Third_Party/FatFs/src/ff.c **** 
2545:Middlewares/Third_Party/FatFs/src/ff.c **** static
2546:Middlewares/Third_Party/FatFs/src/ff.c **** WCHAR get_achar (		/* Get a character and advances ptr 1 or 2 */
2547:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** ptr	/* Pointer to pointer to the SBCS/DBCS/Unicode string */
2548:Middlewares/Third_Party/FatFs/src/ff.c **** )
2549:Middlewares/Third_Party/FatFs/src/ff.c **** {
2550:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
2551:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR chr;
2552:Middlewares/Third_Party/FatFs/src/ff.c **** 
2553:Middlewares/Third_Party/FatFs/src/ff.c **** 	chr = (BYTE)*(*ptr)++;					/* Get a byte */
2554:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (IsLower(chr)) chr -= 0x20;			/* To upper ASCII char */
2555:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
2556:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (chr >= 0x80) chr = ExCvt[chr - 0x80];	/* To upper SBCS extended char */
2557:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2558:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (IsDBCS1(chr) && IsDBCS2(**ptr)) {		/* Get DBC 2nd byte if needed */
2559:Middlewares/Third_Party/FatFs/src/ff.c **** 		chr = chr << 8 | (BYTE)*(*ptr)++;
2560:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2561:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2562:Middlewares/Third_Party/FatFs/src/ff.c **** 	return chr;
2563:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2564:Middlewares/Third_Party/FatFs/src/ff.c **** 	return ff_wtoupper(*(*ptr)++);			/* Get a word and to upper */
2565:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2566:Middlewares/Third_Party/FatFs/src/ff.c **** }
2567:Middlewares/Third_Party/FatFs/src/ff.c **** 
2568:Middlewares/Third_Party/FatFs/src/ff.c **** 
2569:Middlewares/Third_Party/FatFs/src/ff.c **** static
2570:Middlewares/Third_Party/FatFs/src/ff.c **** int pattern_matching (	/* 0:not matched, 1:matched */
2571:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* pat,	/* Matching pattern */
2572:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* nam,	/* String to be tested */
2573:Middlewares/Third_Party/FatFs/src/ff.c **** 	int skip,			/* Number of pre-skip chars (number of ?s) */
2574:Middlewares/Third_Party/FatFs/src/ff.c **** 	int inf				/* Infinite search (* specified) */
2575:Middlewares/Third_Party/FatFs/src/ff.c **** )
2576:Middlewares/Third_Party/FatFs/src/ff.c **** {
2577:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *pp, *np;
2578:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR pc, nc;
2579:Middlewares/Third_Party/FatFs/src/ff.c **** 	int nm, nx;
2580:Middlewares/Third_Party/FatFs/src/ff.c **** 
2581:Middlewares/Third_Party/FatFs/src/ff.c **** 
2582:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (skip--) {				/* Pre-skip name chars */
2583:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!get_achar(&nam)) return 0;	/* Branch mismatched if less name chars */
2584:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2585:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!*pat && inf) return 1;		/* (short circuit) */
2586:Middlewares/Third_Party/FatFs/src/ff.c **** 
2587:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
2588:Middlewares/Third_Party/FatFs/src/ff.c **** 		pp = pat; np = nam;			/* Top of pattern and name to match */
2589:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
2590:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (*pp == '?' || *pp == '*') {	/* Wildcard? */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 70


2591:Middlewares/Third_Party/FatFs/src/ff.c **** 				nm = nx = 0;
2592:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {				/* Analyze the wildcard chars */
2593:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (*pp++ == '?') nm++; else nx = 1;
2594:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (*pp == '?' || *pp == '*');
2595:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (pattern_matching(pp, np, nm, nx)) return 1;	/* Test new branch (recurs upto number of wildc
2596:Middlewares/Third_Party/FatFs/src/ff.c **** 				nc = *np; break;	/* Branch mismatched */
2597:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2598:Middlewares/Third_Party/FatFs/src/ff.c **** 			pc = get_achar(&pp);	/* Get a pattern char */
2599:Middlewares/Third_Party/FatFs/src/ff.c **** 			nc = get_achar(&np);	/* Get a name char */
2600:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (pc != nc) break;	/* Branch mismatched? */
2601:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (pc == 0) return 1;	/* Branch matched? (matched at end of both strings) */
2602:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2603:Middlewares/Third_Party/FatFs/src/ff.c **** 		get_achar(&nam);			/* nam++ */
2604:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (inf && nc);			/* Retry until end of name if infinite search is specified */
2605:Middlewares/Third_Party/FatFs/src/ff.c **** 
2606:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 0;
2607:Middlewares/Third_Party/FatFs/src/ff.c **** }
2608:Middlewares/Third_Party/FatFs/src/ff.c **** 
2609:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_FIND && _FS_MINIMIZE <= 1 */
2610:Middlewares/Third_Party/FatFs/src/ff.c **** 
2611:Middlewares/Third_Party/FatFs/src/ff.c **** 
2612:Middlewares/Third_Party/FatFs/src/ff.c **** 
2613:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2614:Middlewares/Third_Party/FatFs/src/ff.c **** /* Pick a top segment and create the object name in directory form       */
2615:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2616:Middlewares/Third_Party/FatFs/src/ff.c **** 
2617:Middlewares/Third_Party/FatFs/src/ff.c **** static
2618:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT create_name (	/* FR_OK: successful, FR_INVALID_NAME: could not create */
2619:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the directory object */
2620:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path	/* Pointer to pointer to the segment in the path string */
2621:Middlewares/Third_Party/FatFs/src/ff.c **** )
2622:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1284              		.loc 1 2622 1 is_stmt 1 view -0
 1285              		.cfi_startproc
 1286              		@ args = 0, pretend = 0, frame = 0
 1287              		@ frame_needed = 0, uses_anonymous_args = 0
 1288              		.loc 1 2622 1 is_stmt 0 view .LVU374
 1289 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 1290              	.LCFI13:
 1291              		.cfi_def_cfa_offset 40
 1292              		.cfi_offset 3, -40
 1293              		.cfi_offset 4, -36
 1294              		.cfi_offset 5, -32
 1295              		.cfi_offset 6, -28
 1296              		.cfi_offset 7, -24
 1297              		.cfi_offset 8, -20
 1298              		.cfi_offset 9, -16
 1299              		.cfi_offset 10, -12
 1300              		.cfi_offset 11, -8
 1301              		.cfi_offset 14, -4
 1302 0004 8146     		mov	r9, r0
 1303 0006 8A46     		mov	r10, r1
2623:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
2624:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE b, cf;
2625:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w, *lfn;
2626:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, ni, si, di;
2627:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *p;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 71


2628:Middlewares/Third_Party/FatFs/src/ff.c **** 
2629:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create LFN in Unicode */
2630:Middlewares/Third_Party/FatFs/src/ff.c **** 	p = *path; lfn = dp->obj.fs->lfnbuf; si = di = 0;
2631:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
2632:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = p[si++];					/* Get a character */
2633:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w < ' ') break;				/* Break if end of the path name */
2634:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w == '/' || w == '\\') {	/* Break if a separator is found */
2635:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (p[si] == '/' || p[si] == '\\') si++;	/* Skip duplicated separator if exist */
2636:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
2637:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2638:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (di >= _MAX_LFN) return FR_INVALID_NAME;	/* Reject too long name */
2639:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
2640:Middlewares/Third_Party/FatFs/src/ff.c **** 		w &= 0xFF;
2641:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(w)) {				/* Check if it is a DBC 1st byte (always false on SBCS cfg) */
2642:Middlewares/Third_Party/FatFs/src/ff.c **** 			b = (BYTE)p[si++];			/* Get 2nd byte */
2643:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = (w << 8) + b;			/* Create a DBC */
2644:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!IsDBCS2(b)) return FR_INVALID_NAME;	/* Reject invalid sequence */
2645:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2646:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = ff_convert(w, 1);			/* Convert ANSI/OEM to Unicode */
2647:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!w) return FR_INVALID_NAME;	/* Reject invalid code */
2648:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2649:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w < 0x80 && chk_chr("\"*:<>\?|\x7F", w)) return FR_INVALID_NAME;	/* Reject illegal characters
2650:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di++] = w;					/* Store the Unicode character */
2651:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2652:Middlewares/Third_Party/FatFs/src/ff.c **** 	*path = &p[si];						/* Return pointer to the next segment */
2653:Middlewares/Third_Party/FatFs/src/ff.c **** 	cf = (w < ' ') ? NS_LAST : 0;		/* Set last segment flag if end of the path */
2654:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
2655:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((di == 1 && lfn[di - 1] == '.') ||
2656:Middlewares/Third_Party/FatFs/src/ff.c **** 		(di == 2 && lfn[di - 1] == '.' && lfn[di - 2] == '.')) {	/* Is this segment a dot name? */
2657:Middlewares/Third_Party/FatFs/src/ff.c **** 		lfn[di] = 0;
2658:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 11; i++)		/* Create dot name for SFN entry */
2659:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fn[i] = (i < di) ? '.' : ' ';
2660:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[i] = cf | NS_DOT;		/* This is a dot entry */
2661:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_OK;
2662:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2663:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2664:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (di) {						/* Snip off trailing spaces and dots if exist */
2665:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = lfn[di - 1];
2666:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w != ' ' && w != '.') break;
2667:Middlewares/Third_Party/FatFs/src/ff.c **** 		di--;
2668:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2669:Middlewares/Third_Party/FatFs/src/ff.c **** 	lfn[di] = 0;						/* LFN is created */
2670:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (di == 0) return FR_INVALID_NAME;	/* Reject nul name */
2671:Middlewares/Third_Party/FatFs/src/ff.c **** 
2672:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create SFN in directory form */
2673:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(dp->fn, ' ', 11);
2674:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (si = 0; lfn[si] == ' ' || lfn[si] == '.'; si++) ;	/* Strip leading spaces and dots */
2675:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (si) cf |= NS_LOSS | NS_LFN;
2676:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (di && lfn[di - 1] != '.') di--;	/* Find extension (di<=si: no extension) */
2677:Middlewares/Third_Party/FatFs/src/ff.c **** 
2678:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = b = 0; ni = 8;
2679:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
2680:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = lfn[si++];					/* Get an LFN character */
2681:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!w) break;					/* Break on end of the LFN */
2682:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w == ' ' || (w == '.' && si != di)) {	/* Remove spaces and dots */
2683:Middlewares/Third_Party/FatFs/src/ff.c **** 			cf |= NS_LOSS | NS_LFN; continue;
2684:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 72


2685:Middlewares/Third_Party/FatFs/src/ff.c **** 
2686:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i >= ni || si == di) {		/* Extension or end of SFN */
2687:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni == 11) {				/* Long extension */
2688:Middlewares/Third_Party/FatFs/src/ff.c **** 				cf |= NS_LOSS | NS_LFN; break;
2689:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2690:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (si != di) cf |= NS_LOSS | NS_LFN;	/* Out of 8.3 format */
2691:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (si > di) break;			/* No extension */
2692:Middlewares/Third_Party/FatFs/src/ff.c **** 			si = di; i = 8; ni = 11;	/* Enter extension section */
2693:Middlewares/Third_Party/FatFs/src/ff.c **** 			b <<= 2; continue;
2694:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2695:Middlewares/Third_Party/FatFs/src/ff.c **** 
2696:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (w >= 0x80) {				/* Non ASCII character */
2697:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
2698:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(w, 0);		/* Unicode -> OEM code */
2699:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (w) w = ExCvt[w - 0x80];	/* Convert extended character to upper (SBCS) */
2700:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2701:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(ff_wtoupper(w), 0);	/* Upper converted Unicode -> OEM code */
2702:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2703:Middlewares/Third_Party/FatFs/src/ff.c **** 			cf |= NS_LFN;				/* Force create LFN entry */
2704:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2705:Middlewares/Third_Party/FatFs/src/ff.c **** 
2706:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_DF1S && w >= 0x100) {		/* Is this DBC? (always false at SBCS cfg) */
2707:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i >= ni - 1) {
2708:Middlewares/Third_Party/FatFs/src/ff.c **** 				cf |= NS_LOSS | NS_LFN; i = ni; continue;
2709:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2710:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->fn[i++] = (BYTE)(w >> 8);
2711:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* SBC */
2712:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!w || chk_chr("+,;=[]", w)) {	/* Replace illegal characters for SFN */
2713:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = '_'; cf |= NS_LOSS | NS_LFN;/* Lossy conversion */
2714:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
2715:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (IsUpper(w)) {		/* ASCII large capital */
2716:Middlewares/Third_Party/FatFs/src/ff.c **** 					b |= 2;
2717:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
2718:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (IsLower(w)) {	/* ASCII small capital */
2719:Middlewares/Third_Party/FatFs/src/ff.c **** 						b |= 1; w -= 0x20;
2720:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2721:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2722:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2723:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2724:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[i++] = (BYTE)w;
2725:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2726:Middlewares/Third_Party/FatFs/src/ff.c **** 
2727:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (dp->fn[0] == DDEM) dp->fn[0] = RDDEM;	/* If the first character collides with DDEM, replace it
2728:Middlewares/Third_Party/FatFs/src/ff.c **** 
2729:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ni == 8) b <<= 2;
2730:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((b & 0x0C) == 0x0C || (b & 0x03) == 0x03) cf |= NS_LFN;	/* Create LFN entry when there are com
2731:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(cf & NS_LFN)) {						/* When LFN is in 8.3 format without extended character, NT flags are c
2732:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((b & 0x03) == 0x01) cf |= NS_EXT;	/* NT flag (Extension has only small capital) */
2733:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((b & 0x0C) == 0x04) cf |= NS_BODY;	/* NT flag (Filename has only small capital) */
2734:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2735:Middlewares/Third_Party/FatFs/src/ff.c **** 
2736:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->fn[NSFLAG] = cf;	/* SFN is created */
2737:Middlewares/Third_Party/FatFs/src/ff.c **** 
2738:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
2739:Middlewares/Third_Party/FatFs/src/ff.c **** 
2740:Middlewares/Third_Party/FatFs/src/ff.c **** 
2741:Middlewares/Third_Party/FatFs/src/ff.c **** #else	/* _USE_LFN != 0 : Non-LFN configuration */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 73


2742:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE c, d, *sfn;
 1304              		.loc 1 2742 2 is_stmt 1 view .LVU375
2743:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT ni, si, i;
 1305              		.loc 1 2743 2 view .LVU376
2744:Middlewares/Third_Party/FatFs/src/ff.c **** 	const char *p;
 1306              		.loc 1 2744 2 view .LVU377
2745:Middlewares/Third_Party/FatFs/src/ff.c **** 
2746:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create file name in directory form */
2747:Middlewares/Third_Party/FatFs/src/ff.c **** 	p = *path; sfn = dp->fn;
 1307              		.loc 1 2747 2 view .LVU378
 1308              		.loc 1 2747 4 is_stmt 0 view .LVU379
 1309 0008 D1F80080 		ldr	r8, [r1]
 1310              	.LVL132:
 1311              		.loc 1 2747 13 is_stmt 1 view .LVU380
 1312              		.loc 1 2747 17 is_stmt 0 view .LVU381
 1313 000c 00F1240B 		add	fp, r0, #36
 1314              	.LVL133:
2748:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(sfn, ' ', 11);
 1315              		.loc 1 2748 2 is_stmt 1 view .LVU382
 1316 0010 0B22     		movs	r2, #11
 1317 0012 2021     		movs	r1, #32
 1318              	.LVL134:
 1319              		.loc 1 2748 2 is_stmt 0 view .LVU383
 1320 0014 5846     		mov	r0, fp
 1321              	.LVL135:
 1322              		.loc 1 2748 2 view .LVU384
 1323 0016 FFF7FEFF 		bl	mem_set
 1324              	.LVL136:
2749:Middlewares/Third_Party/FatFs/src/ff.c **** 	si = i = 0; ni = 8;
 1325              		.loc 1 2749 2 is_stmt 1 view .LVU385
 1326              		.loc 1 2749 14 view .LVU386
 1327              		.loc 1 2749 9 is_stmt 0 view .LVU387
 1328 001a 0025     		movs	r5, #0
 1329              		.loc 1 2749 5 view .LVU388
 1330 001c 2B46     		mov	r3, r5
 1331              		.loc 1 2749 17 view .LVU389
 1332 001e 0827     		movs	r7, #8
 1333 0020 29E0     		b	.L111
 1334              	.LVL137:
 1335              	.L115:
2750:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
2751:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (p[si] == '.') { /* Is this a dot entry? */
2752:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
2753:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (BYTE)p[si++];
2754:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c != '.' || si >= 3) break;
2755:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
2756:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2757:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != '/' && c != '\\' && c > ' ') return FR_INVALID_NAME;
2758:Middlewares/Third_Party/FatFs/src/ff.c **** 		*path = p + si;								/* Return pointer to the next segment */
2759:Middlewares/Third_Party/FatFs/src/ff.c **** 		sfn[NSFLAG] = (c <= ' ') ? NS_LAST | NS_DOT : NS_DOT;	/* Set last segment flag if end of the path
2760:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_OK;
2761:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2762:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2763:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
2764:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (BYTE)p[si++];
2765:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ') break; 			/* Break if end of the path name */
2766:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '/' || c == '\\') {	/* Break if a separator is found */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 74


2767:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (p[si] == '/' || p[si] == '\\') si++;	/* Skip duplicated separator if exist */
 1336              		.loc 1 2767 42 is_stmt 1 discriminator 2 view .LVU390
 1337              		.loc 1 2767 44 is_stmt 0 discriminator 2 view .LVU391
 1338 0022 0136     		adds	r6, r6, #1
 1339              	.LVL138:
 1340              	.L113:
 1341              		.loc 1 2767 24 is_stmt 1 discriminator 1 view .LVU392
 1342              		.loc 1 2767 12 is_stmt 0 discriminator 1 view .LVU393
 1343 0024 18F80630 		ldrb	r3, [r8, r6]	@ zero_extendqisi2
 1344              		.loc 1 2767 24 discriminator 1 view .LVU394
 1345 0028 2F2B     		cmp	r3, #47
 1346 002a FAD0     		beq	.L115
 1347              		.loc 1 2767 24 discriminator 1 view .LVU395
 1348 002c 5C2B     		cmp	r3, #92
 1349 002e F8D0     		beq	.L115
 1350              	.L112:
2768:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
2769:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2770:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '.' || i >= ni) {		/* End of body or over size? */
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni == 11 || c != '.') return FR_INVALID_NAME;	/* Over size or invalid dot */
2772:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
2773:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
2774:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2775:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c >= 0x80) {				/* Extended character? */
2776:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
2777:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = ExCvt[c - 0x80];		/* To upper extended characters (SBCS cfg) */
2778:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2779:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_DF1S
2780:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_INVALID_NAME;		/* Reject extended characters (ASCII only cfg) */
2781:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2782:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2783:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2784:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(c)) {				/* Check if it is a DBC 1st byte (always false at SBCS cfg.) */
2785:Middlewares/Third_Party/FatFs/src/ff.c **** 			d = (BYTE)p[si++];			/* Get 2nd byte */
2786:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!IsDBCS2(d) || i >= ni - 1) return FR_INVALID_NAME;	/* Reject invalid DBC */
2787:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
2788:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = d;
2789:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* SBC */
2790:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (chk_chr("\"*+,:;<=>\?[]|\x7F", c)) return FR_INVALID_NAME;	/* Reject illegal chrs for SFN */
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsLower(c)) c -= 0x20;	/* To upper */
2792:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
2793:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2794:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2795:Middlewares/Third_Party/FatFs/src/ff.c **** 	*path = p + si;						/* Return pointer to the next segment */
 1351              		.loc 1 2795 2 is_stmt 1 view .LVU396
 1352              		.loc 1 2795 12 is_stmt 0 view .LVU397
 1353 0030 4644     		add	r6, r6, r8
 1354              	.LVL139:
 1355              		.loc 1 2795 8 view .LVU398
 1356 0032 CAF80060 		str	r6, [r10]
2796:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i == 0) return FR_INVALID_NAME;	/* Reject nul string */
 1357              		.loc 1 2796 2 is_stmt 1 view .LVU399
 1358              		.loc 1 2796 5 is_stmt 0 view .LVU400
 1359 0036 002D     		cmp	r5, #0
 1360 0038 44D0     		beq	.L125
2797:Middlewares/Third_Party/FatFs/src/ff.c **** 
2798:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sfn[0] == DDEM) sfn[0] = RDDEM;	/* If the first character collides with DDEM, replace it with 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 75


 1361              		.loc 1 2798 2 is_stmt 1 view .LVU401
 1362              		.loc 1 2798 9 is_stmt 0 view .LVU402
 1363 003a 99F82430 		ldrb	r3, [r9, #36]	@ zero_extendqisi2
 1364              		.loc 1 2798 5 view .LVU403
 1365 003e E52B     		cmp	r3, #229
 1366 0040 35D0     		beq	.L129
 1367              	.L121:
2799:Middlewares/Third_Party/FatFs/src/ff.c **** 	sfn[NSFLAG] = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of the path */
 1368              		.loc 1 2799 2 is_stmt 1 view .LVU404
 1369              		.loc 1 2799 14 is_stmt 0 view .LVU405
 1370 0042 202C     		cmp	r4, #32
 1371 0044 37D8     		bhi	.L126
 1372              		.loc 1 2799 14 discriminator 1 view .LVU406
 1373 0046 0423     		movs	r3, #4
 1374              	.L122:
 1375              		.loc 1 2799 14 discriminator 4 view .LVU407
 1376 0048 89F82F30 		strb	r3, [r9, #47]
2800:Middlewares/Third_Party/FatFs/src/ff.c **** 
2801:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
 1377              		.loc 1 2801 2 is_stmt 1 view .LVU408
 1378              		.loc 1 2801 9 is_stmt 0 view .LVU409
 1379 004c 0020     		movs	r0, #0
 1380 004e 35E0     		b	.L117
 1381              	.LVL140:
 1382              	.L116:
2775:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
 1383              		.loc 1 2775 3 is_stmt 1 view .LVU410
2775:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
 1384              		.loc 1 2775 6 is_stmt 0 view .LVU411
 1385 0050 14F0800F 		tst	r4, #128
 1386 0054 27D1     		bne	.L130
 1387              	.L119:
2784:Middlewares/Third_Party/FatFs/src/ff.c **** 			d = (BYTE)p[si++];			/* Get 2nd byte */
 1388              		.loc 1 2784 3 is_stmt 1 view .LVU412
2790:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsLower(c)) c -= 0x20;	/* To upper */
 1389              		.loc 1 2790 4 view .LVU413
2790:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsLower(c)) c -= 0x20;	/* To upper */
 1390              		.loc 1 2790 8 is_stmt 0 view .LVU414
 1391 0056 2146     		mov	r1, r4
 1392 0058 1B48     		ldr	r0, .L131
 1393 005a FFF7FEFF 		bl	chk_chr
 1394              	.LVL141:
2790:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsLower(c)) c -= 0x20;	/* To upper */
 1395              		.loc 1 2790 7 discriminator 1 view .LVU415
 1396 005e 78BB     		cbnz	r0, .L124
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
 1397              		.loc 1 2791 4 is_stmt 1 view .LVU416
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
 1398              		.loc 1 2791 8 is_stmt 0 view .LVU417
 1399 0060 A4F16103 		sub	r3, r4, #97
 1400 0064 DBB2     		uxtb	r3, r3
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
 1401              		.loc 1 2791 7 view .LVU418
 1402 0066 192B     		cmp	r3, #25
 1403 0068 01D8     		bhi	.L120
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
 1404              		.loc 1 2791 20 is_stmt 1 discriminator 1 view .LVU419
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 76


2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
 1405              		.loc 1 2791 22 is_stmt 0 discriminator 1 view .LVU420
 1406 006a 203C     		subs	r4, r4, #32
 1407              	.LVL142:
2791:Middlewares/Third_Party/FatFs/src/ff.c **** 			sfn[i++] = c;
 1408              		.loc 1 2791 22 discriminator 1 view .LVU421
 1409 006c E4B2     		uxtb	r4, r4
 1410              	.LVL143:
 1411              	.L120:
2792:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1412              		.loc 1 2792 4 is_stmt 1 view .LVU422
2792:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1413              		.loc 1 2792 13 is_stmt 0 view .LVU423
 1414 006e 0BF80540 		strb	r4, [fp, r5]
2792:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1415              		.loc 1 2792 9 view .LVU424
 1416 0072 0135     		adds	r5, r5, #1
 1417              	.LVL144:
 1418              	.L118:
2792:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1419              		.loc 1 2792 9 view .LVU425
 1420 0074 3346     		mov	r3, r6
 1421              	.LVL145:
 1422              	.L111:
2763:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = (BYTE)p[si++];
 1423              		.loc 1 2763 2 is_stmt 1 view .LVU426
2764:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ') break; 			/* Break if end of the path name */
 1424              		.loc 1 2764 3 view .LVU427
2764:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ') break; 			/* Break if end of the path name */
 1425              		.loc 1 2764 17 is_stmt 0 view .LVU428
 1426 0076 5E1C     		adds	r6, r3, #1
 1427              	.LVL146:
2764:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c <= ' ') break; 			/* Break if end of the path name */
 1428              		.loc 1 2764 5 view .LVU429
 1429 0078 18F80340 		ldrb	r4, [r8, r3]	@ zero_extendqisi2
 1430              	.LVL147:
2765:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '/' || c == '\\') {	/* Break if a separator is found */
 1431              		.loc 1 2765 3 is_stmt 1 view .LVU430
2765:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '/' || c == '\\') {	/* Break if a separator is found */
 1432              		.loc 1 2765 6 is_stmt 0 view .LVU431
 1433 007c 202C     		cmp	r4, #32
 1434 007e D7D9     		bls	.L112
2766:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (p[si] == '/' || p[si] == '\\') si++;	/* Skip duplicated separator if exist */
 1435              		.loc 1 2766 3 is_stmt 1 view .LVU432
2766:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (p[si] == '/' || p[si] == '\\') si++;	/* Skip duplicated separator if exist */
 1436              		.loc 1 2766 6 is_stmt 0 view .LVU433
 1437 0080 5C2C     		cmp	r4, #92
 1438 0082 18BF     		it	ne
 1439 0084 2F2C     		cmpne	r4, #47
 1440 0086 CDD0     		beq	.L113
2770:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni == 11 || c != '.') return FR_INVALID_NAME;	/* Over size or invalid dot */
 1441              		.loc 1 2770 3 is_stmt 1 view .LVU434
2770:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ni == 11 || c != '.') return FR_INVALID_NAME;	/* Over size or invalid dot */
 1442              		.loc 1 2770 6 is_stmt 0 view .LVU435
 1443 0088 2E2C     		cmp	r4, #46
 1444 008a 18BF     		it	ne
 1445 008c AF42     		cmpne	r7, r5
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 77


 1446 008e DFD8     		bhi	.L116
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
 1447              		.loc 1 2771 4 is_stmt 1 view .LVU436
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
 1448              		.loc 1 2771 22 is_stmt 0 view .LVU437
 1449 0090 2E3C     		subs	r4, r4, #46
 1450              	.LVL148:
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
 1451              		.loc 1 2771 22 view .LVU438
 1452 0092 18BF     		it	ne
 1453 0094 0124     		movne	r4, #1
 1454              	.LVL149:
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
 1455              		.loc 1 2771 17 view .LVU439
 1456 0096 0B2F     		cmp	r7, #11
 1457 0098 08BF     		it	eq
 1458 009a 44F00104 		orreq	r4, r4, #1
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
 1459              		.loc 1 2771 7 view .LVU440
 1460 009e 64B9     		cbnz	r4, .L123
2772:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
 1461              		.loc 1 2772 6 view .LVU441
 1462 00a0 0825     		movs	r5, #8
 1463              	.LVL150:
2772:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
 1464              		.loc 1 2772 14 view .LVU442
 1465 00a2 0B27     		movs	r7, #11
 1466              	.LVL151:
2772:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
 1467              		.loc 1 2772 14 view .LVU443
 1468 00a4 E6E7     		b	.L118
 1469              	.LVL152:
 1470              	.L130:
2777:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 1471              		.loc 1 2777 4 is_stmt 1 view .LVU444
2777:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 1472              		.loc 1 2777 16 is_stmt 0 view .LVU445
 1473 00a6 803C     		subs	r4, r4, #128
 1474              	.LVL153:
2777:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 1475              		.loc 1 2777 6 view .LVU446
 1476 00a8 084B     		ldr	r3, .L131+4
 1477 00aa 1C5D     		ldrb	r4, [r3, r4]	@ zero_extendqisi2
 1478              	.LVL154:
2777:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 1479              		.loc 1 2777 6 view .LVU447
 1480 00ac D3E7     		b	.L119
 1481              	.LVL155:
 1482              	.L129:
2798:Middlewares/Third_Party/FatFs/src/ff.c **** 	sfn[NSFLAG] = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of the path */
 1483              		.loc 1 2798 22 is_stmt 1 discriminator 1 view .LVU448
2798:Middlewares/Third_Party/FatFs/src/ff.c **** 	sfn[NSFLAG] = (c <= ' ') ? NS_LAST : 0;		/* Set last segment flag if end of the path */
 1484              		.loc 1 2798 29 is_stmt 0 discriminator 1 view .LVU449
 1485 00ae 0523     		movs	r3, #5
 1486 00b0 89F82430 		strb	r3, [r9, #36]
 1487 00b4 C5E7     		b	.L121
 1488              	.L126:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 78


2799:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1489              		.loc 1 2799 14 discriminator 2 view .LVU450
 1490 00b6 0023     		movs	r3, #0
 1491 00b8 C6E7     		b	.L122
 1492              	.LVL156:
 1493              	.L123:
2771:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = 8; ni = 11;				/* Goto extension */
 1494              		.loc 1 2771 37 discriminator 1 view .LVU451
 1495 00ba 0620     		movs	r0, #6
 1496              	.LVL157:
 1497              	.L117:
2802:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_LFN != 0 */
2803:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1498              		.loc 1 2803 1 view .LVU452
 1499 00bc BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1500              	.LVL158:
 1501              	.L124:
2790:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsLower(c)) c -= 0x20;	/* To upper */
 1502              		.loc 1 2790 50 discriminator 1 view .LVU453
 1503 00c0 0620     		movs	r0, #6
 1504 00c2 FBE7     		b	.L117
 1505              	.LVL159:
 1506              	.L125:
2796:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1507              		.loc 1 2796 21 discriminator 1 view .LVU454
 1508 00c4 0620     		movs	r0, #6
 1509 00c6 F9E7     		b	.L117
 1510              	.L132:
 1511              		.align	2
 1512              	.L131:
 1513 00c8 00000000 		.word	.LC0
 1514 00cc 00000000 		.word	ExCvt
 1515              		.cfi_endproc
 1516              	.LFE372:
 1518              		.section	.text.get_ldnumber,"ax",%progbits
 1519              		.align	1
 1520              		.syntax unified
 1521              		.thumb
 1522              		.thumb_func
 1524              	get_ldnumber:
 1525              	.LVL160:
 1526              	.LFB374:
2804:Middlewares/Third_Party/FatFs/src/ff.c **** 
2805:Middlewares/Third_Party/FatFs/src/ff.c **** 
2806:Middlewares/Third_Party/FatFs/src/ff.c **** 
2807:Middlewares/Third_Party/FatFs/src/ff.c **** 
2808:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2809:Middlewares/Third_Party/FatFs/src/ff.c **** /* Follow a file path                                                    */
2810:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2811:Middlewares/Third_Party/FatFs/src/ff.c **** 
2812:Middlewares/Third_Party/FatFs/src/ff.c **** static
2813:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT follow_path (	/* FR_OK(0): successful, !=0: error code */
2814:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Directory object to return last directory and found object */
2815:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Full-path string to find a file or directory */
2816:Middlewares/Third_Party/FatFs/src/ff.c **** )
2817:Middlewares/Third_Party/FatFs/src/ff.c **** {
2818:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 79


2819:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ns;
2820:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID *obj = &dp->obj;
2821:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
2822:Middlewares/Third_Party/FatFs/src/ff.c **** 
2823:Middlewares/Third_Party/FatFs/src/ff.c **** 
2824:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
2825:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (*path != '/' && *path != '\\') {	/* Without heading separator */
2826:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = fs->cdir;				/* Start from current directory */
2827:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
2828:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2829:Middlewares/Third_Party/FatFs/src/ff.c **** 	{										/* With heading separator */
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (*path == '/' || *path == '\\') path++;	/* Strip heading separator */
2831:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
2832:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2833:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2834:Middlewares/Third_Party/FatFs/src/ff.c **** 	obj->n_frag = 0;	/* Invalidate last fragment counter of the object */
2835:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
2836:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT && obj->sclust) {	/* Retrieve the sub-directory status if needed */
2837:Middlewares/Third_Party/FatFs/src/ff.c **** 		DIR dj;
2838:Middlewares/Third_Party/FatFs/src/ff.c **** 
2839:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->c_scl = fs->cdc_scl;
2840:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->c_size = fs->cdc_size;
2841:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->c_ofs = fs->cdc_ofs;
2842:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = load_obj_dir(&dj, obj);
2843:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
2844:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->objsize = ld_dword(fs->dirbuf + XDIR_FileSize);
2845:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->stat = fs->dirbuf[XDIR_GenFlags] & 2;
2846:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2847:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2848:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2849:Middlewares/Third_Party/FatFs/src/ff.c **** 
2850:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((UINT)*path < ' ') {				/* Null path name is the origin directory itself */
2851:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
2852:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, 0);
2853:Middlewares/Third_Party/FatFs/src/ff.c **** 
2854:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {								/* Follow path */
2855:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
2856:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
2857:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
2858:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Find an object with the segment name */
2859:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
2860:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
2861:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
2862:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, stay there */
2863:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
2864:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->fn[NSFLAG] = NS_NONAME;
2865:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_OK;
2866:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {							/* Could not find the object */
2867:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!(ns & NS_LAST)) res = FR_NO_PATH;	/* Adjust error code if not last segment */
2868:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
2869:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2870:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
2871:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2872:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ns & NS_LAST) break;			/* Last segment matched. Function completed. */
2873:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Get into the sub-directory */
2874:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(obj->attr & AM_DIR)) {		/* It is not a sub-directory and cannot follow */
2875:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_PATH; break;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 80


2876:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2877:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2878:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {		/* Save containing directory information for next dir */
2879:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->c_scl = obj->sclust;
2880:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->c_size = ((DWORD)obj->objsize & 0xFFFFFF00) | obj->stat;
2881:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->c_ofs = dp->blk_ofs;
2882:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->sclust = ld_dword(fs->dirbuf + XDIR_FstClus);	/* Open next directory */
2883:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->stat = fs->dirbuf[XDIR_GenFlags] & 2;
2884:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
2885:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
2886:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2887:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->sclust = ld_clust(fs, fs->win + dp->dptr % SS(fs));	/* Open next directory */
2889:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2890:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2891:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2892:Middlewares/Third_Party/FatFs/src/ff.c **** 
2893:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
2894:Middlewares/Third_Party/FatFs/src/ff.c **** }
2895:Middlewares/Third_Party/FatFs/src/ff.c **** 
2896:Middlewares/Third_Party/FatFs/src/ff.c **** 
2897:Middlewares/Third_Party/FatFs/src/ff.c **** 
2898:Middlewares/Third_Party/FatFs/src/ff.c **** 
2899:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2900:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get logical drive number from path name                               */
2901:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2902:Middlewares/Third_Party/FatFs/src/ff.c **** 
2903:Middlewares/Third_Party/FatFs/src/ff.c **** static
2904:Middlewares/Third_Party/FatFs/src/ff.c **** int get_ldnumber (		/* Returns logical drive number (-1:invalid drive) */
2905:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path	/* Pointer to pointer to the path name */
2906:Middlewares/Third_Party/FatFs/src/ff.c **** )
2907:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1527              		.loc 1 2907 1 is_stmt 1 view -0
 1528              		.cfi_startproc
 1529              		@ args = 0, pretend = 0, frame = 0
 1530              		@ frame_needed = 0, uses_anonymous_args = 0
 1531              		@ link register save eliminated.
 1532              		.loc 1 2907 1 is_stmt 0 view .LVU456
 1533 0000 0146     		mov	r1, r0
2908:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *tp, *tt;
 1534              		.loc 1 2908 2 is_stmt 1 view .LVU457
2909:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 1535              		.loc 1 2909 2 view .LVU458
2910:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol = -1;
 1536              		.loc 1 2910 2 view .LVU459
 1537              	.LVL161:
2911:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
2912:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const char* const volid[] = {_VOLUME_STRS};
2913:Middlewares/Third_Party/FatFs/src/ff.c **** 	const char *sp;
2914:Middlewares/Third_Party/FatFs/src/ff.c **** 	char c;
2915:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR tc;
2916:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2917:Middlewares/Third_Party/FatFs/src/ff.c **** 
2918:Middlewares/Third_Party/FatFs/src/ff.c **** 
2919:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (*path) {	/* If the pointer is not a null */
 1538              		.loc 1 2919 2 view .LVU460
 1539              		.loc 1 2919 6 is_stmt 0 view .LVU461
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 81


 1540 0002 0068     		ldr	r0, [r0]
 1541              	.LVL162:
 1542              		.loc 1 2919 5 view .LVU462
 1543 0004 08B1     		cbz	r0, .L144
2920:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (tt = *path; (UINT)*tt >= (_USE_LFN ? ' ' : '!') && *tt != ':'; tt++) ;	/* Find ':' in the pa
 1544              		.loc 1 2920 11 view .LVU463
 1545 0006 0246     		mov	r2, r0
 1546 0008 03E0     		b	.L134
 1547              	.L144:
2910:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol = -1;
 1548              		.loc 1 2910 6 view .LVU464
 1549 000a 4FF0FF30 		mov	r0, #-1
 1550 000e 7047     		bx	lr
 1551              	.LVL163:
 1552              	.L136:
 1553              		.loc 1 2920 73 is_stmt 1 discriminator 3 view .LVU465
 1554 0010 0132     		adds	r2, r2, #1
 1555              	.LVL164:
 1556              	.L134:
 1557              		.loc 1 2920 56 discriminator 1 view .LVU466
 1558              		.loc 1 2920 26 is_stmt 0 discriminator 1 view .LVU467
 1559 0012 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1560              		.loc 1 2920 56 discriminator 1 view .LVU468
 1561 0014 202B     		cmp	r3, #32
 1562 0016 01D9     		bls	.L143
 1563 0018 3A2B     		cmp	r3, #58
 1564 001a F9D1     		bne	.L136
 1565              	.L143:
2921:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (*tt == ':') {	/* If a ':' is exist in the path name */
 1566              		.loc 1 2921 3 is_stmt 1 view .LVU469
 1567              		.loc 1 2921 6 is_stmt 0 view .LVU470
 1568 001c 3A2B     		cmp	r3, #58
 1569 001e 01D0     		beq	.L145
2922:Middlewares/Third_Party/FatFs/src/ff.c **** 			tp = *path;
2923:Middlewares/Third_Party/FatFs/src/ff.c **** 			i = *tp++ - '0';
2924:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
2925:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
2926:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
2927:Middlewares/Third_Party/FatFs/src/ff.c **** 					*path = ++tt;
2928:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2929:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2930:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID
2931:Middlewares/Third_Party/FatFs/src/ff.c **** 			 else {	/* No numeric drive number, find string drive id */
2932:Middlewares/Third_Party/FatFs/src/ff.c **** 				i = 0; tt++;
2933:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
2934:Middlewares/Third_Party/FatFs/src/ff.c **** 					sp = volid[i]; tp = *path;
2935:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {	/* Compare a string drive id with path name */
2936:Middlewares/Third_Party/FatFs/src/ff.c **** 						c = *sp++; tc = *tp++;
2937:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (IsLower(tc)) tc -= 0x20;
2938:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (c && (TCHAR)c == tc);
2939:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while ((c || tp != tt) && ++i < _VOLUMES);	/* Repeat for each id until pattern match */
2940:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
2941:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
2942:Middlewares/Third_Party/FatFs/src/ff.c **** 					*path = tt;
2943:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
2944:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
2945:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 82


2946:Middlewares/Third_Party/FatFs/src/ff.c **** 			return vol;
2947:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
2948:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0 && _VOLUMES >= 2
2949:Middlewares/Third_Party/FatFs/src/ff.c **** 		vol = CurrVol;	/* Current drive */
2950:Middlewares/Third_Party/FatFs/src/ff.c **** #else
2951:Middlewares/Third_Party/FatFs/src/ff.c **** 		vol = 0;		/* Drive 0 */
 1570              		.loc 1 2951 7 view .LVU471
 1571 0020 0020     		movs	r0, #0
 1572              	.LVL165:
2952:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2953:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2954:Middlewares/Third_Party/FatFs/src/ff.c **** 	return vol;
2955:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1573              		.loc 1 2955 1 view .LVU472
 1574 0022 7047     		bx	lr
 1575              	.LVL166:
 1576              	.L145:
2922:Middlewares/Third_Party/FatFs/src/ff.c **** 			tp = *path;
 1577              		.loc 1 2922 4 is_stmt 1 view .LVU473
2923:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 1578              		.loc 1 2923 4 view .LVU474
2923:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 1579              		.loc 1 2923 11 is_stmt 0 view .LVU475
 1580 0024 0346     		mov	r3, r0
 1581              	.LVL167:
2923:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 1582              		.loc 1 2923 8 view .LVU476
 1583 0026 13F8010B 		ldrb	r0, [r3], #1	@ zero_extendqisi2
 1584              	.LVL168:
2923:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i < 10 && tp == tt) {	/* Is there a numeric drive id? */
 1585              		.loc 1 2923 14 view .LVU477
 1586 002a 3038     		subs	r0, r0, #48
 1587              	.LVL169:
2924:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
 1588              		.loc 1 2924 4 is_stmt 1 view .LVU478
2924:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < _VOLUMES) {	/* If a drive id is found, get the value and strip it */
 1589              		.loc 1 2924 7 is_stmt 0 view .LVU479
 1590 002c 0928     		cmp	r0, #9
 1591 002e 98BF     		it	ls
 1592 0030 9A42     		cmpls	r2, r3
 1593 0032 03D1     		bne	.L141
2925:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
 1594              		.loc 1 2925 5 is_stmt 1 view .LVU480
2925:Middlewares/Third_Party/FatFs/src/ff.c **** 					vol = (int)i;
 1595              		.loc 1 2925 8 is_stmt 0 view .LVU481
 1596 0034 28B9     		cbnz	r0, .L142
2926:Middlewares/Third_Party/FatFs/src/ff.c **** 					*path = ++tt;
 1597              		.loc 1 2926 6 is_stmt 1 view .LVU482
 1598              	.LVL170:
2927:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 1599              		.loc 1 2927 6 view .LVU483
2927:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 1600              		.loc 1 2927 12 is_stmt 0 view .LVU484
 1601 0036 0132     		adds	r2, r2, #1
 1602              	.LVL171:
2927:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 1603              		.loc 1 2927 12 view .LVU485
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 83


 1604 0038 0A60     		str	r2, [r1]
 1605 003a 7047     		bx	lr
 1606              	.LVL172:
 1607              	.L141:
2910:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
 1608              		.loc 1 2910 6 view .LVU486
 1609 003c 4FF0FF30 		mov	r0, #-1
 1610              	.LVL173:
2910:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
 1611              		.loc 1 2910 6 view .LVU487
 1612 0040 7047     		bx	lr
 1613              	.LVL174:
 1614              	.L142:
2910:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STR_VOLUME_ID		/* Find string drive id */
 1615              		.loc 1 2910 6 view .LVU488
 1616 0042 4FF0FF30 		mov	r0, #-1
 1617              	.LVL175:
2946:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1618              		.loc 1 2946 4 is_stmt 1 view .LVU489
2946:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1619              		.loc 1 2946 11 is_stmt 0 view .LVU490
 1620 0046 7047     		bx	lr
 1621              		.cfi_endproc
 1622              	.LFE374:
 1624              		.section	.text.putc_init,"ax",%progbits
 1625              		.align	1
 1626              		.syntax unified
 1627              		.thumb
 1628              		.thumb_func
 1630              	putc_init:
 1631              	.LVL176:
 1632              	.LFB398:
2956:Middlewares/Third_Party/FatFs/src/ff.c **** 
2957:Middlewares/Third_Party/FatFs/src/ff.c **** 
2958:Middlewares/Third_Party/FatFs/src/ff.c **** 
2959:Middlewares/Third_Party/FatFs/src/ff.c **** 
2960:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2961:Middlewares/Third_Party/FatFs/src/ff.c **** /* Load a sector and check if it is an FAT boot sector                   */
2962:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2963:Middlewares/Third_Party/FatFs/src/ff.c **** 
2964:Middlewares/Third_Party/FatFs/src/ff.c **** static
2965:Middlewares/Third_Party/FatFs/src/ff.c **** BYTE check_fs (	/* 0:FAT, 1:exFAT, 2:Valid BS but not FAT, 3:Not a BS, 4:Disk error */
2966:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,	/* File system object */
2967:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sect	/* Sector# (lba) to load and check if it is an FAT-VBR or not */
2968:Middlewares/Third_Party/FatFs/src/ff.c **** )
2969:Middlewares/Third_Party/FatFs/src/ff.c **** {
2970:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;		/* Invaidate window */
2971:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load boot record */
2972:Middlewares/Third_Party/FatFs/src/ff.c **** 
2973:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ld_word(fs->win + BS_55AA) != 0xAA55) return 3;	/* Check boot record signature (always placed 
2974:Middlewares/Third_Party/FatFs/src/ff.c **** 
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->win[BS_JmpBoot] == 0xE9 || (fs->win[BS_JmpBoot] == 0xEB && fs->win[BS_JmpBoot + 2] == 0x90
2976:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
2977:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_dword(fs->win + BS_FilSysType32) == 0x33544146) return 0;			/* Check "FAT3" string */
2978:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
2979:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
2980:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!mem_cmp(fs->win + BS_JmpBoot, "\xEB\x76\x90" "EXFAT   ", 11)) return 1;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 84


2981:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
2982:Middlewares/Third_Party/FatFs/src/ff.c **** 	return 2;
2983:Middlewares/Third_Party/FatFs/src/ff.c **** }
2984:Middlewares/Third_Party/FatFs/src/ff.c **** 
2985:Middlewares/Third_Party/FatFs/src/ff.c **** 
2986:Middlewares/Third_Party/FatFs/src/ff.c **** 
2987:Middlewares/Third_Party/FatFs/src/ff.c **** 
2988:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2989:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find logical drive and check if the volume is mounted                 */
2990:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
2991:Middlewares/Third_Party/FatFs/src/ff.c **** 
2992:Middlewares/Third_Party/FatFs/src/ff.c **** static
2993:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT find_volume (	/* FR_OK(0): successful, !=0: any error occurred */
2994:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR** path,	/* Pointer to pointer to the path name (drive number) */
2995:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS** rfs,		/* Pointer to pointer to the found file system object */
2996:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE mode			/* !=0: Check write protection for write access */
2997:Middlewares/Third_Party/FatFs/src/ff.c **** )
2998:Middlewares/Third_Party/FatFs/src/ff.c **** {
2999:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, *pt;
3000:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
3001:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
3002:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD bsect, fasize, tsect, sysect, nclst, szbfat, br[4];
3003:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD nrsv;
3004:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3005:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
3006:Middlewares/Third_Party/FatFs/src/ff.c **** 
3007:Middlewares/Third_Party/FatFs/src/ff.c **** 
3008:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3009:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = 0;
3010:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(path);
3011:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
3012:Middlewares/Third_Party/FatFs/src/ff.c **** 
3013:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check if the file system object is valid or not */
3014:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs = FatFs[vol];					/* Get pointer to the file system object */
3015:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
3016:Middlewares/Third_Party/FatFs/src/ff.c **** 
3017:Middlewares/Third_Party/FatFs/src/ff.c **** 	ENTER_FF(fs);						/* Lock the volume */
3018:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
3019:Middlewares/Third_Party/FatFs/src/ff.c **** 
3020:Middlewares/Third_Party/FatFs/src/ff.c **** 	mode &= (BYTE)~FA_READ;				/* Desired access mode, write access or not */
3021:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type) {					/* If the volume has been mounted */
3022:Middlewares/Third_Party/FatFs/src/ff.c **** 		stat = disk_status(fs->drv);
3023:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
3024:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
3025:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
3026:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3027:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_OK;				/* The file system object is valid */
3028:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3029:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3030:Middlewares/Third_Party/FatFs/src/ff.c **** 
3031:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* The file system object is not valid. */
3032:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Following code attempts to mount the volume. (analyze BPB and initialize the fs object) */
3033:Middlewares/Third_Party/FatFs/src/ff.c **** 
3034:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = 0;					/* Clear the file system object */
3035:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
3036:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
3037:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) { 			/* Check if the initialization succeeded */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 85


3038:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
3039:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3040:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!_FS_READONLY && mode && (stat & STA_PROTECT)) { /* Check disk write protection if needed */
3041:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
3042:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3043:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS					/* Get sector size (multiple sector size cfg only) */
3044:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(fs->drv, GET_SECTOR_SIZE, &SS(fs)) != RES_OK) return FR_DISK_ERR;
3045:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (SS(fs) > _MAX_SS || SS(fs) < _MIN_SS || (SS(fs) & (SS(fs) - 1))) return FR_DISK_ERR;
3046:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3047:Middlewares/Third_Party/FatFs/src/ff.c **** 
3048:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Find an FAT partition on the drive. Supports only generic partitioning rules, FDISK and SFD. */
3049:Middlewares/Third_Party/FatFs/src/ff.c **** 	bsect = 0;
3050:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = check_fs(fs, bsect);			/* Load sector 0 and check if it is an FAT-VBR as SFD */
3051:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 2 || (fmt < 2 && LD2PT(vol) != 0)) {	/* Not an FAT-VBR or forced partition number */
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 4; i++) {		/* Get partition offset */
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[PTE_System] ? ld_dword(pt + PTE_StLba) : 0;
3055:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3056:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = LD2PT(vol);					/* Partition number: 0:auto, 1-4:forced */
3057:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i) i--;
3058:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {							/* Find an FAT volume */
3059:Middlewares/Third_Party/FatFs/src/ff.c **** 			bsect = br[i];
3060:Middlewares/Third_Party/FatFs/src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 3;	/* Check the partition */
3061:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (LD2PT(vol) == 0 && fmt >= 2 && ++i < 4);
3062:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3063:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 4) return FR_DISK_ERR;		/* An error occured in the disk I/O layer */
3064:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
3065:Middlewares/Third_Party/FatFs/src/ff.c **** 
3066:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* An FAT volume is found (bsect). Following code initializes the file system object */
3067:Middlewares/Third_Party/FatFs/src/ff.c **** 
3068:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3069:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 1) {
3070:Middlewares/Third_Party/FatFs/src/ff.c **** 		QWORD maxlba;
3071:Middlewares/Third_Party/FatFs/src/ff.c **** 
3072:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = BPB_ZeroedEx; i < BPB_ZeroedEx + 53 && fs->win[i] == 0; i++) ;	/* Check zero filler */
3073:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i < BPB_ZeroedEx + 53) return FR_NO_FILESYSTEM;
3074:Middlewares/Third_Party/FatFs/src/ff.c **** 
3075:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_word(fs->win + BPB_FSVerEx) != 0x100) return FR_NO_FILESYSTEM;	/* Check exFAT revision (Mu
3076:Middlewares/Third_Party/FatFs/src/ff.c **** 
3077:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (1 << fs->win[BPB_BytsPerSecEx] != SS(fs)) {	/* (BPB_BytsPerSecEx must be equal to the physica
3078:Middlewares/Third_Party/FatFs/src/ff.c **** 			return FR_NO_FILESYSTEM;
3079:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3080:Middlewares/Third_Party/FatFs/src/ff.c **** 
3081:Middlewares/Third_Party/FatFs/src/ff.c **** 		maxlba = ld_qword(fs->win + BPB_TotSecEx) + bsect;	/* Last LBA + 1 of the volume */
3082:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (maxlba >= 0x100000000) return FR_NO_FILESYSTEM;	/* (It cannot be handled in 32-bit LBA) */
3083:Middlewares/Third_Party/FatFs/src/ff.c **** 
3084:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = ld_dword(fs->win + BPB_FatSzEx);	/* Number of sectors per FAT */
3085:Middlewares/Third_Party/FatFs/src/ff.c **** 
3086:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_fats = fs->win[BPB_NumFATsEx];			/* Number of FATs */
3087:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_fats != 1) return FR_NO_FILESYSTEM;	/* (Supports only 1 FAT) */
3088:Middlewares/Third_Party/FatFs/src/ff.c **** 
3089:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->csize = 1 << fs->win[BPB_SecPerClusEx];		/* Cluster size */
3090:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->csize == 0)	return FR_NO_FILESYSTEM;	/* (Must be 1..32768) */
3091:Middlewares/Third_Party/FatFs/src/ff.c **** 
3092:Middlewares/Third_Party/FatFs/src/ff.c **** 		nclst = ld_dword(fs->win + BPB_NumClusEx);		/* Number of clusters */
3093:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst > MAX_EXFAT) return FR_NO_FILESYSTEM;	/* (Too many clusters) */
3094:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_fatent = nclst + 2;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 86


3095:Middlewares/Third_Party/FatFs/src/ff.c **** 
3096:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Boundaries and Limits */
3097:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->volbase = bsect;
3098:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->database = bsect + ld_dword(fs->win + BPB_DataOfsEx);
3099:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fatbase = bsect + ld_dword(fs->win + BPB_FatOfsEx);
3100:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (maxlba < (QWORD)fs->database + nclst * fs->csize) return FR_NO_FILESYSTEM;	/* (Volume size mu
3101:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->dirbase = ld_dword(fs->win + BPB_RootClusEx);
3102:Middlewares/Third_Party/FatFs/src/ff.c **** 
3103:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Check if bitmap location is in assumption (at the first cluster) */
3104:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, clust2sect(fs, fs->dirbase)) != FR_OK) return FR_DISK_ERR;
3105:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < SS(fs); i += SZDIRE) {
3106:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->win[i] == 0x81 && ld_dword(fs->win + i + 20) == 2) break;	/* 81 entry with cluster #2? *
3107:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3108:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == SS(fs)) return FR_NO_FILESYSTEM;
3109:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3110:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = fs->free_clst = 0xFFFFFFFF;		/* Initialize cluster allocation information */
3111:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3112:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_EXFAT;			/* FAT sub-type */
3113:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
3114:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_EXFAT */
3115:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_word(fs->win + BPB_BytsPerSec) != SS(fs)) return FR_NO_FILESYSTEM;	/* (BPB_BytsPerSec must
3117:Middlewares/Third_Party/FatFs/src/ff.c **** 
3118:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize = ld_word(fs->win + BPB_FATSz16);		/* Number of sectors per FAT */
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
3120:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
3121:Middlewares/Third_Party/FatFs/src/ff.c **** 
3122:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_fats = fs->win[BPB_NumFATs];				/* Number of FATs */
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
3124:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
3125:Middlewares/Third_Party/FatFs/src/ff.c **** 
3126:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->csize = fs->win[BPB_SecPerClus];			/* Cluster size */
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
3128:Middlewares/Third_Party/FatFs/src/ff.c **** 
3129:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_rootdir = ld_word(fs->win + BPB_RootEntCnt);	/* Number of root directory entries */
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
3131:Middlewares/Third_Party/FatFs/src/ff.c **** 
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 		tsect = ld_word(fs->win + BPB_TotSec16);		/* Number of sectors on the volume */
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
3134:Middlewares/Third_Party/FatFs/src/ff.c **** 
3135:Middlewares/Third_Party/FatFs/src/ff.c **** 		nrsv = ld_word(fs->win + BPB_RsvdSecCnt);		/* Number of reserved sectors */
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
3137:Middlewares/Third_Party/FatFs/src/ff.c **** 
3138:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Determine the FAT sub type */
3139:Middlewares/Third_Party/FatFs/src/ff.c **** 		sysect = nrsv + fasize + fs->n_rootdir / (SS(fs) / SZDIRE);	/* RSV + FAT + DIR */
3140:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
3143:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT32;
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
3145:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
3146:Middlewares/Third_Party/FatFs/src/ff.c **** 
3147:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Boundaries and Limits */
3148:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->n_fatent = nclst + 2;						/* Number of FAT entries */
3149:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
3150:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fatbase = bsect + nrsv; 					/* FAT start sector */
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 87


3152:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BPB_FSVer32) != 0) return FR_NO_FILESYSTEM;	/* (Must be FAT32 revision 0.0
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
3155:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
3156:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
3157:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir == 0)	return FR_NO_FILESYSTEM;/* (BPB_RootEntCnt must not be 0) */
3159:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
3160:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
3162:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3163:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->fsize < (szbfat + (SS(fs) - 1)) / SS(fs)) return FR_NO_FILESYSTEM;	/* (BPB_FATSz must not
3164:Middlewares/Third_Party/FatFs/src/ff.c **** 
3165:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3166:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get FSINFO if available */
3167:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = fs->free_clst = 0xFFFFFFFF;		/* Initialize cluster allocation information */
3168:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag = 0x80;
3169:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
3170:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32				/* Enable FSINFO only if FAT32 and BPB_FSInfo32 == 1 */
3171:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& ld_word(fs->win + BPB_FSInfo32) == 1
3172:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& move_window(fs, bsect + 1) == FR_OK)
3173:Middlewares/Third_Party/FatFs/src/ff.c **** 		{
3174:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag = 0;
3175:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BS_55AA) == 0xAA55	/* Load FSINFO data if available */
3176:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
3177:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_StrucSig) == 0x61417272)
3178:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
3179:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 1) == 0
3180:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->free_clst = ld_dword(fs->win + FSI_Free_Count);
3181:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3182:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 2) == 0
3183:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->last_clst = ld_dword(fs->win + FSI_Nxt_Free);
3184:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3185:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3186:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3187:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* (_FS_NOFSINFO & 3) != 3 */
3188:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* !_FS_READONLY */
3189:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3190:Middlewares/Third_Party/FatFs/src/ff.c **** 
3191:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->fs_type = fmt;		/* FAT sub-type */
3192:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
3193:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
3194:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->lfnbuf = LfnBuf;	/* Static LFN working buffer */
3195:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3196:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->dirbuf = DirBuf;	/* Static directory block scratchpad buuffer */
3197:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3198:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3199:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
3200:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->cdir = 0;			/* Initialize current directory */
3201:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3202:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0			/* Clear file lock semaphores */
3203:Middlewares/Third_Party/FatFs/src/ff.c **** 	clear_lock(fs);
3204:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3205:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
3206:Middlewares/Third_Party/FatFs/src/ff.c **** }
3207:Middlewares/Third_Party/FatFs/src/ff.c **** 
3208:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 88


3209:Middlewares/Third_Party/FatFs/src/ff.c **** 
3210:Middlewares/Third_Party/FatFs/src/ff.c **** 
3211:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3212:Middlewares/Third_Party/FatFs/src/ff.c **** /* Check if the file/directory object is valid or not                    */
3213:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3214:Middlewares/Third_Party/FatFs/src/ff.c **** 
3215:Middlewares/Third_Party/FatFs/src/ff.c **** static
3216:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT validate (	/* Returns FR_OK or FR_INVALID_OBJECT */
3217:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID* obj,		/* Pointer to the _OBJ, the 1st member in the FIL/DIR object, to check validity */
3218:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS** fs		/* Pointer to pointer to the owner file system object to return */
3219:Middlewares/Third_Party/FatFs/src/ff.c **** )
3220:Middlewares/Third_Party/FatFs/src/ff.c **** {
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_INVALID_OBJECT;
3222:Middlewares/Third_Party/FatFs/src/ff.c **** 
3223:Middlewares/Third_Party/FatFs/src/ff.c **** 
3224:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (obj && obj->fs && obj->fs->fs_type && obj->id == obj->fs->id) {	/* Test if the object is valid
3225:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
3226:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (lock_fs(obj->fs)) {	/* Obtain the filesystem object */
3227:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(disk_status(obj->fs->drv) & STA_NOINIT)) { /* Test if the phsical drive is kept initialize
3228:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
3229:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3230:Middlewares/Third_Party/FatFs/src/ff.c **** 				unlock_fs(obj->fs, FR_OK);
3231:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3232:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
3233:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_TIMEOUT;
3234:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3235:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3236:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(disk_status(obj->fs->drv) & STA_NOINIT)) { /* Test if the phsical drive is kept initialized
3237:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
3238:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3239:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3240:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	*fs = (res == FR_OK) ? obj->fs : 0;	/* Corresponding filesystem object */
3242:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
3243:Middlewares/Third_Party/FatFs/src/ff.c **** }
3244:Middlewares/Third_Party/FatFs/src/ff.c **** 
3245:Middlewares/Third_Party/FatFs/src/ff.c **** 
3246:Middlewares/Third_Party/FatFs/src/ff.c **** 
3247:Middlewares/Third_Party/FatFs/src/ff.c **** 
3248:Middlewares/Third_Party/FatFs/src/ff.c **** /*---------------------------------------------------------------------------
3249:Middlewares/Third_Party/FatFs/src/ff.c **** 
3250:Middlewares/Third_Party/FatFs/src/ff.c ****    Public Functions (FatFs API)
3251:Middlewares/Third_Party/FatFs/src/ff.c **** 
3252:Middlewares/Third_Party/FatFs/src/ff.c **** ----------------------------------------------------------------------------*/
3253:Middlewares/Third_Party/FatFs/src/ff.c **** 
3254:Middlewares/Third_Party/FatFs/src/ff.c **** 
3255:Middlewares/Third_Party/FatFs/src/ff.c **** 
3256:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3257:Middlewares/Third_Party/FatFs/src/ff.c **** /* Mount/Unmount a Logical Drive                                         */
3258:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3259:Middlewares/Third_Party/FatFs/src/ff.c **** 
3260:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mount (
3261:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS* fs,			/* Pointer to the file system object (NULL:unmount)*/
3262:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Logical drive number to be mounted/unmounted */
3263:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE opt			/* Mode option 0:Do not mount (delayed mount), 1:Mount immediately */
3264:Middlewares/Third_Party/FatFs/src/ff.c **** )
3265:Middlewares/Third_Party/FatFs/src/ff.c **** {
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 89


3266:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *cfs;
3267:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
3268:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3269:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *rp = path;
3270:Middlewares/Third_Party/FatFs/src/ff.c **** 
3271:Middlewares/Third_Party/FatFs/src/ff.c **** 
3272:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3273:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&rp);
3274:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
3275:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
3276:Middlewares/Third_Party/FatFs/src/ff.c **** 
3277:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (cfs) {
3278:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3279:Middlewares/Third_Party/FatFs/src/ff.c **** 		clear_lock(cfs);
3280:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3281:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Discard sync object of the current volume */
3282:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ff_del_syncobj(cfs->sobj)) return FR_INT_ERR;
3283:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3284:Middlewares/Third_Party/FatFs/src/ff.c **** 		cfs->fs_type = 0;				/* Clear old fs object */
3285:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3286:Middlewares/Third_Party/FatFs/src/ff.c **** 
3287:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs) {
3288:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
3289:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Create sync object for the new volume */
3290:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!ff_cre_syncobj((BYTE)vol, &fs->sobj)) return FR_INT_ERR;
3291:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3292:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3293:Middlewares/Third_Party/FatFs/src/ff.c **** 	FatFs[vol] = fs;					/* Register new fs object */
3294:Middlewares/Third_Party/FatFs/src/ff.c **** 
3295:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs || opt != 1) return FR_OK;	/* Do not mount now, it will be mounted later */
3296:Middlewares/Third_Party/FatFs/src/ff.c **** 
3297:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);	/* Force mounted the volume */
3298:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3299:Middlewares/Third_Party/FatFs/src/ff.c **** }
3300:Middlewares/Third_Party/FatFs/src/ff.c **** 
3301:Middlewares/Third_Party/FatFs/src/ff.c **** 
3302:Middlewares/Third_Party/FatFs/src/ff.c **** 
3303:Middlewares/Third_Party/FatFs/src/ff.c **** 
3304:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3305:Middlewares/Third_Party/FatFs/src/ff.c **** /* Open or Create a File                                                 */
3306:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3307:Middlewares/Third_Party/FatFs/src/ff.c **** 
3308:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_open (
3309:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the blank file object */
3310:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file name */
3311:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE mode			/* Access mode and file open mode flags */
3312:Middlewares/Third_Party/FatFs/src/ff.c **** )
3313:Middlewares/Third_Party/FatFs/src/ff.c **** {
3314:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3315:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3316:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3317:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3318:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dw, cl, bcs, clst, sc;
3319:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ofs;
3320:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3321:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
3322:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 90


3323:Middlewares/Third_Party/FatFs/src/ff.c **** 
3324:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fp) return FR_INVALID_OBJECT;
3325:Middlewares/Third_Party/FatFs/src/ff.c **** 
3326:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
3327:Middlewares/Third_Party/FatFs/src/ff.c **** 	mode &= _FS_READONLY ? FA_READ : FA_READ | FA_WRITE | FA_CREATE_ALWAYS | FA_CREATE_NEW | FA_OPEN_A
3328:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, mode);
3329:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3330:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
3331:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
3332:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
3333:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
3334:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3335:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
3336:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
3337:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3338:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3339:Middlewares/Third_Party/FatFs/src/ff.c **** 			else {
3340:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = chk_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
3341:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3342:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3343:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3344:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create or Open a file */
3345:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (mode & (FA_CREATE_ALWAYS | FA_OPEN_ALWAYS | FA_CREATE_NEW)) {
3346:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
3347:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {		/* There is no file to open, create a new entry */
3348:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3349:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = enq_lock() ? dir_register(&dj) : FR_TOO_MANY_OPEN_FILES;
3350:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3351:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&dj);
3352:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3353:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3354:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA_CREATE_ALWAYS;		/* File is created */
3355:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3356:Middlewares/Third_Party/FatFs/src/ff.c **** 			else {								/* Any object is already existing */
3357:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & (AM_RDO | AM_DIR)) {	/* Cannot overwrite it (R/O or DIR) */
3358:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;
3359:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (mode & FA_CREATE_NEW) res = FR_EXIST;	/* Cannot create as new file */
3361:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3362:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3363:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && (mode & FA_CREATE_ALWAYS)) {	/* Truncate it if overwrite mode */
3364:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();
3365:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3366:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
3367:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Get current allocation info */
3368:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.fs = fs;
3369:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = ld_dword(fs->dirbuf + XDIR_FstClus);
3370:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
3371:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.stat = fs->dirbuf[XDIR_GenFlags] & 2;
3372:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.n_frag = 0;
3373:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Initialize directory entry block */
3374:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_CrtTime, dw);	/* Set created time */
3375:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_CrtTime10] = 0;
3376:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_ModTime, dw);	/* Set modified time */
3377:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_ModTime10] = 0;
3378:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_Attr] = AM_ARC;				/* Reset attribute */
3379:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_FstClus, 0);		/* Reset file allocation info */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 91


3380:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_qword(fs->dirbuf + XDIR_FileSize, 0);
3381:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_qword(fs->dirbuf + XDIR_ValidFileSize, 0);
3382:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_GenFlags] = 1;
3383:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = store_xdir(&dj);
3384:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK && fp->obj.sclust) {		/* Remove the cluster chain if exist */
3385:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = remove_chain(&fp->obj, fp->obj.sclust, 0);
3386:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->last_clst = fp->obj.sclust - 1;		/* Reuse the cluster hole */
3387:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3388:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
3389:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3390:Middlewares/Third_Party/FatFs/src/ff.c **** 				{
3391:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean directory info */
3392:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_CrtTime, dw);	/* Set created time */
3393:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_ModTime, dw);	/* Set modified time */
3394:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
3395:Middlewares/Third_Party/FatFs/src/ff.c **** 					cl = ld_clust(fs, dj.dir);			/* Get cluster chain */
3396:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
3397:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_FileSize, 0);
3398:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
3399:Middlewares/Third_Party/FatFs/src/ff.c **** 
3400:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (cl) {							/* Remove the cluster chain if exist */
3401:Middlewares/Third_Party/FatFs/src/ff.c **** 						dw = fs->winsect;
3402:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
3403:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
3404:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, dw);
3405:Middlewares/Third_Party/FatFs/src/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
3406:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
3407:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3408:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3409:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3410:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3411:Middlewares/Third_Party/FatFs/src/ff.c **** 		else {	/* Open an existing file */
3412:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Following succeeded */
3413:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* It is a directory */
3414:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
3415:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
3416:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((mode & FA_WRITE) && (dj.obj.attr & AM_RDO)) { /* R/O violation */
3417:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
3418:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3419:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3420:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3421:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3422:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3423:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
3424:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA_MODIFIED;
3425:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
3426:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_ptr = dj.dir;
3427:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3428:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.lockid = inc_lock(&dj, (mode & ~FA_READ) ? 1 : 0);
3429:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->obj.lockid) res = FR_INT_ERR;
3430:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3431:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3432:Middlewares/Third_Party/FatFs/src/ff.c **** #else		/* R/O configuration */
3433:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3434:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
3435:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
3436:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 92


3437:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* It is a directory */
3438:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
3439:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3440:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3441:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3442:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3443:Middlewares/Third_Party/FatFs/src/ff.c **** 
3444:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3445:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3446:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
3447:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.c_scl = dj.obj.sclust;							/* Get containing directory info */
3448:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.c_size = ((DWORD)dj.obj.objsize & 0xFFFFFF00) | dj.obj.stat;
3449:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.c_ofs = dj.blk_ofs;
3450:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.sclust = ld_dword(fs->dirbuf + XDIR_FstClus);	/* Get object allocation info */
3451:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
3452:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.stat = fs->dirbuf[XDIR_GenFlags] & 2;
3453:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
3454:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3455:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.sclust = ld_clust(fs, dj.dir);					/* Get object allocation info */
3457:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
3458:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3459:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
3460:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->cltbl = 0;			/* Disable fast seek mode */
3461:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3462:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.fs = fs;	 	/* Validate the file object */
3463:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.id = fs->id;
3464:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag = mode;		/* Set file access mode */
3465:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->err = 0;			/* Clear error flag */
3466:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = 0;			/* Invalidate current data sector */
3467:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = 0;			/* Set file pointer top of the file */
3468:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3469:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3470:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(fp->buf, 0, _MAX_SS);	/* Clear sector buffer */
3471:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3472:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((mode & FA_SEEKEND) && fp->obj.objsize > 0) {	/* Seek to end of file if FA_OPEN_APPEND is sp
3473:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
3474:Middlewares/Third_Party/FatFs/src/ff.c **** 				bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size in byte */
3475:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (ofs = fp->obj.objsize; res == FR_OK && ofs > bcs; ofs -= bcs) {
3477:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
3478:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
3479:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
3480:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3481:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;
3482:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && ofs % SS(fs)) {	/* Fill sector buffer if not on the sector boundary */
3483:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((sc = clust2sect(fs, clst)) == 0) {
3484:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_INT_ERR;
3485:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
3486:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->sect = sc + (DWORD)(ofs / SS(fs));
3487:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3488:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_read(fs->drv, fp->buf, fp->sect, 1) != RES_OK) res = FR_DISK_ERR;
3489:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3490:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3491:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3492:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3493:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 93


3494:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3495:Middlewares/Third_Party/FatFs/src/ff.c **** 
3496:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
3497:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3498:Middlewares/Third_Party/FatFs/src/ff.c **** 
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) fp->obj.fs = 0;	/* Invalidate file object on error */
3500:Middlewares/Third_Party/FatFs/src/ff.c **** 
3501:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3502:Middlewares/Third_Party/FatFs/src/ff.c **** }
3503:Middlewares/Third_Party/FatFs/src/ff.c **** 
3504:Middlewares/Third_Party/FatFs/src/ff.c **** 
3505:Middlewares/Third_Party/FatFs/src/ff.c **** 
3506:Middlewares/Third_Party/FatFs/src/ff.c **** 
3507:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3508:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read File                                                             */
3509:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3510:Middlewares/Third_Party/FatFs/src/ff.c **** 
3511:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_read (
3512:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp, 	/* Pointer to the file object */
3513:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* buff,	/* Pointer to data buffer */
3514:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btr,	/* Number of bytes to read */
3515:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* br	/* Pointer to number of bytes read */
3516:Middlewares/Third_Party/FatFs/src/ff.c **** )
3517:Middlewares/Third_Party/FatFs/src/ff.c **** {
3518:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3519:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3520:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
3521:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t remain;
3522:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rcnt, cc, csect;
3523:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *rbuff = (BYTE*)buff;
3524:Middlewares/Third_Party/FatFs/src/ff.c **** 
3525:Middlewares/Third_Party/FatFs/src/ff.c **** 
3526:Middlewares/Third_Party/FatFs/src/ff.c **** 	*br = 0;	/* Clear read byte counter */
3527:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
3530:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
3531:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
3532:Middlewares/Third_Party/FatFs/src/ff.c **** 
3533:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btr;								/* Repeat until all data read */
3534:Middlewares/Third_Party/FatFs/src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
3535:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
3536:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
3537:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
3538:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
3539:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;		/* Follow cluster chain from the origin */
3540:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* Middle or end of the file */
3541:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
3542:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->cltbl) {
3543:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
3544:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
3545:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3546:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
3547:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = get_fat(&fp->obj, fp->clust);	/* Follow cluster chain on the FAT */
3548:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3549:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst < 2) ABORT(fs, FR_INT_ERR);
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 94


3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
3552:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
3553:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3554:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect = clust2sect(fs, fp->clust);	/* Get current sector */
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
3556:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
3557:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btr / SS(fs);					/* When remaining bytes >= sector size, */
3558:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
3559:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
3560:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
3561:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3562:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_read(fs->drv, rbuff, sect, cc) != RES_OK) ABORT(fs, FR_DISK_ERR);
3563:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
3564:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3565:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->wflag && fs->winsect - sect < cc) {
3566:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fs->winsect - sect) * SS(fs)), fs->win, SS(fs));
3567:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3568:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 				if ((fp->flag & FA_DIRTY) && fp->sect - sect < cc) {
3570:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
3571:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3572:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3573:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3574:Middlewares/Third_Party/FatFs/src/ff.c **** 				rcnt = SS(fs) * cc;				/* Number of bytes transferred */
3575:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
3576:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3577:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3578:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->sect != sect) {			/* Load data sector if not in cache */
3579:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3580:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
3582:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
3583:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3584:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_read(fs->drv, fp->buf, sect, 1) != RES_OK)	ABORT(fs, FR_DISK_ERR);	/* Fill sector cach
3586:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3587:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3588:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = sect;
3589:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3590:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes left in the sector */
3591:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
3592:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3593:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, fp->sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window */
3594:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(rbuff, fs->win + fp->fptr % SS(fs), rcnt);	/* Extract partial sector */
3595:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3596:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(rbuff, fp->buf + fp->fptr % SS(fs), rcnt);	/* Extract partial sector */
3597:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3598:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3599:Middlewares/Third_Party/FatFs/src/ff.c **** 
3600:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, FR_OK);
3601:Middlewares/Third_Party/FatFs/src/ff.c **** }
3602:Middlewares/Third_Party/FatFs/src/ff.c **** 
3603:Middlewares/Third_Party/FatFs/src/ff.c **** 
3604:Middlewares/Third_Party/FatFs/src/ff.c **** 
3605:Middlewares/Third_Party/FatFs/src/ff.c **** 
3606:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3607:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 95


3608:Middlewares/Third_Party/FatFs/src/ff.c **** /* Write File                                                            */
3609:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3610:Middlewares/Third_Party/FatFs/src/ff.c **** 
3611:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_write (
3612:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the file object */
3613:Middlewares/Third_Party/FatFs/src/ff.c **** 	const void* buff,	/* Pointer to the data to be written */
3614:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btw,			/* Number of bytes to write */
3615:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* bw			/* Pointer to number of bytes written */
3616:Middlewares/Third_Party/FatFs/src/ff.c **** )
3617:Middlewares/Third_Party/FatFs/src/ff.c **** {
3618:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3619:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3620:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
3621:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wcnt, cc, csect;
3622:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *wbuff = (const BYTE*)buff;
3623:Middlewares/Third_Party/FatFs/src/ff.c **** 
3624:Middlewares/Third_Party/FatFs/src/ff.c **** 
3625:Middlewares/Third_Party/FatFs/src/ff.c **** 	*bw = 0;	/* Clear write byte counter */
3626:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
3629:Middlewares/Third_Party/FatFs/src/ff.c **** 
3630:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check fptr wrap-around (file size cannot reach 4GiB on FATxx) */
3631:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((!_FS_EXFAT || fs->fs_type != FS_EXFAT) && (DWORD)(fp->fptr + btw) < (DWORD)fp->fptr) {
3632:Middlewares/Third_Party/FatFs/src/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
3633:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3634:Middlewares/Third_Party/FatFs/src/ff.c **** 
3635:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btw;							/* Repeat until all data written */
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, fp->obj.objsize = (fp->fptr > fp->obj.objsize) ? fp->fptr : fp->
3637:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
3638:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
3639:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
3640:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
3641:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;	/* Follow from the origin */
3642:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) {		/* If no cluster is allocated, */
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(&fp->obj, 0);	/* create a new cluster chain */
3644:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3645:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {					/* On the middle or end of the file */
3646:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
3647:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->cltbl) {
3648:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
3649:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
3650:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3651:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
3652:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(&fp->obj, fp->clust);	/* Follow or stretch cluster chain on the FAT */
3653:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3654:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3655:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0) break;		/* Could not allocate a new cluster (disk full) */
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 1) ABORT(fs, FR_INT_ERR);
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
3658:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->obj.sclust == 0) fp->obj.sclust = clst;	/* Set start cluster if the first write */
3660:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3661:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3662:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->winsect == fp->sect && sync_window(fs) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Write-back s
3663:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3664:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA_DIRTY) {		/* Write-back sector cache */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 96


3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
3666:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
3667:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3668:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3669:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect = clust2sect(fs, fp->clust);	/* Get current sector */
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
3671:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
3672:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btw / SS(fs);				/* When remaining bytes >= sector size, */
3673:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {						/* Write maximum contiguous sectors directly */
3674:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
3675:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
3676:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3677:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, wbuff, sect, cc) != RES_OK) ABORT(fs, FR_DISK_ERR);
3678:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
3679:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3680:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->winsect - sect < cc) {	/* Refill sector cache if it gets invalidated by the direct writ
3681:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fs->win, wbuff + ((fs->winsect - sect) * SS(fs)), SS(fs));
3682:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 0;
3683:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3684:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->sect - sect < cc) { /* Refill sector cache if it gets invalidated by the direct write *
3686:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
3687:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
3688:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3689:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3690:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3691:Middlewares/Third_Party/FatFs/src/ff.c **** 				wcnt = SS(fs) * cc;		/* Number of bytes transferred */
3692:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
3693:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3694:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3695:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->fptr >= fp->obj.objsize) {	/* Avoid silly cache filling on the growing edge */
3696:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (sync_window(fs) != FR_OK) ABORT(fs, FR_DISK_ERR);
3697:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->winsect = sect;
3698:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3699:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3700:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->sect != sect && 		/* Fill sector cache with file data */
3701:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr < fp->obj.objsize &&
3702:Middlewares/Third_Party/FatFs/src/ff.c **** 				disk_read(fs->drv, fp->buf, sect, 1) != RES_OK) {
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fs, FR_DISK_ERR);
3704:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3705:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3706:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = sect;
3707:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3708:Middlewares/Third_Party/FatFs/src/ff.c **** 		wcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes left in the sector */
3709:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
3710:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
3711:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, fp->sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window */
3712:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(fs->win + fp->fptr % SS(fs), wbuff, wcnt);	/* Fit data to the sector */
3713:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->wflag = 1;
3714:Middlewares/Third_Party/FatFs/src/ff.c **** #else
3715:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(fp->buf + fp->fptr % SS(fs), wbuff, wcnt);	/* Fit data to the sector */
3716:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_DIRTY;
3717:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3718:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3719:Middlewares/Third_Party/FatFs/src/ff.c **** 
3720:Middlewares/Third_Party/FatFs/src/ff.c **** 	fp->flag |= FA_MODIFIED;				/* Set file change flag */
3721:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 97


3722:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, FR_OK);
3723:Middlewares/Third_Party/FatFs/src/ff.c **** }
3724:Middlewares/Third_Party/FatFs/src/ff.c **** 
3725:Middlewares/Third_Party/FatFs/src/ff.c **** 
3726:Middlewares/Third_Party/FatFs/src/ff.c **** 
3727:Middlewares/Third_Party/FatFs/src/ff.c **** 
3728:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3729:Middlewares/Third_Party/FatFs/src/ff.c **** /* Synchronize the File                                                  */
3730:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3731:Middlewares/Third_Party/FatFs/src/ff.c **** 
3732:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_sync (
3733:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
3734:Middlewares/Third_Party/FatFs/src/ff.c **** )
3735:Middlewares/Third_Party/FatFs/src/ff.c **** {
3736:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3737:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3738:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tm;
3739:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
3740:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3741:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3742:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
3743:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3744:Middlewares/Third_Party/FatFs/src/ff.c **** 
3745:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);	/* Check validity of the file object */
3746:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3747:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->flag & FA_MODIFIED) {	/* Is there any change to the file? */
3748:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
3749:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA_DIRTY) {	/* Write-back cached data if needed */
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) LEAVE_FF(fs, FR_DISK_ERR);
3751:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
3752:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3753:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3754:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Update the directory entry */
3755:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();				/* Modified time */
3756:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3757:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
3758:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = fill_first_frag(&fp->obj);	/* Fill first fragment on the FAT if needed */
3759:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
3760:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = fill_last_frag(&fp->obj, fp->clust, 0xFFFFFFFF);	/* Fill last fragment on the FAT if nee
3761:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3762:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
3763:Middlewares/Third_Party/FatFs/src/ff.c **** 					INIT_NAMBUF(fs);
3764:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = load_obj_dir(&dj, &fp->obj);	/* Load directory entry block */
3765:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
3766:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->dirbuf[XDIR_Attr] |= AM_ARC;				/* Set archive bit */
3767:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->dirbuf[XDIR_GenFlags] = fp->obj.stat | 1;	/* Update file allocation info */
3768:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_dword(fs->dirbuf + XDIR_FstClus, fp->obj.sclust);
3769:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_qword(fs->dirbuf + XDIR_FileSize, fp->obj.objsize);
3770:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_qword(fs->dirbuf + XDIR_ValidFileSize, fp->obj.objsize);
3771:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_dword(fs->dirbuf + XDIR_ModTime, tm);		/* Update modified time */
3772:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->dirbuf[XDIR_ModTime10] = 0;
3773:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_dword(fs->dirbuf + XDIR_AccTime, 0);
3774:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = store_xdir(&dj);	/* Restore it to the directory */
3775:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
3776:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = sync_fs(fs);
3777:Middlewares/Third_Party/FatFs/src/ff.c **** 							fp->flag &= (BYTE)~FA_MODIFIED;
3778:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 98


3779:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3780:Middlewares/Third_Party/FatFs/src/ff.c **** 					FREE_NAMBUF();
3781:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3782:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
3783:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3784:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
3785:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = move_window(fs, fp->dir_sect);
3786:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
3787:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir = fp->dir_ptr;
3788:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] |= AM_ARC;						/* Set archive bit */
3789:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation info  */
3790:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_FileSize, (DWORD)fp->obj.objsize);	/* Update file size */
3791:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);				/* Update modified time */
3792:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_word(dir + DIR_LstAccDate, 0);
3793:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
3794:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
3795:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_MODIFIED;
3796:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3797:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3798:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3799:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3800:Middlewares/Third_Party/FatFs/src/ff.c **** 
3801:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3802:Middlewares/Third_Party/FatFs/src/ff.c **** }
3803:Middlewares/Third_Party/FatFs/src/ff.c **** 
3804:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
3805:Middlewares/Third_Party/FatFs/src/ff.c **** 
3806:Middlewares/Third_Party/FatFs/src/ff.c **** 
3807:Middlewares/Third_Party/FatFs/src/ff.c **** 
3808:Middlewares/Third_Party/FatFs/src/ff.c **** 
3809:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3810:Middlewares/Third_Party/FatFs/src/ff.c **** /* Close File                                                            */
3811:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3812:Middlewares/Third_Party/FatFs/src/ff.c **** 
3813:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_close (
3814:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object to be closed */
3815:Middlewares/Third_Party/FatFs/src/ff.c **** )
3816:Middlewares/Third_Party/FatFs/src/ff.c **** {
3817:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3818:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3819:Middlewares/Third_Party/FatFs/src/ff.c **** 
3820:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
3821:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = f_sync(fp);					/* Flush cached data */
3822:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK)
3823:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3824:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
3825:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = validate(&fp->obj, &fs);	/* Lock volume */
3826:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3827:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(fp->obj.lockid);	/* Decrement file open counter */
3829:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)
3830:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3831:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
3832:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.fs = 0;			/* Invalidate file object */
3833:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3834:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
3835:Middlewares/Third_Party/FatFs/src/ff.c **** 			unlock_fs(fs, FR_OK);		/* Unlock volume */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 99


3836:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3837:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3838:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3839:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
3840:Middlewares/Third_Party/FatFs/src/ff.c **** }
3841:Middlewares/Third_Party/FatFs/src/ff.c **** 
3842:Middlewares/Third_Party/FatFs/src/ff.c **** 
3843:Middlewares/Third_Party/FatFs/src/ff.c **** 
3844:Middlewares/Third_Party/FatFs/src/ff.c **** 
3845:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH >= 1
3846:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3847:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Current Directory or Current Drive, Get Current Directory      */
3848:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3849:Middlewares/Third_Party/FatFs/src/ff.c **** 
3850:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES >= 2
3851:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chdrive (
3852:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Drive number */
3853:Middlewares/Third_Party/FatFs/src/ff.c **** )
3854:Middlewares/Third_Party/FatFs/src/ff.c **** {
3855:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
3856:Middlewares/Third_Party/FatFs/src/ff.c **** 
3857:Middlewares/Third_Party/FatFs/src/ff.c **** 
3858:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive number */
3859:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&path);
3860:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
3861:Middlewares/Third_Party/FatFs/src/ff.c **** 
3862:Middlewares/Third_Party/FatFs/src/ff.c **** 	CurrVol = (BYTE)vol;	/* Set it as current volume */
3863:Middlewares/Third_Party/FatFs/src/ff.c **** 
3864:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
3865:Middlewares/Third_Party/FatFs/src/ff.c **** }
3866:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3867:Middlewares/Third_Party/FatFs/src/ff.c **** 
3868:Middlewares/Third_Party/FatFs/src/ff.c **** 
3869:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chdir (
3870:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
3871:Middlewares/Third_Party/FatFs/src/ff.c **** )
3872:Middlewares/Third_Party/FatFs/src/ff.c **** {
3873:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3874:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3875:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3876:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
3877:Middlewares/Third_Party/FatFs/src/ff.c **** 
3878:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
3879:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);
3880:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3881:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
3882:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
3883:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the path */
3884:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {					/* Follow completed */
3885:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
3886:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->cdir = dj.obj.sclust;	/* It is the start directory itself */
3887:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3888:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
3889:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->cdc_scl = dj.obj.c_scl;
3890:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->cdc_size = dj.obj.c_size;
3891:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->cdc_ofs = dj.obj.c_ofs;
3892:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 100


3893:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3894:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
3895:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {	/* It is a sub-directory */
3896:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
3897:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_EXFAT) {
3898:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdir = ld_dword(fs->dirbuf + XDIR_FstClus);		/* Sub-directory cluster */
3899:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdc_scl = dj.obj.sclust;						/* Save containing directory information */
3900:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdc_size = ((DWORD)dj.obj.objsize & 0xFFFFFF00) | dj.obj.stat;
3901:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdc_ofs = dj.blk_ofs;
3902:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
3903:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3904:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
3905:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->cdir = ld_clust(fs, dj.dir);					/* Sub-directory cluster */
3906:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
3907:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
3908:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_PATH;		/* Reached but a file */
3909:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3910:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3911:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3912:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
3913:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
3914:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3915:Middlewares/Third_Party/FatFs/src/ff.c **** 
3916:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3917:Middlewares/Third_Party/FatFs/src/ff.c **** }
3918:Middlewares/Third_Party/FatFs/src/ff.c **** 
3919:Middlewares/Third_Party/FatFs/src/ff.c **** 
3920:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH >= 2
3921:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getcwd (
3922:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* buff,	/* Pointer to the directory path */
3923:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT len		/* Size of path */
3924:Middlewares/Third_Party/FatFs/src/ff.c **** )
3925:Middlewares/Third_Party/FatFs/src/ff.c **** {
3926:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
3927:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
3928:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
3929:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, n;
3930:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ccl;
3931:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR *tp;
3932:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO fno;
3933:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
3934:Middlewares/Third_Party/FatFs/src/ff.c **** 
3935:Middlewares/Third_Party/FatFs/src/ff.c **** 
3936:Middlewares/Third_Party/FatFs/src/ff.c **** 	*buff = 0;
3937:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
3938:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume((const TCHAR**)&buff, &fs, 0);	/* Get current volume */
3939:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
3940:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
3941:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
3942:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = len;			/* Bottom of buffer (directory stack base) */
3943:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {	/* (Cannot do getcwd on exFAT and returns root path)
3944:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.obj.sclust = fs->cdir;				/* Start to follow upper directory from current directory */
3945:Middlewares/Third_Party/FatFs/src/ff.c **** 			while ((ccl = dj.obj.sclust) != 0) {	/* Repeat while current directory is a sub-directory */
3946:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(&dj, 1 * SZDIRE);	/* Get parent directory */
3947:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
3948:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = move_window(fs, dj.sect);
3949:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 101


3950:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.obj.sclust = ld_clust(fs, dj.dir);	/* Goto parent directory */
3951:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(&dj, 0);
3952:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
3953:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {							/* Find the entry links to the child directory */
3954:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_read(&dj, 0);
3955:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
3956:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ccl == ld_clust(fs, dj.dir)) break;	/* Found the entry */
3957:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_next(&dj, 0);
3958:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (res == FR_OK);
3959:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) res = FR_INT_ERR;/* It cannot be 'not found'. */
3960:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res != FR_OK) break;
3961:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(&dj, &fno);		/* Get the directory name and push it to the buffer */
3962:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (n = 0; fno.fname[n]; n++) ;
3963:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i < n + 3) {
3964:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NOT_ENOUGH_CORE; break;
3965:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
3966:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (n) buff[--i] = fno.fname[--n];
3967:Middlewares/Third_Party/FatFs/src/ff.c **** 				buff[--i] = '/';
3968:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3969:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3970:Middlewares/Third_Party/FatFs/src/ff.c **** 		tp = buff;
3971:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
3972:Middlewares/Third_Party/FatFs/src/ff.c **** #if _VOLUMES >= 2
3973:Middlewares/Third_Party/FatFs/src/ff.c **** 			*tp++ = '0' + CurrVol;			/* Put drive number */
3974:Middlewares/Third_Party/FatFs/src/ff.c **** 			*tp++ = ':';
3975:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
3976:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (i == len) {					/* Root-directory */
3977:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tp++ = '/';
3978:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {						/* Sub-directroy */
3979:Middlewares/Third_Party/FatFs/src/ff.c **** 				do		/* Add stacked path str */
3980:Middlewares/Third_Party/FatFs/src/ff.c **** 					*tp++ = buff[i++];
3981:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (i < len);
3982:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
3983:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
3984:Middlewares/Third_Party/FatFs/src/ff.c **** 		*tp = 0;
3985:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
3986:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
3987:Middlewares/Third_Party/FatFs/src/ff.c **** 
3988:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
3989:Middlewares/Third_Party/FatFs/src/ff.c **** }
3990:Middlewares/Third_Party/FatFs/src/ff.c **** 
3991:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_RPATH >= 2 */
3992:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_RPATH >= 1 */
3993:Middlewares/Third_Party/FatFs/src/ff.c **** 
3994:Middlewares/Third_Party/FatFs/src/ff.c **** 
3995:Middlewares/Third_Party/FatFs/src/ff.c **** 
3996:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
3997:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
3998:Middlewares/Third_Party/FatFs/src/ff.c **** /* Seek File R/W Pointer                                                 */
3999:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4000:Middlewares/Third_Party/FatFs/src/ff.c **** 
4001:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_lseek (
4002:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
4003:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ofs		/* File pointer from top of file */
4004:Middlewares/Third_Party/FatFs/src/ff.c **** )
4005:Middlewares/Third_Party/FatFs/src/ff.c **** {
4006:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 102


4007:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4008:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, bcs, nsect;
4009:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ifptr;
4010:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
4011:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cl, pcl, ncl, tcl, dsc, tlen, ulen, *tbl;
4012:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4013:Middlewares/Third_Party/FatFs/src/ff.c **** 
4014:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
4015:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
4016:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
4017:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && fs->fs_type == FS_EXFAT) {
4018:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = fill_last_frag(&fp->obj, fp->clust, 0xFFFFFFFF);	/* Fill last fragment on the FAT if needed
4019:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4020:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4021:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fs, res);
4022:Middlewares/Third_Party/FatFs/src/ff.c **** 
4023:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
4024:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->cltbl) {	/* Fast seek */
4025:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
4026:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fp->cltbl;
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
4028:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
4029:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl) {
4030:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
4031:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Get a fragment */
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 					tcl = cl; ncl = 0; ulen += 2;	/* Top, length and used items */
4033:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
4034:Middlewares/Third_Party/FatFs/src/ff.c **** 						pcl = cl; ncl++;
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 						cl = get_fat(&fp->obj, cl);
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4038:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
4039:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
4041:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4042:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (cl < fs->n_fatent);	/* Repeat until end of chain */
4043:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4044:Middlewares/Third_Party/FatFs/src/ff.c **** 			*fp->cltbl = ulen;	/* Number of items used */
4045:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ulen <= tlen) {
4046:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tbl = 0;		/* Terminate table */
4047:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4048:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NOT_ENOUGH_CORE;	/* Given table size is smaller than required */
4049:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4050:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {						/* Fast seek */
4051:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs > fp->obj.objsize) ofs = fp->obj.objsize;	/* Clip offset at the file size */
4052:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
4053:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs) {
4054:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
4055:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, fp->clust);
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!dsc) ABORT(fs, FR_INT_ERR);
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
4058:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
4059:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
4060:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4061:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
4063:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 103


4064:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4065:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4066:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_read(fs->drv, fp->buf, dsc, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);	/* Load current sec
4067:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4068:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->sect = dsc;
4069:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4070:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4071:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4072:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
4073:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4074:Middlewares/Third_Party/FatFs/src/ff.c **** 
4075:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Normal Seek */
4076:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
4077:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4078:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->fs_type != FS_EXFAT && ofs >= 0x100000000) ofs = 0xFFFFFFFF;	/* Clip at 4GiB-1 if at FATx
4079:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4080:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs > fp->obj.objsize && (_FS_READONLY || !(fp->flag & FA_WRITE))) {	/* In read-only mode, cl
4081:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
4082:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4083:Middlewares/Third_Party/FatFs/src/ff.c **** 		ifptr = fp->fptr;
4084:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr = nsect = 0;
4085:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
4086:Middlewares/Third_Party/FatFs/src/ff.c **** 			bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size (byte) */
4087:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ifptr > 0 &&
4088:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
4089:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
4090:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
4091:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->clust;
4092:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* When seek to back cluster, */
4093:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->obj.sclust;					/* start from the first cluster */
4094:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4095:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0) {						/* If no cluster chain, create a new chain */
4096:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(&fp->obj, 0);
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4099:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
4100:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4101:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4102:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;
4103:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4104:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst != 0) {
4105:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
4106:Middlewares/Third_Party/FatFs/src/ff.c **** 					ofs -= bcs; fp->fptr += bcs;
4107:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4108:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fp->flag & FA_WRITE) {			/* Check if in write mode or not */
4109:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize t
4110:Middlewares/Third_Party/FatFs/src/ff.c **** 							fp->obj.objsize = fp->fptr;
4111:Middlewares/Third_Party/FatFs/src/ff.c **** 							fp->flag |= FA_MODIFIED;
4112:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4113:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(&fp->obj, clst);	/* Follow chain with forceed stretch */
4114:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (clst == 0) {				/* Clip file size in case of disk full */
4115:Middlewares/Third_Party/FatFs/src/ff.c **** 							ofs = 0; break;
4116:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4117:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
4118:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4119:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
4120:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = get_fat(&fp->obj, clst);	/* Follow cluster chain if not in write mode */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 104


4121:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
4124:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
4125:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4126:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr += ofs;
4127:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ofs % SS(fs)) {
4128:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fs, clst);	/* Current sector */
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!nsect) ABORT(fs, FR_INT_ERR);
4130:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
4131:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4132:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4133:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4134:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_READONLY && fp->fptr > fp->obj.objsize) {		/* Set file change flag if the file size is e
4135:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fp->fptr;
4136:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA_MODIFIED;
4137:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4138:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) && nsect != fp->sect) {	/* Fill sector cache if needed */
4139:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
4140:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4141:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA_DIRTY) {			/* Write-back dirty sector cache */
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
4143:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
4144:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4145:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4146:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fp->buf, nsect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);	/* Fill sector cach
4147:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4148:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = nsect;
4149:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4150:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4151:Middlewares/Third_Party/FatFs/src/ff.c **** 
4152:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4153:Middlewares/Third_Party/FatFs/src/ff.c **** }
4154:Middlewares/Third_Party/FatFs/src/ff.c **** 
4155:Middlewares/Third_Party/FatFs/src/ff.c **** 
4156:Middlewares/Third_Party/FatFs/src/ff.c **** 
4157:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 1
4158:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4159:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create a Directory Object                                             */
4160:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4161:Middlewares/Third_Party/FatFs/src/ff.c **** 
4162:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_opendir (
4163:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to directory object to create */
4164:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path	/* Pointer to the directory path */
4165:Middlewares/Third_Party/FatFs/src/ff.c **** )
4166:Middlewares/Third_Party/FatFs/src/ff.c **** {
4167:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4168:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4169:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID *obj;
4170:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4171:Middlewares/Third_Party/FatFs/src/ff.c **** 
4172:Middlewares/Third_Party/FatFs/src/ff.c **** 
4173:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp) return FR_INVALID_OBJECT;
4174:Middlewares/Third_Party/FatFs/src/ff.c **** 
4175:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4176:Middlewares/Third_Party/FatFs/src/ff.c **** 	obj = &dp->obj;
4177:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 105


4178:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4179:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->fs = fs;
4180:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4181:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
4182:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
4183:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(dp->fn[NSFLAG] & NS_NONAME)) {	/* It is not the origin directory itself */
4184:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->attr & AM_DIR) {		/* This object is a sub-directory */
4185:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4186:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_EXFAT) {
4187:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->c_scl = obj->sclust;							/* Get containing directory inforamation */
4188:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->c_size = ((DWORD)obj->objsize & 0xFFFFFF00) | obj->stat;
4189:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->c_ofs = dp->blk_ofs;
4190:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->sclust = ld_dword(fs->dirbuf + XDIR_FstClus);	/* Get object allocation info */
4191:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
4192:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->stat = fs->dirbuf[XDIR_GenFlags] & 2;
4193:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
4194:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4195:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->sclust = ld_clust(fs, dp->dir);	/* Get object allocation info */
4197:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4198:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* This object is a file */
4199:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_PATH;
4200:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4201:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4202:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4203:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->id = fs->id;
4204:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
4205:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (obj->sclust) {
4208:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
4209:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!obj->lockid) res = FR_TOO_MANY_OPEN_FILES;
4210:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
4211:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->lockid = 0;	/* Root directory need not to be locked */
4212:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4213:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4214:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4215:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4216:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4217:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4218:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
4219:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) obj->fs = 0;		/* Invalidate the directory object if function faild */
4221:Middlewares/Third_Party/FatFs/src/ff.c **** 
4222:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4223:Middlewares/Third_Party/FatFs/src/ff.c **** }
4224:Middlewares/Third_Party/FatFs/src/ff.c **** 
4225:Middlewares/Third_Party/FatFs/src/ff.c **** 
4226:Middlewares/Third_Party/FatFs/src/ff.c **** 
4227:Middlewares/Third_Party/FatFs/src/ff.c **** 
4228:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4229:Middlewares/Third_Party/FatFs/src/ff.c **** /* Close Directory                                                       */
4230:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4231:Middlewares/Third_Party/FatFs/src/ff.c **** 
4232:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_closedir (
4233:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR *dp		/* Pointer to the directory object to be closed */
4234:Middlewares/Third_Party/FatFs/src/ff.c **** )
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 106


4235:Middlewares/Third_Party/FatFs/src/ff.c **** {
4236:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4238:Middlewares/Third_Party/FatFs/src/ff.c **** 
4239:Middlewares/Third_Party/FatFs/src/ff.c **** 
4240:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&dp->obj, &fs);			/* Check validity of the file object */
4241:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4242:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
4243:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (dp->obj.lockid) {				/* Decrement sub-directory open counter */
4244:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(dp->obj.lockid);
4245:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4246:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK)
4247:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4248:Middlewares/Third_Party/FatFs/src/ff.c **** 		{
4249:Middlewares/Third_Party/FatFs/src/ff.c **** 			dp->obj.fs = 0;			/* Invalidate directory object */
4250:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4251:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
4252:Middlewares/Third_Party/FatFs/src/ff.c **** 		unlock_fs(fs, FR_OK);		/* Unlock volume */
4253:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4254:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4255:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
4256:Middlewares/Third_Party/FatFs/src/ff.c **** }
4257:Middlewares/Third_Party/FatFs/src/ff.c **** 
4258:Middlewares/Third_Party/FatFs/src/ff.c **** 
4259:Middlewares/Third_Party/FatFs/src/ff.c **** 
4260:Middlewares/Third_Party/FatFs/src/ff.c **** 
4261:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4262:Middlewares/Third_Party/FatFs/src/ff.c **** /* Read Directory Entries in Sequence                                    */
4263:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4264:Middlewares/Third_Party/FatFs/src/ff.c **** 
4265:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_readdir (
4266:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,			/* Pointer to the open directory object */
4267:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
4268:Middlewares/Third_Party/FatFs/src/ff.c **** )
4269:Middlewares/Third_Party/FatFs/src/ff.c **** {
4270:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4271:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4272:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4273:Middlewares/Third_Party/FatFs/src/ff.c **** 
4274:Middlewares/Third_Party/FatFs/src/ff.c **** 
4275:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&dp->obj, &fs);	/* Check validity of the directory object */
4276:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4277:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!fno) {
4278:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
4279:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
4280:Middlewares/Third_Party/FatFs/src/ff.c **** 			INIT_NAMBUF(fs);
4281:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
4282:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
4283:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
4284:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
4285:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
4286:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
4287:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4288:Middlewares/Third_Party/FatFs/src/ff.c **** 			FREE_NAMBUF();
4289:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4290:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4291:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 107


4292:Middlewares/Third_Party/FatFs/src/ff.c **** }
4293:Middlewares/Third_Party/FatFs/src/ff.c **** 
4294:Middlewares/Third_Party/FatFs/src/ff.c **** 
4295:Middlewares/Third_Party/FatFs/src/ff.c **** 
4296:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FIND
4297:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4298:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find Next File                                                        */
4299:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4300:Middlewares/Third_Party/FatFs/src/ff.c **** 
4301:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_findnext (
4302:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,		/* Pointer to the open directory object */
4303:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno	/* Pointer to the file information structure */
4304:Middlewares/Third_Party/FatFs/src/ff.c **** )
4305:Middlewares/Third_Party/FatFs/src/ff.c **** {
4306:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4307:Middlewares/Third_Party/FatFs/src/ff.c **** 
4308:Middlewares/Third_Party/FatFs/src/ff.c **** 
4309:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
4310:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = f_readdir(dp, fno);		/* Get a directory item */
4311:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK || !fno || !fno->fname[0]) break;	/* Terminate if any error or end of directory 
4312:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (pattern_matching(dp->pat, fno->fname, 0, 0)) break;		/* Test for the file name */
4313:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0 && _USE_FIND == 2
4314:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (pattern_matching(dp->pat, fno->altname, 0, 0)) break;	/* Test for alternative name if exist *
4315:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4316:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4317:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
4318:Middlewares/Third_Party/FatFs/src/ff.c **** }
4319:Middlewares/Third_Party/FatFs/src/ff.c **** 
4320:Middlewares/Third_Party/FatFs/src/ff.c **** 
4321:Middlewares/Third_Party/FatFs/src/ff.c **** 
4322:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4323:Middlewares/Third_Party/FatFs/src/ff.c **** /* Find First File                                                       */
4324:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4325:Middlewares/Third_Party/FatFs/src/ff.c **** 
4326:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_findfirst (
4327:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR* dp,				/* Pointer to the blank directory object */
4328:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno,			/* Pointer to the file information structure */
4329:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,		/* Pointer to the directory to open */
4330:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* pattern	/* Pointer to the matching pattern */
4331:Middlewares/Third_Party/FatFs/src/ff.c **** )
4332:Middlewares/Third_Party/FatFs/src/ff.c **** {
4333:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4334:Middlewares/Third_Party/FatFs/src/ff.c **** 
4335:Middlewares/Third_Party/FatFs/src/ff.c **** 
4336:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->pat = pattern;		/* Save pointer to pattern string */
4337:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = f_opendir(dp, path);		/* Open the target directory */
4338:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4339:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = f_findnext(dp, fno);	/* Find the first item */
4340:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4341:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
4342:Middlewares/Third_Party/FatFs/src/ff.c **** }
4343:Middlewares/Third_Party/FatFs/src/ff.c **** 
4344:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_FIND */
4345:Middlewares/Third_Party/FatFs/src/ff.c **** 
4346:Middlewares/Third_Party/FatFs/src/ff.c **** 
4347:Middlewares/Third_Party/FatFs/src/ff.c **** 
4348:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE == 0
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 108


4349:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4350:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get File Status                                                       */
4351:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4352:Middlewares/Third_Party/FatFs/src/ff.c **** 
4353:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_stat (
4354:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
4355:Middlewares/Third_Party/FatFs/src/ff.c **** 	FILINFO* fno		/* Pointer to file information to return */
4356:Middlewares/Third_Party/FatFs/src/ff.c **** )
4357:Middlewares/Third_Party/FatFs/src/ff.c **** {
4358:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4359:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4360:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4361:Middlewares/Third_Party/FatFs/src/ff.c **** 
4362:Middlewares/Third_Party/FatFs/src/ff.c **** 
4363:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &dj.obj.fs, 0);
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4366:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(dj.obj.fs);
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
4368:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* It is origin directory */
4370:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
4371:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {							/* Found an object */
4372:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fno) get_fileinfo(&dj, fno);
4373:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4374:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4375:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4376:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4377:Middlewares/Third_Party/FatFs/src/ff.c **** 
4378:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(dj.obj.fs, res);
4379:Middlewares/Third_Party/FatFs/src/ff.c **** }
4380:Middlewares/Third_Party/FatFs/src/ff.c **** 
4381:Middlewares/Third_Party/FatFs/src/ff.c **** 
4382:Middlewares/Third_Party/FatFs/src/ff.c **** 
4383:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
4384:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4385:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get Number of Free Clusters                                           */
4386:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4387:Middlewares/Third_Party/FatFs/src/ff.c **** 
4388:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getfree (
4389:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Path name of the logical drive number */
4390:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD* nclst,		/* Pointer to a variable to return number of free clusters */
4391:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS** fatfs		/* Pointer to return pointer to corresponding file system object */
4392:Middlewares/Third_Party/FatFs/src/ff.c **** )
4393:Middlewares/Third_Party/FatFs/src/ff.c **** {
4394:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4395:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4396:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD nfree, clst, sect, stat;
4397:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
4398:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *p;
4399:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID obj;
4400:Middlewares/Third_Party/FatFs/src/ff.c **** 
4401:Middlewares/Third_Party/FatFs/src/ff.c **** 
4402:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4403:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);
4404:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4405:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fatfs = fs;				/* Return ptr to the fs object */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 109


4406:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* If free_clst is valid, return it without full cluster scan */
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) {
4408:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clst;
4409:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
4410:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Get number of free clusters */
4411:Middlewares/Third_Party/FatFs/src/ff.c **** 			nfree = 0;
4412:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Sector unalighed FAT entries */
4413:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = 2; obj.fs = fs;
4414:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
4415:Middlewares/Third_Party/FatFs/src/ff.c **** 					stat = get_fat(&obj, clst);
4416:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
4417:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) nfree++;
4419:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
4420:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4421:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4422:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {	/* exFAT: Scan bitmap table */
4423:Middlewares/Third_Party/FatFs/src/ff.c **** 					BYTE bm;
4424:Middlewares/Third_Party/FatFs/src/ff.c **** 					UINT b;
4425:Middlewares/Third_Party/FatFs/src/ff.c **** 
4426:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fs->n_fatent - 2;
4427:Middlewares/Third_Party/FatFs/src/ff.c **** 					sect = fs->database;
4428:Middlewares/Third_Party/FatFs/src/ff.c **** 					i = 0;
4429:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
4430:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (i == 0 && (res = move_window(fs, sect++)) != FR_OK) break;
4431:Middlewares/Third_Party/FatFs/src/ff.c **** 						for (b = 8, bm = fs->win[i]; b && clst; b--, clst--) {
4432:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!(bm & 1)) nfree++;
4433:Middlewares/Third_Party/FatFs/src/ff.c **** 							bm >>= 1;
4434:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4435:Middlewares/Third_Party/FatFs/src/ff.c **** 						i = (i + 1) % SS(fs);
4436:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (clst);
4437:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
4438:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4439:Middlewares/Third_Party/FatFs/src/ff.c **** 				{	/* FAT16/32: Sector alighed FAT entries */
4440:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fs->n_fatent; sect = fs->fatbase;
4441:Middlewares/Third_Party/FatFs/src/ff.c **** 					i = 0; p = 0;
4442:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
4443:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (i == 0) {
4444:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, sect++);
4445:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res != FR_OK) break;
4446:Middlewares/Third_Party/FatFs/src/ff.c **** 							p = fs->win;
4447:Middlewares/Third_Party/FatFs/src/ff.c **** 							i = SS(fs);
4448:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4449:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (fs->fs_type == FS_FAT16) {
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (ld_word(p) == 0) nfree++;
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
4452:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 							if ((ld_dword(p) & 0x0FFFFFFF) == 0) nfree++;
4454:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
4455:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4456:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (--clst);
4457:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4458:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4459:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = nfree;			/* Return the free clusters */
4460:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst = nfree;	/* Now free_clst is valid */
4461:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;		/* FSInfo is to be updated */
4462:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 110


4463:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4464:Middlewares/Third_Party/FatFs/src/ff.c **** 
4465:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4466:Middlewares/Third_Party/FatFs/src/ff.c **** }
4467:Middlewares/Third_Party/FatFs/src/ff.c **** 
4468:Middlewares/Third_Party/FatFs/src/ff.c **** 
4469:Middlewares/Third_Party/FatFs/src/ff.c **** 
4470:Middlewares/Third_Party/FatFs/src/ff.c **** 
4471:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4472:Middlewares/Third_Party/FatFs/src/ff.c **** /* Truncate File                                                         */
4473:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4474:Middlewares/Third_Party/FatFs/src/ff.c **** 
4475:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_truncate (
4476:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
4477:Middlewares/Third_Party/FatFs/src/ff.c **** )
4478:Middlewares/Third_Party/FatFs/src/ff.c **** {
4479:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4480:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4481:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ncl;
4482:Middlewares/Third_Party/FatFs/src/ff.c **** 
4483:Middlewares/Third_Party/FatFs/src/ff.c **** 
4484:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);	/* Check validity of the file object */
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
4487:Middlewares/Third_Party/FatFs/src/ff.c **** 
4488:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fp->fptr < fp->obj.objsize) {	/* Process when fptr is not on the eof */
4489:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
4490:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = remove_chain(&fp->obj, fp->obj.sclust, 0);
4491:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.sclust = 0;
4492:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* When truncate a part of the file, remove remaining clusters */
4493:Middlewares/Third_Party/FatFs/src/ff.c **** 			ncl = get_fat(&fp->obj, fp->clust);
4494:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
4495:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
4496:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
4497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
4499:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4500:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4501:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->obj.objsize = fp->fptr;	/* Set file size to current R/W point */
4502:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_MODIFIED;
4503:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
4504:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (fp->flag & FA_DIRTY)) {
4505:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) {
4506:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
4507:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4508:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
4509:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4510:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4511:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4512:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) ABORT(fs, res);
4513:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4514:Middlewares/Third_Party/FatFs/src/ff.c **** 
4515:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4516:Middlewares/Third_Party/FatFs/src/ff.c **** }
4517:Middlewares/Third_Party/FatFs/src/ff.c **** 
4518:Middlewares/Third_Party/FatFs/src/ff.c **** 
4519:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 111


4520:Middlewares/Third_Party/FatFs/src/ff.c **** 
4521:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4522:Middlewares/Third_Party/FatFs/src/ff.c **** /* Delete a File/Directory                                               */
4523:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4524:Middlewares/Third_Party/FatFs/src/ff.c **** 
4525:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_unlink (
4526:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Pointer to the file or directory path */
4527:Middlewares/Third_Party/FatFs/src/ff.c **** )
4528:Middlewares/Third_Party/FatFs/src/ff.c **** {
4529:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4530:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj, sdj;
4531:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dclst = 0;
4532:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4533:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4534:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID obj;
4535:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4536:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4537:Middlewares/Third_Party/FatFs/src/ff.c **** 
4538:Middlewares/Third_Party/FatFs/src/ff.c **** 
4539:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4540:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, FA_WRITE);
4541:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
4542:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4543:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4544:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
4545:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
4546:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
4547:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4548:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
4549:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = chk_lock(&dj, 2);	/* Check if it is an open object */
4550:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4551:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {					/* The object is accessible */
4552:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
4553:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
4554:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4555:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_RDO) {
4556:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
4557:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4558:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4559:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4560:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4561:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj.fs = fs;
4562:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
4563:Middlewares/Third_Party/FatFs/src/ff.c **** 					obj.sclust = dclst = ld_dword(fs->dirbuf + XDIR_FstClus);
4564:Middlewares/Third_Party/FatFs/src/ff.c **** 					obj.objsize = ld_qword(fs->dirbuf + XDIR_FileSize);
4565:Middlewares/Third_Party/FatFs/src/ff.c **** 					obj.stat = fs->dirbuf[XDIR_GenFlags] & 2;
4566:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
4567:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4568:Middlewares/Third_Party/FatFs/src/ff.c **** 				{
4569:Middlewares/Third_Party/FatFs/src/ff.c **** 					dclst = ld_clust(fs, dj.dir);
4570:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4571:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {			/* Is it a sub-directory? */
4572:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
4573:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (dclst == fs->cdir) {		 		/* Is it the current directory? */
4574:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
4575:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
4576:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 112


4577:Middlewares/Third_Party/FatFs/src/ff.c **** 					{
4578:Middlewares/Third_Party/FatFs/src/ff.c **** 						sdj.obj.fs = fs;						/* Open the sub-directory */
4579:Middlewares/Third_Party/FatFs/src/ff.c **** 						sdj.obj.sclust = dclst;
4580:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4581:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (fs->fs_type == FS_EXFAT) {
4582:Middlewares/Third_Party/FatFs/src/ff.c **** 							sdj.obj.objsize = obj.objsize;
4583:Middlewares/Third_Party/FatFs/src/ff.c **** 							sdj.obj.stat = obj.stat;
4584:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4585:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4586:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = dir_sdi(&sdj, 0);
4587:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
4588:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_read(&sdj, 0);			/* Read an item */
4589:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
4590:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
4591:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4592:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4593:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4594:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4595:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4596:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&dj);			/* Remove the directory entry */
4597:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && dclst) {	/* Remove the cluster chain if exist */
4598:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4599:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(&obj, dclst, 0);
4600:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4601:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = remove_chain(&dj.obj, dclst, 0);
4602:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4603:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) res = sync_fs(fs);
4605:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4606:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4607:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4608:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4609:Middlewares/Third_Party/FatFs/src/ff.c **** 
4610:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4611:Middlewares/Third_Party/FatFs/src/ff.c **** }
4612:Middlewares/Third_Party/FatFs/src/ff.c **** 
4613:Middlewares/Third_Party/FatFs/src/ff.c **** 
4614:Middlewares/Third_Party/FatFs/src/ff.c **** 
4615:Middlewares/Third_Party/FatFs/src/ff.c **** 
4616:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4617:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create a Directory                                                    */
4618:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4619:Middlewares/Third_Party/FatFs/src/ff.c **** 
4620:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mkdir (
4621:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path		/* Pointer to the directory path */
4622:Middlewares/Third_Party/FatFs/src/ff.c **** )
4623:Middlewares/Third_Party/FatFs/src/ff.c **** {
4624:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4625:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4626:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4627:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
4628:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
4629:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dsc, dcl, pcl, tm;
4630:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4631:Middlewares/Third_Party/FatFs/src/ff.c **** 
4632:Middlewares/Third_Party/FatFs/src/ff.c **** 
4633:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 113


4634:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, FA_WRITE);
4635:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
4636:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4637:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
4639:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
4640:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {
4641:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
4642:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4643:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) {				/* Can create a new directory */
4644:Middlewares/Third_Party/FatFs/src/ff.c **** 			dcl = create_chain(&dj.obj, 0);		/* Allocate a cluster for the new directory table */
4645:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.obj.objsize = (DWORD)fs->csize * SS(fs);
4646:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
4647:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
4648:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
4649:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = sync_window(fs);	/* Flush FAT */
4651:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
4652:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
4653:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, dcl);
4654:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = fs->win;
4655:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(dir, 0, SS(fs));
4656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
4657:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir + DIR_Name, ' ', 11);	/* Create "." entry */
4658:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Name] = '.';
4659:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] = AM_DIR;
4660:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);
4661:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir, dcl);
4662:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(dir + SZDIRE, dir, SZDIRE); 	/* Create ".." entry */
4663:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_FAT32 && pcl == fs->dirbase) pcl = 0;
4665:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
4666:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (n = fs->csize; n; n--) {	/* Write dot entries and clear following sectors */
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
4669:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
4670:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_window(fs);
4671:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
4672:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir, 0, SS(fs));
4673:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4674:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4675:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4676:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_register(&dj);	/* Register the object to the directoy */
4677:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4678:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4679:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4680:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {	/* Initialize directory entry block */
4681:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_ModTime, tm);	/* Created time */
4682:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_FstClus, dcl);	/* Table start cluster */
4683:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_FileSize, (DWORD)dj.obj.objsize);	/* File size needs to be valid */
4684:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(fs->dirbuf + XDIR_ValidFileSize, (DWORD)dj.obj.objsize);
4685:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_GenFlags] = 3;				/* Initialize the object flag (contiguous) */
4686:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->dirbuf[XDIR_Attr] = AM_DIR;				/* Attribute */
4687:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = store_xdir(&dj);
4688:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
4689:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4690:Middlewares/Third_Party/FatFs/src/ff.c **** 				{
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 114


4691:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir = dj.dir;
4692:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);	/* Created time */
4693:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir, dcl);				/* Table start cluster */
4694:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] = AM_DIR;				/* Attribute */
4695:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
4696:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4697:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
4698:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);
4699:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4700:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
4701:Middlewares/Third_Party/FatFs/src/ff.c **** 				remove_chain(&dj.obj, dcl, 0);		/* Could not register, remove cluster chain */
4702:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4703:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4704:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4705:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4706:Middlewares/Third_Party/FatFs/src/ff.c **** 
4707:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4708:Middlewares/Third_Party/FatFs/src/ff.c **** }
4709:Middlewares/Third_Party/FatFs/src/ff.c **** 
4710:Middlewares/Third_Party/FatFs/src/ff.c **** 
4711:Middlewares/Third_Party/FatFs/src/ff.c **** 
4712:Middlewares/Third_Party/FatFs/src/ff.c **** 
4713:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4714:Middlewares/Third_Party/FatFs/src/ff.c **** /* Rename a File/Directory                                               */
4715:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4716:Middlewares/Third_Party/FatFs/src/ff.c **** 
4717:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_rename (
4718:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path_old,	/* Pointer to the object name to be renamed */
4719:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path_new	/* Pointer to the new name */
4720:Middlewares/Third_Party/FatFs/src/ff.c **** )
4721:Middlewares/Third_Party/FatFs/src/ff.c **** {
4722:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4723:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR djo, djn;
4724:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE buf[_FS_EXFAT ? SZDIRE * 2 : 24], *dir;
4726:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dw;
4727:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4728:Middlewares/Third_Party/FatFs/src/ff.c **** 
4729:Middlewares/Third_Party/FatFs/src/ff.c **** 
4730:Middlewares/Third_Party/FatFs/src/ff.c **** 	get_ldnumber(&path_new);						/* Snip drive number of new name off */
4731:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path_old, &fs, FA_WRITE);	/* Get logical drive of the old object */
4732:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4733:Middlewares/Third_Party/FatFs/src/ff.c **** 		djo.obj.fs = fs;
4734:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4735:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
4736:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
4737:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
4738:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4739:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = chk_lock(&djo, 2);
4740:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4741:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4742:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Object to be renamed is found */
4743:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4744:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {	/* At exFAT */
4745:Middlewares/Third_Party/FatFs/src/ff.c **** 				BYTE nf, nn;
4746:Middlewares/Third_Party/FatFs/src/ff.c **** 				WORD nh;
4747:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 115


4748:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(buf, fs->dirbuf, SZDIRE * 2);	/* Save 85+C0 entry of old object */
4749:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(&djn, &djo, sizeof djo);
4750:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
4751:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
4752:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
4753:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4754:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
4755:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
4756:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
4757:Middlewares/Third_Party/FatFs/src/ff.c **** 						nf = fs->dirbuf[XDIR_NumSec]; nn = fs->dirbuf[XDIR_NumName];
4758:Middlewares/Third_Party/FatFs/src/ff.c **** 						nh = ld_word(fs->dirbuf + XDIR_NameHash);
4759:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(fs->dirbuf, buf, SZDIRE * 2);
4760:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->dirbuf[XDIR_NumSec] = nf; fs->dirbuf[XDIR_NumName] = nn;
4761:Middlewares/Third_Party/FatFs/src/ff.c **** 						st_word(fs->dirbuf + XDIR_NameHash, nh);
4762:Middlewares/Third_Party/FatFs/src/ff.c **** /* Start of critical section where an interruption can cause a cross-link */
4763:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = store_xdir(&djn);
4764:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4765:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4766:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
4767:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4768:Middlewares/Third_Party/FatFs/src/ff.c **** 			{	/* At FAT12/FAT16/FAT32 */
4769:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(buf, djo.dir + DIR_Attr, 21);	/* Save information about the object except name */
4770:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
4771:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
4772:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
4773:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
4774:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4775:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) { 				/* It is a valid path and no name collision */
4776:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
4777:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
4778:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir = djn.dir;					/* Copy information about object except name */
4779:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(dir + 13, buf + 2, 19);
4780:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
4781:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
4782:Middlewares/Third_Party/FatFs/src/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
4783:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(fs, ld_clust(fs, dir));
4784:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!dw) {
4785:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = FR_INT_ERR;
4786:Middlewares/Third_Party/FatFs/src/ff.c **** 							} else {
4787:Middlewares/Third_Party/FatFs/src/ff.c **** /* Start of critical section where an interruption can cause a cross-link */
4788:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = move_window(fs, dw);
4789:Middlewares/Third_Party/FatFs/src/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
4790:Middlewares/Third_Party/FatFs/src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
4791:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
4792:Middlewares/Third_Party/FatFs/src/ff.c **** 									fs->wflag = 1;
4793:Middlewares/Third_Party/FatFs/src/ff.c **** 								}
4794:Middlewares/Third_Party/FatFs/src/ff.c **** 							}
4795:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4796:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4797:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4798:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4799:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4800:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&djo);		/* Remove old entry */
4801:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
4802:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);
4803:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4804:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 116


4805:Middlewares/Third_Party/FatFs/src/ff.c **** /* End of the critical section */
4806:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4807:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4808:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4809:Middlewares/Third_Party/FatFs/src/ff.c **** 
4810:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4811:Middlewares/Third_Party/FatFs/src/ff.c **** }
4812:Middlewares/Third_Party/FatFs/src/ff.c **** 
4813:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
4814:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE == 0 */
4815:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 1 */
4816:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _FS_MINIMIZE <= 2 */
4817:Middlewares/Third_Party/FatFs/src/ff.c **** 
4818:Middlewares/Third_Party/FatFs/src/ff.c **** 
4819:Middlewares/Third_Party/FatFs/src/ff.c **** 
4820:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_CHMOD && !_FS_READONLY
4821:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4822:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Attribute                                                      */
4823:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4824:Middlewares/Third_Party/FatFs/src/ff.c **** 
4825:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_chmod (
4826:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file path */
4827:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE attr,			/* Attribute bits */
4828:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE mask			/* Attribute mask to change */
4829:Middlewares/Third_Party/FatFs/src/ff.c **** )
4830:Middlewares/Third_Party/FatFs/src/ff.c **** {
4831:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4832:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4833:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4834:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4835:Middlewares/Third_Party/FatFs/src/ff.c **** 
4836:Middlewares/Third_Party/FatFs/src/ff.c **** 
4837:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, FA_WRITE);	/* Get logical drive */
4838:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
4839:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4840:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4841:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
4842:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (dj.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check objec
4843:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4844:Middlewares/Third_Party/FatFs/src/ff.c **** 			mask &= AM_RDO|AM_HID|AM_SYS|AM_ARC;	/* Valid attribute mask */
4845:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4846:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
4847:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->dirbuf[XDIR_Attr] = (attr & mask) | (fs->dirbuf[XDIR_Attr] & (BYTE)~mask);	/* Apply attribu
4848:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = store_xdir(&dj);
4849:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
4850:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4851:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
4852:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.dir[DIR_Attr] = (attr & mask) | (dj.dir[DIR_Attr] & (BYTE)~mask);	/* Apply attribute change 
4853:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->wflag = 1;
4854:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4855:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4856:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(fs);
4857:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4858:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4859:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4860:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4861:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 117


4862:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4863:Middlewares/Third_Party/FatFs/src/ff.c **** }
4864:Middlewares/Third_Party/FatFs/src/ff.c **** 
4865:Middlewares/Third_Party/FatFs/src/ff.c **** 
4866:Middlewares/Third_Party/FatFs/src/ff.c **** 
4867:Middlewares/Third_Party/FatFs/src/ff.c **** 
4868:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4869:Middlewares/Third_Party/FatFs/src/ff.c **** /* Change Timestamp                                                      */
4870:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4871:Middlewares/Third_Party/FatFs/src/ff.c **** 
4872:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_utime (
4873:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Pointer to the file/directory name */
4874:Middlewares/Third_Party/FatFs/src/ff.c **** 	const FILINFO* fno	/* Pointer to the time stamp to be set */
4875:Middlewares/Third_Party/FatFs/src/ff.c **** )
4876:Middlewares/Third_Party/FatFs/src/ff.c **** {
4877:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4878:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4879:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4880:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
4881:Middlewares/Third_Party/FatFs/src/ff.c **** 
4882:Middlewares/Third_Party/FatFs/src/ff.c **** 
4883:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, FA_WRITE);	/* Get logical drive */
4884:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
4885:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
4886:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
4887:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
4888:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (dj.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check objec
4889:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4890:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4891:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_EXFAT) {
4892:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(fs->dirbuf + XDIR_ModTime, (DWORD)fno->fdate << 16 | fno->ftime);
4893:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = store_xdir(&dj);
4894:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else
4895:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4896:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
4897:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(dj.dir + DIR_ModTime, (DWORD)fno->fdate << 16 | fno->ftime);
4898:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->wflag = 1;
4899:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4900:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {
4901:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = sync_fs(fs);
4902:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4903:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4904:Middlewares/Third_Party/FatFs/src/ff.c **** 		FREE_NAMBUF();
4905:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4906:Middlewares/Third_Party/FatFs/src/ff.c **** 
4907:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
4908:Middlewares/Third_Party/FatFs/src/ff.c **** }
4909:Middlewares/Third_Party/FatFs/src/ff.c **** 
4910:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _USE_CHMOD && !_FS_READONLY */
4911:Middlewares/Third_Party/FatFs/src/ff.c **** 
4912:Middlewares/Third_Party/FatFs/src/ff.c **** 
4913:Middlewares/Third_Party/FatFs/src/ff.c **** 
4914:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LABEL
4915:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4916:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get Volume Label                                                      */
4917:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
4918:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 118


4919:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_getlabel (
4920:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Path name of the logical drive number */
4921:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* label,		/* Pointer to a buffer to return the volume label */
4922:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD* vsn			/* Pointer to a variable to return the volume serial number */
4923:Middlewares/Third_Party/FatFs/src/ff.c **** )
4924:Middlewares/Third_Party/FatFs/src/ff.c **** {
4925:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
4926:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
4927:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
4928:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT si, di;
4929:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE || _FS_EXFAT
4930:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w;
4931:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4932:Middlewares/Third_Party/FatFs/src/ff.c **** 
4933:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
4934:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);
4935:Middlewares/Third_Party/FatFs/src/ff.c **** 
4936:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get volume label */
4937:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && label) {
4938:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs; dj.obj.sclust = 0;	/* Open root directory */
4939:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(&dj, 0);
4940:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4941:Middlewares/Third_Party/FatFs/src/ff.c **** 		 	res = dir_read(&dj, 1);			/* Find a volume label entry */
4942:Middlewares/Third_Party/FatFs/src/ff.c **** 		 	if (res == FR_OK) {
4943:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
4944:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fs->fs_type == FS_EXFAT) {
4945:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (si = di = 0; si < dj.dir[XDIR_NumLabel]; si++) {	/* Extract volume label from 83 entry */
4946:Middlewares/Third_Party/FatFs/src/ff.c **** 						w = ld_word(dj.dir + XDIR_Label + si * 2);
4947:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
4948:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di++] = w;
4949:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4950:Middlewares/Third_Party/FatFs/src/ff.c **** 						w = ff_convert(w, 0);	/* Unicode -> OEM */
4951:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (w == 0) w = '?';	/* Replace wrong character */
4952:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_DF1S && w >= 0x100) label[di++] = (char)(w >> 8);
4953:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di++] = (char)w;
4954:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4955:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
4956:Middlewares/Third_Party/FatFs/src/ff.c **** 					label[di] = 0;
4957:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else
4958:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4959:Middlewares/Third_Party/FatFs/src/ff.c **** 				{
4960:Middlewares/Third_Party/FatFs/src/ff.c **** 					si = di = 0;		/* Extract volume label from AM_VOL entry with code comversion */
4961:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
4962:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
4963:Middlewares/Third_Party/FatFs/src/ff.c **** 						w = (si < 11) ? dj.dir[si++] : ' ';
4964:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (IsDBCS1(w) && si < 11 && IsDBCS2(dj.dir[si])) {
4965:Middlewares/Third_Party/FatFs/src/ff.c **** 							w = w << 8 | dj.dir[si++];
4966:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
4967:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di++] = ff_convert(w, 1);	/* OEM -> Unicode */
4968:Middlewares/Third_Party/FatFs/src/ff.c **** #else
4969:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di++] = dj.dir[si++];
4970:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
4971:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (di < 11);
4972:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {				/* Truncate trailing spaces */
4973:Middlewares/Third_Party/FatFs/src/ff.c **** 						label[di] = 0;
4974:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (di == 0) break;
4975:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (label[--di] == ' ');
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 119


4976:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
4977:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4978:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4979:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) {	/* No label entry and return nul string */
4980:Middlewares/Third_Party/FatFs/src/ff.c **** 			label[0] = 0;
4981:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
4982:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
4983:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
4984:Middlewares/Third_Party/FatFs/src/ff.c **** 
4985:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get volume serial number */
4986:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK && vsn) {
4987:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, fs->volbase);
4988:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
4989:Middlewares/Third_Party/FatFs/src/ff.c **** 			switch (fs->fs_type) {
4990:Middlewares/Third_Party/FatFs/src/ff.c **** 			case FS_EXFAT:
4991:Middlewares/Third_Party/FatFs/src/ff.c **** 				di = BPB_VolIDEx; break;
4992:Middlewares/Third_Party/FatFs/src/ff.c **** 
4993:Middlewares/Third_Party/FatFs/src/ff.c **** 			case FS_FAT32:
4994:Middlewares/Third_Party/FatFs/src/ff.c **** 				di = BS_VolID32; break;
4995:Middlewares/Third_Party/FatFs/src/ff.c **** 
4996:Middlewares/Third_Party/FatFs/src/ff.c **** 			default:
4997:Middlewares/Third_Party/FatFs/src/ff.c **** 				di = BS_VolID;
4998:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
4999:Middlewares/Third_Party/FatFs/src/ff.c **** 			*vsn = ld_dword(fs->win + di);
5000:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5001:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5002:Middlewares/Third_Party/FatFs/src/ff.c **** 
5003:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
5004:Middlewares/Third_Party/FatFs/src/ff.c **** }
5005:Middlewares/Third_Party/FatFs/src/ff.c **** 
5006:Middlewares/Third_Party/FatFs/src/ff.c **** 
5007:Middlewares/Third_Party/FatFs/src/ff.c **** 
5008:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
5009:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5010:Middlewares/Third_Party/FatFs/src/ff.c **** /* Set Volume Label                                                      */
5011:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5012:Middlewares/Third_Party/FatFs/src/ff.c **** 
5013:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_setlabel (
5014:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* label	/* Pointer to the volume label to set */
5015:Middlewares/Third_Party/FatFs/src/ff.c **** )
5016:Middlewares/Third_Party/FatFs/src/ff.c **** {
5017:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
5018:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
5019:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
5020:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE dirvn[22];
5021:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j, slen;
5022:Middlewares/Third_Party/FatFs/src/ff.c **** 	WCHAR w;
5023:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const char badchr[] = "\"*+,.:;<=>\?[]|\x7F";
5024:Middlewares/Third_Party/FatFs/src/ff.c **** 
5025:Middlewares/Third_Party/FatFs/src/ff.c **** 
5026:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get logical drive */
5027:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&label, &fs, FA_WRITE);
5028:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) LEAVE_FF(fs, res);
5029:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
5030:Middlewares/Third_Party/FatFs/src/ff.c **** 
5031:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get length of given volume label */
5032:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (slen = 0; (UINT)label[slen] >= ' '; slen++) ;	/* Get name length */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 120


5033:Middlewares/Third_Party/FatFs/src/ff.c **** 
5034:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
5035:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {	/* On the exFAT volume */
5036:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = j = 0; i < slen; ) {	/* Create volume label in directory form */
5037:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = label[i++];
5038:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_LFN_UNICODE
5039:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (IsDBCS1(w)) {
5040:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = (i < slen && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
5041:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5042:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = ff_convert(w, 1);
5043:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5044:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (w == 0 || chk_chr(badchr, w) || j == 22) {	/* Check validity check validity of the volume la
5045:Middlewares/Third_Party/FatFs/src/ff.c **** 				LEAVE_FF(fs, FR_INVALID_NAME);
5046:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5047:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(dirvn + j, w); j += 2;
5048:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5049:Middlewares/Third_Party/FatFs/src/ff.c **** 		slen = j;
5050:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
5051:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5052:Middlewares/Third_Party/FatFs/src/ff.c **** 	{	/* On the FAT12/16/32 volume */
5053:Middlewares/Third_Party/FatFs/src/ff.c **** 		for ( ; slen && label[slen - 1] == ' '; slen--) ;	/* Remove trailing spaces */
5054:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (slen) {		/* Is there a volume label to be set? */
5055:Middlewares/Third_Party/FatFs/src/ff.c **** 			dirvn[0] = 0; i = j = 0;	/* Create volume label in directory form */
5056:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {
5057:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
5058:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = ff_convert(ff_wtoupper(label[i++]), 0);
5059:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5060:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = (BYTE)label[i++];
5061:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (IsDBCS1(w)) {
5062:Middlewares/Third_Party/FatFs/src/ff.c **** 					w = (j < 10 && i < slen && IsDBCS2(label[i])) ? w << 8 | (BYTE)label[i++] : 0;
5063:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5064:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
5065:Middlewares/Third_Party/FatFs/src/ff.c **** 				w = ff_convert(ff_wtoupper(ff_convert(w, 1)), 0);
5066:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5067:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (IsLower(w)) w -= 0x20;			/* To upper ASCII characters */
5068:Middlewares/Third_Party/FatFs/src/ff.c **** #ifdef _EXCVT
5069:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (w >= 0x80) w = ExCvt[w - 0x80];	/* To upper extended characters (SBCS cfg) */
5070:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5071:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!_DF1S && w >= 0x80) w = 0;		/* Reject extended characters (ASCII cfg) */
5072:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5073:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5074:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5075:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (w == 0 || chk_chr(badchr, w) || j >= (UINT)((w >= 0x100) ? 10 : 11)) {	/* Reject invalid ch
5076:Middlewares/Third_Party/FatFs/src/ff.c **** 					LEAVE_FF(fs, FR_INVALID_NAME);
5077:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5078:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (w >= 0x100) dirvn[j++] = (BYTE)(w >> 8);
5079:Middlewares/Third_Party/FatFs/src/ff.c **** 				dirvn[j++] = (BYTE)w;
5080:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (i < slen);
5081:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (j < 11) dirvn[j++] = ' ';	/* Fill remaining name field */
5082:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dirvn[0] == DDEM) LEAVE_FF(fs, FR_INVALID_NAME);	/* Reject illegal name (heading DDEM) */
5083:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5084:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5085:Middlewares/Third_Party/FatFs/src/ff.c **** 
5086:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Set volume label */
5087:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.sclust = 0;		/* Open root directory */
5088:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = dir_sdi(&dj, 0);
5089:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 121


5090:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_read(&dj, 1);	/* Get volume label entry */
5091:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
5092:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (_FS_EXFAT && fs->fs_type == FS_EXFAT) {
5093:Middlewares/Third_Party/FatFs/src/ff.c **** 				dj.dir[XDIR_NumLabel] = (BYTE)(slen / 2);	/* Change the volume label */
5094:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(dj.dir + XDIR_Label, dirvn, slen);
5095:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
5096:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (slen) {
5097:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(dj.dir, dirvn, 11);	/* Change the volume label */
5098:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
5099:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.dir[DIR_Name] = DDEM;	/* Remove the volume label */
5100:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5101:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5102:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
5103:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = sync_fs(fs);
5104:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {			/* No volume label entry is found or error */
5105:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) {
5106:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
5107:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (slen) {	/* Create a volume label entry */
5108:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_alloc(&dj, 1);	/* Allocate an entry */
5109:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
5110:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_set(dj.dir, 0, SZDIRE);	/* Clear the entry */
5111:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_FS_EXFAT && fs->fs_type == FS_EXFAT) {
5112:Middlewares/Third_Party/FatFs/src/ff.c **** 							dj.dir[XDIR_Type] = 0x83;		/* Create 83 entry */
5113:Middlewares/Third_Party/FatFs/src/ff.c **** 							dj.dir[XDIR_NumLabel] = (BYTE)(slen / 2);
5114:Middlewares/Third_Party/FatFs/src/ff.c **** 							mem_cpy(dj.dir + XDIR_Label, dirvn, slen);
5115:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
5116:Middlewares/Third_Party/FatFs/src/ff.c **** 							dj.dir[DIR_Attr] = AM_VOL;		/* Create volume label entry */
5117:Middlewares/Third_Party/FatFs/src/ff.c **** 							mem_cpy(dj.dir, dirvn, 11);
5118:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
5119:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
5120:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = sync_fs(fs);
5121:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
5122:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5123:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5124:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5125:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5126:Middlewares/Third_Party/FatFs/src/ff.c **** 
5127:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
5128:Middlewares/Third_Party/FatFs/src/ff.c **** }
5129:Middlewares/Third_Party/FatFs/src/ff.c **** 
5130:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* !_FS_READONLY */
5131:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_LABEL */
5132:Middlewares/Third_Party/FatFs/src/ff.c **** 
5133:Middlewares/Third_Party/FatFs/src/ff.c **** 
5134:Middlewares/Third_Party/FatFs/src/ff.c **** 
5135:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_EXPAND && !_FS_READONLY
5136:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5137:Middlewares/Third_Party/FatFs/src/ff.c **** /* Allocate a Contiguous Blocks to the File                              */
5138:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5139:Middlewares/Third_Party/FatFs/src/ff.c **** 
5140:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_expand (
5141:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,		/* Pointer to the file object */
5142:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t fsz,	/* File size to be expanded to */
5143:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE opt		/* Operation mode 0:Find and prepare or 1:Find and allocate */
5144:Middlewares/Third_Party/FatFs/src/ff.c **** )
5145:Middlewares/Third_Party/FatFs/src/ff.c **** {
5146:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 122


5147:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
5148:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD n, clst, stcl, scl, ncl, tcl, lclst;
5149:Middlewares/Third_Party/FatFs/src/ff.c **** 
5150:Middlewares/Third_Party/FatFs/src/ff.c **** 
5151:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
5152:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
5153:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fsz == 0 || fp->obj.objsize != 0 || !(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);
5154:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
5155:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type != FS_EXFAT && fsz >= 0x100000000) LEAVE_FF(fs, FR_DENIED);	/* Check if in size li
5156:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5157:Middlewares/Third_Party/FatFs/src/ff.c **** 	n = (DWORD)fs->csize * SS(fs);	/* Cluster size */
5158:Middlewares/Third_Party/FatFs/src/ff.c **** 	tcl = (DWORD)(fsz / n) + ((fsz & (n - 1)) ? 1 : 0);	/* Number of clusters required */
5159:Middlewares/Third_Party/FatFs/src/ff.c **** 	stcl = fs->last_clst; lclst = 0;
5160:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stcl < 2 || stcl >= fs->n_fatent) stcl = 2;
5161:Middlewares/Third_Party/FatFs/src/ff.c **** 
5162:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
5163:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type == FS_EXFAT) {
5164:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = find_bitmap(fs, stcl, tcl);			/* Find a contiguous cluster block */
5165:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (scl == 0) res = FR_DENIED;				/* No contiguous cluster block was found */
5166:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (scl == 0xFFFFFFFF) res = FR_DISK_ERR;
5167:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {	/* A contiguous free area is found */
5168:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (opt) {		/* Allocate it now */
5169:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = change_bitmap(fs, scl, tcl, 1);	/* Mark the cluster block 'in use' */
5170:Middlewares/Third_Party/FatFs/src/ff.c **** 				lclst = scl + tcl - 1;
5171:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {		/* Set it as suggested point for next allocation */
5172:Middlewares/Third_Party/FatFs/src/ff.c **** 				lclst = scl - 1;
5173:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5174:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5175:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
5176:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5177:Middlewares/Third_Party/FatFs/src/ff.c **** 	{
5178:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst = stcl; ncl = 0;
5179:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {	/* Find a contiguous cluster block */
5180:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = get_fat(&fp->obj, clst);
5181:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (++clst >= fs->n_fatent) clst = 2;
5182:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (n == 1) { res = FR_INT_ERR; break; }
5183:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (n == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
5184:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (n == 0) {	/* Is it a free cluster? */
5185:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (++ncl == tcl) break;	/* Break if a contiguous cluster block is found */
5186:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
5187:Middlewares/Third_Party/FatFs/src/ff.c **** 				scl = clst; ncl = 0;		/* Not a free cluster */
5188:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5189:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst == stcl) { res = FR_DENIED; break; }	/* No contiguous cluster? */
5190:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5191:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {	/* A contiguous free area is found */
5192:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (opt) {		/* Allocate it now */
5193:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (clst = scl, n = tcl; n; clst++, n--) {	/* Create a cluster chain on the FAT */
5194:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = put_fat(fs, clst, (n == 1) ? 0xFFFFFFFF : clst + 1);
5195:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
5196:Middlewares/Third_Party/FatFs/src/ff.c **** 					lclst = clst;
5197:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5198:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {		/* Set it as suggested point for next allocation */
5199:Middlewares/Third_Party/FatFs/src/ff.c **** 				lclst = scl - 1;
5200:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5201:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5202:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5203:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 123


5204:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
5205:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = lclst;		/* Set suggested start cluster to start next */
5206:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (opt) {	/* Is it allocated now? */
5207:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.sclust = scl;		/* Update object allocation information */
5208:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fsz;
5209:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (_FS_EXFAT) fp->obj.stat = 2;	/* Set status 'contiguous chain' */
5210:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA_MODIFIED;
5211:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->free_clst <= fs->n_fatent - 2) {	/* Update FSINFO */
5212:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->free_clst -= tcl;
5213:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->fsi_flag |= 1;
5214:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5215:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5216:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5217:Middlewares/Third_Party/FatFs/src/ff.c **** 
5218:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
5219:Middlewares/Third_Party/FatFs/src/ff.c **** }
5220:Middlewares/Third_Party/FatFs/src/ff.c **** 
5221:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_EXPAND && !_FS_READONLY */
5222:Middlewares/Third_Party/FatFs/src/ff.c **** 
5223:Middlewares/Third_Party/FatFs/src/ff.c **** 
5224:Middlewares/Third_Party/FatFs/src/ff.c **** 
5225:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FORWARD
5226:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5227:Middlewares/Third_Party/FatFs/src/ff.c **** /* Forward data to the stream directly                                   */
5228:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5229:Middlewares/Third_Party/FatFs/src/ff.c **** 
5230:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_forward (
5231:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp, 						/* Pointer to the file object */
5232:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT (*func)(const BYTE*,UINT),	/* Pointer to the streaming function */
5233:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT btf,						/* Number of bytes to forward */
5234:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT* bf						/* Pointer to number of bytes forwarded */
5235:Middlewares/Third_Party/FatFs/src/ff.c **** )
5236:Middlewares/Third_Party/FatFs/src/ff.c **** {
5237:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
5238:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
5239:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
5240:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t remain;
5241:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rcnt, csect;
5242:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dbuf;
5243:Middlewares/Third_Party/FatFs/src/ff.c **** 
5244:Middlewares/Third_Party/FatFs/src/ff.c **** 
5245:Middlewares/Third_Party/FatFs/src/ff.c **** 	*bf = 0;	/* Clear transfer byte counter */
5246:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);		/* Check validity of the file object */
5247:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
5248:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
5249:Middlewares/Third_Party/FatFs/src/ff.c **** 
5250:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
5251:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btf > remain) btf = (UINT)remain;			/* Truncate btf by remaining bytes */
5252:Middlewares/Third_Party/FatFs/src/ff.c **** 
5253:Middlewares/Third_Party/FatFs/src/ff.c **** 	for ( ;  btf && (*func)(0, 0);					/* Repeat until all data transferred or stream goes busy */
5254:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr += rcnt, *bf += rcnt, btf -= rcnt) {
5255:Middlewares/Third_Party/FatFs/src/ff.c **** 		csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
5256:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {				/* On the sector boundary? */
5257:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {						/* On the cluster boundary? */
5258:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = (fp->fptr == 0) ?			/* On the top of the file? */
5259:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust : get_fat(&fp->obj, fp->clust);
5260:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) ABORT(fs, FR_INT_ERR);
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 124


5261:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
5262:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;					/* Update current cluster */
5263:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5264:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5265:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = clust2sect(fs, fp->clust);			/* Get current data sector */
5266:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!sect) ABORT(fs, FR_INT_ERR);
5267:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect += csect;
5268:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
5269:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (move_window(fs, sect) != FR_OK) ABORT(fs, FR_DISK_ERR);	/* Move sector window to the file dat
5270:Middlewares/Third_Party/FatFs/src/ff.c **** 		dbuf = fs->win;
5271:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5272:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->sect != sect) {		/* Fill sector cache with file data */
5273:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
5274:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fp->flag & FA_DIRTY) {		/* Write-back dirty sector cache */
5275:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
5276:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
5277:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5278:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5279:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fp->buf, sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
5280:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5281:Middlewares/Third_Party/FatFs/src/ff.c **** 		dbuf = fp->buf;
5282:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5283:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->sect = sect;
5284:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = SS(fs) - (UINT)fp->fptr % SS(fs);	/* Number of bytes left in the sector */
5285:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btf) rcnt = btf;					/* Clip it by btr if needed */
5286:Middlewares/Third_Party/FatFs/src/ff.c **** 		rcnt = (*func)(dbuf + ((UINT)fp->fptr % SS(fs)), rcnt);	/* Forward the file data */
5287:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!rcnt) ABORT(fs, FR_INT_ERR);
5288:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5289:Middlewares/Third_Party/FatFs/src/ff.c **** 
5290:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, FR_OK);
5291:Middlewares/Third_Party/FatFs/src/ff.c **** }
5292:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_FORWARD */
5293:Middlewares/Third_Party/FatFs/src/ff.c **** 
5294:Middlewares/Third_Party/FatFs/src/ff.c **** 
5295:Middlewares/Third_Party/FatFs/src/ff.c **** 
5296:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_MKFS && !_FS_READONLY
5297:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5298:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create an FAT/exFAT volume                                            */
5299:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5300:Middlewares/Third_Party/FatFs/src/ff.c **** 
5301:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_mkfs (
5302:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* path,	/* Logical drive number */
5303:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE opt,			/* Format option */
5304:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD au,			/* Size of allocation unit (cluster) [byte] */
5305:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* work,			/* Pointer to working buffer */
5306:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT len			/* Size of working buffer */
5307:Middlewares/Third_Party/FatFs/src/ff.c **** )
5308:Middlewares/Third_Party/FatFs/src/ff.c **** {
5309:Middlewares/Third_Party/FatFs/src/ff.c **** 	const UINT n_fats = 1;		/* Number of FATs for FAT12/16/32 volume (1 or 2) */
5310:Middlewares/Third_Party/FatFs/src/ff.c **** 	const UINT n_rootdir = 512;	/* Number of root directory entries for FAT12/16 volume */
5311:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD cst[] = {1, 4, 16, 64, 256, 512, 0};	/* Cluster size boundary for FAT12/16 volum
5312:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD cst32[] = {1, 2, 4, 8, 16, 32, 0};	/* Cluster size boundary for FAT32 volume (12
5313:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, sys, *buf, *pte, pdrv, part;
5314:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD ss;
5315:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD szb_buf, sz_buf, sz_blk, n_clst, pau, sect, nsect, n;
5316:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD b_vol, b_fat, b_data;				/* Base LBA for volume, fat, data */
5317:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sz_vol, sz_rsv, sz_fat, sz_dir;	/* Size for volume, fat, dir, data */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 125


5318:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
5319:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
5320:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
5321:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM || _FS_EXFAT
5322:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tbl[3];
5323:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5324:Middlewares/Third_Party/FatFs/src/ff.c **** 
5325:Middlewares/Third_Party/FatFs/src/ff.c **** 
5326:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check mounted drive and clear work area */
5327:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(&path);					/* Get target logical drive */
5328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
5329:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
5330:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
5331:Middlewares/Third_Party/FatFs/src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:create as new, 1-4:get from partition table) */
5332:Middlewares/Third_Party/FatFs/src/ff.c **** 
5333:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Check physical drive status */
5334:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(pdrv);
5335:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
5336:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
5337:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &sz_blk) != RES_OK || !sz_blk || sz_blk > 32768 || (sz_blk & 
5338:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
5339:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_SIZE, &ss) != RES_OK) return FR_DISK_ERR;
5340:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (ss > _MAX_SS || ss < _MIN_SS || (ss & (ss - 1))) return FR_DISK_ERR;
5341:Middlewares/Third_Party/FatFs/src/ff.c **** #else
5342:Middlewares/Third_Party/FatFs/src/ff.c **** 	ss = _MAX_SS;
5343:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	if ((au != 0 && au < ss) || au > 0x1000000 || (au & (au - 1))) return FR_INVALID_PARAMETER;	/* Che
5345:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
5346:Middlewares/Third_Party/FatFs/src/ff.c **** 
5347:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Get working buffer */
5348:Middlewares/Third_Party/FatFs/src/ff.c **** 	buf = (BYTE*)work;		/* Working buffer */
5349:Middlewares/Third_Party/FatFs/src/ff.c **** 	sz_buf = len / ss;		/* Size of working buffer (sector) */
5350:Middlewares/Third_Party/FatFs/src/ff.c **** 	szb_buf = sz_buf * ss;	/* Size of working buffer (byte) */
5351:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!szb_buf) return FR_MKFS_ABORTED;
5352:Middlewares/Third_Party/FatFs/src/ff.c **** 
5353:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine where the volume to be located (b_vol, sz_vol) */
5354:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_MULTI_PARTITION && part != 0) {
5355:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get partition information from partition table in the MBR */
5356:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_read(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Load MBR */
5357:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_word(buf + BS_55AA) != 0xAA55) return FR_MKFS_ABORTED;	/* Check if MBR is valid */
5358:Middlewares/Third_Party/FatFs/src/ff.c **** 		pte = buf + (MBR_Table + (part - 1) * SZ_PTE);
5359:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!pte[PTE_System]) return FR_MKFS_ABORTED;	/* No partition? */
5360:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = ld_dword(pte + PTE_StLba);		/* Get volume start sector */
5361:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol = ld_dword(pte + PTE_SizLba);	/* Get volume size */
5362:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
5363:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create a single-partition in this function */
5364:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &sz_vol) != RES_OK) return FR_DISK_ERR;
5365:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (opt & FM_SFD) ? 0 : 63;		/* Volume start sector */
5366:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < b_vol) return FR_MKFS_ABORTED;
5367:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol -= b_vol;						/* Volume size */
5368:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5369:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (sz_vol < 128) return FR_MKFS_ABORTED;	/* Check if volume size is >=128s */
5370:Middlewares/Third_Party/FatFs/src/ff.c **** 
5371:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Pre-determine the FAT type */
5372:Middlewares/Third_Party/FatFs/src/ff.c **** 	do {
5373:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_EXFAT && (opt & FM_EXFAT)) {	/* exFAT possible? */
5374:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((opt & FM_ANY) == FM_EXFAT || sz_vol >= 0x4000000 || au > 128) {	/* exFAT only, vol >= 64Ms 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 126


5375:Middlewares/Third_Party/FatFs/src/ff.c **** 				fmt = FS_EXFAT; break;
5376:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5377:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5378:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (au > 128) return FR_INVALID_PARAMETER;	/* Too large au for FAT/FAT32 */
5379:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (opt & FM_FAT32) {	/* FAT32 possible? */
5380:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((opt & FM_ANY) == FM_FAT32 || !(opt & FM_FAT)) {	/* FAT32 only or no-FAT? */
5381:Middlewares/Third_Party/FatFs/src/ff.c **** 				fmt = FS_FAT32; break;
5382:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5383:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5384:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(opt & FM_FAT)) return FR_INVALID_PARAMETER;	/* no-FAT? */
5385:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT16;
5386:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (0);
5387:Middlewares/Third_Party/FatFs/src/ff.c **** 
5388:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
5389:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == FS_EXFAT) {	/* Create an exFAT volume */
5390:Middlewares/Third_Party/FatFs/src/ff.c **** 		DWORD szb_bit, szb_case, sum, nb, cl;
5391:Middlewares/Third_Party/FatFs/src/ff.c **** 		WCHAR ch, si;
5392:Middlewares/Third_Party/FatFs/src/ff.c **** 		UINT j, st;
5393:Middlewares/Third_Party/FatFs/src/ff.c **** 		BYTE b;
5394:Middlewares/Third_Party/FatFs/src/ff.c **** 
5395:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x1000) return FR_MKFS_ABORTED;	/* Too small volume? */
5396:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
5397:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[0] = b_vol; tbl[1] = b_vol + sz_vol - 1;	/* Inform the device the volume area may be erased *
5398:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_ioctl(pdrv, CTRL_TRIM, tbl);
5399:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5400:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Determine FAT location, data location and number of clusters */
5401:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!au) {	/* au auto-selection */
5402:Middlewares/Third_Party/FatFs/src/ff.c **** 			au = 8;
5403:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (sz_vol >= 0x80000) au = 64;		/* >= 512Ks */
5404:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (sz_vol >= 0x4000000) au = 256;	/* >= 64Ms */
5405:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5406:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_fat = b_vol + 32;										/* FAT start at offset 32 */
5407:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_fat = ((sz_vol / au + 2) * 4 + ss - 1) / ss;			/* Number of FAT sectors */
5408:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_data = (b_fat + sz_fat + sz_blk - 1) & ~(sz_blk - 1);	/* Align data area to the erase block bou
5409:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (b_data >= sz_vol / 2) return FR_MKFS_ABORTED;		/* Too small volume? */
5410:Middlewares/Third_Party/FatFs/src/ff.c **** 		n_clst = (sz_vol - (b_data - b_vol)) / au;				/* Number of clusters */
5411:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n_clst <16) return FR_MKFS_ABORTED;					/* Too few clusters? */
5412:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (n_clst > MAX_EXFAT) return FR_MKFS_ABORTED;			/* Too many clusters? */
5413:Middlewares/Third_Party/FatFs/src/ff.c **** 
5414:Middlewares/Third_Party/FatFs/src/ff.c **** 		szb_bit = (n_clst + 7) / 8;						/* Size of allocation bitmap */
5415:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[0] = (szb_bit + au * ss - 1) / (au * ss);	/* Number of allocation bitmap clusters */
5416:Middlewares/Third_Party/FatFs/src/ff.c **** 
5417:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create a compressed up-case table */
5418:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_data + au * tbl[0];	/* Table start sector */
5419:Middlewares/Third_Party/FatFs/src/ff.c **** 		sum = 0;						/* Table checksum to be stored in the 82 entry */
5420:Middlewares/Third_Party/FatFs/src/ff.c **** 		st = si = i = j = szb_case = 0;
5421:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5422:Middlewares/Third_Party/FatFs/src/ff.c **** 			switch (st) {
5423:Middlewares/Third_Party/FatFs/src/ff.c **** 			case 0:
5424:Middlewares/Third_Party/FatFs/src/ff.c **** 				ch = ff_wtoupper(si);	/* Get an up-case char */
5425:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ch != si) {
5426:Middlewares/Third_Party/FatFs/src/ff.c **** 					si++; break;		/* Store the up-case char if exist */
5427:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5428:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (j = 1; (WCHAR)(si + j) && (WCHAR)(si + j) == ff_wtoupper((WCHAR)(si + j)); j++) ;	/* Get r
5429:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (j >= 128) {
5430:Middlewares/Third_Party/FatFs/src/ff.c **** 					ch = 0xFFFF; st = 2; break;	/* Compress the no-case block if run is >= 128 */
5431:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 127


5432:Middlewares/Third_Party/FatFs/src/ff.c **** 				st = 1;			/* Do not compress short run */
5433:Middlewares/Third_Party/FatFs/src/ff.c **** 				/* go to next case */
5434:Middlewares/Third_Party/FatFs/src/ff.c **** 			case 1:
5435:Middlewares/Third_Party/FatFs/src/ff.c **** 				ch = si++;		/* Fill the short run */
5436:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (--j == 0) st = 0;
5437:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
5438:Middlewares/Third_Party/FatFs/src/ff.c **** 
5439:Middlewares/Third_Party/FatFs/src/ff.c **** 			default:
5440:Middlewares/Third_Party/FatFs/src/ff.c **** 				ch = (WCHAR)j; si += j;	/* Number of chars to skip */
5441:Middlewares/Third_Party/FatFs/src/ff.c **** 				st = 0;
5442:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5443:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = xsum32(buf[i + 0] = (BYTE)ch, sum);		/* Put it into the write buffer */
5444:Middlewares/Third_Party/FatFs/src/ff.c **** 			sum = xsum32(buf[i + 1] = (BYTE)(ch >> 8), sum);
5445:Middlewares/Third_Party/FatFs/src/ff.c **** 			i += 2; szb_case += 2;
5446:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!si || i == szb_buf) {		/* Write buffered data when buffer full or end of process */
5447:Middlewares/Third_Party/FatFs/src/ff.c **** 				n = (i + ss - 1) / ss;
5448:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect, n) != RES_OK) return FR_DISK_ERR;
5449:Middlewares/Third_Party/FatFs/src/ff.c **** 				sect += n; i = 0;
5450:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5451:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (si);
5452:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[1] = (szb_case + au * ss - 1) / (au * ss);	/* Number of up-case table clusters */
5453:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[2] = 1;										/* Number of root dir clusters */
5454:Middlewares/Third_Party/FatFs/src/ff.c **** 
5455:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize the allocation bitmap */
5456:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_data; nsect = (szb_bit + ss - 1) / ss;	/* Start of bitmap and number of sectors */
5457:Middlewares/Third_Party/FatFs/src/ff.c **** 		nb = tbl[0] + tbl[1] + tbl[2];					/* Number of clusters in-use by system */
5458:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5459:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, szb_buf);
5460:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = 0; nb >= 8 && i < szb_buf; buf[i++] = 0xFF, nb -= 8) ;
5461:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (b = 1; nb && i < szb_buf; buf[i] |= b, b <<= 1, nb--) ;
5462:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;		/* Write the buffered data */
5463:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) return FR_DISK_ERR;
5464:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
5465:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
5466:Middlewares/Third_Party/FatFs/src/ff.c **** 
5467:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize the FAT */
5468:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_fat; nsect = sz_fat;	/* Start of FAT and number of FAT sectors */
5469:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = nb = cl = 0;
5470:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5471:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, szb_buf); i = 0;	/* Clear work area and reset write index */
5472:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl == 0) {	/* Set entry 0 and 1 */
5473:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + i, 0xFFFFFFF8); i += 4; cl++;
5474:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + i, 0xFFFFFFFF); i += 4; cl++;
5475:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5476:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {			/* Create chains of bitmap, up-case and root dir */
5477:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (nb && i < szb_buf) {			/* Create a chain */
5478:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(buf + i, (nb > 1) ? cl + 1 : 0xFFFFFFFF);
5479:Middlewares/Third_Party/FatFs/src/ff.c **** 					i += 4; cl++; nb--;
5480:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5481:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!nb && j < 3) nb = tbl[j++];	/* Next chain */
5482:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (nb && i < szb_buf);
5483:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;	/* Write the buffered data */
5484:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) return FR_DISK_ERR;
5485:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
5486:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
5487:Middlewares/Third_Party/FatFs/src/ff.c **** 
5488:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize the root directory */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 128


5489:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(buf, 0, szb_buf);
5490:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[SZDIRE * 0 + 0] = 0x83;		/* 83 entry (volume label) */
5491:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[SZDIRE * 1 + 0] = 0x81;		/* 81 entry (allocation bitmap) */
5492:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 1 + 20, 2);
5493:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 1 + 24, szb_bit);
5494:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[SZDIRE * 2 + 0] = 0x82;		/* 82 entry (up-case table) */
5495:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 2 + 4, sum);
5496:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 2 + 20, 2 + tbl[0]);
5497:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + SZDIRE * 2 + 24, szb_case);
5498:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_data + au * (tbl[0] + tbl[1]);	nsect = au;	/* Start of the root directory and number of 
5499:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {	/* Fill root directory sectors */
5500:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;
5501:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, n) != RES_OK) return FR_DISK_ERR;
5502:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5503:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
5504:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
5505:Middlewares/Third_Party/FatFs/src/ff.c **** 
5506:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create two set of the exFAT VBR blocks */
5507:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_vol;
5508:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (n = 0; n < 2; n++) {
5509:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Main record (+0) */
5510:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5511:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_JmpBoot, "\xEB\x76\x90" "EXFAT   ", 11);	/* Boot jump code (x86), OEM name */
5512:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_VolOfsEx, b_vol);					/* Volume offset in the physical drive [sector] */
5513:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_TotSecEx, sz_vol);					/* Volume size [sector] */
5514:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_FatOfsEx, b_fat - b_vol);			/* FAT offset [sector] */
5515:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_FatSzEx, sz_fat);					/* FAT size [sector] */
5516:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_DataOfsEx, b_data - b_vol);			/* Data offset [sector] */
5517:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_NumClusEx, n_clst);					/* Number of clusters */
5518:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_RootClusEx, 2 + tbl[0] + tbl[1]);	/* Root dir cluster # */
5519:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_VolIDEx, GET_FATTIME());				/* VSN */
5520:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FSVerEx, 0x100);						/* File system version (1.00) */
5521:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (buf[BPB_BytsPerSecEx] = 0, i = ss; i >>= 1; buf[BPB_BytsPerSecEx]++) ;	/* Log2 of sector si
5522:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (buf[BPB_SecPerClusEx] = 0, i = au; i >>= 1; buf[BPB_SecPerClusEx]++) ;	/* Log2 of cluster s
5523:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BPB_NumFATsEx] = 1;					/* Number of FATs */
5524:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BPB_DrvNumEx] = 0x80;				/* Drive number (for int13) */
5525:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_BootCodeEx, 0xFEEB);	/* Boot code (x86) */
5526:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);			/* Signature (placed here regardless of sector size) */
5527:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = sum = 0; i < ss; i++) {		/* VBR checksum */
5528:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (i != BPB_VolFlagEx && i != BPB_VolFlagEx + 1 && i != BPB_PercInUseEx) sum = xsum32(buf[i], 
5529:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5530:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect++, 1) != RES_OK) return FR_DISK_ERR;
5531:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Extended bootstrap record (+1..+8) */
5532:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5533:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + ss - 2, 0xAA55);	/* Signature (placed at end of sector) */
5534:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (j = 1; j < 9; j++) {
5535:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (i = 0; i < ss; sum = xsum32(buf[i++], sum)) ;	/* VBR checksum */
5536:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect++, 1) != RES_OK) return FR_DISK_ERR;
5537:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5538:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* OEM/Reserved record (+9..+10) */
5539:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5540:Middlewares/Third_Party/FatFs/src/ff.c **** 			for ( ; j < 11; j++) {
5541:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (i = 0; i < ss; sum = xsum32(buf[i++], sum)) ;	/* VBR checksum */
5542:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect++, 1) != RES_OK) return FR_DISK_ERR;
5543:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5544:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Sum record (+11) */
5545:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (i = 0; i < ss; i += 4) st_dword(buf + i, sum);		/* Fill with checksum value */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 129


5546:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect++, 1) != RES_OK) return FR_DISK_ERR;
5547:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5548:Middlewares/Third_Party/FatFs/src/ff.c **** 
5549:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else
5550:Middlewares/Third_Party/FatFs/src/ff.c **** #endif	/* _FS_EXFAT */
5551:Middlewares/Third_Party/FatFs/src/ff.c **** 	{	/* Create an FAT12/16/32 volume */
5552:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5553:Middlewares/Third_Party/FatFs/src/ff.c **** 			pau = au;
5554:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
5555:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {	/* FAT32 volume */
5556:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!pau) {	/* au auto-selection */
5557:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x20000;	/* Volume size in unit of 128KS */
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst32[i] && cst32[i] <= n; i++, pau <<= 1) ;	/* Get from table */
5559:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5560:Middlewares/Third_Party/FatFs/src/ff.c **** 				n_clst = sz_vol / pau;	/* Number of clusters */
5561:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_fat = (n_clst * 4 + 8 + ss - 1) / ss;	/* FAT size [sector] */
5562:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
5563:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = 0;		/* No static directory */
5564:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16 || n_clst > MAX_FAT32) return FR_MKFS_ABORTED;
5565:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
5566:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!pau) {	/* au auto-selection */
5567:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x1000;	/* Volume size in unit of 4KS */
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst[i] && cst[i] <= n; i++, pau <<= 1) ;	/* Get from table */
5569:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5570:Middlewares/Third_Party/FatFs/src/ff.c **** 				n_clst = sz_vol / pau;
5571:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT12) {
5572:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = n_clst * 2 + 4;		/* FAT size [byte] */
5573:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
5574:Middlewares/Third_Party/FatFs/src/ff.c **** 					fmt = FS_FAT12;
5575:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = (n_clst * 3 + 1) / 2 + 3;	/* FAT size [byte] */
5576:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5577:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_fat = (n + ss - 1) / ss;		/* FAT size [sector] */
5578:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 1;						/* Number of reserved sectors */
5579:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = (DWORD)n_rootdir * SZDIRE / ss;	/* Rootdir size [sector] */
5580:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5581:Middlewares/Third_Party/FatFs/src/ff.c **** 			b_fat = b_vol + sz_rsv;						/* FAT base */
5582:Middlewares/Third_Party/FatFs/src/ff.c **** 			b_data = b_fat + sz_fat * n_fats + sz_dir;	/* Data base */
5583:Middlewares/Third_Party/FatFs/src/ff.c **** 
5584:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Align data base to erase block boundary (for flash memory media) */
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = ((b_data + sz_blk - 1) & ~(sz_blk - 1)) - b_data;	/* Next nearest erase block from current d
5586:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv += n; b_fat += n;
5588:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* FAT12/16: Expand FAT size */
5589:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_fat += n / n_fats;
5590:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5591:Middlewares/Third_Party/FatFs/src/ff.c **** 
5592:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Determine number of clusters and final check of validity of the FAT sub-type */
5593:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (sz_vol < b_data + pau * 16 - b_vol) return FR_MKFS_ABORTED;	/* Too small volume */
5594:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
5595:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
5596:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16) {	/* Too few clusters for FAT32 */
5597:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
5598:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
5599:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5600:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5601:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT16) {
5602:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT16) {	/* Too many clusters for FAT16 */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 130


5603:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (pau * 2) <= 64) {
5604:Middlewares/Third_Party/FatFs/src/ff.c **** 						au = pau * 2; continue;		/* Adjust cluster size and retry */
5605:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
5606:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((opt & FM_FAT32)) {
5607:Middlewares/Third_Party/FatFs/src/ff.c **** 						fmt = FS_FAT32; continue;	/* Switch type to FAT32 and retry */
5608:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
5609:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
5610:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
5611:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5612:Middlewares/Third_Party/FatFs/src/ff.c **** 				if  (n_clst <= MAX_FAT12) {	/* Too few clusters for FAT16 */
5613:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
5614:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
5615:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5616:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT12 && n_clst > MAX_FAT12) return FR_MKFS_ABORTED;	/* Too many clusters for FAT1
5618:Middlewares/Third_Party/FatFs/src/ff.c **** 
5619:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Ok, it is the valid cluster configuration */
5620:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
5621:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (1);
5622:Middlewares/Third_Party/FatFs/src/ff.c **** 
5623:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM
5624:Middlewares/Third_Party/FatFs/src/ff.c **** 		tbl[0] = b_vol; tbl[1] = b_vol + sz_vol - 1;	/* Inform the device the volume area can be erased *
5625:Middlewares/Third_Party/FatFs/src/ff.c **** 		disk_ioctl(pdrv, CTRL_TRIM, tbl);
5626:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5627:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create FAT VBR */
5628:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(buf, 0, ss);
5629:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(buf + BS_JmpBoot, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code (x86), OEM name */
5630:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_BytsPerSec, ss);				/* Sector size [byte] */
5631:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_SecPerClus] = (BYTE)pau;				/* Cluster size [sector] */
5632:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RsvdSecCnt, (WORD)sz_rsv);	/* Size of reserved area */
5633:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_NumFATs] = (BYTE)n_fats;				/* Number of FATs */
5634:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RootEntCnt, (WORD)((fmt == FS_FAT32) ? 0 : n_rootdir));	/* Number of root direc
5635:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x10000) {
5636:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_TotSec16, (WORD)sz_vol);	/* Volume size in 16-bit LBA */
5637:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
5638:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_TotSec32, sz_vol);		/* Volume size in 32-bit LBA */
5639:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5640:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_Media] = 0xF8;							/* Media descriptor byte */
5641:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_SecPerTrk, 63);				/* Number of sectors per track (for int13) */
5642:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_NumHeads, 255);				/* Number of heads (for int13) */
5643:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + BPB_HiddSec, b_vol);				/* Volume offset in the physical drive [sector] */
5644:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
5645:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BS_VolID32, GET_FATTIME());	/* VSN */
5646:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_FATSz32, sz_fat);		/* FAT size [sector] */
5647:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_RootClus32, 2);			/* Root directory cluster # (2) */
5648:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FSInfo32, 1);				/* Offset of FSINFO sector (VBR + 1) */
5649:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_BkBootSec32, 6);			/* Offset of backup VBR (VBR + 6) */
5650:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_DrvNum32] = 0x80;					/* Drive number (for int13) */
5651:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig32] = 0x29;					/* Extended boot signature */
5652:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
5653:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
5654:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BS_VolID, GET_FATTIME());	/* VSN */
5655:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FATSz16, (WORD)sz_fat);	/* FAT size [sector] */
5656:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_DrvNum] = 0x80;						/* Drive number (for int13) */
5657:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig] = 0x29;						/* Extended boot signature */
5658:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
5659:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 131


5660:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BS_55AA, 0xAA55);					/* Signature (offset is fixed here regardless of sector size)
5661:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, buf, b_vol, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the VBR sector 
5662:Middlewares/Third_Party/FatFs/src/ff.c **** 
5663:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Create FSINFO record if needed */
5664:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
5665:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 6, 1);		/* Write backup VBR (VBR + 6) */
5666:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5667:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_LeadSig, 0x41615252);
5668:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_StrucSig, 0x61417272);
5669:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
5670:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
5671:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);
5672:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 7, 1);		/* Write backup FSINFO (VBR + 7) */
5673:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 1, 1);		/* Write original FSINFO (VBR + 1) */
5674:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5675:Middlewares/Third_Party/FatFs/src/ff.c **** 
5676:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize FAT area */
5677:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_set(buf, 0, (UINT)szb_buf);
5678:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_fat;		/* FAT start sector */
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < n_fats; i++) {			/* Initialize FATs each */
5680:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
5681:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 0, 0xFFFFFFF8);	/* Entry 0 */
5682:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 4, 0xFFFFFFFF);	/* Entry 1 */
5683:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 8, 0x0FFFFFFF);	/* Entry 2 (root directory) */
5684:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
5685:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 0, (fmt == FS_FAT12) ? 0xFFFFF8 : 0xFFFFFFF8);	/* Entry 0 and 1 */
5686:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5687:Middlewares/Third_Party/FatFs/src/ff.c **** 			nsect = sz_fat;		/* Number of FAT sectors */
5688:Middlewares/Third_Party/FatFs/src/ff.c **** 			do {	/* Fill FAT sectors */
5689:Middlewares/Third_Party/FatFs/src/ff.c **** 				n = (nsect > sz_buf) ? sz_buf : nsect;
5690:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
5691:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(buf, 0, ss);
5692:Middlewares/Third_Party/FatFs/src/ff.c **** 				sect += n; nsect -= n;
5693:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (nsect);
5694:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5695:Middlewares/Third_Party/FatFs/src/ff.c **** 
5696:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Initialize root directory (fill with zero) */
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		nsect = (fmt == FS_FAT32) ? pau : sz_dir;	/* Number of root directory sectors */
5698:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
5699:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;
5700:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
5701:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
5702:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
5703:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5704:Middlewares/Third_Party/FatFs/src/ff.c **** 
5705:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine system ID in the partition table */
5706:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_FS_EXFAT && fmt == FS_EXFAT) {
5707:Middlewares/Third_Party/FatFs/src/ff.c **** 		sys = 0x07;			/* HPFS/NTFS/exFAT */
5708:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
5709:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
5710:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = 0x0C;		/* FAT32X */
5711:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
5712:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (sz_vol >= 0x10000) {
5713:Middlewares/Third_Party/FatFs/src/ff.c **** 				sys = 0x06;	/* FAT12/16 (>=64KS) */
5714:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
5715:Middlewares/Third_Party/FatFs/src/ff.c **** 				sys = (fmt == FS_FAT16) ? 0x04 : 0x01;	/* FAT16 (<64KS) : FAT12 (<64KS) */
5716:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 132


5717:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5718:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5719:Middlewares/Third_Party/FatFs/src/ff.c **** 
5720:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Update partition information */
5721:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_MULTI_PARTITION && part != 0) {	/* Created in the existing partition */
5722:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update system ID in the partition table */
5723:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_read(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Read the MBR */
5724:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[MBR_Table + (part - 1) * SZ_PTE + PTE_System] = sys;		/* Set system ID */
5725:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Write it back to the MBR */
5726:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {								/* Created as a new single partition */
5727:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(opt & FM_SFD)) {	/* Create partition table if in FDISK format */
5728:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
5729:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);		/* MBR signature */
5730:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte = buf + MBR_Table;				/* Create partition table for single partition in the drive */
5731:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_Boot] = 0;					/* Boot indicator */
5732:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StHead] = 1;				/* Start head */
5733:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StSec] = 1;					/* Start sector */
5734:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StCyl] = 0;					/* Start cylinder */
5735:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_System] = sys;				/* System type */
5736:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (b_vol + sz_vol) / (63 * 255);	/* (End CHS may be invalid) */
5737:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdHead] = 254;				/* End head */
5738:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdSec] = (BYTE)(n >> 2 | 63);	/* End sector */
5739:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdCyl] = (BYTE)n;			/* End cylinder */
5740:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_StLba, b_vol);	/* Start offset in LBA */
5741:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_SizLba, sz_vol);	/* Size in sectors */
5742:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the MBR */
5743:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5744:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5745:Middlewares/Third_Party/FatFs/src/ff.c **** 
5746:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, CTRL_SYNC, 0) != RES_OK) return FR_DISK_ERR;
5747:Middlewares/Third_Party/FatFs/src/ff.c **** 
5748:Middlewares/Third_Party/FatFs/src/ff.c **** 	return FR_OK;
5749:Middlewares/Third_Party/FatFs/src/ff.c **** }
5750:Middlewares/Third_Party/FatFs/src/ff.c **** 
5751:Middlewares/Third_Party/FatFs/src/ff.c **** 
5752:Middlewares/Third_Party/FatFs/src/ff.c **** 
5753:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MULTI_PARTITION
5754:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5755:Middlewares/Third_Party/FatFs/src/ff.c **** /* Create partition table on the physical drive                          */
5756:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5757:Middlewares/Third_Party/FatFs/src/ff.c **** 
5758:Middlewares/Third_Party/FatFs/src/ff.c **** FRESULT f_fdisk (
5759:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE pdrv,			/* Physical drive number */
5760:Middlewares/Third_Party/FatFs/src/ff.c **** 	const DWORD* szt,	/* Pointer to the size table for each partitions */
5761:Middlewares/Third_Party/FatFs/src/ff.c **** 	void* work			/* Pointer to the working buffer */
5762:Middlewares/Third_Party/FatFs/src/ff.c **** )
5763:Middlewares/Third_Party/FatFs/src/ff.c **** {
5764:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, n, sz_cyl, tot_cyl, b_cyl, e_cyl, p_cyl;
5765:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s_hd, e_hd, *p, *buf = (BYTE*)work;
5766:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
5767:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sz_disk, sz_part, s_part;
5768:Middlewares/Third_Party/FatFs/src/ff.c **** 
5769:Middlewares/Third_Party/FatFs/src/ff.c **** 
5770:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(pdrv);
5771:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
5772:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
5773:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_SECTOR_COUNT, &sz_disk)) return FR_DISK_ERR;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 133


5774:Middlewares/Third_Party/FatFs/src/ff.c **** 
5775:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Determine the CHS without any consideration of the drive geometry */
5776:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (n = 16; n < 256 && sz_disk / n / 63 > 1024; n *= 2) ;
5777:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (n == 256) n--;
5778:Middlewares/Third_Party/FatFs/src/ff.c **** 	e_hd = n - 1;
5779:Middlewares/Third_Party/FatFs/src/ff.c **** 	sz_cyl = 63 * n;
5780:Middlewares/Third_Party/FatFs/src/ff.c **** 	tot_cyl = sz_disk / sz_cyl;
5781:Middlewares/Third_Party/FatFs/src/ff.c **** 
5782:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Create partition table */
5783:Middlewares/Third_Party/FatFs/src/ff.c **** 	mem_set(buf, 0, _MAX_SS);
5784:Middlewares/Third_Party/FatFs/src/ff.c **** 	p = buf + MBR_Table; b_cyl = 0;
5785:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (i = 0; i < 4; i++, p += SZ_PTE) {
5786:Middlewares/Third_Party/FatFs/src/ff.c **** 		p_cyl = (szt[i] <= 100U) ? (DWORD)tot_cyl * szt[i] / 100 : szt[i] / sz_cyl;	/* Number of cylinder
5787:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!p_cyl) continue;
5788:Middlewares/Third_Party/FatFs/src/ff.c **** 		s_part = (DWORD)sz_cyl * b_cyl;
5789:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_part = (DWORD)sz_cyl * p_cyl;
5790:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (i == 0) {	/* Exclude first track of cylinder 0 */
5791:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_hd = 1;
5792:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_part += 63; sz_part -= 63;
5793:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
5794:Middlewares/Third_Party/FatFs/src/ff.c **** 			s_hd = 0;
5795:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5796:Middlewares/Third_Party/FatFs/src/ff.c **** 		e_cyl = b_cyl + p_cyl - 1;	/* End cylinder */
5797:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (e_cyl >= tot_cyl) return FR_INVALID_PARAMETER;
5798:Middlewares/Third_Party/FatFs/src/ff.c **** 
5799:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Set partition table */
5800:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[1] = s_hd;						/* Start head */
5801:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[2] = (BYTE)((b_cyl >> 2) + 1);	/* Start sector */
5802:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[3] = (BYTE)b_cyl;					/* Start cylinder */
5803:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[4] = 0x07;						/* System type (temporary setting) */
5804:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[5] = e_hd;						/* End head */
5805:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[6] = (BYTE)((e_cyl >> 2) + 63);	/* End sector */
5806:Middlewares/Third_Party/FatFs/src/ff.c **** 		p[7] = (BYTE)e_cyl;					/* End cylinder */
5807:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(p + 8, s_part);			/* Start sector in LBA */
5808:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(p + 12, sz_part);			/* Number of sectors */
5809:Middlewares/Third_Party/FatFs/src/ff.c **** 
5810:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Next partition */
5811:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_cyl += p_cyl;
5812:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5813:Middlewares/Third_Party/FatFs/src/ff.c **** 	st_word(p, 0xAA55);
5814:Middlewares/Third_Party/FatFs/src/ff.c **** 
5815:Middlewares/Third_Party/FatFs/src/ff.c **** 	/* Write it to the MBR */
5816:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (disk_write(pdrv, buf, 0, 1) != RES_OK || disk_ioctl(pdrv, CTRL_SYNC, 0) != RES_OK) ? FR_DI
5817:Middlewares/Third_Party/FatFs/src/ff.c **** }
5818:Middlewares/Third_Party/FatFs/src/ff.c **** 
5819:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _MULTI_PARTITION */
5820:Middlewares/Third_Party/FatFs/src/ff.c **** #endif /* _USE_MKFS && !_FS_READONLY */
5821:Middlewares/Third_Party/FatFs/src/ff.c **** 
5822:Middlewares/Third_Party/FatFs/src/ff.c **** 
5823:Middlewares/Third_Party/FatFs/src/ff.c **** 
5824:Middlewares/Third_Party/FatFs/src/ff.c **** 
5825:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_STRFUNC
5826:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5827:Middlewares/Third_Party/FatFs/src/ff.c **** /* Get a string from the file                                            */
5828:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5829:Middlewares/Third_Party/FatFs/src/ff.c **** 
5830:Middlewares/Third_Party/FatFs/src/ff.c **** TCHAR* f_gets (
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 134


5831:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR* buff,	/* Pointer to the string buffer to read */
5832:Middlewares/Third_Party/FatFs/src/ff.c **** 	int len,		/* Size of string buffer (characters) */
5833:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp			/* Pointer to the file object */
5834:Middlewares/Third_Party/FatFs/src/ff.c **** )
5835:Middlewares/Third_Party/FatFs/src/ff.c **** {
5836:Middlewares/Third_Party/FatFs/src/ff.c **** 	int n = 0;
5837:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, *p = buff;
5838:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s[2];
5839:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rc;
5840:Middlewares/Third_Party/FatFs/src/ff.c **** 
5841:Middlewares/Third_Party/FatFs/src/ff.c **** 
5842:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (n < len - 1) {	/* Read characters until buffer gets filled */
5843:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
5844:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STRF_ENCODE == 3		/* Read a character in UTF-8 */
5845:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
5846:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
5847:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
5848:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c >= 0x80) {
5849:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c < 0xC0) continue;	/* Skip stray trailer */
5850:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c < 0xE0) {			/* Two-byte sequence (0x80-0x7FF) */
5851:Middlewares/Third_Party/FatFs/src/ff.c **** 				f_read(fp, s, 1, &rc);
5852:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (rc != 1) break;
5853:Middlewares/Third_Party/FatFs/src/ff.c **** 				c = (c & 0x1F) << 6 | (s[0] & 0x3F);
5854:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c < 0x80) c = '?';	/* Reject invalid code range */
5855:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
5856:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (c < 0xF0) {		/* Three-byte sequence (0x800-0xFFFF) */
5857:Middlewares/Third_Party/FatFs/src/ff.c **** 					f_read(fp, s, 2, &rc);
5858:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (rc != 2) break;
5859:Middlewares/Third_Party/FatFs/src/ff.c **** 					c = c << 12 | (s[0] & 0x3F) << 6 | (s[1] & 0x3F);
5860:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (c < 0x800) c = '?';	/* Reject invalid code range */
5861:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {			/* Reject four-byte sequence */
5862:Middlewares/Third_Party/FatFs/src/ff.c **** 					c = '?';
5863:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
5864:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
5865:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5866:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 2		/* Read a character in UTF-16BE */
5867:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 2, &rc);
5868:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 2) break;
5869:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[1] + (s[0] << 8);
5870:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 1		/* Read a character in UTF-16LE */
5871:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 2, &rc);
5872:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 2) break;
5873:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0] + (s[1] << 8);
5874:Middlewares/Third_Party/FatFs/src/ff.c **** #else						/* Read a character in ANSI/OEM */
5875:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
5876:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
5877:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
5878:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsDBCS1(c)) {
5879:Middlewares/Third_Party/FatFs/src/ff.c **** 			f_read(fp, s, 1, &rc);
5880:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (rc != 1) break;
5881:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = (c << 8) + s[0];
5882:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5883:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = ff_convert(c, 1);	/* OEM -> Unicode */
5884:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!c) c = '?';
5885:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5886:Middlewares/Third_Party/FatFs/src/ff.c **** #else						/* Read a character without conversion */
5887:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_read(fp, s, 1, &rc);
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 135


5888:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
5889:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
5890:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5891:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_USE_STRFUNC == 2 && c == '\r') continue;	/* Strip '\r' */
5892:Middlewares/Third_Party/FatFs/src/ff.c **** 		*p++ = c;
5893:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
5894:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
5895:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5896:Middlewares/Third_Party/FatFs/src/ff.c **** 	*p = 0;
5897:Middlewares/Third_Party/FatFs/src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
5898:Middlewares/Third_Party/FatFs/src/ff.c **** }
5899:Middlewares/Third_Party/FatFs/src/ff.c **** 
5900:Middlewares/Third_Party/FatFs/src/ff.c **** 
5901:Middlewares/Third_Party/FatFs/src/ff.c **** 
5902:Middlewares/Third_Party/FatFs/src/ff.c **** 
5903:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
5904:Middlewares/Third_Party/FatFs/src/ff.c **** #include <stdarg.h>
5905:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5906:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a character to the file                                           */
5907:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
5908:Middlewares/Third_Party/FatFs/src/ff.c **** 
5909:Middlewares/Third_Party/FatFs/src/ff.c **** typedef struct {
5910:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL *fp;		/* Ptr to the writing file */
5911:Middlewares/Third_Party/FatFs/src/ff.c **** 	int idx, nchr;	/* Write index of buf[] (-1:error), number of chars written */
5912:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE buf[64];	/* Write buffer */
5913:Middlewares/Third_Party/FatFs/src/ff.c **** } putbuff;
5914:Middlewares/Third_Party/FatFs/src/ff.c **** 
5915:Middlewares/Third_Party/FatFs/src/ff.c **** 
5916:Middlewares/Third_Party/FatFs/src/ff.c **** static
5917:Middlewares/Third_Party/FatFs/src/ff.c **** void putc_bfd (		/* Buffered write with code conversion */
5918:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff* pb,
5919:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c
5920:Middlewares/Third_Party/FatFs/src/ff.c **** )
5921:Middlewares/Third_Party/FatFs/src/ff.c **** {
5922:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bw;
5923:Middlewares/Third_Party/FatFs/src/ff.c **** 	int i;
5924:Middlewares/Third_Party/FatFs/src/ff.c **** 
5925:Middlewares/Third_Party/FatFs/src/ff.c **** 
5926:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (_USE_STRFUNC == 2 && c == '\n') {	 /* LF -> CRLF conversion */
5927:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(pb, '\r');
5928:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5929:Middlewares/Third_Party/FatFs/src/ff.c **** 
5930:Middlewares/Third_Party/FatFs/src/ff.c **** 	i = pb->idx;		/* Write index of pb->buf[] */
5931:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i < 0) return;
5932:Middlewares/Third_Party/FatFs/src/ff.c **** 
5933:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
5934:Middlewares/Third_Party/FatFs/src/ff.c **** #if _STRF_ENCODE == 3			/* Write a character in UTF-8 */
5935:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (c < 0x80) {				/* 7-bit */
5936:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)c;
5937:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
5938:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c < 0x800) {		/* 11-bit */
5939:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0xC0 | c >> 6);
5940:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* 16-bit */
5941:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0xE0 | c >> 12);
5942:Middlewares/Third_Party/FatFs/src/ff.c **** 			pb->buf[i++] = (BYTE)(0x80 | (c >> 6 & 0x3F));
5943:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
5944:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)(0x80 | (c & 0x3F));
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 136


5945:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5946:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 2			/* Write a character in UTF-16BE */
5947:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)(c >> 8);
5948:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
5949:Middlewares/Third_Party/FatFs/src/ff.c **** #elif _STRF_ENCODE == 1			/* Write a character in UTF-16LE */
5950:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
5951:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)(c >> 8);
5952:Middlewares/Third_Party/FatFs/src/ff.c **** #else							/* Write a character in ANSI/OEM */
5953:Middlewares/Third_Party/FatFs/src/ff.c **** 	c = ff_convert(c, 0);	/* Unicode -> OEM */
5954:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!c) c = '?';
5955:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (c >= 0x100)
5956:Middlewares/Third_Party/FatFs/src/ff.c **** 		pb->buf[i++] = (BYTE)(c >> 8);
5957:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
5958:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5959:Middlewares/Third_Party/FatFs/src/ff.c **** #else							/* Write a character without conversion */
5960:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->buf[i++] = (BYTE)c;
5961:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
5962:Middlewares/Third_Party/FatFs/src/ff.c **** 
5963:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i >= (int)(sizeof pb->buf) - 3) {	/* Write buffered characters to the file */
5964:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = (bw == (UINT)i) ? 0 : -1;
5966:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
5967:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->idx = i;
5968:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->nchr++;
5969:Middlewares/Third_Party/FatFs/src/ff.c **** }
5970:Middlewares/Third_Party/FatFs/src/ff.c **** 
5971:Middlewares/Third_Party/FatFs/src/ff.c **** 
5972:Middlewares/Third_Party/FatFs/src/ff.c **** static
5973:Middlewares/Third_Party/FatFs/src/ff.c **** int putc_flush (		/* Flush left characters in the buffer */
5974:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff* pb
5975:Middlewares/Third_Party/FatFs/src/ff.c **** )
5976:Middlewares/Third_Party/FatFs/src/ff.c **** {
5977:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw;
5978:Middlewares/Third_Party/FatFs/src/ff.c **** 
5979:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (   pb->idx >= 0	/* Flush buffered characters to the file */
5980:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb->fp, pb->buf, (UINT)pb->idx, &nw) == FR_OK
5981:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb->idx == nw) return pb->nchr;
5982:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
5983:Middlewares/Third_Party/FatFs/src/ff.c **** }
5984:Middlewares/Third_Party/FatFs/src/ff.c **** 
5985:Middlewares/Third_Party/FatFs/src/ff.c **** 
5986:Middlewares/Third_Party/FatFs/src/ff.c **** static
5987:Middlewares/Third_Party/FatFs/src/ff.c **** void putc_init (		/* Initialize write buffer */
5988:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff* pb,
5989:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp
5990:Middlewares/Third_Party/FatFs/src/ff.c **** )
5991:Middlewares/Third_Party/FatFs/src/ff.c **** {
 1633              		.loc 1 5991 1 is_stmt 1 view -0
 1634              		.cfi_startproc
 1635              		@ args = 0, pretend = 0, frame = 0
 1636              		@ frame_needed = 0, uses_anonymous_args = 0
 1637              		@ link register save eliminated.
5992:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->fp = fp;
 1638              		.loc 1 5992 2 view .LVU492
 1639              		.loc 1 5992 9 is_stmt 0 view .LVU493
 1640 0000 0160     		str	r1, [r0]
5993:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->nchr = pb->idx = 0;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 137


 1641              		.loc 1 5993 2 is_stmt 1 view .LVU494
 1642              		.loc 1 5993 21 is_stmt 0 view .LVU495
 1643 0002 0023     		movs	r3, #0
 1644 0004 4360     		str	r3, [r0, #4]
 1645              		.loc 1 5993 11 view .LVU496
 1646 0006 8360     		str	r3, [r0, #8]
5994:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1647              		.loc 1 5994 1 view .LVU497
 1648 0008 7047     		bx	lr
 1649              		.cfi_endproc
 1650              	.LFE398:
 1652              		.section	.text.lock_fs,"ax",%progbits
 1653              		.align	1
 1654              		.syntax unified
 1655              		.thumb
 1656              		.thumb_func
 1658              	lock_fs:
 1659              	.LVL177:
 1660              	.LFB346:
 745:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (fs && ff_req_grant(fs->sobj)) ? 1 : 0;
 1661              		.loc 1 745 1 is_stmt 1 view -0
 1662              		.cfi_startproc
 1663              		@ args = 0, pretend = 0, frame = 0
 1664              		@ frame_needed = 0, uses_anonymous_args = 0
 746:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1665              		.loc 1 746 2 view .LVU499
 746:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1666              		.loc 1 746 44 is_stmt 0 view .LVU500
 1667 0000 30B1     		cbz	r0, .L149
 745:Middlewares/Third_Party/FatFs/src/ff.c **** 	return (fs && ff_req_grant(fs->sobj)) ? 1 : 0;
 1668              		.loc 1 745 1 view .LVU501
 1669 0002 08B5     		push	{r3, lr}
 1670              	.LCFI14:
 1671              		.cfi_def_cfa_offset 8
 1672              		.cfi_offset 3, -8
 1673              		.cfi_offset 14, -4
 746:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1674              		.loc 1 746 16 discriminator 1 view .LVU502
 1675 0004 C068     		ldr	r0, [r0, #12]
 1676              	.LVL178:
 746:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1677              		.loc 1 746 16 discriminator 1 view .LVU503
 1678 0006 FFF7FEFF 		bl	ff_req_grant
 1679              	.LVL179:
 746:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1680              		.loc 1 746 44 discriminator 1 view .LVU504
 1681 000a 00B1     		cbz	r0, .L147
 746:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1682              		.loc 1 746 44 discriminator 3 view .LVU505
 1683 000c 0120     		movs	r0, #1
 1684              	.L147:
 747:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1685              		.loc 1 747 1 view .LVU506
 1686 000e 08BD     		pop	{r3, pc}
 1687              	.LVL180:
 1688              	.L149:
 1689              	.LCFI15:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 138


 1690              		.cfi_def_cfa_offset 0
 1691              		.cfi_restore 3
 1692              		.cfi_restore 14
 746:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1693              		.loc 1 746 44 discriminator 4 view .LVU507
 1694 0010 0020     		movs	r0, #0
 1695              	.LVL181:
 747:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1696              		.loc 1 747 1 view .LVU508
 1697 0012 7047     		bx	lr
 1698              		.cfi_endproc
 1699              	.LFE346:
 1701              		.section	.text.sync_window,"ax",%progbits
 1702              		.align	1
 1703              		.syntax unified
 1704              		.thumb
 1705              		.thumb_func
 1707              	sync_window:
 1708              	.LVL182:
 1709              	.LFB353:
 886:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD wsect;
 1710              		.loc 1 886 1 is_stmt 1 view -0
 1711              		.cfi_startproc
 1712              		@ args = 0, pretend = 0, frame = 0
 1713              		@ frame_needed = 0, uses_anonymous_args = 0
 886:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD wsect;
 1714              		.loc 1 886 1 is_stmt 0 view .LVU510
 1715 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 1716              	.LCFI16:
 1717              		.cfi_def_cfa_offset 24
 1718              		.cfi_offset 4, -24
 1719              		.cfi_offset 5, -20
 1720              		.cfi_offset 6, -16
 1721              		.cfi_offset 7, -12
 1722              		.cfi_offset 8, -8
 1723              		.cfi_offset 14, -4
 887:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nf;
 1724              		.loc 1 887 2 is_stmt 1 view .LVU511
 888:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 1725              		.loc 1 888 2 view .LVU512
 889:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1726              		.loc 1 889 2 view .LVU513
 1727              	.LVL183:
 892:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 1728              		.loc 1 892 2 view .LVU514
 892:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 1729              		.loc 1 892 8 is_stmt 0 view .LVU515
 1730 0004 C578     		ldrb	r5, [r0, #3]	@ zero_extendqisi2
 892:Middlewares/Third_Party/FatFs/src/ff.c **** 		wsect = fs->winsect;	/* Current sector number */
 1731              		.loc 1 892 5 view .LVU516
 1732 0006 15B9     		cbnz	r5, .L160
 1733              	.LVL184:
 1734              	.L155:
 906:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1735              		.loc 1 906 2 is_stmt 1 view .LVU517
 907:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1736              		.loc 1 907 1 is_stmt 0 view .LVU518
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 139


 1737 0008 2846     		mov	r0, r5
 1738 000a BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 1739              	.LVL185:
 1740              	.L160:
 907:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1741              		.loc 1 907 1 view .LVU519
 1742 000e 0446     		mov	r4, r0
 893:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK) {
 1743              		.loc 1 893 3 is_stmt 1 view .LVU520
 893:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(fs->drv, fs->win, wsect, 1) != RES_OK) {
 1744              		.loc 1 893 9 is_stmt 0 view .LVU521
 1745 0010 076B     		ldr	r7, [r0, #48]
 1746              	.LVL186:
 894:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 1747              		.loc 1 894 3 is_stmt 1 view .LVU522
 894:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 1748              		.loc 1 894 29 is_stmt 0 view .LVU523
 1749 0012 00F13408 		add	r8, r0, #52
 894:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 1750              		.loc 1 894 7 view .LVU524
 1751 0016 0123     		movs	r3, #1
 1752 0018 3A46     		mov	r2, r7
 1753 001a 4146     		mov	r1, r8
 1754 001c 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 1755              	.LVL187:
 894:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 1756              		.loc 1 894 7 view .LVU525
 1757 001e FFF7FEFF 		bl	disk_write
 1758              	.LVL188:
 894:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_DISK_ERR;
 1759              		.loc 1 894 6 discriminator 1 view .LVU526
 1760 0022 0546     		mov	r5, r0
 1761 0024 A0B9     		cbnz	r0, .L158
 897:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 1762              		.loc 1 897 4 is_stmt 1 view .LVU527
 897:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (wsect - fs->fatbase < fs->fsize) {		/* Is it in the FAT area? */
 1763              		.loc 1 897 14 is_stmt 0 view .LVU528
 1764 0026 0023     		movs	r3, #0
 1765 0028 E370     		strb	r3, [r4, #3]
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1766              		.loc 1 898 4 is_stmt 1 view .LVU529
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1767              		.loc 1 898 18 is_stmt 0 view .LVU530
 1768 002a 636A     		ldr	r3, [r4, #36]
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1769              		.loc 1 898 14 view .LVU531
 1770 002c FB1A     		subs	r3, r7, r3
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1771              		.loc 1 898 32 view .LVU532
 1772 002e E269     		ldr	r2, [r4, #28]
 898:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (nf = fs->n_fats; nf >= 2; nf--) {	/* Reflect the change to all FAT copies */
 1773              		.loc 1 898 7 view .LVU533
 1774 0030 9342     		cmp	r3, r2
 1775 0032 E9D2     		bcs	.L155
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1776              		.loc 1 899 5 is_stmt 1 view .LVU534
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 140


 1777              		.loc 1 899 17 is_stmt 0 view .LVU535
 1778 0034 A678     		ldrb	r6, [r4, #2]	@ zero_extendqisi2
 1779              	.LVL189:
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1780              		.loc 1 899 5 view .LVU536
 1781 0036 08E0     		b	.L156
 1782              	.L157:
 900:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 1783              		.loc 1 900 6 is_stmt 1 view .LVU537
 900:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 1784              		.loc 1 900 17 is_stmt 0 view .LVU538
 1785 0038 E369     		ldr	r3, [r4, #28]
 900:Middlewares/Third_Party/FatFs/src/ff.c **** 					disk_write(fs->drv, fs->win, wsect, 1);
 1786              		.loc 1 900 12 view .LVU539
 1787 003a 1F44     		add	r7, r7, r3
 1788              	.LVL190:
 901:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 1789              		.loc 1 901 6 is_stmt 1 view .LVU540
 1790 003c 0123     		movs	r3, #1
 1791 003e 3A46     		mov	r2, r7
 1792 0040 4146     		mov	r1, r8
 1793 0042 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1794 0044 FFF7FEFF 		bl	disk_write
 1795              	.LVL191:
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1796              		.loc 1 899 38 discriminator 3 view .LVU541
 1797 0048 013E     		subs	r6, r6, #1
 1798              	.LVL192:
 1799              	.L156:
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1800              		.loc 1 899 30 discriminator 1 view .LVU542
 1801 004a 012E     		cmp	r6, #1
 1802 004c F4D8     		bhi	.L157
 899:Middlewares/Third_Party/FatFs/src/ff.c **** 					wsect += fs->fsize;
 1803              		.loc 1 899 30 is_stmt 0 discriminator 1 view .LVU543
 1804 004e DBE7     		b	.L155
 1805              	.LVL193:
 1806              	.L158:
 895:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 1807              		.loc 1 895 8 view .LVU544
 1808 0050 0125     		movs	r5, #1
 1809 0052 D9E7     		b	.L155
 1810              		.cfi_endproc
 1811              	.LFE353:
 1813              		.section	.text.move_window,"ax",%progbits
 1814              		.align	1
 1815              		.syntax unified
 1816              		.thumb
 1817              		.thumb_func
 1819              	move_window:
 1820              	.LVL194:
 1821              	.LFB354:
 916:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 1822              		.loc 1 916 1 is_stmt 1 view -0
 1823              		.cfi_startproc
 1824              		@ args = 0, pretend = 0, frame = 0
 1825              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 141


 916:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 1826              		.loc 1 916 1 is_stmt 0 view .LVU546
 1827 0000 70B5     		push	{r4, r5, r6, lr}
 1828              	.LCFI17:
 1829              		.cfi_def_cfa_offset 16
 1830              		.cfi_offset 4, -16
 1831              		.cfi_offset 5, -12
 1832              		.cfi_offset 6, -8
 1833              		.cfi_offset 14, -4
 917:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1834              		.loc 1 917 2 is_stmt 1 view .LVU547
 1835              	.LVL195:
 920:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 1836              		.loc 1 920 2 view .LVU548
 920:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 1837              		.loc 1 920 18 is_stmt 0 view .LVU549
 1838 0002 036B     		ldr	r3, [r0, #48]
 920:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 1839              		.loc 1 920 5 view .LVU550
 1840 0004 8B42     		cmp	r3, r1
 1841 0006 02D1     		bne	.L167
 917:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1842              		.loc 1 917 10 view .LVU551
 1843 0008 0026     		movs	r6, #0
 1844              	.LVL196:
 1845              	.L162:
 932:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1846              		.loc 1 932 2 is_stmt 1 view .LVU552
 933:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1847              		.loc 1 933 1 is_stmt 0 view .LVU553
 1848 000a 3046     		mov	r0, r6
 1849 000c 70BD     		pop	{r4, r5, r6, pc}
 1850              	.LVL197:
 1851              	.L167:
 933:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1852              		.loc 1 933 1 view .LVU554
 1853 000e 0446     		mov	r4, r0
 1854 0010 0D46     		mov	r5, r1
 922:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1855              		.loc 1 922 3 is_stmt 1 view .LVU555
 922:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 1856              		.loc 1 922 9 is_stmt 0 view .LVU556
 1857 0012 FFF7FEFF 		bl	sync_window
 1858              	.LVL198:
 924:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK) {
 1859              		.loc 1 924 3 is_stmt 1 view .LVU557
 924:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_read(fs->drv, fs->win, sector, 1) != RES_OK) {
 1860              		.loc 1 924 6 is_stmt 0 view .LVU558
 1861 0016 0646     		mov	r6, r0
 1862 0018 0028     		cmp	r0, #0
 1863 001a F6D1     		bne	.L162
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 1864              		.loc 1 925 4 is_stmt 1 view .LVU559
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 1865              		.loc 1 925 8 is_stmt 0 view .LVU560
 1866 001c 0123     		movs	r3, #1
 1867 001e 2A46     		mov	r2, r5
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 142


 1868 0020 04F13401 		add	r1, r4, #52
 1869 0024 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 1870              	.LVL199:
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 1871              		.loc 1 925 8 view .LVU561
 1872 0026 FFF7FEFF 		bl	disk_read
 1873              	.LVL200:
 925:Middlewares/Third_Party/FatFs/src/ff.c **** 				sector = 0xFFFFFFFF;	/* Invalidate window if data is not reliable */
 1874              		.loc 1 925 7 discriminator 1 view .LVU562
 1875 002a 10B1     		cbz	r0, .L163
 927:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 1876              		.loc 1 927 9 view .LVU563
 1877 002c 0126     		movs	r6, #1
 1878              	.LVL201:
 926:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 1879              		.loc 1 926 12 view .LVU564
 1880 002e 4FF0FF35 		mov	r5, #-1
 1881              	.LVL202:
 1882              	.L163:
 929:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1883              		.loc 1 929 4 is_stmt 1 view .LVU565
 929:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 1884              		.loc 1 929 16 is_stmt 0 view .LVU566
 1885 0032 2563     		str	r5, [r4, #48]
 1886 0034 E9E7     		b	.L162
 1887              		.cfi_endproc
 1888              	.LFE354:
 1890              		.section	.text.check_fs,"ax",%progbits
 1891              		.align	1
 1892              		.syntax unified
 1893              		.thumb
 1894              		.thumb_func
 1896              	check_fs:
 1897              	.LVL203:
 1898              	.LFB375:
2969:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;		/* Invaidate window */
 1899              		.loc 1 2969 1 is_stmt 1 view -0
 1900              		.cfi_startproc
 1901              		@ args = 0, pretend = 0, frame = 0
 1902              		@ frame_needed = 0, uses_anonymous_args = 0
2969:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->wflag = 0; fs->winsect = 0xFFFFFFFF;		/* Invaidate window */
 1903              		.loc 1 2969 1 is_stmt 0 view .LVU568
 1904 0000 38B5     		push	{r3, r4, r5, lr}
 1905              	.LCFI18:
 1906              		.cfi_def_cfa_offset 16
 1907              		.cfi_offset 3, -16
 1908              		.cfi_offset 4, -12
 1909              		.cfi_offset 5, -8
 1910              		.cfi_offset 14, -4
 1911 0002 0446     		mov	r4, r0
2970:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load boot record */
 1912              		.loc 1 2970 2 is_stmt 1 view .LVU569
2970:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load boot record */
 1913              		.loc 1 2970 12 is_stmt 0 view .LVU570
 1914 0004 0023     		movs	r3, #0
 1915 0006 C370     		strb	r3, [r0, #3]
2970:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load boot record */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 143


 1916              		.loc 1 2970 17 is_stmt 1 view .LVU571
2970:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (move_window(fs, sect) != FR_OK) return 4;	/* Load boot record */
 1917              		.loc 1 2970 29 is_stmt 0 view .LVU572
 1918 0008 4FF0FF33 		mov	r3, #-1
 1919 000c 0363     		str	r3, [r0, #48]
2971:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1920              		.loc 1 2971 2 is_stmt 1 view .LVU573
2971:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1921              		.loc 1 2971 6 is_stmt 0 view .LVU574
 1922 000e FFF7FEFF 		bl	move_window
 1923              	.LVL204:
2971:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1924              		.loc 1 2971 5 discriminator 1 view .LVU575
 1925 0012 30BB     		cbnz	r0, .L171
 1926 0014 0546     		mov	r5, r0
2973:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1927              		.loc 1 2973 2 is_stmt 1 view .LVU576
2973:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1928              		.loc 1 2973 6 is_stmt 0 view .LVU577
 1929 0016 04F23220 		addw	r0, r4, #562
 1930 001a FFF7FEFF 		bl	ld_word
 1931              	.LVL205:
2973:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1932              		.loc 1 2973 5 discriminator 1 view .LVU578
 1933 001e 4AF65523 		movw	r3, #43605
 1934 0022 9842     		cmp	r0, r3
 1935 0024 1FD1     		bne	.L172
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
 1936              		.loc 1 2975 2 is_stmt 1 view .LVU579
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
 1937              		.loc 1 2975 13 is_stmt 0 view .LVU580
 1938 0026 94F83430 		ldrb	r3, [r4, #52]	@ zero_extendqisi2
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
 1939              		.loc 1 2975 5 view .LVU581
 1940 002a E92B     		cmp	r3, #233
 1941 002c 07D0     		beq	.L170
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
 1942              		.loc 1 2975 66 discriminator 1 view .LVU582
 1943 002e 636B     		ldr	r3, [r4, #52]
 1944 0030 03F0FF13 		and	r3, r3, #16711935
2975:Middlewares/Third_Party/FatFs/src/ff.c **** 		if ((ld_dword(fs->win + BS_FilSysType) & 0xFFFFFF) == 0x544146) return 0;	/* Check "FAT" string *
 1945              		.loc 1 2975 34 discriminator 1 view .LVU583
 1946 0034 0D4A     		ldr	r2, .L175
 1947 0036 9342     		cmp	r3, r2
 1948 0038 01D0     		beq	.L170
2982:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1949              		.loc 1 2982 9 view .LVU584
 1950 003a 0225     		movs	r5, #2
 1951 003c 14E0     		b	.L169
 1952              	.L170:
2976:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_dword(fs->win + BS_FilSysType32) == 0x33544146) return 0;			/* Check "FAT3" string */
 1953              		.loc 1 2976 3 is_stmt 1 view .LVU585
2976:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_dword(fs->win + BS_FilSysType32) == 0x33544146) return 0;			/* Check "FAT3" string */
 1954              		.loc 1 2976 8 is_stmt 0 view .LVU586
 1955 003e 04F16A00 		add	r0, r4, #106
 1956 0042 FFF7FEFF 		bl	ld_dword
 1957              	.LVL206:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 144


2976:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_dword(fs->win + BS_FilSysType32) == 0x33544146) return 0;			/* Check "FAT3" string */
 1958              		.loc 1 2976 42 discriminator 1 view .LVU587
 1959 0046 20F07F40 		bic	r0, r0, #-16777216
2976:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ld_dword(fs->win + BS_FilSysType32) == 0x33544146) return 0;			/* Check "FAT3" string */
 1960              		.loc 1 2976 6 discriminator 1 view .LVU588
 1961 004a 094B     		ldr	r3, .L175+4
 1962 004c 9842     		cmp	r0, r3
 1963 004e 0BD0     		beq	.L169
2977:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1964              		.loc 1 2977 3 is_stmt 1 view .LVU589
2977:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1965              		.loc 1 2977 7 is_stmt 0 view .LVU590
 1966 0050 04F18600 		add	r0, r4, #134
 1967 0054 FFF7FEFF 		bl	ld_dword
 1968              	.LVL207:
2977:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 1969              		.loc 1 2977 6 discriminator 1 view .LVU591
 1970 0058 064B     		ldr	r3, .L175+8
 1971 005a 9842     		cmp	r0, r3
 1972 005c 04D0     		beq	.L169
2982:Middlewares/Third_Party/FatFs/src/ff.c **** }
 1973              		.loc 1 2982 9 view .LVU592
 1974 005e 0225     		movs	r5, #2
 1975 0060 02E0     		b	.L169
 1976              	.L171:
2971:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1977              		.loc 1 2971 45 discriminator 1 view .LVU593
 1978 0062 0425     		movs	r5, #4
 1979 0064 00E0     		b	.L169
 1980              	.L172:
2973:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1981              		.loc 1 2973 51 discriminator 1 view .LVU594
 1982 0066 0325     		movs	r5, #3
 1983              	.L169:
2983:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1984              		.loc 1 2983 1 view .LVU595
 1985 0068 2846     		mov	r0, r5
 1986 006a 38BD     		pop	{r3, r4, r5, pc}
 1987              	.LVL208:
 1988              	.L176:
2983:Middlewares/Third_Party/FatFs/src/ff.c **** 
 1989              		.loc 1 2983 1 view .LVU596
 1990              		.align	2
 1991              	.L175:
 1992 006c EB009000 		.word	9437419
 1993 0070 46415400 		.word	5521734
 1994 0074 46415433 		.word	861159750
 1995              		.cfi_endproc
 1996              	.LFE375:
 1998              		.section	.text.find_volume,"ax",%progbits
 1999              		.align	1
 2000              		.syntax unified
 2001              		.thumb
 2002              		.thumb_func
 2004              	find_volume:
 2005              	.LVL209:
 2006              	.LFB376:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 145


2998:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, *pt;
 2007              		.loc 1 2998 1 is_stmt 1 view -0
 2008              		.cfi_startproc
 2009              		@ args = 0, pretend = 0, frame = 16
 2010              		@ frame_needed = 0, uses_anonymous_args = 0
2998:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, *pt;
 2011              		.loc 1 2998 1 is_stmt 0 view .LVU598
 2012 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 2013              	.LCFI19:
 2014              		.cfi_def_cfa_offset 36
 2015              		.cfi_offset 4, -36
 2016              		.cfi_offset 5, -32
 2017              		.cfi_offset 6, -28
 2018              		.cfi_offset 7, -24
 2019              		.cfi_offset 8, -20
 2020              		.cfi_offset 9, -16
 2021              		.cfi_offset 10, -12
 2022              		.cfi_offset 11, -8
 2023              		.cfi_offset 14, -4
 2024 0004 85B0     		sub	sp, sp, #20
 2025              	.LCFI20:
 2026              		.cfi_def_cfa_offset 56
 2027 0006 0C46     		mov	r4, r1
 2028 0008 1546     		mov	r5, r2
2999:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
 2029              		.loc 1 2999 2 is_stmt 1 view .LVU599
3000:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
 2030              		.loc 1 3000 2 view .LVU600
3001:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD bsect, fasize, tsect, sysect, nclst, szbfat, br[4];
 2031              		.loc 1 3001 2 view .LVU601
3002:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD nrsv;
 2032              		.loc 1 3002 2 view .LVU602
3003:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 2033              		.loc 1 3003 2 view .LVU603
3004:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 2034              		.loc 1 3004 2 view .LVU604
3005:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2035              		.loc 1 3005 2 view .LVU605
3009:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(path);
 2036              		.loc 1 3009 2 view .LVU606
3009:Middlewares/Third_Party/FatFs/src/ff.c **** 	vol = get_ldnumber(path);
 2037              		.loc 1 3009 7 is_stmt 0 view .LVU607
 2038 000a 0023     		movs	r3, #0
 2039 000c 0B60     		str	r3, [r1]
3010:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 2040              		.loc 1 3010 2 is_stmt 1 view .LVU608
3010:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 2041              		.loc 1 3010 8 is_stmt 0 view .LVU609
 2042 000e FFF7FEFF 		bl	get_ldnumber
 2043              	.LVL210:
3011:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2044              		.loc 1 3011 2 is_stmt 1 view .LVU610
3011:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2045              		.loc 1 3011 5 is_stmt 0 view .LVU611
 2046 0012 061E     		subs	r6, r0, #0
 2047 0014 C0F24A81 		blt	.L194
3014:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 146


 2048              		.loc 1 3014 2 is_stmt 1 view .LVU612
3014:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!fs) return FR_NOT_ENABLED;		/* Is the file system object available? */
 2049              		.loc 1 3014 5 is_stmt 0 view .LVU613
 2050 0018 B94B     		ldr	r3, .L225
 2051 001a 53F82670 		ldr	r7, [r3, r6, lsl #2]
 2052              	.LVL211:
3015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2053              		.loc 1 3015 2 is_stmt 1 view .LVU614
3015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2054              		.loc 1 3015 5 is_stmt 0 view .LVU615
 2055 001e 002F     		cmp	r7, #0
 2056 0020 00F04681 		beq	.L195
3017:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
 2057              		.loc 1 3017 2 is_stmt 1 view .LVU616
 2058 0024 3846     		mov	r0, r7
 2059              	.LVL212:
3017:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
 2060              		.loc 1 3017 2 is_stmt 0 view .LVU617
 2061 0026 FFF7FEFF 		bl	lock_fs
 2062              	.LVL213:
3017:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
 2063              		.loc 1 3017 2 discriminator 1 view .LVU618
 2064 002a 0028     		cmp	r0, #0
 2065 002c 00F04581 		beq	.L196
3017:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
 2066              		.loc 1 3017 14 is_stmt 1 discriminator 2 view .LVU619
3018:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2067              		.loc 1 3018 2 view .LVU620
3018:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2068              		.loc 1 3018 7 is_stmt 0 view .LVU621
 2069 0030 2760     		str	r7, [r4]
3020:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type) {					/* If the volume has been mounted */
 2070              		.loc 1 3020 2 is_stmt 1 view .LVU622
3020:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs->fs_type) {					/* If the volume has been mounted */
 2071              		.loc 1 3020 7 is_stmt 0 view .LVU623
 2072 0032 05F0FE05 		and	r5, r5, #254
 2073              	.LVL214:
3021:Middlewares/Third_Party/FatFs/src/ff.c **** 		stat = disk_status(fs->drv);
 2074              		.loc 1 3021 2 is_stmt 1 view .LVU624
3021:Middlewares/Third_Party/FatFs/src/ff.c **** 		stat = disk_status(fs->drv);
 2075              		.loc 1 3021 8 is_stmt 0 view .LVU625
 2076 0036 3B78     		ldrb	r3, [r7]	@ zero_extendqisi2
3021:Middlewares/Third_Party/FatFs/src/ff.c **** 		stat = disk_status(fs->drv);
 2077              		.loc 1 3021 5 view .LVU626
 2078 0038 73B1     		cbz	r3, .L179
3022:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 2079              		.loc 1 3022 3 is_stmt 1 view .LVU627
3022:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(stat & STA_NOINIT)) {		/* and the physical drive is kept initialized */
 2080              		.loc 1 3022 10 is_stmt 0 view .LVU628
 2081 003a 7878     		ldrb	r0, [r7, #1]	@ zero_extendqisi2
 2082 003c FFF7FEFF 		bl	disk_status
 2083              	.LVL215:
3023:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
 2084              		.loc 1 3023 3 is_stmt 1 view .LVU629
3023:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
 2085              		.loc 1 3023 6 is_stmt 0 view .LVU630
 2086 0040 10F00104 		ands	r4, r0, #1
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 147


 2087              	.LVL216:
3023:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_READONLY && mode && (stat & STA_PROTECT)) {	/* Check write protection if needed */
 2088              		.loc 1 3023 6 view .LVU631
 2089 0044 08D1     		bne	.L179
3024:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
 2090              		.loc 1 3024 4 is_stmt 1 view .LVU632
3024:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
 2091              		.loc 1 3024 7 is_stmt 0 view .LVU633
 2092 0046 002D     		cmp	r5, #0
 2093 0048 00F03381 		beq	.L178
3024:Middlewares/Third_Party/FatFs/src/ff.c **** 				return FR_WRITE_PROTECTED;
 2094              		.loc 1 3024 30 discriminator 1 view .LVU634
 2095 004c 10F0040F 		tst	r0, #4
 2096 0050 00F02F81 		beq	.L178
3025:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 2097              		.loc 1 3025 12 view .LVU635
 2098 0054 0A24     		movs	r4, #10
 2099 0056 2CE1     		b	.L178
 2100              	.LVL217:
 2101              	.L179:
3034:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 2102              		.loc 1 3034 2 is_stmt 1 view .LVU636
3034:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->drv = LD2PD(vol);				/* Bind the logical drive and a physical drive */
 2103              		.loc 1 3034 14 is_stmt 0 view .LVU637
 2104 0058 0023     		movs	r3, #0
 2105 005a 3B70     		strb	r3, [r7]
3035:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
 2106              		.loc 1 3035 2 is_stmt 1 view .LVU638
3035:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
 2107              		.loc 1 3035 12 is_stmt 0 view .LVU639
 2108 005c F0B2     		uxtb	r0, r6
3035:Middlewares/Third_Party/FatFs/src/ff.c **** 	stat = disk_initialize(fs->drv);	/* Initialize the physical drive */
 2109              		.loc 1 3035 10 view .LVU640
 2110 005e 7870     		strb	r0, [r7, #1]
3036:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) { 			/* Check if the initialization succeeded */
 2111              		.loc 1 3036 2 is_stmt 1 view .LVU641
3036:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) { 			/* Check if the initialization succeeded */
 2112              		.loc 1 3036 9 is_stmt 0 view .LVU642
 2113 0060 FFF7FEFF 		bl	disk_initialize
 2114              	.LVL218:
3037:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
 2115              		.loc 1 3037 2 is_stmt 1 view .LVU643
3037:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_NOT_READY;			/* Failed to initialize due to no medium or hard error */
 2116              		.loc 1 3037 5 is_stmt 0 view .LVU644
 2117 0064 10F00104 		ands	r4, r0, #1
 2118 0068 40F02981 		bne	.L198
3040:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
 2119              		.loc 1 3040 2 is_stmt 1 view .LVU645
3040:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
 2120              		.loc 1 3040 5 is_stmt 0 view .LVU646
 2121 006c 1DB1     		cbz	r5, .L180
3040:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_WRITE_PROTECTED;
 2122              		.loc 1 3040 28 discriminator 1 view .LVU647
 2123 006e 10F0040F 		tst	r0, #4
 2124 0072 40F02681 		bne	.L199
 2125              	.L180:
3049:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = check_fs(fs, bsect);			/* Load sector 0 and check if it is an FAT-VBR as SFD */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 148


 2126              		.loc 1 3049 2 is_stmt 1 view .LVU648
 2127              	.LVL219:
3050:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 2 || (fmt < 2 && LD2PT(vol) != 0)) {	/* Not an FAT-VBR or forced partition number */
 2128              		.loc 1 3050 2 view .LVU649
3050:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 2 || (fmt < 2 && LD2PT(vol) != 0)) {	/* Not an FAT-VBR or forced partition number */
 2129              		.loc 1 3050 8 is_stmt 0 view .LVU650
 2130 0076 0021     		movs	r1, #0
 2131 0078 3846     		mov	r0, r7
 2132              	.LVL220:
3050:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt == 2 || (fmt < 2 && LD2PT(vol) != 0)) {	/* Not an FAT-VBR or forced partition number */
 2133              		.loc 1 3050 8 view .LVU651
 2134 007a FFF7FEFF 		bl	check_fs
 2135              	.LVL221:
3051:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 4; i++) {		/* Get partition offset */
 2136              		.loc 1 3051 2 is_stmt 1 view .LVU652
3051:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < 4; i++) {		/* Get partition offset */
 2137              		.loc 1 3051 5 is_stmt 0 view .LVU653
 2138 007e 0228     		cmp	r0, #2
 2139 0080 7ED0     		beq	.L200
3049:Middlewares/Third_Party/FatFs/src/ff.c **** 	fmt = check_fs(fs, bsect);			/* Load sector 0 and check if it is an FAT-VBR as SFD */
 2140              		.loc 1 3049 8 view .LVU654
 2141 0082 0026     		movs	r6, #0
 2142              	.LVL222:
 2143              	.L182:
3063:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
 2144              		.loc 1 3063 2 is_stmt 1 view .LVU655
3063:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
 2145              		.loc 1 3063 5 is_stmt 0 view .LVU656
 2146 0084 0428     		cmp	r0, #4
 2147 0086 00F01E81 		beq	.L203
3064:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2148              		.loc 1 3064 2 is_stmt 1 view .LVU657
3064:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2149              		.loc 1 3064 5 is_stmt 0 view .LVU658
 2150 008a 0128     		cmp	r0, #1
 2151 008c 00F21D81 		bhi	.L204
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2152              		.loc 1 3116 3 is_stmt 1 view .LVU659
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2153              		.loc 1 3116 7 is_stmt 0 view .LVU660
 2154 0090 07F13F00 		add	r0, r7, #63
 2155              	.LVL223:
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2156              		.loc 1 3116 7 view .LVU661
 2157 0094 FFF7FEFF 		bl	ld_word
 2158              	.LVL224:
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2159              		.loc 1 3116 6 discriminator 1 view .LVU662
 2160 0098 B0F5007F 		cmp	r0, #512
 2161 009c 40F01781 		bne	.L205
3118:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
 2162              		.loc 1 3118 3 is_stmt 1 view .LVU663
3118:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
 2163              		.loc 1 3118 12 is_stmt 0 view .LVU664
 2164 00a0 07F14A00 		add	r0, r7, #74
 2165 00a4 FFF7FEFF 		bl	ld_word
 2166              	.LVL225:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 149


3118:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fasize == 0) fasize = ld_dword(fs->win + BPB_FATSz32);
 2167              		.loc 1 3118 10 discriminator 1 view .LVU665
 2168 00a8 0546     		mov	r5, r0
 2169              	.LVL226:
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
 2170              		.loc 1 3119 3 is_stmt 1 view .LVU666
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
 2171              		.loc 1 3119 6 is_stmt 0 view .LVU667
 2172 00aa 20B9     		cbnz	r0, .L187
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
 2173              		.loc 1 3119 20 is_stmt 1 discriminator 1 view .LVU668
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
 2174              		.loc 1 3119 29 is_stmt 0 discriminator 1 view .LVU669
 2175 00ac 07F15800 		add	r0, r7, #88
 2176              	.LVL227:
3119:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsize = fasize;
 2177              		.loc 1 3119 29 discriminator 1 view .LVU670
 2178 00b0 FFF7FEFF 		bl	ld_dword
 2179              	.LVL228:
 2180 00b4 0546     		mov	r5, r0
 2181              	.LVL229:
 2182              	.L187:
3120:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2183              		.loc 1 3120 3 is_stmt 1 view .LVU671
3120:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2184              		.loc 1 3120 13 is_stmt 0 view .LVU672
 2185 00b6 FD61     		str	r5, [r7, #28]
3122:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
 2186              		.loc 1 3122 3 is_stmt 1 view .LVU673
3122:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
 2187              		.loc 1 3122 23 is_stmt 0 view .LVU674
 2188 00b8 97F84420 		ldrb	r2, [r7, #68]	@ zero_extendqisi2
3122:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_fats != 1 && fs->n_fats != 2) return FR_NO_FILESYSTEM;	/* (Must be 1 or 2) */
 2189              		.loc 1 3122 14 view .LVU675
 2190 00bc BA70     		strb	r2, [r7, #2]
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2191              		.loc 1 3123 3 is_stmt 1 view .LVU676
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2192              		.loc 1 3123 23 is_stmt 0 view .LVU677
 2193 00be 531E     		subs	r3, r2, #1
 2194 00c0 DBB2     		uxtb	r3, r3
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2195              		.loc 1 3123 6 view .LVU678
 2196 00c2 012B     		cmp	r3, #1
 2197 00c4 00F20581 		bhi	.L206
3124:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2198              		.loc 1 3124 3 is_stmt 1 view .LVU679
3124:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2199              		.loc 1 3124 10 is_stmt 0 view .LVU680
 2200 00c8 05FB02F8 		mul	r8, r5, r2
 2201              	.LVL230:
3126:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
 2202              		.loc 1 3126 3 is_stmt 1 view .LVU681
3126:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
 2203              		.loc 1 3126 22 is_stmt 0 view .LVU682
 2204 00cc 97F84190 		ldrb	r9, [r7, #65]	@ zero_extendqisi2
3126:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->csize == 0 || (fs->csize & (fs->csize - 1))) return FR_NO_FILESYSTEM;	/* (Must be power o
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 150


 2205              		.loc 1 3126 13 view .LVU683
 2206 00d0 A7F80A90 		strh	r9, [r7, #10]	@ movhi
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2207              		.loc 1 3127 3 is_stmt 1 view .LVU684
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2208              		.loc 1 3127 6 is_stmt 0 view .LVU685
 2209 00d4 B9F1000F 		cmp	r9, #0
 2210 00d8 00F0FD80 		beq	.L207
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2211              		.loc 1 3127 49 discriminator 2 view .LVU686
 2212 00dc 09F1FF33 		add	r3, r9, #-1
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2213              		.loc 1 3127 22 discriminator 2 view .LVU687
 2214 00e0 19EA030F 		tst	r9, r3
 2215 00e4 40F0F980 		bne	.L208
3129:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
 2216              		.loc 1 3129 3 is_stmt 1 view .LVU688
3129:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
 2217              		.loc 1 3129 19 is_stmt 0 view .LVU689
 2218 00e8 07F14500 		add	r0, r7, #69
 2219 00ec FFF7FEFF 		bl	ld_word
 2220              	.LVL231:
 2221 00f0 8246     		mov	r10, r0
3129:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->n_rootdir % (SS(fs) / SZDIRE)) return FR_NO_FILESYSTEM;	/* (Must be sector aligned) */
 2222              		.loc 1 3129 17 discriminator 1 view .LVU690
 2223 00f2 3881     		strh	r0, [r7, #8]	@ movhi
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2224              		.loc 1 3130 3 is_stmt 1 view .LVU691
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2225              		.loc 1 3130 6 is_stmt 0 view .LVU692
 2226 00f4 10F00F0F 		tst	r0, #15
 2227 00f8 40F0F180 		bne	.L209
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
 2228              		.loc 1 3132 3 is_stmt 1 view .LVU693
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
 2229              		.loc 1 3132 11 is_stmt 0 view .LVU694
 2230 00fc 07F14700 		add	r0, r7, #71
 2231 0100 FFF7FEFF 		bl	ld_word
 2232              	.LVL232:
3132:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect == 0) tsect = ld_dword(fs->win + BPB_TotSec32);
 2233              		.loc 1 3132 9 discriminator 1 view .LVU695
 2234 0104 8346     		mov	fp, r0
 2235              	.LVL233:
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2236              		.loc 1 3133 3 is_stmt 1 view .LVU696
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2237              		.loc 1 3133 6 is_stmt 0 view .LVU697
 2238 0106 20B9     		cbnz	r0, .L188
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2239              		.loc 1 3133 19 is_stmt 1 discriminator 1 view .LVU698
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2240              		.loc 1 3133 27 is_stmt 0 discriminator 1 view .LVU699
 2241 0108 07F15400 		add	r0, r7, #84
 2242              	.LVL234:
3133:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2243              		.loc 1 3133 27 discriminator 1 view .LVU700
 2244 010c FFF7FEFF 		bl	ld_dword
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 151


 2245              	.LVL235:
 2246 0110 8346     		mov	fp, r0
 2247              	.LVL236:
 2248              	.L188:
3135:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
 2249              		.loc 1 3135 3 is_stmt 1 view .LVU701
3135:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
 2250              		.loc 1 3135 10 is_stmt 0 view .LVU702
 2251 0112 07F14200 		add	r0, r7, #66
 2252              	.LVL237:
3135:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nrsv == 0) return FR_NO_FILESYSTEM;			/* (Must not be 0) */
 2253              		.loc 1 3135 10 view .LVU703
 2254 0116 FFF7FEFF 		bl	ld_word
 2255              	.LVL238:
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2256              		.loc 1 3136 3 is_stmt 1 view .LVU704
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2257              		.loc 1 3136 6 is_stmt 0 view .LVU705
 2258 011a 0246     		mov	r2, r0
 2259 011c 0028     		cmp	r0, #0
 2260 011e 00F0E080 		beq	.L210
3139:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2261              		.loc 1 3139 3 is_stmt 1 view .LVU706
3139:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2262              		.loc 1 3139 17 is_stmt 0 view .LVU707
 2263 0122 00EB0803 		add	r3, r0, r8
3139:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (tsect < sysect) return FR_NO_FILESYSTEM;	/* (Invalid volume size) */
 2264              		.loc 1 3139 10 view .LVU708
 2265 0126 03EB1A13 		add	r3, r3, r10, lsr #4
 2266              	.LVL239:
3140:Middlewares/Third_Party/FatFs/src/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
 2267              		.loc 1 3140 3 is_stmt 1 view .LVU709
3140:Middlewares/Third_Party/FatFs/src/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
 2268              		.loc 1 3140 6 is_stmt 0 view .LVU710
 2269 012a 9B45     		cmp	fp, r3
 2270 012c C0F0DB80 		bcc	.L211
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 2271              		.loc 1 3141 3 is_stmt 1 view .LVU711
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 2272              		.loc 1 3141 18 is_stmt 0 view .LVU712
 2273 0130 ABEB030B 		sub	fp, fp, r3
 2274              	.LVL240:
3141:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst == 0) return FR_NO_FILESYSTEM;		/* (Invalid volume size) */
 2275              		.loc 1 3141 9 view .LVU713
 2276 0134 BBFBF9F1 		udiv	r1, fp, r9
 2277              	.LVL241:
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT32;
 2278              		.loc 1 3142 3 is_stmt 1 view .LVU714
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT32;
 2279              		.loc 1 3142 6 is_stmt 0 view .LVU715
 2280 0138 CB45     		cmp	fp, r9
 2281 013a C0F0D680 		bcc	.L212
3143:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
 2282              		.loc 1 3143 3 is_stmt 1 view .LVU716
 2283              	.LVL242:
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2284              		.loc 1 3144 3 view .LVU717
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 152


3144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2285              		.loc 1 3144 6 is_stmt 0 view .LVU718
 2286 013e 4FF6F570 		movw	r0, #65525
 2287              	.LVL243:
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2288              		.loc 1 3144 6 view .LVU719
 2289 0142 8142     		cmp	r1, r0
 2290 0144 34D8     		bhi	.L213
3144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT12) fmt = FS_FAT12;
 2291              		.loc 1 3144 27 is_stmt 1 discriminator 1 view .LVU720
 2292              	.LVL244:
3145:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2293              		.loc 1 3145 3 view .LVU721
3145:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2294              		.loc 1 3145 6 is_stmt 0 view .LVU722
 2295 0146 40F6F570 		movw	r0, #4085
 2296 014a 8142     		cmp	r1, r0
 2297 014c 68D9     		bls	.L214
 2298 014e 4FF0020B 		mov	fp, #2
 2299 0152 2FE0     		b	.L189
 2300              	.LVL245:
 2301              	.L201:
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2302              		.loc 1 3054 54 discriminator 2 view .LVU723
 2303 0154 0020     		movs	r0, #0
 2304              	.LVL246:
 2305              	.L183:
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2306              		.loc 1 3054 10 discriminator 4 view .LVU724
 2307 0156 04AB     		add	r3, sp, #16
 2308 0158 03EB8503 		add	r3, r3, r5, lsl #2
 2309 015c 43F8100C 		str	r0, [r3, #-16]
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2310              		.loc 1 3052 23 is_stmt 1 discriminator 2 view .LVU725
 2311 0160 0135     		adds	r5, r5, #1
 2312              	.LVL247:
 2313              	.L181:
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2314              		.loc 1 3052 17 discriminator 1 view .LVU726
 2315 0162 032D     		cmp	r5, #3
 2316 0164 0ED8     		bhi	.L220
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[PTE_System] ? ld_dword(pt + PTE_StLba) : 0;
 2317              		.loc 1 3053 4 view .LVU727
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[PTE_System] ? ld_dword(pt + PTE_StLba) : 0;
 2318              		.loc 1 3053 9 is_stmt 0 view .LVU728
 2319 0166 07F13400 		add	r0, r7, #52
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[PTE_System] ? ld_dword(pt + PTE_StLba) : 0;
 2320              		.loc 1 3053 34 view .LVU729
 2321 016a 2B01     		lsls	r3, r5, #4
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[PTE_System] ? ld_dword(pt + PTE_StLba) : 0;
 2322              		.loc 1 3053 30 view .LVU730
 2323 016c 03F5DF73 		add	r3, r3, #446
3053:Middlewares/Third_Party/FatFs/src/ff.c **** 			br[i] = pt[PTE_System] ? ld_dword(pt + PTE_StLba) : 0;
 2324              		.loc 1 3053 7 view .LVU731
 2325 0170 1844     		add	r0, r0, r3
 2326              	.LVL248:
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 153


 2327              		.loc 1 3054 4 is_stmt 1 view .LVU732
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2328              		.loc 1 3054 14 is_stmt 0 view .LVU733
 2329 0172 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2330              		.loc 1 3054 54 view .LVU734
 2331 0174 002B     		cmp	r3, #0
 2332 0176 EDD0     		beq	.L201
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2333              		.loc 1 3054 29 discriminator 1 view .LVU735
 2334 0178 0830     		adds	r0, r0, #8
 2335              	.LVL249:
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2336              		.loc 1 3054 29 discriminator 1 view .LVU736
 2337 017a FFF7FEFF 		bl	ld_dword
 2338              	.LVL250:
3054:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2339              		.loc 1 3054 29 discriminator 1 view .LVU737
 2340 017e EAE7     		b	.L183
 2341              	.LVL251:
 2342              	.L200:
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2343              		.loc 1 3052 10 view .LVU738
 2344 0180 0025     		movs	r5, #0
 2345              	.LVL252:
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2346              		.loc 1 3052 10 view .LVU739
 2347 0182 EEE7     		b	.L181
 2348              	.LVL253:
 2349              	.L220:
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2350              		.loc 1 3052 10 view .LVU740
 2351 0184 0025     		movs	r5, #0
 2352              	.LVL254:
3052:Middlewares/Third_Party/FatFs/src/ff.c **** 			pt = fs->win + (MBR_Table + i * SZ_PTE);
 2353              		.loc 1 3052 10 view .LVU741
 2354 0186 0AE0     		b	.L186
 2355              	.LVL255:
 2356              	.L221:
3060:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (LD2PT(vol) == 0 && fmt >= 2 && ++i < 4);
 2357              		.loc 1 3060 18 discriminator 1 view .LVU742
 2358 0188 3146     		mov	r1, r6
 2359 018a 3846     		mov	r0, r7
 2360 018c FFF7FEFF 		bl	check_fs
 2361              	.LVL256:
3061:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2362              		.loc 1 3061 40 is_stmt 1 view .LVU743
 2363 0190 0128     		cmp	r0, #1
 2364 0192 7FF677AF 		bls	.L182
 2365              	.LVL257:
 2366              	.L185:
3061:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2367              		.loc 1 3061 40 is_stmt 0 discriminator 1 view .LVU744
 2368 0196 0135     		adds	r5, r5, #1
 2369              	.LVL258:
3061:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2370              		.loc 1 3061 40 discriminator 1 view .LVU745
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 154


 2371 0198 032D     		cmp	r5, #3
 2372 019a 3FF673AF 		bhi	.L182
 2373              	.LVL259:
 2374              	.L186:
3058:Middlewares/Third_Party/FatFs/src/ff.c **** 			bsect = br[i];
 2375              		.loc 1 3058 3 is_stmt 1 view .LVU746
3059:Middlewares/Third_Party/FatFs/src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 3;	/* Check the partition */
 2376              		.loc 1 3059 4 view .LVU747
3059:Middlewares/Third_Party/FatFs/src/ff.c **** 			fmt = bsect ? check_fs(fs, bsect) : 3;	/* Check the partition */
 2377              		.loc 1 3059 10 is_stmt 0 view .LVU748
 2378 019e 04AB     		add	r3, sp, #16
 2379 01a0 03EB8503 		add	r3, r3, r5, lsl #2
 2380 01a4 53F8106C 		ldr	r6, [r3, #-16]
 2381              	.LVL260:
3060:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (LD2PT(vol) == 0 && fmt >= 2 && ++i < 4);
 2382              		.loc 1 3060 4 is_stmt 1 view .LVU749
3060:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (LD2PT(vol) == 0 && fmt >= 2 && ++i < 4);
 2383              		.loc 1 3060 8 is_stmt 0 view .LVU750
 2384 01a8 002E     		cmp	r6, #0
 2385 01aa EDD1     		bne	.L221
3060:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (LD2PT(vol) == 0 && fmt >= 2 && ++i < 4);
 2386              		.loc 1 3060 8 discriminator 2 view .LVU751
 2387 01ac 0320     		movs	r0, #3
 2388 01ae F2E7     		b	.L185
 2389              	.LVL261:
 2390              	.L213:
3143:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nclst <= MAX_FAT16) fmt = FS_FAT16;
 2391              		.loc 1 3143 7 view .LVU752
 2392 01b0 4FF0030B 		mov	fp, #3
 2393              	.LVL262:
 2394              	.L189:
3148:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
 2395              		.loc 1 3148 3 is_stmt 1 view .LVU753
3148:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
 2396              		.loc 1 3148 24 is_stmt 0 view .LVU754
 2397 01b4 01F10209 		add	r9, r1, #2
3148:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->volbase = bsect;							/* Volume start sector */
 2398              		.loc 1 3148 16 view .LVU755
 2399 01b8 C7F81890 		str	r9, [r7, #24]
3149:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fatbase = bsect + nrsv; 					/* FAT start sector */
 2400              		.loc 1 3149 3 is_stmt 1 view .LVU756
3149:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fatbase = bsect + nrsv; 					/* FAT start sector */
 2401              		.loc 1 3149 15 is_stmt 0 view .LVU757
 2402 01bc 3E62     		str	r6, [r7, #32]
3150:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
 2403              		.loc 1 3150 3 is_stmt 1 view .LVU758
3150:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
 2404              		.loc 1 3150 23 is_stmt 0 view .LVU759
 2405 01be 3244     		add	r2, r2, r6
 2406              	.LVL263:
3150:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->database = bsect + sysect;					/* Data start sector */
 2407              		.loc 1 3150 15 view .LVU760
 2408 01c0 7A62     		str	r2, [r7, #36]
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
 2409              		.loc 1 3151 3 is_stmt 1 view .LVU761
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
 2410              		.loc 1 3151 24 is_stmt 0 view .LVU762
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 155


 2411 01c2 3344     		add	r3, r3, r6
 2412              	.LVL264:
3151:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
 2413              		.loc 1 3151 16 view .LVU763
 2414 01c4 FB62     		str	r3, [r7, #44]
3152:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BPB_FSVer32) != 0) return FR_NO_FILESYSTEM;	/* (Must be FAT32 revision 0.0
 2415              		.loc 1 3152 3 is_stmt 1 view .LVU764
3152:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BPB_FSVer32) != 0) return FR_NO_FILESYSTEM;	/* (Must be FAT32 revision 0.0
 2416              		.loc 1 3152 6 is_stmt 0 view .LVU765
 2417 01c6 BBF1030F 		cmp	fp, #3
 2418 01ca 2CD0     		beq	.L222
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
 2419              		.loc 1 3158 4 is_stmt 1 view .LVU766
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
 2420              		.loc 1 3158 7 is_stmt 0 view .LVU767
 2421 01cc BAF1000F 		cmp	r10, #0
 2422 01d0 00F09180 		beq	.L217
3159:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
 2423              		.loc 1 3159 4 is_stmt 1 view .LVU768
3159:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
 2424              		.loc 1 3159 30 is_stmt 0 view .LVU769
 2425 01d4 4244     		add	r2, r2, r8
3159:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = (fmt == FS_FAT16) ?				/* (Needed FAT size) */
 2426              		.loc 1 3159 16 view .LVU770
 2427 01d6 BA62     		str	r2, [r7, #40]
3160:Middlewares/Third_Party/FatFs/src/ff.c **** 				fs->n_fatent * 2 : fs->n_fatent * 3 / 2 + (fs->n_fatent & 1);
 2428              		.loc 1 3160 4 is_stmt 1 view .LVU771
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2429              		.loc 1 3161 22 is_stmt 0 view .LVU772
 2430 01d8 BBF1020F 		cmp	fp, #2
 2431 01dc 34D0     		beq	.L223
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2432              		.loc 1 3161 37 discriminator 2 view .LVU773
 2433 01de 09EB4903 		add	r3, r9, r9, lsl #1
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2434              		.loc 1 3161 61 discriminator 2 view .LVU774
 2435 01e2 09F00109 		and	r9, r9, #1
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2436              		.loc 1 3161 22 discriminator 2 view .LVU775
 2437 01e6 09EB5309 		add	r9, r9, r3, lsr #1
 2438              	.LVL265:
 2439              	.L191:
3163:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2440              		.loc 1 3163 3 is_stmt 1 view .LVU776
3163:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2441              		.loc 1 3163 27 is_stmt 0 view .LVU777
 2442 01ea 09F2FF13 		addw	r3, r9, #511
3163:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2443              		.loc 1 3163 6 view .LVU778
 2444 01ee B5EB532F 		cmp	r5, r3, lsr #9
 2445 01f2 C0F08280 		bcc	.L218
3167:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag = 0x80;
 2446              		.loc 1 3167 3 is_stmt 1 view .LVU779
3167:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag = 0x80;
 2447              		.loc 1 3167 33 is_stmt 0 view .LVU780
 2448 01f6 4FF0FF33 		mov	r3, #-1
 2449 01fa 7B61     		str	r3, [r7, #20]
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 156


3167:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag = 0x80;
 2450              		.loc 1 3167 17 view .LVU781
 2451 01fc 3B61     		str	r3, [r7, #16]
3168:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
 2452              		.loc 1 3168 3 is_stmt 1 view .LVU782
3168:Middlewares/Third_Party/FatFs/src/ff.c **** #if (_FS_NOFSINFO & 3) != 3
 2453              		.loc 1 3168 16 is_stmt 0 view .LVU783
 2454 01fe 8023     		movs	r3, #128
 2455 0200 3B71     		strb	r3, [r7, #4]
3170:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& ld_word(fs->win + BPB_FSInfo32) == 1
 2456              		.loc 1 3170 3 is_stmt 1 view .LVU784
3170:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& ld_word(fs->win + BPB_FSInfo32) == 1
 2457              		.loc 1 3170 6 is_stmt 0 view .LVU785
 2458 0202 BBF1030F 		cmp	fp, #3
 2459 0206 22D0     		beq	.L224
 2460              	.L193:
3191:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 2461              		.loc 1 3191 2 is_stmt 1 view .LVU786
3191:Middlewares/Third_Party/FatFs/src/ff.c **** 	fs->id = ++Fsid;		/* File system mount ID */
 2462              		.loc 1 3191 14 is_stmt 0 view .LVU787
 2463 0208 87F800B0 		strb	fp, [r7]
3192:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
 2464              		.loc 1 3192 2 is_stmt 1 view .LVU788
3192:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
 2465              		.loc 1 3192 11 is_stmt 0 view .LVU789
 2466 020c 3D4A     		ldr	r2, .L225+4
 2467 020e 1388     		ldrh	r3, [r2]
 2468 0210 0133     		adds	r3, r3, #1
 2469 0212 9BB2     		uxth	r3, r3
3192:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN == 1
 2470              		.loc 1 3192 9 view .LVU790
 2471 0214 1380     		strh	r3, [r2]	@ movhi
 2472 0216 FB80     		strh	r3, [r7, #6]	@ movhi
3203:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2473              		.loc 1 3203 2 is_stmt 1 view .LVU791
 2474 0218 3846     		mov	r0, r7
 2475 021a FFF7FEFF 		bl	clear_lock
 2476              	.LVL266:
3205:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2477              		.loc 1 3205 2 view .LVU792
3205:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2478              		.loc 1 3205 9 is_stmt 0 view .LVU793
 2479 021e 48E0     		b	.L178
 2480              	.LVL267:
 2481              	.L214:
3145:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2482              		.loc 1 3145 31 discriminator 1 view .LVU794
 2483 0220 4FF0010B 		mov	fp, #1
 2484 0224 C6E7     		b	.L189
 2485              	.LVL268:
 2486              	.L222:
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2487              		.loc 1 3153 4 is_stmt 1 view .LVU795
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2488              		.loc 1 3153 8 is_stmt 0 view .LVU796
 2489 0226 07F15E00 		add	r0, r7, #94
 2490 022a FFF7FEFF 		bl	ld_word
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 157


 2491              	.LVL269:
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2492              		.loc 1 3153 7 discriminator 1 view .LVU797
 2493 022e 0028     		cmp	r0, #0
 2494 0230 5DD1     		bne	.L215
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
 2495              		.loc 1 3154 4 is_stmt 1 view .LVU798
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
 2496              		.loc 1 3154 7 is_stmt 0 view .LVU799
 2497 0232 BAF1000F 		cmp	r10, #0
 2498 0236 5CD1     		bne	.L216
3155:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
 2499              		.loc 1 3155 4 is_stmt 1 view .LVU800
3155:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
 2500              		.loc 1 3155 18 is_stmt 0 view .LVU801
 2501 0238 07F16000 		add	r0, r7, #96
 2502 023c FFF7FEFF 		bl	ld_dword
 2503              	.LVL270:
3155:Middlewares/Third_Party/FatFs/src/ff.c **** 			szbfat = fs->n_fatent * 4;					/* (Needed FAT size) */
 2504              		.loc 1 3155 16 discriminator 1 view .LVU802
 2505 0240 B862     		str	r0, [r7, #40]
3156:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 2506              		.loc 1 3156 4 is_stmt 1 view .LVU803
3156:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 2507              		.loc 1 3156 11 is_stmt 0 view .LVU804
 2508 0242 4FEA8909 		lsl	r9, r9, #2
 2509              	.LVL271:
3156:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 2510              		.loc 1 3156 11 view .LVU805
 2511 0246 D0E7     		b	.L191
 2512              	.LVL272:
 2513              	.L223:
3161:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2514              		.loc 1 3161 22 discriminator 1 view .LVU806
 2515 0248 4FEA4909 		lsl	r9, r9, #1
 2516 024c CDE7     		b	.L191
 2517              	.LVL273:
 2518              	.L224:
3171:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& move_window(fs, bsect + 1) == FR_OK)
 2519              		.loc 1 3171 7 view .LVU807
 2520 024e 07F16400 		add	r0, r7, #100
 2521 0252 FFF7FEFF 		bl	ld_word
 2522              	.LVL274:
3171:Middlewares/Third_Party/FatFs/src/ff.c **** 			&& move_window(fs, bsect + 1) == FR_OK)
 2523              		.loc 1 3171 4 discriminator 1 view .LVU808
 2524 0256 0128     		cmp	r0, #1
 2525 0258 D6D1     		bne	.L193
3172:Middlewares/Third_Party/FatFs/src/ff.c **** 		{
 2526              		.loc 1 3172 7 view .LVU809
 2527 025a 711C     		adds	r1, r6, #1
 2528 025c 3846     		mov	r0, r7
 2529 025e FFF7FEFF 		bl	move_window
 2530              	.LVL275:
3172:Middlewares/Third_Party/FatFs/src/ff.c **** 		{
 2531              		.loc 1 3172 4 discriminator 1 view .LVU810
 2532 0262 0028     		cmp	r0, #0
 2533 0264 D0D1     		bne	.L193
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 158


3174:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BS_55AA) == 0xAA55	/* Load FSINFO data if available */
 2534              		.loc 1 3174 4 is_stmt 1 view .LVU811
3174:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ld_word(fs->win + BS_55AA) == 0xAA55	/* Load FSINFO data if available */
 2535              		.loc 1 3174 17 is_stmt 0 view .LVU812
 2536 0266 0023     		movs	r3, #0
 2537 0268 3B71     		strb	r3, [r7, #4]
3175:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
 2538              		.loc 1 3175 4 is_stmt 1 view .LVU813
3175:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
 2539              		.loc 1 3175 8 is_stmt 0 view .LVU814
 2540 026a 07F23220 		addw	r0, r7, #562
 2541 026e FFF7FEFF 		bl	ld_word
 2542              	.LVL276:
3175:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_LeadSig) == 0x41615252
 2543              		.loc 1 3175 7 discriminator 1 view .LVU815
 2544 0272 4AF65523 		movw	r3, #43605
 2545 0276 9842     		cmp	r0, r3
 2546 0278 C6D1     		bne	.L193
3176:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_StrucSig) == 0x61417272)
 2547              		.loc 1 3176 8 view .LVU816
 2548 027a 07F13400 		add	r0, r7, #52
 2549 027e FFF7FEFF 		bl	ld_dword
 2550              	.LVL277:
3176:Middlewares/Third_Party/FatFs/src/ff.c **** 				&& ld_dword(fs->win + FSI_StrucSig) == 0x61417272)
 2551              		.loc 1 3176 5 discriminator 1 view .LVU817
 2552 0282 214B     		ldr	r3, .L225+8
 2553 0284 9842     		cmp	r0, r3
 2554 0286 BFD1     		bne	.L193
3177:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
 2555              		.loc 1 3177 8 view .LVU818
 2556 0288 07F50670 		add	r0, r7, #536
 2557 028c FFF7FEFF 		bl	ld_dword
 2558              	.LVL278:
3177:Middlewares/Third_Party/FatFs/src/ff.c **** 			{
 2559              		.loc 1 3177 5 discriminator 1 view .LVU819
 2560 0290 1E4B     		ldr	r3, .L225+12
 2561 0292 9842     		cmp	r0, r3
 2562 0294 B8D1     		bne	.L193
3180:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2563              		.loc 1 3180 5 is_stmt 1 view .LVU820
3180:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2564              		.loc 1 3180 21 is_stmt 0 view .LVU821
 2565 0296 07F50770 		add	r0, r7, #540
 2566 029a FFF7FEFF 		bl	ld_dword
 2567              	.LVL279:
3180:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2568              		.loc 1 3180 19 discriminator 1 view .LVU822
 2569 029e 7861     		str	r0, [r7, #20]
3183:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2570              		.loc 1 3183 5 is_stmt 1 view .LVU823
3183:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2571              		.loc 1 3183 21 is_stmt 0 view .LVU824
 2572 02a0 07F50870 		add	r0, r7, #544
 2573 02a4 FFF7FEFF 		bl	ld_dword
 2574              	.LVL280:
3183:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 2575              		.loc 1 3183 19 discriminator 1 view .LVU825
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 159


 2576 02a8 3861     		str	r0, [r7, #16]
 2577 02aa ADE7     		b	.L193
 2578              	.LVL281:
 2579              	.L194:
3011:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2580              		.loc 1 3011 22 discriminator 1 view .LVU826
 2581 02ac 0B24     		movs	r4, #11
 2582              	.LVL282:
3011:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2583              		.loc 1 3011 22 discriminator 1 view .LVU827
 2584 02ae 00E0     		b	.L178
 2585              	.LVL283:
 2586              	.L195:
3015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2587              		.loc 1 3015 18 discriminator 1 view .LVU828
 2588 02b0 0C24     		movs	r4, #12
 2589              	.LVL284:
 2590              	.L178:
3206:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2591              		.loc 1 3206 1 view .LVU829
 2592 02b2 2046     		mov	r0, r4
 2593 02b4 05B0     		add	sp, sp, #20
 2594              	.LCFI21:
 2595              		.cfi_remember_state
 2596              		.cfi_def_cfa_offset 36
 2597              		@ sp needed
 2598 02b6 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 2599              	.LVL285:
 2600              	.L196:
 2601              	.LCFI22:
 2602              		.cfi_restore_state
3017:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
 2603              		.loc 1 3017 2 discriminator 1 view .LVU830
 2604 02ba 0F24     		movs	r4, #15
 2605              	.LVL286:
3017:Middlewares/Third_Party/FatFs/src/ff.c **** 	*rfs = fs;							/* Return pointer to the file system object */
 2606              		.loc 1 3017 2 discriminator 1 view .LVU831
 2607 02bc F9E7     		b	.L178
 2608              	.LVL287:
 2609              	.L198:
3038:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2610              		.loc 1 3038 10 view .LVU832
 2611 02be 0324     		movs	r4, #3
 2612 02c0 F7E7     		b	.L178
 2613              	.L199:
3041:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 2614              		.loc 1 3041 10 view .LVU833
 2615 02c2 0A24     		movs	r4, #10
 2616 02c4 F5E7     		b	.L178
 2617              	.LVL288:
 2618              	.L203:
3063:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fmt >= 2) return FR_NO_FILESYSTEM;	/* No FAT volume is found */
 2619              		.loc 1 3063 23 discriminator 1 view .LVU834
 2620 02c6 0124     		movs	r4, #1
 2621 02c8 F3E7     		b	.L178
 2622              	.L204:
3064:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 160


 2623              		.loc 1 3064 23 discriminator 1 view .LVU835
 2624 02ca 0D24     		movs	r4, #13
 2625 02cc F1E7     		b	.L178
 2626              	.LVL289:
 2627              	.L205:
3116:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2628              		.loc 1 3116 59 discriminator 1 view .LVU836
 2629 02ce 0D24     		movs	r4, #13
 2630 02d0 EFE7     		b	.L178
 2631              	.LVL290:
 2632              	.L206:
3123:Middlewares/Third_Party/FatFs/src/ff.c **** 		fasize *= fs->n_fats;							/* Number of sectors for FAT area */
 2633              		.loc 1 3123 50 discriminator 1 view .LVU837
 2634 02d2 0D24     		movs	r4, #13
 2635 02d4 EDE7     		b	.L178
 2636              	.LVL291:
 2637              	.L207:
3127:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2638              		.loc 1 3127 63 discriminator 3 view .LVU838
 2639 02d6 0D24     		movs	r4, #13
 2640 02d8 EBE7     		b	.L178
 2641              	.L208:
 2642 02da 0D24     		movs	r4, #13
 2643 02dc E9E7     		b	.L178
 2644              	.L209:
3130:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2645              		.loc 1 3130 49 discriminator 1 view .LVU839
 2646 02de 0D24     		movs	r4, #13
 2647 02e0 E7E7     		b	.L178
 2648              	.LVL292:
 2649              	.L210:
3136:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2650              		.loc 1 3136 25 discriminator 1 view .LVU840
 2651 02e2 0D24     		movs	r4, #13
 2652 02e4 E5E7     		b	.L178
 2653              	.LVL293:
 2654              	.L211:
3140:Middlewares/Third_Party/FatFs/src/ff.c **** 		nclst = (tsect - sysect) / fs->csize;			/* Number of clusters */
 2655              		.loc 1 3140 30 discriminator 1 view .LVU841
 2656 02e6 0D24     		movs	r4, #13
 2657 02e8 E3E7     		b	.L178
 2658              	.LVL294:
 2659              	.L212:
3142:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT32;
 2660              		.loc 1 3142 26 discriminator 1 view .LVU842
 2661 02ea 0D24     		movs	r4, #13
 2662 02ec E1E7     		b	.L178
 2663              	.LVL295:
 2664              	.L215:
3153:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->n_rootdir) return FR_NO_FILESYSTEM;	/* (BPB_RootEntCnt must be 0) */
 2665              		.loc 1 3153 52 discriminator 1 view .LVU843
 2666 02ee 0D24     		movs	r4, #13
 2667 02f0 DFE7     		b	.L178
 2668              	.L216:
3154:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = ld_dword(fs->win + BPB_RootClus32);	/* Root directory start cluster */
 2669              		.loc 1 3154 30 discriminator 1 view .LVU844
 2670 02f2 0D24     		movs	r4, #13
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 161


 2671 02f4 DDE7     		b	.L178
 2672              	.LVL296:
 2673              	.L217:
3158:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->dirbase = fs->fatbase + fasize;			/* Root directory start sector */
 2674              		.loc 1 3158 35 discriminator 1 view .LVU845
 2675 02f6 0D24     		movs	r4, #13
 2676 02f8 DBE7     		b	.L178
 2677              	.LVL297:
 2678              	.L218:
3163:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2679              		.loc 1 3163 60 discriminator 1 view .LVU846
 2680 02fa 0D24     		movs	r4, #13
 2681 02fc D9E7     		b	.L178
 2682              	.L226:
 2683 02fe 00BF     		.align	2
 2684              	.L225:
 2685 0300 00000000 		.word	FatFs
 2686 0304 00000000 		.word	Fsid
 2687 0308 52526141 		.word	1096897106
 2688 030c 72724161 		.word	1631679090
 2689              		.cfi_endproc
 2690              	.LFE376:
 2692              		.section	.text.put_fat,"ax",%progbits
 2693              		.align	1
 2694              		.syntax unified
 2695              		.thumb
 2696              		.thumb_func
 2698              	put_fat:
 2699              	.LVL298:
 2700              	.LFB358:
1086:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bc;
 2701              		.loc 1 1086 1 is_stmt 1 view -0
 2702              		.cfi_startproc
 2703              		@ args = 0, pretend = 0, frame = 0
 2704              		@ frame_needed = 0, uses_anonymous_args = 0
1086:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bc;
 2705              		.loc 1 1086 1 is_stmt 0 view .LVU848
 2706 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 2707              	.LCFI23:
 2708              		.cfi_def_cfa_offset 32
 2709              		.cfi_offset 4, -32
 2710              		.cfi_offset 5, -28
 2711              		.cfi_offset 6, -24
 2712              		.cfi_offset 7, -20
 2713              		.cfi_offset 8, -16
 2714              		.cfi_offset 9, -12
 2715              		.cfi_offset 10, -8
 2716              		.cfi_offset 14, -4
1087:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *p;
 2717              		.loc 1 1087 2 is_stmt 1 view .LVU849
1088:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_INT_ERR;
 2718              		.loc 1 1088 2 view .LVU850
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2719              		.loc 1 1089 2 view .LVU851
 2720              	.LVL299:
1091:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
 2721              		.loc 1 1091 2 view .LVU852
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 162


1091:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
 2722              		.loc 1 1091 5 is_stmt 0 view .LVU853
 2723 0004 0129     		cmp	r1, #1
 2724 0006 75D9     		bls	.L235
 2725 0008 0746     		mov	r7, r0
 2726 000a 0C46     		mov	r4, r1
 2727 000c 1646     		mov	r6, r2
1091:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
 2728              		.loc 1 1091 28 discriminator 1 view .LVU854
 2729 000e 8369     		ldr	r3, [r0, #24]
1091:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (fs->fs_type) {
 2730              		.loc 1 1091 16 discriminator 1 view .LVU855
 2731 0010 8B42     		cmp	r3, r1
 2732 0012 73D9     		bls	.L236
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :	/* Bitfield items */
 2733              		.loc 1 1092 3 is_stmt 1 view .LVU856
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :	/* Bitfield items */
 2734              		.loc 1 1092 13 is_stmt 0 view .LVU857
 2735 0014 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :	/* Bitfield items */
 2736              		.loc 1 1092 3 view .LVU858
 2737 0016 022B     		cmp	r3, #2
 2738 0018 3ED0     		beq	.L229
 2739 001a 032B     		cmp	r3, #3
 2740 001c 4FD0     		beq	.L230
 2741 001e 012B     		cmp	r3, #1
 2742 0020 6ED1     		bne	.L237
1094:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2743              		.loc 1 1094 4 is_stmt 1 view .LVU859
 2744              	.LVL300:
1094:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2745              		.loc 1 1094 21 view .LVU860
1094:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2746              		.loc 1 1094 24 is_stmt 0 view .LVU861
 2747 0022 01EB5108 		add	r8, r1, r1, lsr #1
 2748              	.LVL301:
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2749              		.loc 1 1095 4 is_stmt 1 view .LVU862
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2750              		.loc 1 1095 28 is_stmt 0 view .LVU863
 2751 0026 416A     		ldr	r1, [r0, #36]
 2752              	.LVL302:
1095:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2753              		.loc 1 1095 10 view .LVU864
 2754 0028 01EB5821 		add	r1, r1, r8, lsr #9
 2755 002c FFF7FEFF 		bl	move_window
 2756              	.LVL303:
1096:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc++ % SS(fs);
 2757              		.loc 1 1096 4 is_stmt 1 view .LVU865
1096:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc++ % SS(fs);
 2758              		.loc 1 1096 7 is_stmt 0 view .LVU866
 2759 0030 0546     		mov	r5, r0
 2760 0032 0028     		cmp	r0, #0
 2761 0034 5FD1     		bne	.L228
1097:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 2762              		.loc 1 1097 4 is_stmt 1 view .LVU867
1097:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 163


 2763              		.loc 1 1097 8 is_stmt 0 view .LVU868
 2764 0036 07F1340A 		add	r10, r7, #52
1097:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 2765              		.loc 1 1097 23 view .LVU869
 2766 003a 08F10109 		add	r9, r8, #1
 2767              	.LVL304:
1097:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? ((*p & 0x0F) | ((BYTE)val << 4)) : (BYTE)val;
 2768              		.loc 1 1097 23 view .LVU870
 2769 003e C8F30808 		ubfx	r8, r8, #0, #9
 2770              	.LVL305:
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2771              		.loc 1 1098 4 is_stmt 1 view .LVU871
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2772              		.loc 1 1098 7 is_stmt 0 view .LVU872
 2773 0042 14F00104 		ands	r4, r4, #1
 2774              	.LVL306:
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2775              		.loc 1 1098 7 view .LVU873
 2776 0046 1DD0     		beq	.L231
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2777              		.loc 1 1098 24 discriminator 1 view .LVU874
 2778 0048 1AF80830 		ldrb	r3, [r10, r8]	@ zero_extendqisi2
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2779              		.loc 1 1098 7 discriminator 1 view .LVU875
 2780 004c 03F00F03 		and	r3, r3, #15
 2781 0050 43EA0613 		orr	r3, r3, r6, lsl #4
 2782 0054 DBB2     		uxtb	r3, r3
 2783              	.L232:
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2784              		.loc 1 1098 7 discriminator 4 view .LVU876
 2785 0056 0AF80830 		strb	r3, [r10, r8]
1099:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2786              		.loc 1 1099 4 is_stmt 1 view .LVU877
1099:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, fs->fatbase + (bc / SS(fs)));
 2787              		.loc 1 1099 14 is_stmt 0 view .LVU878
 2788 005a 0123     		movs	r3, #1
 2789 005c FB70     		strb	r3, [r7, #3]
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2790              		.loc 1 1100 4 is_stmt 1 view .LVU879
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2791              		.loc 1 1100 28 is_stmt 0 view .LVU880
 2792 005e 796A     		ldr	r1, [r7, #36]
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2793              		.loc 1 1100 10 view .LVU881
 2794 0060 01EB5921 		add	r1, r1, r9, lsr #9
 2795 0064 3846     		mov	r0, r7
 2796              	.LVL307:
1100:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2797              		.loc 1 1100 10 view .LVU882
 2798 0066 FFF7FEFF 		bl	move_window
 2799              	.LVL308:
1101:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc % SS(fs);
 2800              		.loc 1 1101 4 is_stmt 1 view .LVU883
1101:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = fs->win + bc % SS(fs);
 2801              		.loc 1 1101 7 is_stmt 0 view .LVU884
 2802 006a 0546     		mov	r5, r0
 2803 006c 0028     		cmp	r0, #0
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 164


 2804 006e 42D1     		bne	.L228
1102:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 2805              		.loc 1 1102 4 is_stmt 1 view .LVU885
1102:Middlewares/Third_Party/FatFs/src/ff.c **** 			*p = (clst & 1) ? (BYTE)(val >> 4) : ((*p & 0xF0) | ((BYTE)(val >> 8) & 0x0F));
 2806              		.loc 1 1102 21 is_stmt 0 view .LVU886
 2807 0070 C9F30809 		ubfx	r9, r9, #0, #9
 2808              	.LVL309:
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2809              		.loc 1 1103 4 is_stmt 1 view .LVU887
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2810              		.loc 1 1103 7 is_stmt 0 view .LVU888
 2811 0074 44B1     		cbz	r4, .L233
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2812              		.loc 1 1103 7 discriminator 1 view .LVU889
 2813 0076 C6F30713 		ubfx	r3, r6, #4, #8
 2814              	.L234:
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2815              		.loc 1 1103 7 discriminator 4 view .LVU890
 2816 007a 0AF80930 		strb	r3, [r10, r9]
1104:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2817              		.loc 1 1104 4 is_stmt 1 view .LVU891
1104:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2818              		.loc 1 1104 14 is_stmt 0 view .LVU892
 2819 007e 0123     		movs	r3, #1
 2820 0080 FB70     		strb	r3, [r7, #3]
1105:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2821              		.loc 1 1105 4 is_stmt 1 view .LVU893
 2822 0082 38E0     		b	.L228
 2823              	.LVL310:
 2824              	.L231:
1098:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2825              		.loc 1 1098 7 is_stmt 0 discriminator 2 view .LVU894
 2826 0084 F3B2     		uxtb	r3, r6
 2827 0086 E6E7     		b	.L232
 2828              	.LVL311:
 2829              	.L233:
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2830              		.loc 1 1103 43 discriminator 2 view .LVU895
 2831 0088 1AF80930 		ldrb	r3, [r10, r9]	@ zero_extendqisi2
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2832              		.loc 1 1103 74 discriminator 2 view .LVU896
 2833 008c C6F30322 		ubfx	r2, r6, #8, #4
1103:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2834              		.loc 1 1103 7 discriminator 2 view .LVU897
 2835 0090 23F00F03 		bic	r3, r3, #15
 2836 0094 1343     		orrs	r3, r3, r2
 2837 0096 F0E7     		b	.L234
 2838              	.LVL312:
 2839              	.L229:
1108:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2840              		.loc 1 1108 4 is_stmt 1 view .LVU898
1108:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2841              		.loc 1 1108 28 is_stmt 0 view .LVU899
 2842 0098 416A     		ldr	r1, [r0, #36]
 2843              	.LVL313:
1108:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2844              		.loc 1 1108 10 view .LVU900
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 165


 2845 009a 01EB1421 		add	r1, r1, r4, lsr #8
 2846 009e FFF7FEFF 		bl	move_window
 2847              	.LVL314:
1109:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + clst * 2 % SS(fs), (WORD)val);
 2848              		.loc 1 1109 4 is_stmt 1 view .LVU901
1109:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + clst * 2 % SS(fs), (WORD)val);
 2849              		.loc 1 1109 7 is_stmt 0 view .LVU902
 2850 00a2 0546     		mov	r5, r0
 2851 00a4 38BB     		cbnz	r0, .L228
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2852              		.loc 1 1110 4 is_stmt 1 view .LVU903
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2853              		.loc 1 1110 12 is_stmt 0 view .LVU904
 2854 00a6 07F13400 		add	r0, r7, #52
 2855              	.LVL315:
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2856              		.loc 1 1110 27 view .LVU905
 2857 00aa 6400     		lsls	r4, r4, #1
 2858              	.LVL316:
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2859              		.loc 1 1110 31 view .LVU906
 2860 00ac 04F4FF74 		and	r4, r4, #510
1110:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2861              		.loc 1 1110 4 view .LVU907
 2862 00b0 B1B2     		uxth	r1, r6
 2863 00b2 2044     		add	r0, r0, r4
 2864 00b4 FFF7FEFF 		bl	st_word
 2865              	.LVL317:
1111:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2866              		.loc 1 1111 4 is_stmt 1 view .LVU908
1111:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2867              		.loc 1 1111 14 is_stmt 0 view .LVU909
 2868 00b8 0123     		movs	r3, #1
 2869 00ba FB70     		strb	r3, [r7, #3]
1112:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2870              		.loc 1 1112 4 is_stmt 1 view .LVU910
 2871 00bc 1BE0     		b	.L228
 2872              	.LVL318:
 2873              	.L230:
1118:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2874              		.loc 1 1118 4 view .LVU911
1118:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2875              		.loc 1 1118 28 is_stmt 0 view .LVU912
 2876 00be 416A     		ldr	r1, [r0, #36]
 2877              	.LVL319:
1118:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 2878              		.loc 1 1118 10 view .LVU913
 2879 00c0 01EBD411 		add	r1, r1, r4, lsr #7
 2880 00c4 FFF7FEFF 		bl	move_window
 2881              	.LVL320:
1119:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 2882              		.loc 1 1119 4 is_stmt 1 view .LVU914
1119:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 2883              		.loc 1 1119 7 is_stmt 0 view .LVU915
 2884 00c8 0546     		mov	r5, r0
 2885 00ca A0B9     		cbnz	r0, .L228
1120:Middlewares/Third_Party/FatFs/src/ff.c **** 				val = (val & 0x0FFFFFFF) | (ld_dword(fs->win + clst * 4 % SS(fs)) & 0xF0000000);
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 166


 2886              		.loc 1 1120 4 is_stmt 1 view .LVU916
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 2887              		.loc 1 1121 5 view .LVU917
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 2888              		.loc 1 1121 16 is_stmt 0 view .LVU918
 2889 00cc 26F07046 		bic	r6, r6, #-268435456
 2890              	.LVL321:
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 2891              		.loc 1 1121 42 view .LVU919
 2892 00d0 07F13403 		add	r3, r7, #52
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 2893              		.loc 1 1121 57 view .LVU920
 2894 00d4 A400     		lsls	r4, r4, #2
 2895              	.LVL322:
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 2896              		.loc 1 1121 61 view .LVU921
 2897 00d6 04F4FE74 		and	r4, r4, #508
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 2898              		.loc 1 1121 33 view .LVU922
 2899 00da 1C44     		add	r4, r4, r3
 2900 00dc 2046     		mov	r0, r4
 2901              	.LVL323:
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 2902              		.loc 1 1121 33 view .LVU923
 2903 00de FFF7FEFF 		bl	ld_dword
 2904              	.LVL324:
1121:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 2905              		.loc 1 1121 71 discriminator 1 view .LVU924
 2906 00e2 00F07041 		and	r1, r0, #-268435456
 2907              	.LVL325:
1123:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2908              		.loc 1 1123 4 is_stmt 1 view .LVU925
 2909 00e6 3143     		orrs	r1, r1, r6
 2910              	.LVL326:
1123:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->wflag = 1;
 2911              		.loc 1 1123 4 is_stmt 0 view .LVU926
 2912 00e8 2046     		mov	r0, r4
 2913 00ea FFF7FEFF 		bl	st_dword
 2914              	.LVL327:
1124:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2915              		.loc 1 1124 4 is_stmt 1 view .LVU927
1124:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 2916              		.loc 1 1124 14 is_stmt 0 view .LVU928
 2917 00ee 0123     		movs	r3, #1
 2918 00f0 FB70     		strb	r3, [r7, #3]
1125:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 2919              		.loc 1 1125 4 is_stmt 1 view .LVU929
 2920 00f2 00E0     		b	.L228
 2921              	.LVL328:
 2922              	.L235:
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2923              		.loc 1 1089 10 is_stmt 0 view .LVU930
 2924 00f4 0225     		movs	r5, #2
 2925              	.LVL329:
 2926              	.L228:
1128:Middlewares/Third_Party/FatFs/src/ff.c **** }
 2927              		.loc 1 1128 2 is_stmt 1 view .LVU931
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 167


1129:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2928              		.loc 1 1129 1 is_stmt 0 view .LVU932
 2929 00f6 2846     		mov	r0, r5
 2930 00f8 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 2931              	.LVL330:
 2932              	.L236:
1089:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2933              		.loc 1 1089 10 view .LVU933
 2934 00fc 0225     		movs	r5, #2
 2935 00fe FAE7     		b	.L228
 2936              	.L237:
1092:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :	/* Bitfield items */
 2937              		.loc 1 1092 3 view .LVU934
 2938 0100 0225     		movs	r5, #2
 2939 0102 F8E7     		b	.L228
 2940              		.cfi_endproc
 2941              	.LFE358:
 2943              		.section	.text.get_fat,"ax",%progbits
 2944              		.align	1
 2945              		.syntax unified
 2946              		.thumb
 2947              		.thumb_func
 2949              	get_fat:
 2950              	.LVL331:
 2951              	.LFB357:
1005:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wc, bc;
 2952              		.loc 1 1005 1 is_stmt 1 view -0
 2953              		.cfi_startproc
 2954              		@ args = 0, pretend = 0, frame = 0
 2955              		@ frame_needed = 0, uses_anonymous_args = 0
1005:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wc, bc;
 2956              		.loc 1 1005 1 is_stmt 0 view .LVU936
 2957 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 2958              	.LCFI24:
 2959              		.cfi_def_cfa_offset 24
 2960              		.cfi_offset 3, -24
 2961              		.cfi_offset 4, -20
 2962              		.cfi_offset 5, -16
 2963              		.cfi_offset 6, -12
 2964              		.cfi_offset 7, -8
 2965              		.cfi_offset 14, -4
1006:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD val;
 2966              		.loc 1 1006 2 is_stmt 1 view .LVU937
1007:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
 2967              		.loc 1 1007 2 view .LVU938
1008:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2968              		.loc 1 1008 2 view .LVU939
1008:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2969              		.loc 1 1008 9 is_stmt 0 view .LVU940
 2970 0002 0568     		ldr	r5, [r0]
 2971              	.LVL332:
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 2972              		.loc 1 1011 2 is_stmt 1 view .LVU941
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 2973              		.loc 1 1011 5 is_stmt 0 view .LVU942
 2974 0004 0129     		cmp	r1, #1
 2975 0006 54D9     		bls	.L244
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 168


 2976 0008 0C46     		mov	r4, r1
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 2977              		.loc 1 1011 28 discriminator 1 view .LVU943
 2978 000a AB69     		ldr	r3, [r5, #24]
1011:Middlewares/Third_Party/FatFs/src/ff.c **** 		val = 1;	/* Internal error */
 2979              		.loc 1 1011 15 discriminator 1 view .LVU944
 2980 000c 8B42     		cmp	r3, r1
 2981 000e 52D9     		bls	.L245
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 2982              		.loc 1 1015 3 is_stmt 1 view .LVU945
 2983              	.LVL333:
1017:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 2984              		.loc 1 1017 3 view .LVU946
1017:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 2985              		.loc 1 1017 13 is_stmt 0 view .LVU947
 2986 0010 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
1017:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 2987              		.loc 1 1017 3 view .LVU948
 2988 0012 022B     		cmp	r3, #2
 2989 0014 2BD0     		beq	.L241
 2990 0016 032B     		cmp	r3, #3
 2991 0018 39D0     		beq	.L242
 2992 001a 012B     		cmp	r3, #1
 2993 001c 4DD1     		bne	.L246
1019:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2994              		.loc 1 1019 4 is_stmt 1 view .LVU949
 2995              	.LVL334:
1019:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2996              		.loc 1 1019 21 view .LVU950
1019:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 2997              		.loc 1 1019 24 is_stmt 0 view .LVU951
 2998 001e 01EB5106 		add	r6, r1, r1, lsr #1
 2999              	.LVL335:
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win[bc++ % SS(fs)];
 3000              		.loc 1 1020 4 is_stmt 1 view .LVU952
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win[bc++ % SS(fs)];
 3001              		.loc 1 1020 26 is_stmt 0 view .LVU953
 3002 0022 696A     		ldr	r1, [r5, #36]
 3003              	.LVL336:
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win[bc++ % SS(fs)];
 3004              		.loc 1 1020 8 view .LVU954
 3005 0024 01EB5621 		add	r1, r1, r6, lsr #9
 3006 0028 2846     		mov	r0, r5
 3007              	.LVL337:
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win[bc++ % SS(fs)];
 3008              		.loc 1 1020 8 view .LVU955
 3009 002a FFF7FEFF 		bl	move_window
 3010              	.LVL338:
1020:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc = fs->win[bc++ % SS(fs)];
 3011              		.loc 1 1020 7 discriminator 1 view .LVU956
 3012 002e 10B1     		cbz	r0, .L252
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3013              		.loc 1 1015 7 view .LVU957
 3014 0030 4FF0FF30 		mov	r0, #-1
 3015 0034 3EE0     		b	.L239
 3016              	.L252:
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 169


 3017              		.loc 1 1021 4 is_stmt 1 view .LVU958
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 3018              		.loc 1 1021 19 is_stmt 0 view .LVU959
 3019 0036 771C     		adds	r7, r6, #1
 3020              	.LVL339:
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 3021              		.loc 1 1021 22 view .LVU960
 3022 0038 C6F30806 		ubfx	r6, r6, #0, #9
1021:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (move_window(fs, fs->fatbase + (bc / SS(fs))) != FR_OK) break;
 3023              		.loc 1 1021 16 view .LVU961
 3024 003c 2E44     		add	r6, r6, r5
 3025 003e 96F83460 		ldrb	r6, [r6, #52]	@ zero_extendqisi2
 3026              	.LVL340:
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;
 3027              		.loc 1 1022 4 is_stmt 1 view .LVU962
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;
 3028              		.loc 1 1022 26 is_stmt 0 view .LVU963
 3029 0042 696A     		ldr	r1, [r5, #36]
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;
 3030              		.loc 1 1022 8 view .LVU964
 3031 0044 01EB5721 		add	r1, r1, r7, lsr #9
 3032 0048 2846     		mov	r0, r5
 3033 004a FFF7FEFF 		bl	move_window
 3034              	.LVL341:
1022:Middlewares/Third_Party/FatFs/src/ff.c **** 			wc |= fs->win[bc % SS(fs)] << 8;
 3035              		.loc 1 1022 7 discriminator 1 view .LVU965
 3036 004e B0BB     		cbnz	r0, .L248
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 3037              		.loc 1 1023 4 is_stmt 1 view .LVU966
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 3038              		.loc 1 1023 21 is_stmt 0 view .LVU967
 3039 0050 C7F30807 		ubfx	r7, r7, #0, #9
 3040              	.LVL342:
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 3041              		.loc 1 1023 17 view .LVU968
 3042 0054 2F44     		add	r7, r7, r5
 3043 0056 97F83430 		ldrb	r3, [r7, #52]	@ zero_extendqisi2
1023:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = (clst & 1) ? (wc >> 4) : (wc & 0xFFF);
 3044              		.loc 1 1023 7 view .LVU969
 3045 005a 46EA0320 		orr	r0, r6, r3, lsl #8
 3046              	.LVL343:
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3047              		.loc 1 1024 4 is_stmt 1 view .LVU970
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3048              		.loc 1 1024 33 is_stmt 0 view .LVU971
 3049 005e 14F0010F 		tst	r4, #1
 3050 0062 01D0     		beq	.L243
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3051              		.loc 1 1024 33 discriminator 1 view .LVU972
 3052 0064 0009     		lsrs	r0, r0, #4
 3053              	.LVL344:
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3054              		.loc 1 1024 33 discriminator 1 view .LVU973
 3055 0066 25E0     		b	.L239
 3056              	.LVL345:
 3057              	.L243:
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 170


 3058              		.loc 1 1024 33 discriminator 2 view .LVU974
 3059 0068 C0F30B00 		ubfx	r0, r0, #0, #12
 3060              	.LVL346:
1024:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3061              		.loc 1 1024 33 discriminator 2 view .LVU975
 3062 006c 22E0     		b	.L239
 3063              	.LVL347:
 3064              	.L241:
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));
 3065              		.loc 1 1028 4 is_stmt 1 view .LVU976
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));
 3066              		.loc 1 1028 26 is_stmt 0 view .LVU977
 3067 006e 696A     		ldr	r1, [r5, #36]
 3068              	.LVL348:
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));
 3069              		.loc 1 1028 8 view .LVU978
 3070 0070 01EB1421 		add	r1, r1, r4, lsr #8
 3071 0074 2846     		mov	r0, r5
 3072              	.LVL349:
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));
 3073              		.loc 1 1028 8 view .LVU979
 3074 0076 FFF7FEFF 		bl	move_window
 3075              	.LVL350:
1028:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_word(fs->win + clst * 2 % SS(fs));
 3076              		.loc 1 1028 7 discriminator 1 view .LVU980
 3077 007a 18BB     		cbnz	r0, .L249
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3078              		.loc 1 1029 4 is_stmt 1 view .LVU981
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3079              		.loc 1 1029 18 is_stmt 0 view .LVU982
 3080 007c 05F13400 		add	r0, r5, #52
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3081              		.loc 1 1029 33 view .LVU983
 3082 0080 6400     		lsls	r4, r4, #1
 3083              	.LVL351:
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3084              		.loc 1 1029 37 view .LVU984
 3085 0082 04F4FF74 		and	r4, r4, #510
1029:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3086              		.loc 1 1029 10 view .LVU985
 3087 0086 2044     		add	r0, r0, r4
 3088 0088 FFF7FEFF 		bl	ld_word
 3089              	.LVL352:
1030:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3090              		.loc 1 1030 4 is_stmt 1 view .LVU986
 3091 008c 12E0     		b	.L239
 3092              	.LVL353:
 3093              	.L242:
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;
 3094              		.loc 1 1033 4 view .LVU987
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;
 3095              		.loc 1 1033 26 is_stmt 0 view .LVU988
 3096 008e 696A     		ldr	r1, [r5, #36]
 3097              	.LVL354:
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;
 3098              		.loc 1 1033 8 view .LVU989
 3099 0090 01EBD411 		add	r1, r1, r4, lsr #7
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 171


 3100 0094 2846     		mov	r0, r5
 3101              	.LVL355:
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;
 3102              		.loc 1 1033 8 view .LVU990
 3103 0096 FFF7FEFF 		bl	move_window
 3104              	.LVL356:
1033:Middlewares/Third_Party/FatFs/src/ff.c **** 			val = ld_dword(fs->win + clst * 4 % SS(fs)) & 0x0FFFFFFF;
 3105              		.loc 1 1033 7 discriminator 1 view .LVU991
 3106 009a B0B9     		cbnz	r0, .L250
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3107              		.loc 1 1034 4 is_stmt 1 view .LVU992
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3108              		.loc 1 1034 19 is_stmt 0 view .LVU993
 3109 009c 05F13400 		add	r0, r5, #52
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3110              		.loc 1 1034 34 view .LVU994
 3111 00a0 A400     		lsls	r4, r4, #2
 3112              	.LVL357:
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3113              		.loc 1 1034 38 view .LVU995
 3114 00a2 04F4FE74 		and	r4, r4, #508
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3115              		.loc 1 1034 10 view .LVU996
 3116 00a6 2044     		add	r0, r0, r4
 3117 00a8 FFF7FEFF 		bl	ld_dword
 3118              	.LVL358:
1034:Middlewares/Third_Party/FatFs/src/ff.c **** 			break;
 3119              		.loc 1 1034 8 discriminator 1 view .LVU997
 3120 00ac 20F07040 		bic	r0, r0, #-268435456
 3121              	.LVL359:
1035:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 3122              		.loc 1 1035 4 is_stmt 1 view .LVU998
 3123 00b0 00E0     		b	.L239
 3124              	.LVL360:
 3125              	.L244:
1012:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3126              		.loc 1 1012 7 is_stmt 0 view .LVU999
 3127 00b2 0120     		movs	r0, #1
 3128              	.LVL361:
 3129              	.L239:
1070:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3130              		.loc 1 1070 1 view .LVU1000
 3131 00b4 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3132              	.LVL362:
 3133              	.L245:
1012:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3134              		.loc 1 1012 7 view .LVU1001
 3135 00b6 0120     		movs	r0, #1
 3136              	.LVL363:
1012:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3137              		.loc 1 1012 7 view .LVU1002
 3138 00b8 FCE7     		b	.L239
 3139              	.LVL364:
 3140              	.L246:
1017:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 3141              		.loc 1 1017 3 view .LVU1003
 3142 00ba 0120     		movs	r0, #1
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 172


 3143              	.LVL365:
1017:Middlewares/Third_Party/FatFs/src/ff.c **** 		case FS_FAT12 :
 3144              		.loc 1 1017 3 view .LVU1004
 3145 00bc FAE7     		b	.L239
 3146              	.LVL366:
 3147              	.L248:
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3148              		.loc 1 1015 7 view .LVU1005
 3149 00be 4FF0FF30 		mov	r0, #-1
 3150 00c2 F7E7     		b	.L239
 3151              	.LVL367:
 3152              	.L249:
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3153              		.loc 1 1015 7 view .LVU1006
 3154 00c4 4FF0FF30 		mov	r0, #-1
 3155 00c8 F4E7     		b	.L239
 3156              	.L250:
1015:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3157              		.loc 1 1015 7 view .LVU1007
 3158 00ca 4FF0FF30 		mov	r0, #-1
1069:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3159              		.loc 1 1069 2 is_stmt 1 view .LVU1008
1069:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3160              		.loc 1 1069 9 is_stmt 0 view .LVU1009
 3161 00ce F1E7     		b	.L239
 3162              		.cfi_endproc
 3163              	.LFE357:
 3165              		.section	.text.dir_sdi,"ax",%progbits
 3166              		.align	1
 3167              		.syntax unified
 3168              		.thumb
 3169              		.thumb_func
 3171              	dir_sdi:
 3172              	.LVL368:
 3173              	.LFB362:
1474:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD csz, clst;
 3174              		.loc 1 1474 1 is_stmt 1 view -0
 3175              		.cfi_startproc
 3176              		@ args = 0, pretend = 0, frame = 0
 3177              		@ frame_needed = 0, uses_anonymous_args = 0
1474:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD csz, clst;
 3178              		.loc 1 1474 1 is_stmt 0 view .LVU1011
 3179 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3180              	.LCFI25:
 3181              		.cfi_def_cfa_offset 24
 3182              		.cfi_offset 4, -24
 3183              		.cfi_offset 5, -20
 3184              		.cfi_offset 6, -16
 3185              		.cfi_offset 7, -12
 3186              		.cfi_offset 8, -8
 3187              		.cfi_offset 14, -4
1475:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 3188              		.loc 1 1475 2 is_stmt 1 view .LVU1012
1476:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3189              		.loc 1 1476 2 view .LVU1013
1476:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3190              		.loc 1 1476 9 is_stmt 0 view .LVU1014
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 173


 3191 0004 D0F80080 		ldr	r8, [r0]
 3192              	.LVL369:
1479:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
 3193              		.loc 1 1479 2 is_stmt 1 view .LVU1015
1479:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
 3194              		.loc 1 1479 5 is_stmt 0 view .LVU1016
 3195 0008 B1F5001F 		cmp	r1, #2097152
 3196 000c 3FD2     		bcs	.L260
 3197 000e 0746     		mov	r7, r0
 3198 0010 0E46     		mov	r6, r1
1479:Middlewares/Third_Party/FatFs/src/ff.c **** 		return FR_INT_ERR;
 3199              		.loc 1 1479 84 discriminator 1 view .LVU1017
 3200 0012 11F01F0F 		tst	r1, #31
 3201 0016 3DD1     		bne	.L261
1482:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst = dp->obj.sclust;		/* Table start cluster (0:root) */
 3202              		.loc 1 1482 2 is_stmt 1 view .LVU1018
1482:Middlewares/Third_Party/FatFs/src/ff.c **** 	clst = dp->obj.sclust;		/* Table start cluster (0:root) */
 3203              		.loc 1 1482 11 is_stmt 0 view .LVU1019
 3204 0018 4161     		str	r1, [r0, #20]
1483:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0 && fs->fs_type >= FS_FAT32) {	/* Replace cluster# 0 with root cluster# */
 3205              		.loc 1 1483 2 is_stmt 1 view .LVU1020
1483:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (clst == 0 && fs->fs_type >= FS_FAT32) {	/* Replace cluster# 0 with root cluster# */
 3206              		.loc 1 1483 7 is_stmt 0 view .LVU1021
 3207 001a 8468     		ldr	r4, [r0, #8]
 3208              	.LVL370:
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = fs->dirbase;
 3209              		.loc 1 1484 2 is_stmt 1 view .LVU1022
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = fs->dirbase;
 3210              		.loc 1 1484 5 is_stmt 0 view .LVU1023
 3211 001c E4B9     		cbnz	r4, .L255
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = fs->dirbase;
 3212              		.loc 1 1484 21 discriminator 1 view .LVU1024
 3213 001e 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
1484:Middlewares/Third_Party/FatFs/src/ff.c **** 		clst = fs->dirbase;
 3214              		.loc 1 1484 16 discriminator 1 view .LVU1025
 3215 0022 022B     		cmp	r3, #2
 3216 0024 01D9     		bls	.L256
1485:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_EXFAT) dp->obj.stat = 0;	/* exFAT: Root dir has an FAT chain */
 3217              		.loc 1 1485 3 is_stmt 1 view .LVU1026
1485:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_EXFAT) dp->obj.stat = 0;	/* exFAT: Root dir has an FAT chain */
 3218              		.loc 1 1485 8 is_stmt 0 view .LVU1027
 3219 0026 D8F82840 		ldr	r4, [r8, #40]
 3220              	.LVL371:
1486:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3221              		.loc 1 1486 3 is_stmt 1 view .LVU1028
 3222              	.L256:
1489:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs / SZDIRE >= fs->n_rootdir)	return FR_INT_ERR;	/* Is index out of range? */
 3223              		.loc 1 1489 2 view .LVU1029
1489:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs / SZDIRE >= fs->n_rootdir)	return FR_INT_ERR;	/* Is index out of range? */
 3224              		.loc 1 1489 5 is_stmt 0 view .LVU1030
 3225 002a ACB9     		cbnz	r4, .L255
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = fs->dirbase;
 3226              		.loc 1 1490 3 is_stmt 1 view .LVU1031
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = fs->dirbase;
 3227              		.loc 1 1490 25 is_stmt 0 view .LVU1032
 3228 002c B8F80830 		ldrh	r3, [r8, #8]
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = fs->dirbase;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 174


 3229              		.loc 1 1490 6 view .LVU1033
 3230 0030 B3EB561F 		cmp	r3, r6, lsr #5
 3231 0034 30D9     		bls	.L262
1491:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3232              		.loc 1 1491 3 is_stmt 1 view .LVU1034
1491:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3233              		.loc 1 1491 16 is_stmt 0 view .LVU1035
 3234 0036 D8F82830 		ldr	r3, [r8, #40]
1491:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3235              		.loc 1 1491 12 view .LVU1036
 3236 003a FB61     		str	r3, [r7, #28]
 3237              	.LVL372:
 3238              	.L257:
1503:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect) return FR_INT_ERR;
 3239              		.loc 1 1503 2 is_stmt 1 view .LVU1037
1503:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect) return FR_INT_ERR;
 3240              		.loc 1 1503 12 is_stmt 0 view .LVU1038
 3241 003c BC61     		str	r4, [r7, #24]
1504:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3242              		.loc 1 1504 2 is_stmt 1 view .LVU1039
1504:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3243              		.loc 1 1504 9 is_stmt 0 view .LVU1040
 3244 003e FB69     		ldr	r3, [r7, #28]
1504:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3245              		.loc 1 1504 5 view .LVU1041
 3246 0040 93B3     		cbz	r3, .L266
1505:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
 3247              		.loc 1 1505 2 is_stmt 1 view .LVU1042
1505:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + (ofs % SS(fs));	/* Pointer to the entry in the win[] */
 3248              		.loc 1 1505 11 is_stmt 0 view .LVU1043
 3249 0042 03EB5623 		add	r3, r3, r6, lsr #9
 3250 0046 FB61     		str	r3, [r7, #28]
1506:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3251              		.loc 1 1506 2 is_stmt 1 view .LVU1044
1506:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3252              		.loc 1 1506 12 is_stmt 0 view .LVU1045
 3253 0048 08F13408 		add	r8, r8, #52
 3254              	.LVL373:
1506:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3255              		.loc 1 1506 27 view .LVU1046
 3256 004c C6F30801 		ubfx	r1, r6, #0, #9
1506:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3257              		.loc 1 1506 20 view .LVU1047
 3258 0050 4144     		add	r1, r1, r8
1506:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3259              		.loc 1 1506 10 view .LVU1048
 3260 0052 3962     		str	r1, [r7, #32]
1508:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3261              		.loc 1 1508 2 is_stmt 1 view .LVU1049
1508:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3262              		.loc 1 1508 9 is_stmt 0 view .LVU1050
 3263 0054 0020     		movs	r0, #0
 3264 0056 1BE0     		b	.L254
 3265              	.LVL374:
 3266              	.L255:
1494:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
 3267              		.loc 1 1494 3 is_stmt 1 view .LVU1051
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 175


1494:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
 3268              		.loc 1 1494 18 is_stmt 0 view .LVU1052
 3269 0058 B8F80A50 		ldrh	r5, [r8, #10]
1494:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (ofs >= csz) {				/* Follow cluster chain */
 3270              		.loc 1 1494 7 view .LVU1053
 3271 005c 6D02     		lsls	r5, r5, #9
 3272              	.LVL375:
1495:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
 3273              		.loc 1 1495 3 is_stmt 1 view .LVU1054
 3274              	.L258:
1495:Middlewares/Third_Party/FatFs/src/ff.c **** 			clst = get_fat(&dp->obj, clst);				/* Get next cluster */
 3275              		.loc 1 1495 14 view .LVU1055
 3276 005e AE42     		cmp	r6, r5
 3277 0060 0FD3     		bcc	.L268
1496:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 3278              		.loc 1 1496 4 view .LVU1056
1496:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 3279              		.loc 1 1496 11 is_stmt 0 view .LVU1057
 3280 0062 2146     		mov	r1, r4
 3281 0064 3846     		mov	r0, r7
 3282 0066 FFF7FEFF 		bl	get_fat
 3283              	.LVL376:
 3284 006a 0446     		mov	r4, r0
 3285              	.LVL377:
1497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3286              		.loc 1 1497 4 is_stmt 1 view .LVU1058
1497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3287              		.loc 1 1497 7 is_stmt 0 view .LVU1059
 3288 006c B0F1FF3F 		cmp	r0, #-1
 3289 0070 14D0     		beq	.L263
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3290              		.loc 1 1498 4 is_stmt 1 view .LVU1060
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3291              		.loc 1 1498 7 is_stmt 0 view .LVU1061
 3292 0072 0128     		cmp	r0, #1
 3293 0074 14D9     		bls	.L264
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3294              		.loc 1 1498 30 discriminator 2 view .LVU1062
 3295 0076 D8F81830 		ldr	r3, [r8, #24]
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3296              		.loc 1 1498 17 discriminator 2 view .LVU1063
 3297 007a 8342     		cmp	r3, r0
 3298 007c 12D9     		bls	.L265
1499:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3299              		.loc 1 1499 4 is_stmt 1 view .LVU1064
1499:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3300              		.loc 1 1499 8 is_stmt 0 view .LVU1065
 3301 007e 761B     		subs	r6, r6, r5
 3302              	.LVL378:
1499:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3303              		.loc 1 1499 8 view .LVU1066
 3304 0080 EDE7     		b	.L258
 3305              	.LVL379:
 3306              	.L268:
1501:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3307              		.loc 1 1501 3 is_stmt 1 view .LVU1067
1501:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 176


 3308              		.loc 1 1501 14 is_stmt 0 view .LVU1068
 3309 0082 2146     		mov	r1, r4
 3310 0084 4046     		mov	r0, r8
 3311 0086 FFF7FEFF 		bl	clust2sect
 3312              	.LVL380:
1501:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3313              		.loc 1 1501 12 discriminator 1 view .LVU1069
 3314 008a F861     		str	r0, [r7, #28]
 3315 008c D6E7     		b	.L257
 3316              	.LVL381:
 3317              	.L260:
1480:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3318              		.loc 1 1480 10 view .LVU1070
 3319 008e 0220     		movs	r0, #2
 3320              	.LVL382:
 3321              	.L254:
1509:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3322              		.loc 1 1509 1 view .LVU1071
 3323 0090 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 3324              	.LVL383:
 3325              	.L261:
1480:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3326              		.loc 1 1480 10 view .LVU1072
 3327 0094 0220     		movs	r0, #2
 3328              	.LVL384:
1480:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3329              		.loc 1 1480 10 view .LVU1073
 3330 0096 FBE7     		b	.L254
 3331              	.LVL385:
 3332              	.L262:
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = fs->dirbase;
 3333              		.loc 1 1490 45 discriminator 1 view .LVU1074
 3334 0098 0220     		movs	r0, #2
 3335              	.LVL386:
1490:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect = fs->dirbase;
 3336              		.loc 1 1490 45 discriminator 1 view .LVU1075
 3337 009a F9E7     		b	.L254
 3338              	.LVL387:
 3339              	.L263:
1497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3340              		.loc 1 1497 35 discriminator 1 view .LVU1076
 3341 009c 0120     		movs	r0, #1
 3342              	.LVL388:
1497:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (clst < 2 || clst >= fs->n_fatent) return FR_INT_ERR;	/* Reached to end of table or internal 
 3343              		.loc 1 1497 35 discriminator 1 view .LVU1077
 3344 009e F7E7     		b	.L254
 3345              	.LVL389:
 3346              	.L264:
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3347              		.loc 1 1498 49 discriminator 3 view .LVU1078
 3348 00a0 0220     		movs	r0, #2
 3349              	.LVL390:
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3350              		.loc 1 1498 49 discriminator 3 view .LVU1079
 3351 00a2 F5E7     		b	.L254
 3352              	.LVL391:
 3353              	.L265:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 177


1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3354              		.loc 1 1498 49 discriminator 3 view .LVU1080
 3355 00a4 0220     		movs	r0, #2
 3356              	.LVL392:
1498:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs -= csz;
 3357              		.loc 1 1498 49 discriminator 3 view .LVU1081
 3358 00a6 F3E7     		b	.L254
 3359              	.LVL393:
 3360              	.L266:
1504:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->sect += ofs / SS(fs);			/* Sector# of the directory entry */
 3361              		.loc 1 1504 24 discriminator 1 view .LVU1082
 3362 00a8 0220     		movs	r0, #2
 3363 00aa F1E7     		b	.L254
 3364              		.cfi_endproc
 3365              	.LFE362:
 3367              		.section	.text.create_chain,"ax",%progbits
 3368              		.align	1
 3369              		.syntax unified
 3370              		.thumb
 3371              		.thumb_func
 3373              	create_chain:
 3374              	.LVL394:
 3375              	.LFB360:
1355:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cs, ncl, scl;
 3376              		.loc 1 1355 1 is_stmt 1 view -0
 3377              		.cfi_startproc
 3378              		@ args = 0, pretend = 0, frame = 0
 3379              		@ frame_needed = 0, uses_anonymous_args = 0
1355:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD cs, ncl, scl;
 3380              		.loc 1 1355 1 is_stmt 0 view .LVU1084
 3381 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 3382              	.LCFI26:
 3383              		.cfi_def_cfa_offset 24
 3384              		.cfi_offset 4, -24
 3385              		.cfi_offset 5, -20
 3386              		.cfi_offset 6, -16
 3387              		.cfi_offset 7, -12
 3388              		.cfi_offset 8, -8
 3389              		.cfi_offset 14, -4
 3390 0004 0546     		mov	r5, r0
1356:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 3391              		.loc 1 1356 2 is_stmt 1 view .LVU1085
1357:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
 3392              		.loc 1 1357 2 view .LVU1086
1358:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3393              		.loc 1 1358 2 view .LVU1087
1358:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3394              		.loc 1 1358 9 is_stmt 0 view .LVU1088
 3395 0006 0668     		ldr	r6, [r0]
 3396              	.LVL395:
1361:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = fs->last_clst;				/* Get suggested cluster to start from */
 3397              		.loc 1 1361 2 is_stmt 1 view .LVU1089
1361:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = fs->last_clst;				/* Get suggested cluster to start from */
 3398              		.loc 1 1361 5 is_stmt 0 view .LVU1090
 3399 0008 0F46     		mov	r7, r1
 3400 000a 51B9     		cbnz	r1, .L270
1362:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (scl == 0 || scl >= fs->n_fatent) scl = 1;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 178


 3401              		.loc 1 1362 3 is_stmt 1 view .LVU1091
1362:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (scl == 0 || scl >= fs->n_fatent) scl = 1;
 3402              		.loc 1 1362 7 is_stmt 0 view .LVU1092
 3403 000c D6F81080 		ldr	r8, [r6, #16]
 3404              	.LVL396:
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3405              		.loc 1 1363 3 is_stmt 1 view .LVU1093
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3406              		.loc 1 1363 6 is_stmt 0 view .LVU1094
 3407 0010 B8F1000F 		cmp	r8, #0
 3408 0014 12D0     		beq	.L279
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3409              		.loc 1 1363 28 discriminator 2 view .LVU1095
 3410 0016 B369     		ldr	r3, [r6, #24]
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3411              		.loc 1 1363 16 discriminator 2 view .LVU1096
 3412 0018 4345     		cmp	r3, r8
 3413 001a 11D8     		bhi	.L271
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3414              		.loc 1 1363 44 discriminator 3 view .LVU1097
 3415 001c 4FF00108 		mov	r8, #1
 3416              	.LVL397:
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3417              		.loc 1 1363 44 discriminator 3 view .LVU1098
 3418 0020 0EE0     		b	.L271
 3419              	.LVL398:
 3420              	.L270:
1366:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < 2) return 1;				/* Invalid FAT value */
 3421              		.loc 1 1366 3 is_stmt 1 view .LVU1099
1366:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < 2) return 1;				/* Invalid FAT value */
 3422              		.loc 1 1366 8 is_stmt 0 view .LVU1100
 3423 0022 FFF7FEFF 		bl	get_fat
 3424              	.LVL399:
1366:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < 2) return 1;				/* Invalid FAT value */
 3425              		.loc 1 1366 8 view .LVU1101
 3426 0026 0346     		mov	r3, r0
 3427              	.LVL400:
1367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 3428              		.loc 1 1367 3 is_stmt 1 view .LVU1102
1367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 3429              		.loc 1 1367 6 is_stmt 0 view .LVU1103
 3430 0028 0128     		cmp	r0, #1
 3431 002a 4CD9     		bls	.L281
1368:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 3432              		.loc 1 1368 3 is_stmt 1 view .LVU1104
1368:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs < fs->n_fatent) return cs;	/* It is already followed by next cluster */
 3433              		.loc 1 1368 6 is_stmt 0 view .LVU1105
 3434 002c B0F1FF3F 		cmp	r0, #-1
 3435 0030 4ED0     		beq	.L269
1369:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst;
 3436              		.loc 1 1369 3 is_stmt 1 view .LVU1106
1369:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst;
 3437              		.loc 1 1369 14 is_stmt 0 view .LVU1107
 3438 0032 B269     		ldr	r2, [r6, #24]
1369:Middlewares/Third_Party/FatFs/src/ff.c **** 		scl = clst;
 3439              		.loc 1 1369 6 view .LVU1108
 3440 0034 8242     		cmp	r2, r0
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 179


 3441 0036 4BD8     		bhi	.L269
1370:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3442              		.loc 1 1370 7 view .LVU1109
 3443 0038 B846     		mov	r8, r7
 3444 003a 01E0     		b	.L271
 3445              	.LVL401:
 3446              	.L279:
1363:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3447              		.loc 1 1363 44 discriminator 3 view .LVU1110
 3448 003c 4FF00108 		mov	r8, #1
 3449              	.LVL402:
 3450              	.L271:
1400:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
 3451              		.loc 1 1400 3 is_stmt 1 view .LVU1111
1400:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (;;) {
 3452              		.loc 1 1400 7 is_stmt 0 view .LVU1112
 3453 0040 4446     		mov	r4, r8
 3454 0042 0CE0     		b	.L275
 3455              	.LVL403:
 3456              	.L273:
1407:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 0) break;				/* Found a free cluster */
 3457              		.loc 1 1407 4 is_stmt 1 view .LVU1113
1407:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 0) break;				/* Found a free cluster */
 3458              		.loc 1 1407 9 is_stmt 0 view .LVU1114
 3459 0044 2146     		mov	r1, r4
 3460 0046 2846     		mov	r0, r5
 3461 0048 FFF7FEFF 		bl	get_fat
 3462              	.LVL404:
1408:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* An error occurred */
 3463              		.loc 1 1408 4 is_stmt 1 view .LVU1115
1408:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cs == 1 || cs == 0xFFFFFFFF) return cs;	/* An error occurred */
 3464              		.loc 1 1408 7 is_stmt 0 view .LVU1116
 3465 004c 0346     		mov	r3, r0
 3466 004e 78B1     		cbz	r0, .L274
1409:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == scl) return 0;		/* No free cluster */
 3467              		.loc 1 1409 4 is_stmt 1 view .LVU1117
1409:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == scl) return 0;		/* No free cluster */
 3468              		.loc 1 1409 7 is_stmt 0 view .LVU1118
 3469 0050 B0F1FF3F 		cmp	r0, #-1
 3470 0054 18BF     		it	ne
 3471 0056 0128     		cmpne	r0, #1
 3472 0058 3AD0     		beq	.L269
1410:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3473              		.loc 1 1410 4 is_stmt 1 view .LVU1119
1410:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3474              		.loc 1 1410 7 is_stmt 0 view .LVU1120
 3475 005a 4445     		cmp	r4, r8
 3476 005c 37D0     		beq	.L286
 3477              	.LVL405:
 3478              	.L275:
1401:Middlewares/Third_Party/FatFs/src/ff.c **** 			ncl++;							/* Next cluster */
 3479              		.loc 1 1401 3 is_stmt 1 view .LVU1121
1402:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl >= fs->n_fatent) {		/* Check wrap-around */
 3480              		.loc 1 1402 4 view .LVU1122
1402:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl >= fs->n_fatent) {		/* Check wrap-around */
 3481              		.loc 1 1402 7 is_stmt 0 view .LVU1123
 3482 005e 0134     		adds	r4, r4, #1
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 180


 3483              	.LVL406:
1403:Middlewares/Third_Party/FatFs/src/ff.c **** 				ncl = 2;
 3484              		.loc 1 1403 4 is_stmt 1 view .LVU1124
1403:Middlewares/Third_Party/FatFs/src/ff.c **** 				ncl = 2;
 3485              		.loc 1 1403 17 is_stmt 0 view .LVU1125
 3486 0060 B369     		ldr	r3, [r6, #24]
1403:Middlewares/Third_Party/FatFs/src/ff.c **** 				ncl = 2;
 3487              		.loc 1 1403 7 view .LVU1126
 3488 0062 A342     		cmp	r3, r4
 3489 0064 EED8     		bhi	.L273
1404:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl > scl) return 0;	/* No free cluster */
 3490              		.loc 1 1404 5 is_stmt 1 view .LVU1127
 3491              	.LVL407:
1405:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3492              		.loc 1 1405 5 view .LVU1128
1405:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3493              		.loc 1 1405 8 is_stmt 0 view .LVU1129
 3494 0066 B8F1010F 		cmp	r8, #1
 3495 006a 2ED9     		bls	.L282
1404:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ncl > scl) return 0;	/* No free cluster */
 3496              		.loc 1 1404 9 view .LVU1130
 3497 006c 0224     		movs	r4, #2
 3498 006e E9E7     		b	.L273
 3499              	.LVL408:
 3500              	.L274:
1412:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && clst != 0) {
 3501              		.loc 1 1412 3 is_stmt 1 view .LVU1131
1412:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && clst != 0) {
 3502              		.loc 1 1412 9 is_stmt 0 view .LVU1132
 3503 0070 4FF0FF32 		mov	r2, #-1
 3504 0074 2146     		mov	r1, r4
 3505 0076 3046     		mov	r0, r6
 3506              	.LVL409:
1412:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && clst != 0) {
 3507              		.loc 1 1412 9 view .LVU1133
 3508 0078 FFF7FEFF 		bl	put_fat
 3509              	.LVL410:
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, ncl);	/* Link it from the previous one if needed */
 3510              		.loc 1 1413 3 is_stmt 1 view .LVU1134
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, ncl);	/* Link it from the previous one if needed */
 3511              		.loc 1 1413 11 is_stmt 0 view .LVU1135
 3512 007c 0246     		mov	r2, r0
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, ncl);	/* Link it from the previous one if needed */
 3513              		.loc 1 1413 20 view .LVU1136
 3514 007e B0FA80F0 		clz	r0, r0
 3515              	.LVL411:
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, ncl);	/* Link it from the previous one if needed */
 3516              		.loc 1 1413 20 view .LVU1137
 3517 0082 4009     		lsrs	r0, r0, #5
 3518 0084 002F     		cmp	r7, #0
 3519 0086 08BF     		it	eq
 3520 0088 0020     		moveq	r0, #0
1413:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, ncl);	/* Link it from the previous one if needed */
 3521              		.loc 1 1413 6 view .LVU1138
 3522 008a 70B9     		cbnz	r0, .L287
 3523              	.LVL412:
 3524              	.L276:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 181


1418:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = ncl;
 3525              		.loc 1 1418 2 is_stmt 1 view .LVU1139
1418:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->last_clst = ncl;
 3526              		.loc 1 1418 5 is_stmt 0 view .LVU1140
 3527 008c A2B9     		cbnz	r2, .L277
1419:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) fs->free_clst--;
 3528              		.loc 1 1419 3 is_stmt 1 view .LVU1141
1419:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fs->free_clst <= fs->n_fatent - 2) fs->free_clst--;
 3529              		.loc 1 1419 17 is_stmt 0 view .LVU1142
 3530 008e 3461     		str	r4, [r6, #16]
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3531              		.loc 1 1420 3 is_stmt 1 view .LVU1143
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3532              		.loc 1 1420 9 is_stmt 0 view .LVU1144
 3533 0090 7269     		ldr	r2, [r6, #20]
 3534              	.LVL413:
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3535              		.loc 1 1420 26 view .LVU1145
 3536 0092 B369     		ldr	r3, [r6, #24]
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3537              		.loc 1 1420 37 view .LVU1146
 3538 0094 023B     		subs	r3, r3, #2
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3539              		.loc 1 1420 6 view .LVU1147
 3540 0096 9A42     		cmp	r2, r3
 3541 0098 01D8     		bhi	.L278
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3542              		.loc 1 1420 42 is_stmt 1 discriminator 1 view .LVU1148
1420:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fsi_flag |= 1;
 3543              		.loc 1 1420 55 is_stmt 0 discriminator 1 view .LVU1149
 3544 009a 013A     		subs	r2, r2, #1
 3545 009c 7261     		str	r2, [r6, #20]
 3546              	.L278:
1421:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 3547              		.loc 1 1421 3 is_stmt 1 view .LVU1150
1421:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 3548              		.loc 1 1421 5 is_stmt 0 view .LVU1151
 3549 009e 3379     		ldrb	r3, [r6, #4]	@ zero_extendqisi2
1421:Middlewares/Third_Party/FatFs/src/ff.c **** 	} else {
 3550              		.loc 1 1421 16 view .LVU1152
 3551 00a0 43F00103 		orr	r3, r3, #1
 3552 00a4 3371     		strb	r3, [r6, #4]
 3553 00a6 2346     		mov	r3, r4
 3554 00a8 12E0     		b	.L269
 3555              	.LVL414:
 3556              	.L287:
1414:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3557              		.loc 1 1414 4 is_stmt 1 view .LVU1153
1414:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3558              		.loc 1 1414 10 is_stmt 0 view .LVU1154
 3559 00aa 2246     		mov	r2, r4
 3560              	.LVL415:
1414:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3561              		.loc 1 1414 10 view .LVU1155
 3562 00ac 3946     		mov	r1, r7
 3563 00ae 3046     		mov	r0, r6
 3564 00b0 FFF7FEFF 		bl	put_fat
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 182


 3565              	.LVL416:
 3566 00b4 0246     		mov	r2, r0
 3567              	.LVL417:
1414:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3568              		.loc 1 1414 10 view .LVU1156
 3569 00b6 E9E7     		b	.L276
 3570              	.L277:
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3571              		.loc 1 1423 3 is_stmt 1 view .LVU1157
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3572              		.loc 1 1423 43 is_stmt 0 view .LVU1158
 3573 00b8 012A     		cmp	r2, #1
 3574 00ba 01D0     		beq	.L288
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3575              		.loc 1 1423 43 discriminator 2 view .LVU1159
 3576 00bc 0123     		movs	r3, #1
 3577              	.LVL418:
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3578              		.loc 1 1423 43 discriminator 2 view .LVU1160
 3579 00be 07E0     		b	.L269
 3580              	.LVL419:
 3581              	.L288:
1423:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3582              		.loc 1 1423 43 discriminator 1 view .LVU1161
 3583 00c0 4FF0FF33 		mov	r3, #-1
 3584 00c4 04E0     		b	.L269
 3585              	.LVL420:
 3586              	.L281:
1367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (cs == 0xFFFFFFFF) return cs;	/* A disk error occurred */
 3587              		.loc 1 1367 22 discriminator 1 view .LVU1162
 3588 00c6 0123     		movs	r3, #1
 3589 00c8 02E0     		b	.L269
 3590              	.LVL421:
 3591              	.L282:
1405:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3592              		.loc 1 1405 27 discriminator 1 view .LVU1163
 3593 00ca 0023     		movs	r3, #0
 3594 00cc 00E0     		b	.L269
 3595              	.LVL422:
 3596              	.L286:
1410:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3597              		.loc 1 1410 27 discriminator 1 view .LVU1164
 3598 00ce 0023     		movs	r3, #0
 3599              	.LVL423:
 3600              	.L269:
1427:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3601              		.loc 1 1427 1 view .LVU1165
 3602 00d0 1846     		mov	r0, r3
 3603 00d2 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
1427:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3604              		.loc 1 1427 1 view .LVU1166
 3605              		.cfi_endproc
 3606              	.LFE360:
 3608              		.section	.text.remove_chain,"ax",%progbits
 3609              		.align	1
 3610              		.syntax unified
 3611              		.thumb
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 183


 3612              		.thumb_func
 3614              	remove_chain:
 3615              	.LVL424:
 3616              	.LFB359:
1276:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 3617              		.loc 1 1276 1 is_stmt 1 view -0
 3618              		.cfi_startproc
 3619              		@ args = 0, pretend = 0, frame = 0
 3620              		@ frame_needed = 0, uses_anonymous_args = 0
1276:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_OK;
 3621              		.loc 1 1276 1 is_stmt 0 view .LVU1168
 3622 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 3623              	.LCFI27:
 3624              		.cfi_def_cfa_offset 24
 3625              		.cfi_offset 3, -24
 3626              		.cfi_offset 4, -20
 3627              		.cfi_offset 5, -16
 3628              		.cfi_offset 6, -12
 3629              		.cfi_offset 7, -8
 3630              		.cfi_offset 14, -4
 3631 0002 0C46     		mov	r4, r1
1277:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD nxt;
 3632              		.loc 1 1277 2 is_stmt 1 view .LVU1169
 3633              	.LVL425:
1278:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
 3634              		.loc 1 1278 2 view .LVU1170
1279:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT || _USE_TRIM
 3635              		.loc 1 1279 2 view .LVU1171
1279:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT || _USE_TRIM
 3636              		.loc 1 1279 9 is_stmt 0 view .LVU1172
 3637 0004 0568     		ldr	r5, [r0]
 3638              	.LVL426:
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3639              		.loc 1 1287 2 is_stmt 1 view .LVU1173
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3640              		.loc 1 1287 5 is_stmt 0 view .LVU1174
 3641 0006 0129     		cmp	r1, #1
 3642 0008 2ED9     		bls	.L294
 3643 000a 0646     		mov	r6, r0
 3644 000c 1146     		mov	r1, r2
 3645              	.LVL427:
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3646              		.loc 1 1287 28 discriminator 2 view .LVU1175
 3647 000e AB69     		ldr	r3, [r5, #24]
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3648              		.loc 1 1287 15 discriminator 2 view .LVU1176
 3649 0010 A342     		cmp	r3, r4
 3650 0012 2BD9     		bls	.L295
1290:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, pclst, 0xFFFFFFFF);
 3651              		.loc 1 1290 2 is_stmt 1 view .LVU1177
1290:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = put_fat(fs, pclst, 0xFFFFFFFF);
 3652              		.loc 1 1290 5 is_stmt 0 view .LVU1178
 3653 0014 4AB1     		cbz	r2, .L293
1291:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
 3654              		.loc 1 1291 3 is_stmt 1 view .LVU1179
1291:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
 3655              		.loc 1 1291 9 is_stmt 0 view .LVU1180
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 184


 3656 0016 4FF0FF32 		mov	r2, #-1
 3657              	.LVL428:
1291:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
 3658              		.loc 1 1291 9 view .LVU1181
 3659 001a 2846     		mov	r0, r5
 3660              	.LVL429:
1291:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) return res;
 3661              		.loc 1 1291 9 view .LVU1182
 3662 001c FFF7FEFF 		bl	put_fat
 3663              	.LVL430:
1292:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3664              		.loc 1 1292 3 is_stmt 1 view .LVU1183
1292:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3665              		.loc 1 1292 6 is_stmt 0 view .LVU1184
 3666 0020 0746     		mov	r7, r0
 3667 0022 10B1     		cbz	r0, .L293
 3668 0024 23E0     		b	.L290
 3669              	.LVL431:
 3670              	.L292:
1327:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (clst < fs->n_fatent);	/* Repeat while not the last link */
 3671              		.loc 1 1327 3 is_stmt 1 view .LVU1185
1328:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3672              		.loc 1 1328 16 view .LVU1186
 3673 0026 A242     		cmp	r2, r4
 3674 0028 21D9     		bls	.L290
 3675              	.LVL432:
 3676              	.L293:
1296:Middlewares/Third_Party/FatFs/src/ff.c **** 		nxt = get_fat(obj, clst);			/* Get cluster status */
 3677              		.loc 1 1296 2 view .LVU1187
1297:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0) break;				/* Empty cluster? */
 3678              		.loc 1 1297 3 view .LVU1188
 3679 002a 2746     		mov	r7, r4
1297:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0) break;				/* Empty cluster? */
 3680              		.loc 1 1297 9 is_stmt 0 view .LVU1189
 3681 002c 2146     		mov	r1, r4
 3682 002e 3046     		mov	r0, r6
 3683 0030 FFF7FEFF 		bl	get_fat
 3684              	.LVL433:
1298:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
 3685              		.loc 1 1298 3 is_stmt 1 view .LVU1190
1298:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
 3686              		.loc 1 1298 6 is_stmt 0 view .LVU1191
 3687 0034 0446     		mov	r4, r0
 3688              	.LVL434:
1298:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 1) return FR_INT_ERR;	/* Internal error? */
 3689              		.loc 1 1298 6 view .LVU1192
 3690 0036 E0B1     		cbz	r0, .L296
1299:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3691              		.loc 1 1299 3 is_stmt 1 view .LVU1193
1299:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3692              		.loc 1 1299 6 is_stmt 0 view .LVU1194
 3693 0038 0128     		cmp	r0, #1
 3694 003a 1CD0     		beq	.L297
1300:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3695              		.loc 1 1300 3 is_stmt 1 view .LVU1195
1300:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3696              		.loc 1 1300 6 is_stmt 0 view .LVU1196
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 185


 3697 003c B0F1FF3F 		cmp	r0, #-1
 3698 0040 1BD0     		beq	.L298
1301:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = put_fat(fs, clst, 0);		/* Mark the cluster 'free' on the FAT */
 3699              		.loc 1 1301 3 is_stmt 1 view .LVU1197
1302:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
 3700              		.loc 1 1302 4 view .LVU1198
1302:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
 3701              		.loc 1 1302 10 is_stmt 0 view .LVU1199
 3702 0042 0022     		movs	r2, #0
 3703 0044 3946     		mov	r1, r7
 3704 0046 2846     		mov	r0, r5
 3705              	.LVL435:
1302:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) return res;
 3706              		.loc 1 1302 10 view .LVU1200
 3707 0048 FFF7FEFF 		bl	put_fat
 3708              	.LVL436:
1303:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3709              		.loc 1 1303 4 is_stmt 1 view .LVU1201
1303:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3710              		.loc 1 1303 7 is_stmt 0 view .LVU1202
 3711 004c 0746     		mov	r7, r0
 3712              	.LVL437:
1303:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3713              		.loc 1 1303 7 view .LVU1203
 3714 004e 70B9     		cbnz	r0, .L290
1305:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst++;
 3715              		.loc 1 1305 3 is_stmt 1 view .LVU1204
1305:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst++;
 3716              		.loc 1 1305 9 is_stmt 0 view .LVU1205
 3717 0050 6B69     		ldr	r3, [r5, #20]
1305:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst++;
 3718              		.loc 1 1305 25 view .LVU1206
 3719 0052 AA69     		ldr	r2, [r5, #24]
1305:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst++;
 3720              		.loc 1 1305 36 view .LVU1207
 3721 0054 911E     		subs	r1, r2, #2
1305:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst++;
 3722              		.loc 1 1305 6 view .LVU1208
 3723 0056 8B42     		cmp	r3, r1
 3724 0058 E5D2     		bcs	.L292
1306:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
 3725              		.loc 1 1306 4 is_stmt 1 view .LVU1209
1306:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;
 3726              		.loc 1 1306 17 is_stmt 0 view .LVU1210
 3727 005a 0133     		adds	r3, r3, #1
 3728 005c 6B61     		str	r3, [r5, #20]
1307:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3729              		.loc 1 1307 4 is_stmt 1 view .LVU1211
1307:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3730              		.loc 1 1307 6 is_stmt 0 view .LVU1212
 3731 005e 2B79     		ldrb	r3, [r5, #4]	@ zero_extendqisi2
1307:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 3732              		.loc 1 1307 17 view .LVU1213
 3733 0060 43F00103 		orr	r3, r3, #1
 3734 0064 2B71     		strb	r3, [r5, #4]
 3735 0066 DEE7     		b	.L292
 3736              	.LVL438:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 186


 3737              	.L294:
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3738              		.loc 1 1287 47 discriminator 3 view .LVU1214
 3739 0068 0227     		movs	r7, #2
 3740 006a 00E0     		b	.L290
 3741              	.LVL439:
 3742              	.L295:
1287:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3743              		.loc 1 1287 47 discriminator 3 view .LVU1215
 3744 006c 0227     		movs	r7, #2
 3745              	.LVL440:
 3746              	.L290:
1342:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3747              		.loc 1 1342 1 view .LVU1216
 3748 006e 3846     		mov	r0, r7
 3749 0070 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 3750              	.LVL441:
 3751              	.L296:
1341:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3752              		.loc 1 1341 9 view .LVU1217
 3753 0072 0027     		movs	r7, #0
 3754              	.LVL442:
1341:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3755              		.loc 1 1341 9 view .LVU1218
 3756 0074 FBE7     		b	.L290
 3757              	.LVL443:
 3758              	.L297:
1299:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3759              		.loc 1 1299 24 discriminator 1 view .LVU1219
 3760 0076 0227     		movs	r7, #2
 3761              	.LVL444:
1299:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (nxt == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error? */
 3762              		.loc 1 1299 24 discriminator 1 view .LVU1220
 3763 0078 F9E7     		b	.L290
 3764              	.LVL445:
 3765              	.L298:
1300:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3766              		.loc 1 1300 33 discriminator 1 view .LVU1221
 3767 007a 0127     		movs	r7, #1
 3768              	.LVL446:
1300:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 3769              		.loc 1 1300 33 discriminator 1 view .LVU1222
 3770 007c F7E7     		b	.L290
 3771              		.cfi_endproc
 3772              	.LFE359:
 3774              		.section	.text.dir_remove,"ax",%progbits
 3775              		.align	1
 3776              		.syntax unified
 3777              		.thumb
 3778              		.thumb_func
 3780              	dir_remove:
 3781              	.LVL447:
 3782              	.LFB370:
2399:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 3783              		.loc 1 2399 1 is_stmt 1 view -0
 3784              		.cfi_startproc
 3785              		@ args = 0, pretend = 0, frame = 0
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 187


 3786              		@ frame_needed = 0, uses_anonymous_args = 0
2399:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 3787              		.loc 1 2399 1 is_stmt 0 view .LVU1224
 3788 0000 38B5     		push	{r3, r4, r5, lr}
 3789              	.LCFI28:
 3790              		.cfi_def_cfa_offset 16
 3791              		.cfi_offset 3, -16
 3792              		.cfi_offset 4, -12
 3793              		.cfi_offset 5, -8
 3794              		.cfi_offset 14, -4
 3795 0002 0446     		mov	r4, r0
2400:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 3796              		.loc 1 2400 2 is_stmt 1 view .LVU1225
2401:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 3797              		.loc 1 2401 2 view .LVU1226
2401:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 3798              		.loc 1 2401 9 is_stmt 0 view .LVU1227
 3799 0004 0568     		ldr	r5, [r0]
 3800              	.LVL448:
2424:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 3801              		.loc 1 2424 2 is_stmt 1 view .LVU1228
2424:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 3802              		.loc 1 2424 8 is_stmt 0 view .LVU1229
 3803 0006 C169     		ldr	r1, [r0, #28]
 3804 0008 2846     		mov	r0, r5
 3805              	.LVL449:
2424:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 3806              		.loc 1 2424 8 view .LVU1230
 3807 000a FFF7FEFF 		bl	move_window
 3808              	.LVL450:
2425:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->dir[DIR_Name] = DDEM;
 3809              		.loc 1 2425 2 is_stmt 1 view .LVU1231
2425:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->dir[DIR_Name] = DDEM;
 3810              		.loc 1 2425 5 is_stmt 0 view .LVU1232
 3811 000e 20B9     		cbnz	r0, .L301
2426:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->wflag = 1;
 3812              		.loc 1 2426 3 is_stmt 1 view .LVU1233
2426:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->wflag = 1;
 3813              		.loc 1 2426 5 is_stmt 0 view .LVU1234
 3814 0010 236A     		ldr	r3, [r4, #32]
2426:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->wflag = 1;
 3815              		.loc 1 2426 21 view .LVU1235
 3816 0012 E522     		movs	r2, #229
 3817 0014 1A70     		strb	r2, [r3]
2427:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3818              		.loc 1 2427 3 is_stmt 1 view .LVU1236
2427:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 3819              		.loc 1 2427 13 is_stmt 0 view .LVU1237
 3820 0016 0123     		movs	r3, #1
 3821 0018 EB70     		strb	r3, [r5, #3]
 3822              	.L301:
2431:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3823              		.loc 1 2431 2 is_stmt 1 view .LVU1238
2432:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3824              		.loc 1 2432 1 is_stmt 0 view .LVU1239
 3825 001a 38BD     		pop	{r3, r4, r5, pc}
2432:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 188


 3826              		.loc 1 2432 1 view .LVU1240
 3827              		.cfi_endproc
 3828              	.LFE370:
 3830              		.section	.text.dir_next,"ax",%progbits
 3831              		.align	1
 3832              		.syntax unified
 3833              		.thumb
 3834              		.thumb_func
 3836              	dir_next:
 3837              	.LVL451:
 3838              	.LFB363:
1523:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs, clst;
 3839              		.loc 1 1523 1 is_stmt 1 view -0
 3840              		.cfi_startproc
 3841              		@ args = 0, pretend = 0, frame = 0
 3842              		@ frame_needed = 0, uses_anonymous_args = 0
1523:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ofs, clst;
 3843              		.loc 1 1523 1 is_stmt 0 view .LVU1242
 3844 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 3845              	.LCFI29:
 3846              		.cfi_def_cfa_offset 32
 3847              		.cfi_offset 4, -32
 3848              		.cfi_offset 5, -28
 3849              		.cfi_offset 6, -24
 3850              		.cfi_offset 7, -20
 3851              		.cfi_offset 8, -16
 3852              		.cfi_offset 9, -12
 3853              		.cfi_offset 10, -8
 3854              		.cfi_offset 14, -4
1524:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 3855              		.loc 1 1524 2 is_stmt 1 view .LVU1243
1525:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 3856              		.loc 1 1525 2 view .LVU1244
1525:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 3857              		.loc 1 1525 9 is_stmt 0 view .LVU1245
 3858 0004 0668     		ldr	r6, [r0]
 3859              	.LVL452:
1527:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 3860              		.loc 1 1527 2 is_stmt 1 view .LVU1246
1530:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect || ofs >= (DWORD)((_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) re
 3861              		.loc 1 1530 2 view .LVU1247
1530:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!dp->sect || ofs >= (DWORD)((_FS_EXFAT && fs->fs_type == FS_EXFAT) ? MAX_DIR_EX : MAX_DIR)) re
 3862              		.loc 1 1530 10 is_stmt 0 view .LVU1248
 3863 0006 4569     		ldr	r5, [r0, #20]
 3864              	.LVL453:
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3865              		.loc 1 1531 2 is_stmt 1 view .LVU1249
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3866              		.loc 1 1531 9 is_stmt 0 view .LVU1250
 3867 0008 C369     		ldr	r3, [r0, #28]
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3868              		.loc 1 1531 5 view .LVU1251
 3869 000a 002B     		cmp	r3, #0
 3870 000c 6CD0     		beq	.L311
 3871 000e 0446     		mov	r4, r0
 3872 0010 8846     		mov	r8, r1
 3873 0012 2035     		adds	r5, r5, #32
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 189


 3874              	.LVL454:
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3875              		.loc 1 1531 16 discriminator 2 view .LVU1252
 3876 0014 B5F5001F 		cmp	r5, #2097152
 3877 0018 68D2     		bcs	.L312
1533:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect++;				/* Next sector */
 3878              		.loc 1 1533 2 is_stmt 1 view .LVU1253
1533:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect++;				/* Next sector */
 3879              		.loc 1 1533 10 is_stmt 0 view .LVU1254
 3880 001a C5F30807 		ubfx	r7, r5, #0, #9
1533:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->sect++;				/* Next sector */
 3881              		.loc 1 1533 5 view .LVU1255
 3882 001e 3FB9     		cbnz	r7, .L305
1534:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3883              		.loc 1 1534 3 is_stmt 1 view .LVU1256
1534:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3884              		.loc 1 1534 11 is_stmt 0 view .LVU1257
 3885 0020 0133     		adds	r3, r3, #1
 3886 0022 C361     		str	r3, [r0, #28]
1536:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
 3887              		.loc 1 1536 3 is_stmt 1 view .LVU1258
1536:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
 3888              		.loc 1 1536 10 is_stmt 0 view .LVU1259
 3889 0024 8169     		ldr	r1, [r0, #24]
 3890              	.LVL455:
1536:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs / SZDIRE >= fs->n_rootdir) {	/* Report EOT if it reached end of static table */
 3891              		.loc 1 1536 6 view .LVU1260
 3892 0026 79B9     		cbnz	r1, .L306
1537:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
 3893              		.loc 1 1537 4 is_stmt 1 view .LVU1261
1537:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
 3894              		.loc 1 1537 26 is_stmt 0 view .LVU1262
 3895 0028 3389     		ldrh	r3, [r6, #8]
1537:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = 0; return FR_NO_FILE;
 3896              		.loc 1 1537 7 view .LVU1263
 3897 002a B3EB551F 		cmp	r3, r5, lsr #5
 3898 002e 07D9     		bls	.L321
 3899              	.LVL456:
 3900              	.L305:
1574:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + ofs % SS(fs);	/* Pointer to the entry in the win[] */
 3901              		.loc 1 1574 2 is_stmt 1 view .LVU1264
1574:Middlewares/Third_Party/FatFs/src/ff.c **** 	dp->dir = fs->win + ofs % SS(fs);	/* Pointer to the entry in the win[] */
 3902              		.loc 1 1574 11 is_stmt 0 view .LVU1265
 3903 0030 6561     		str	r5, [r4, #20]
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3904              		.loc 1 1575 2 is_stmt 1 view .LVU1266
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3905              		.loc 1 1575 12 is_stmt 0 view .LVU1267
 3906 0032 06F13403 		add	r3, r6, #52
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3907              		.loc 1 1575 20 view .LVU1268
 3908 0036 3B44     		add	r3, r3, r7
1575:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3909              		.loc 1 1575 10 view .LVU1269
 3910 0038 2362     		str	r3, [r4, #32]
1577:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3911              		.loc 1 1577 2 is_stmt 1 view .LVU1270
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 190


1577:Middlewares/Third_Party/FatFs/src/ff.c **** }
 3912              		.loc 1 1577 9 is_stmt 0 view .LVU1271
 3913 003a 0020     		movs	r0, #0
 3914              	.LVL457:
 3915              	.L304:
1578:Middlewares/Third_Party/FatFs/src/ff.c **** 
 3916              		.loc 1 1578 1 view .LVU1272
 3917 003c BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 3918              	.LVL458:
 3919              	.L321:
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3920              		.loc 1 1538 5 is_stmt 1 view .LVU1273
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3921              		.loc 1 1538 14 is_stmt 0 view .LVU1274
 3922 0040 0023     		movs	r3, #0
 3923 0042 C361     		str	r3, [r0, #28]
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3924              		.loc 1 1538 19 is_stmt 1 view .LVU1275
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3925              		.loc 1 1538 26 is_stmt 0 view .LVU1276
 3926 0044 0420     		movs	r0, #4
 3927              	.LVL459:
1538:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 3928              		.loc 1 1538 26 view .LVU1277
 3929 0046 F9E7     		b	.L304
 3930              	.LVL460:
 3931              	.L306:
1542:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);			/* Get next cluster */
 3932              		.loc 1 1542 4 is_stmt 1 view .LVU1278
1542:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);			/* Get next cluster */
 3933              		.loc 1 1542 27 is_stmt 0 view .LVU1279
 3934 0048 7389     		ldrh	r3, [r6, #10]
1542:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);			/* Get next cluster */
 3935              		.loc 1 1542 35 view .LVU1280
 3936 004a 013B     		subs	r3, r3, #1
1542:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = get_fat(&dp->obj, dp->clust);			/* Get next cluster */
 3937              		.loc 1 1542 7 view .LVU1281
 3938 004c 13EA5529 		ands	r9, r3, r5, lsr #9
 3939 0050 EED1     		bne	.L305
1543:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;				/* Internal error */
 3940              		.loc 1 1543 5 is_stmt 1 view .LVU1282
1543:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;				/* Internal error */
 3941              		.loc 1 1543 12 is_stmt 0 view .LVU1283
 3942 0052 FFF7FEFF 		bl	get_fat
 3943              	.LVL461:
1543:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst <= 1) return FR_INT_ERR;				/* Internal error */
 3944              		.loc 1 1543 12 view .LVU1284
 3945 0056 8246     		mov	r10, r0
 3946              	.LVL462:
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;		/* Disk error */
 3947              		.loc 1 1544 5 is_stmt 1 view .LVU1285
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;		/* Disk error */
 3948              		.loc 1 1544 8 is_stmt 0 view .LVU1286
 3949 0058 0128     		cmp	r0, #1
 3950 005a 49D9     		bls	.L313
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= fs->n_fatent) {						/* Reached end of dynamic table */
 3951              		.loc 1 1545 5 is_stmt 1 view .LVU1287
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 191


1545:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= fs->n_fatent) {						/* Reached end of dynamic table */
 3952              		.loc 1 1545 8 is_stmt 0 view .LVU1288
 3953 005c B0F1FF3F 		cmp	r0, #-1
 3954 0060 48D0     		beq	.L314
1546:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 3955              		.loc 1 1546 5 is_stmt 1 view .LVU1289
1546:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 3956              		.loc 1 1546 19 is_stmt 0 view .LVU1290
 3957 0062 B369     		ldr	r3, [r6, #24]
1546:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 3958              		.loc 1 1546 8 view .LVU1291
 3959 0064 8342     		cmp	r3, r0
 3960 0066 37D8     		bhi	.L307
1548:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->sect = 0; return FR_NO_FILE;
 3961              		.loc 1 1548 6 is_stmt 1 view .LVU1292
1548:Middlewares/Third_Party/FatFs/src/ff.c **** 						dp->sect = 0; return FR_NO_FILE;
 3962              		.loc 1 1548 9 is_stmt 0 view .LVU1293
 3963 0068 B8F1000F 		cmp	r8, #0
 3964 006c 11D0     		beq	.L322
1551:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 3965              		.loc 1 1551 6 is_stmt 1 view .LVU1294
1551:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 3966              		.loc 1 1551 13 is_stmt 0 view .LVU1295
 3967 006e A169     		ldr	r1, [r4, #24]
 3968 0070 2046     		mov	r0, r4
 3969              	.LVL463:
1551:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) return FR_DENIED;			/* No free cluster */
 3970              		.loc 1 1551 13 view .LVU1296
 3971 0072 FFF7FEFF 		bl	create_chain
 3972              	.LVL464:
1552:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 3973              		.loc 1 1552 6 is_stmt 1 view .LVU1297
1552:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 3974              		.loc 1 1552 9 is_stmt 0 view .LVU1298
 3975 0076 8246     		mov	r10, r0
 3976 0078 0028     		cmp	r0, #0
 3977 007a 3DD0     		beq	.L315
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 3978              		.loc 1 1553 6 is_stmt 1 view .LVU1299
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 3979              		.loc 1 1553 9 is_stmt 0 view .LVU1300
 3980 007c 0128     		cmp	r0, #1
 3981 007e 3DD0     		beq	.L316
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up the stretched table */
 3982              		.loc 1 1554 6 is_stmt 1 view .LVU1301
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up the stretched table */
 3983              		.loc 1 1554 9 is_stmt 0 view .LVU1302
 3984 0080 B0F1FF3F 		cmp	r0, #-1
 3985 0084 3CD0     		beq	.L317
1556:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (sync_window(fs) != FR_OK) return FR_DISK_ERR;	/* Flush disk access window */
 3986              		.loc 1 1556 6 is_stmt 1 view .LVU1303
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
 3987              		.loc 1 1557 6 view .LVU1304
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
 3988              		.loc 1 1557 10 is_stmt 0 view .LVU1305
 3989 0086 3046     		mov	r0, r6
 3990              	.LVL465:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 192


1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
 3991              		.loc 1 1557 10 view .LVU1306
 3992 0088 FFF7FEFF 		bl	sync_window
 3993              	.LVL466:
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
 3994              		.loc 1 1557 9 discriminator 1 view .LVU1307
 3995 008c 28B1     		cbz	r0, .L323
1557:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(fs->win, 0, SS(fs));				/* Clear window buffer */
 3996              		.loc 1 1557 43 discriminator 1 view .LVU1308
 3997 008e 0120     		movs	r0, #1
 3998 0090 D4E7     		b	.L304
 3999              	.LVL467:
 4000              	.L322:
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4001              		.loc 1 1549 7 is_stmt 1 view .LVU1309
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4002              		.loc 1 1549 16 is_stmt 0 view .LVU1310
 4003 0092 0023     		movs	r3, #0
 4004 0094 E361     		str	r3, [r4, #28]
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4005              		.loc 1 1549 21 is_stmt 1 view .LVU1311
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4006              		.loc 1 1549 28 is_stmt 0 view .LVU1312
 4007 0096 0420     		movs	r0, #4
 4008              	.LVL468:
1549:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4009              		.loc 1 1549 28 view .LVU1313
 4010 0098 D0E7     		b	.L304
 4011              	.L323:
1558:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (n = 0, fs->winsect = clust2sect(fs, clst); n < fs->csize; n++, fs->winsect++) {	/* Fill t
 4012              		.loc 1 1558 6 is_stmt 1 view .LVU1314
 4013 009a 4FF40072 		mov	r2, #512
 4014 009e 0021     		movs	r1, #0
 4015 00a0 06F13400 		add	r0, r6, #52
 4016 00a4 FFF7FEFF 		bl	mem_set
 4017              	.LVL469:
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4018              		.loc 1 1559 6 view .LVU1315
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4019              		.loc 1 1559 32 is_stmt 0 view .LVU1316
 4020 00a8 5146     		mov	r1, r10
 4021 00aa 3046     		mov	r0, r6
 4022 00ac FFF7FEFF 		bl	clust2sect
 4023              	.LVL470:
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4024              		.loc 1 1559 30 discriminator 1 view .LVU1317
 4025 00b0 3063     		str	r0, [r6, #48]
 4026              	.LVL471:
 4027              	.L309:
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4028              		.loc 1 1559 56 is_stmt 1 discriminator 1 view .LVU1318
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4029              		.loc 1 1559 60 is_stmt 0 discriminator 1 view .LVU1319
 4030 00b2 7389     		ldrh	r3, [r6, #10]
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4031              		.loc 1 1559 56 discriminator 1 view .LVU1320
 4032 00b4 9945     		cmp	r9, r3
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 193


 4033 00b6 0BD2     		bcs	.L324
1560:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (sync_window(fs) != FR_OK) return FR_DISK_ERR;
 4034              		.loc 1 1560 7 is_stmt 1 view .LVU1321
1560:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (sync_window(fs) != FR_OK) return FR_DISK_ERR;
 4035              		.loc 1 1560 17 is_stmt 0 view .LVU1322
 4036 00b8 0123     		movs	r3, #1
 4037 00ba F370     		strb	r3, [r6, #3]
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4038              		.loc 1 1561 7 is_stmt 1 view .LVU1323
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4039              		.loc 1 1561 11 is_stmt 0 view .LVU1324
 4040 00bc 3046     		mov	r0, r6
 4041 00be FFF7FEFF 		bl	sync_window
 4042              	.LVL472:
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4043              		.loc 1 1561 10 discriminator 1 view .LVU1325
 4044 00c2 F8B9     		cbnz	r0, .L319
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4045              		.loc 1 1559 72 is_stmt 1 discriminator 2 view .LVU1326
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4046              		.loc 1 1559 70 is_stmt 0 discriminator 2 view .LVU1327
 4047 00c4 09F10109 		add	r9, r9, #1
 4048              	.LVL473:
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4049              		.loc 1 1559 76 discriminator 2 view .LVU1328
 4050 00c8 336B     		ldr	r3, [r6, #48]
1559:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 4051              		.loc 1 1559 85 discriminator 2 view .LVU1329
 4052 00ca 0133     		adds	r3, r3, #1
 4053 00cc 3363     		str	r3, [r6, #48]
 4054 00ce F0E7     		b	.L309
 4055              	.L324:
1563:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 4056              		.loc 1 1563 6 is_stmt 1 view .LVU1330
1563:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 4057              		.loc 1 1563 8 is_stmt 0 view .LVU1331
 4058 00d0 336B     		ldr	r3, [r6, #48]
1563:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 4059              		.loc 1 1563 18 view .LVU1332
 4060 00d2 A3EB0903 		sub	r3, r3, r9
 4061 00d6 3363     		str	r3, [r6, #48]
 4062              	.LVL474:
 4063              	.L307:
1569:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = clust2sect(fs, clst);
 4064              		.loc 1 1569 5 is_stmt 1 view .LVU1333
1569:Middlewares/Third_Party/FatFs/src/ff.c **** 				dp->sect = clust2sect(fs, clst);
 4065              		.loc 1 1569 15 is_stmt 0 view .LVU1334
 4066 00d8 C4F818A0 		str	r10, [r4, #24]
1570:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4067              		.loc 1 1570 5 is_stmt 1 view .LVU1335
1570:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4068              		.loc 1 1570 16 is_stmt 0 view .LVU1336
 4069 00dc 5146     		mov	r1, r10
 4070 00de 3046     		mov	r0, r6
 4071 00e0 FFF7FEFF 		bl	clust2sect
 4072              	.LVL475:
1570:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 194


 4073              		.loc 1 1570 14 discriminator 1 view .LVU1337
 4074 00e4 E061     		str	r0, [r4, #28]
 4075 00e6 A3E7     		b	.L305
 4076              	.LVL476:
 4077              	.L311:
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4078              		.loc 1 1531 105 discriminator 3 view .LVU1338
 4079 00e8 0420     		movs	r0, #4
 4080              	.LVL477:
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4081              		.loc 1 1531 105 discriminator 3 view .LVU1339
 4082 00ea A7E7     		b	.L304
 4083              	.LVL478:
 4084              	.L312:
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4085              		.loc 1 1531 105 discriminator 3 view .LVU1340
 4086 00ec 0420     		movs	r0, #4
 4087              	.LVL479:
1531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4088              		.loc 1 1531 105 discriminator 3 view .LVU1341
 4089 00ee A5E7     		b	.L304
 4090              	.LVL480:
 4091              	.L313:
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;		/* Disk error */
 4092              		.loc 1 1544 27 discriminator 1 view .LVU1342
 4093 00f0 0220     		movs	r0, #2
 4094              	.LVL481:
1544:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) return FR_DISK_ERR;		/* Disk error */
 4095              		.loc 1 1544 27 discriminator 1 view .LVU1343
 4096 00f2 A3E7     		b	.L304
 4097              	.LVL482:
 4098              	.L314:
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= fs->n_fatent) {						/* Reached end of dynamic table */
 4099              		.loc 1 1545 36 discriminator 1 view .LVU1344
 4100 00f4 0120     		movs	r0, #1
 4101              	.LVL483:
1545:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst >= fs->n_fatent) {						/* Reached end of dynamic table */
 4102              		.loc 1 1545 36 discriminator 1 view .LVU1345
 4103 00f6 A1E7     		b	.L304
 4104              	.LVL484:
 4105              	.L315:
1552:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 4106              		.loc 1 1552 28 discriminator 1 view .LVU1346
 4107 00f8 0720     		movs	r0, #7
 4108              	.LVL485:
1552:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) return FR_INT_ERR;			/* Internal error */
 4109              		.loc 1 1552 28 discriminator 1 view .LVU1347
 4110 00fa 9FE7     		b	.L304
 4111              	.LVL486:
 4112              	.L316:
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4113              		.loc 1 1553 28 discriminator 1 view .LVU1348
 4114 00fc 0220     		movs	r0, #2
 4115              	.LVL487:
1553:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) return FR_DISK_ERR;	/* Disk error */
 4116              		.loc 1 1553 28 discriminator 1 view .LVU1349
 4117 00fe 9DE7     		b	.L304
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 195


 4118              	.LVL488:
 4119              	.L317:
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up the stretched table */
 4120              		.loc 1 1554 37 discriminator 1 view .LVU1350
 4121 0100 0120     		movs	r0, #1
 4122              	.LVL489:
1554:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Clean-up the stretched table */
 4123              		.loc 1 1554 37 discriminator 1 view .LVU1351
 4124 0102 9BE7     		b	.L304
 4125              	.LVL490:
 4126              	.L319:
1561:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4127              		.loc 1 1561 44 discriminator 1 view .LVU1352
 4128 0104 0120     		movs	r0, #1
 4129 0106 99E7     		b	.L304
 4130              		.cfi_endproc
 4131              	.LFE363:
 4133              		.section	.text.dir_find,"ax",%progbits
 4134              		.align	1
 4135              		.syntax unified
 4136              		.thumb
 4137              		.thumb_func
 4139              	dir_find:
 4140              	.LVL491:
 4141              	.LFB368:
2213:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4142              		.loc 1 2213 1 is_stmt 1 view -0
 4143              		.cfi_startproc
 4144              		@ args = 0, pretend = 0, frame = 0
 4145              		@ frame_needed = 0, uses_anonymous_args = 0
2213:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4146              		.loc 1 2213 1 is_stmt 0 view .LVU1354
 4147 0000 70B5     		push	{r4, r5, r6, lr}
 4148              	.LCFI30:
 4149              		.cfi_def_cfa_offset 16
 4150              		.cfi_offset 4, -16
 4151              		.cfi_offset 5, -12
 4152              		.cfi_offset 6, -8
 4153              		.cfi_offset 14, -4
 4154 0002 0446     		mov	r4, r0
2214:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 4155              		.loc 1 2214 2 is_stmt 1 view .LVU1355
2215:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE c;
 4156              		.loc 1 2215 2 view .LVU1356
2215:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE c;
 4157              		.loc 1 2215 9 is_stmt 0 view .LVU1357
 4158 0004 0668     		ldr	r6, [r0]
 4159              	.LVL492:
2216:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
 4160              		.loc 1 2216 2 is_stmt 1 view .LVU1358
2221:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
 4161              		.loc 1 2221 2 view .LVU1359
2221:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK) return res;
 4162              		.loc 1 2221 8 is_stmt 0 view .LVU1360
 4163 0006 0021     		movs	r1, #0
 4164 0008 FFF7FEFF 		bl	dir_sdi
 4165              	.LVL493:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 196


2222:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 4166              		.loc 1 2222 2 is_stmt 1 view .LVU1361
2222:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 4167              		.loc 1 2222 5 is_stmt 0 view .LVU1362
 4168 000c 0546     		mov	r5, r0
 4169 000e 40B1     		cbz	r0, .L328
 4170              	.LVL494:
 4171              	.L326:
2281:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4172              		.loc 1 2281 1 view .LVU1363
 4173 0010 2846     		mov	r0, r5
 4174 0012 70BD     		pop	{r4, r5, r6, pc}
 4175              	.LVL495:
 4176              	.L327:
2277:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (res == FR_OK);
 4177              		.loc 1 2277 3 is_stmt 1 view .LVU1364
2277:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (res == FR_OK);
 4178              		.loc 1 2277 9 is_stmt 0 view .LVU1365
 4179 0014 0021     		movs	r1, #0
 4180 0016 2046     		mov	r0, r4
 4181 0018 FFF7FEFF 		bl	dir_next
 4182              	.LVL496:
2278:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4183              		.loc 1 2278 15 is_stmt 1 view .LVU1366
 4184 001c 0546     		mov	r5, r0
 4185 001e 0028     		cmp	r0, #0
 4186 0020 F6D1     		bne	.L326
 4187              	.LVL497:
 4188              	.L328:
2247:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4189              		.loc 1 2247 2 view .LVU1367
2248:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4190              		.loc 1 2248 3 view .LVU1368
2248:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4191              		.loc 1 2248 9 is_stmt 0 view .LVU1369
 4192 0022 E169     		ldr	r1, [r4, #28]
 4193 0024 3046     		mov	r0, r6
 4194              	.LVL498:
2248:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4195              		.loc 1 2248 9 view .LVU1370
 4196 0026 FFF7FEFF 		bl	move_window
 4197              	.LVL499:
2249:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];
 4198              		.loc 1 2249 3 is_stmt 1 view .LVU1371
2249:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];
 4199              		.loc 1 2249 6 is_stmt 0 view .LVU1372
 4200 002a 0546     		mov	r5, r0
 4201 002c 0028     		cmp	r0, #0
 4202 002e EFD1     		bne	.L326
2250:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 4203              		.loc 1 2250 3 is_stmt 1 view .LVU1373
2250:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 4204              		.loc 1 2250 9 is_stmt 0 view .LVU1374
 4205 0030 206A     		ldr	r0, [r4, #32]
 4206              	.LVL500:
2250:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) { res = FR_NO_FILE; break; }	/* Reached to end of table */
 4207              		.loc 1 2250 5 view .LVU1375
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 197


 4208 0032 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
 4209              	.LVL501:
2251:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4210              		.loc 1 2251 3 is_stmt 1 view .LVU1376
2251:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4211              		.loc 1 2251 6 is_stmt 0 view .LVU1377
 4212 0034 7BB1     		cbz	r3, .L329
2274:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(dp->dir[DIR_Attr] & AM_VOL) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* Is it a valid entry
 4213              		.loc 1 2274 3 is_stmt 1 view .LVU1378
2274:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(dp->dir[DIR_Attr] & AM_VOL) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* Is it a valid entry
 4214              		.loc 1 2274 25 is_stmt 0 view .LVU1379
 4215 0036 C37A     		ldrb	r3, [r0, #11]	@ zero_extendqisi2
2274:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(dp->dir[DIR_Attr] & AM_VOL) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* Is it a valid entry
 4216              		.loc 1 2274 36 view .LVU1380
 4217 0038 03F03F03 		and	r3, r3, #63
2274:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!(dp->dir[DIR_Attr] & AM_VOL) && !mem_cmp(dp->dir, dp->fn, 11)) break;	/* Is it a valid entry
 4218              		.loc 1 2274 16 view .LVU1381
 4219 003c A371     		strb	r3, [r4, #6]
 4220              	.LVL502:
2275:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4221              		.loc 1 2275 3 is_stmt 1 view .LVU1382
2275:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4222              		.loc 1 2275 16 is_stmt 0 view .LVU1383
 4223 003e C37A     		ldrb	r3, [r0, #11]	@ zero_extendqisi2
2275:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4224              		.loc 1 2275 6 view .LVU1384
 4225 0040 13F0080F 		tst	r3, #8
 4226 0044 E6D1     		bne	.L327
2275:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4227              		.loc 1 2275 41 discriminator 1 view .LVU1385
 4228 0046 0B22     		movs	r2, #11
 4229 0048 04F12401 		add	r1, r4, #36
 4230 004c FFF7FEFF 		bl	mem_cmp
 4231              	.LVL503:
2275:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4232              		.loc 1 2275 37 discriminator 1 view .LVU1386
 4233 0050 0028     		cmp	r0, #0
 4234 0052 DFD1     		bne	.L327
 4235 0054 DCE7     		b	.L326
 4236              	.LVL504:
 4237              	.L329:
2251:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4238              		.loc 1 2251 21 discriminator 1 view .LVU1387
 4239 0056 0425     		movs	r5, #4
 4240              	.LVL505:
2251:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4241              		.loc 1 2251 21 discriminator 1 view .LVU1388
 4242 0058 DAE7     		b	.L326
 4243              		.cfi_endproc
 4244              	.LFE368:
 4246              		.section	.text.follow_path,"ax",%progbits
 4247              		.align	1
 4248              		.syntax unified
 4249              		.thumb
 4250              		.thumb_func
 4252              	follow_path:
 4253              	.LVL506:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 198


 4254              	.LFB373:
2817:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4255              		.loc 1 2817 1 is_stmt 1 view -0
 4256              		.cfi_startproc
 4257              		@ args = 0, pretend = 0, frame = 8
 4258              		@ frame_needed = 0, uses_anonymous_args = 0
2817:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4259              		.loc 1 2817 1 is_stmt 0 view .LVU1390
 4260 0000 30B5     		push	{r4, r5, lr}
 4261              	.LCFI31:
 4262              		.cfi_def_cfa_offset 12
 4263              		.cfi_offset 4, -12
 4264              		.cfi_offset 5, -8
 4265              		.cfi_offset 14, -4
 4266 0002 83B0     		sub	sp, sp, #12
 4267              	.LCFI32:
 4268              		.cfi_def_cfa_offset 24
 4269 0004 0446     		mov	r4, r0
 4270 0006 0191     		str	r1, [sp, #4]
2818:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE ns;
 4271              		.loc 1 2818 2 is_stmt 1 view .LVU1391
2819:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID *obj = &dp->obj;
 4272              		.loc 1 2819 2 view .LVU1392
2820:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = obj->fs;
 4273              		.loc 1 2820 2 view .LVU1393
 4274              	.LVL507:
2821:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4275              		.loc 1 2821 2 view .LVU1394
2821:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4276              		.loc 1 2821 9 is_stmt 0 view .LVU1395
 4277 0008 0568     		ldr	r5, [r0]
 4278              	.LVL508:
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 4279              		.loc 1 2830 3 is_stmt 1 view .LVU1396
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 4280              		.loc 1 2830 9 is_stmt 0 view .LVU1397
 4281 000a 01E0     		b	.L332
 4282              	.L333:
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 4283              		.loc 1 2830 41 is_stmt 1 discriminator 2 view .LVU1398
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 4284              		.loc 1 2830 45 is_stmt 0 discriminator 2 view .LVU1399
 4285 000c 0133     		adds	r3, r3, #1
 4286 000e 0193     		str	r3, [sp, #4]
 4287              	.L332:
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 4288              		.loc 1 2830 23 is_stmt 1 discriminator 1 view .LVU1400
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 4289              		.loc 1 2830 10 is_stmt 0 discriminator 1 view .LVU1401
 4290 0010 019B     		ldr	r3, [sp, #4]
 4291 0012 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
2830:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->sclust = 0;					/* Start from root directory */
 4292              		.loc 1 2830 23 discriminator 1 view .LVU1402
 4293 0014 2F2A     		cmp	r2, #47
 4294 0016 F9D0     		beq	.L333
 4295 0018 5C2A     		cmp	r2, #92
 4296 001a F7D0     		beq	.L333
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 199


2831:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4297              		.loc 1 2831 3 is_stmt 1 view .LVU1403
2831:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4298              		.loc 1 2831 15 is_stmt 0 view .LVU1404
 4299 001c 0022     		movs	r2, #0
 4300 001e A260     		str	r2, [r4, #8]
2850:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
 4301              		.loc 1 2850 2 is_stmt 1 view .LVU1405
2850:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
 4302              		.loc 1 2850 12 is_stmt 0 view .LVU1406
 4303 0020 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
2850:Middlewares/Third_Party/FatFs/src/ff.c **** 		dp->fn[NSFLAG] = NS_NONAME;
 4304              		.loc 1 2850 5 view .LVU1407
 4305 0022 1F2B     		cmp	r3, #31
 4306 0024 1ED9     		bls	.L340
 4307              	.LVL509:
 4308              	.L334:
2855:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
 4309              		.loc 1 2855 3 is_stmt 1 view .LVU1408
2856:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 4310              		.loc 1 2856 4 view .LVU1409
2856:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 4311              		.loc 1 2856 10 is_stmt 0 view .LVU1410
 4312 0026 01A9     		add	r1, sp, #4
 4313 0028 2046     		mov	r0, r4
 4314 002a FFF7FEFF 		bl	create_name
 4315              	.LVL510:
2857:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Find an object with the segment name */
 4316              		.loc 1 2857 4 is_stmt 1 view .LVU1411
2857:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_find(dp);				/* Find an object with the segment name */
 4317              		.loc 1 2857 7 is_stmt 0 view .LVU1412
 4318 002e 0346     		mov	r3, r0
 4319 0030 00BB     		cbnz	r0, .L335
2858:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
 4320              		.loc 1 2858 4 is_stmt 1 view .LVU1413
2858:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
 4321              		.loc 1 2858 10 is_stmt 0 view .LVU1414
 4322 0032 2046     		mov	r0, r4
 4323              	.LVL511:
2858:Middlewares/Third_Party/FatFs/src/ff.c **** 			ns = dp->fn[NSFLAG];
 4324              		.loc 1 2858 10 view .LVU1415
 4325 0034 FFF7FEFF 		bl	dir_find
 4326              	.LVL512:
2859:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 4327              		.loc 1 2859 4 is_stmt 1 view .LVU1416
2859:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {				/* Failed to find the object */
 4328              		.loc 1 2859 7 is_stmt 0 view .LVU1417
 4329 0038 94F82F20 		ldrb	r2, [r4, #47]	@ zero_extendqisi2
 4330              	.LVL513:
2860:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
 4331              		.loc 1 2860 4 is_stmt 1 view .LVU1418
2860:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {	/* Object is not found */
 4332              		.loc 1 2860 7 is_stmt 0 view .LVU1419
 4333 003c 0346     		mov	r3, r0
 4334 003e E0B9     		cbnz	r0, .L341
2872:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Get into the sub-directory */
 4335              		.loc 1 2872 4 is_stmt 1 view .LVU1420
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 200


2872:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Get into the sub-directory */
 4336              		.loc 1 2872 7 is_stmt 0 view .LVU1421
 4337 0040 12F0040F 		tst	r2, #4
 4338 0044 16D1     		bne	.L335
2874:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_PATH; break;
 4339              		.loc 1 2874 4 is_stmt 1 view .LVU1422
2874:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_PATH; break;
 4340              		.loc 1 2874 13 is_stmt 0 view .LVU1423
 4341 0046 A379     		ldrb	r3, [r4, #6]	@ zero_extendqisi2
2874:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_NO_PATH; break;
 4342              		.loc 1 2874 7 view .LVU1424
 4343 0048 13F0100F 		tst	r3, #16
 4344 004c 1CD0     		beq	.L338
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4345              		.loc 1 2888 5 is_stmt 1 view .LVU1425
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4346              		.loc 1 2888 32 is_stmt 0 view .LVU1426
 4347 004e 05F13401 		add	r1, r5, #52
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4348              		.loc 1 2888 44 view .LVU1427
 4349 0052 6369     		ldr	r3, [r4, #20]
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4350              		.loc 1 2888 51 view .LVU1428
 4351 0054 C3F30803 		ubfx	r3, r3, #0, #9
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4352              		.loc 1 2888 19 view .LVU1429
 4353 0058 1944     		add	r1, r1, r3
 4354 005a 2846     		mov	r0, r5
 4355              	.LVL514:
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4356              		.loc 1 2888 19 view .LVU1430
 4357 005c FFF7FEFF 		bl	ld_clust
 4358              	.LVL515:
2888:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4359              		.loc 1 2888 17 discriminator 1 view .LVU1431
 4360 0060 A060     		str	r0, [r4, #8]
2855:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = create_name(dp, &path);	/* Get a segment name of the path */
 4361              		.loc 1 2855 3 is_stmt 1 view .LVU1432
2856:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 4362              		.loc 1 2856 8 is_stmt 0 view .LVU1433
 4363 0062 E0E7     		b	.L334
 4364              	.LVL516:
 4365              	.L340:
2851:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, 0);
 4366              		.loc 1 2851 3 is_stmt 1 view .LVU1434
2851:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = dir_sdi(dp, 0);
 4367              		.loc 1 2851 18 is_stmt 0 view .LVU1435
 4368 0064 8023     		movs	r3, #128
 4369 0066 84F82F30 		strb	r3, [r4, #47]
2852:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4370              		.loc 1 2852 3 is_stmt 1 view .LVU1436
2852:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4371              		.loc 1 2852 9 is_stmt 0 view .LVU1437
 4372 006a 1146     		mov	r1, r2
 4373              	.LVL517:
2852:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4374              		.loc 1 2852 9 view .LVU1438
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 201


 4375 006c 2046     		mov	r0, r4
 4376              	.LVL518:
2852:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4377              		.loc 1 2852 9 view .LVU1439
 4378 006e FFF7FEFF 		bl	dir_sdi
 4379              	.LVL519:
 4380 0072 0346     		mov	r3, r0
 4381              	.LVL520:
 4382              	.L335:
2893:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4383              		.loc 1 2893 2 is_stmt 1 view .LVU1440
2894:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4384              		.loc 1 2894 1 is_stmt 0 view .LVU1441
 4385 0074 1846     		mov	r0, r3
 4386 0076 03B0     		add	sp, sp, #12
 4387              	.LCFI33:
 4388              		.cfi_remember_state
 4389              		.cfi_def_cfa_offset 12
 4390              		@ sp needed
 4391 0078 30BD     		pop	{r4, r5, pc}
 4392              	.LVL521:
 4393              	.L341:
 4394              	.LCFI34:
 4395              		.cfi_restore_state
2861:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, stay there */
 4396              		.loc 1 2861 5 is_stmt 1 view .LVU1442
2861:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (_FS_RPATH && (ns & NS_DOT)) {	/* If dot entry is not exist, stay there */
 4397              		.loc 1 2861 8 is_stmt 0 view .LVU1443
 4398 007a 0428     		cmp	r0, #4
 4399 007c FAD1     		bne	.L335
2862:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!(ns & NS_LAST)) continue;	/* Continue to follow if not last segment */
 4400              		.loc 1 2862 6 is_stmt 1 view .LVU1444
2867:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4401              		.loc 1 2867 7 view .LVU1445
2867:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4402              		.loc 1 2867 10 is_stmt 0 view .LVU1446
 4403 007e 12F0040F 		tst	r2, #4
 4404 0082 F7D1     		bne	.L335
2867:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 4405              		.loc 1 2867 32 discriminator 1 view .LVU1447
 4406 0084 0523     		movs	r3, #5
 4407 0086 F5E7     		b	.L335
 4408              	.L338:
2875:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4409              		.loc 1 2875 9 view .LVU1448
 4410 0088 0523     		movs	r3, #5
 4411 008a F3E7     		b	.L335
 4412              		.cfi_endproc
 4413              	.LFE373:
 4415              		.section	.text.dir_alloc,"ax",%progbits
 4416              		.align	1
 4417              		.syntax unified
 4418              		.thumb
 4419              		.thumb_func
 4421              	dir_alloc:
 4422              	.LVL522:
 4423              	.LFB364:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 202


1593:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4424              		.loc 1 1593 1 is_stmt 1 view -0
 4425              		.cfi_startproc
 4426              		@ args = 0, pretend = 0, frame = 0
 4427              		@ frame_needed = 0, uses_anonymous_args = 0
1593:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4428              		.loc 1 1593 1 is_stmt 0 view .LVU1450
 4429 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4430              	.LCFI35:
 4431              		.cfi_def_cfa_offset 24
 4432              		.cfi_offset 3, -24
 4433              		.cfi_offset 4, -20
 4434              		.cfi_offset 5, -16
 4435              		.cfi_offset 6, -12
 4436              		.cfi_offset 7, -8
 4437              		.cfi_offset 14, -4
 4438 0002 0446     		mov	r4, r0
 4439 0004 0E46     		mov	r6, r1
1594:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
 4440              		.loc 1 1594 2 is_stmt 1 view .LVU1451
1595:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 4441              		.loc 1 1595 2 view .LVU1452
1596:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4442              		.loc 1 1596 2 view .LVU1453
1596:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4443              		.loc 1 1596 9 is_stmt 0 view .LVU1454
 4444 0006 0768     		ldr	r7, [r0]
 4445              	.LVL523:
1599:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 4446              		.loc 1 1599 2 is_stmt 1 view .LVU1455
1599:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 4447              		.loc 1 1599 8 is_stmt 0 view .LVU1456
 4448 0008 0021     		movs	r1, #0
 4449              	.LVL524:
1599:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 4450              		.loc 1 1599 8 view .LVU1457
 4451 000a FFF7FEFF 		bl	dir_sdi
 4452              	.LVL525:
1600:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = 0;
 4453              		.loc 1 1600 2 is_stmt 1 view .LVU1458
1600:Middlewares/Third_Party/FatFs/src/ff.c **** 		n = 0;
 4454              		.loc 1 1600 5 is_stmt 0 view .LVU1459
 4455 000e 0246     		mov	r2, r0
 4456 0010 B8B9     		cbnz	r0, .L343
1601:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 4457              		.loc 1 1601 5 view .LVU1460
 4458 0012 0025     		movs	r5, #0
 4459 0014 06E0     		b	.L345
 4460              	.LVL526:
 4461              	.L347:
1612:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4462              		.loc 1 1612 7 view .LVU1461
 4463 0016 0025     		movs	r5, #0
 4464              	.LVL527:
 4465              	.L344:
1614:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);	/* Next entry with table stretch enabled */
 4466              		.loc 1 1614 4 is_stmt 1 view .LVU1462
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 203


1614:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);	/* Next entry with table stretch enabled */
 4467              		.loc 1 1614 10 is_stmt 0 view .LVU1463
 4468 0018 0121     		movs	r1, #1
 4469 001a 2046     		mov	r0, r4
 4470              	.LVL528:
1614:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (res == FR_OK);	/* Next entry with table stretch enabled */
 4471              		.loc 1 1614 10 view .LVU1464
 4472 001c FFF7FEFF 		bl	dir_next
 4473              	.LVL529:
1615:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4474              		.loc 1 1615 16 is_stmt 1 view .LVU1465
 4475 0020 0246     		mov	r2, r0
 4476 0022 70B9     		cbnz	r0, .L343
 4477              	.LVL530:
 4478              	.L345:
1602:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = move_window(fs, dp->sect);
 4479              		.loc 1 1602 3 view .LVU1466
1603:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 4480              		.loc 1 1603 4 view .LVU1467
1603:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 4481              		.loc 1 1603 10 is_stmt 0 view .LVU1468
 4482 0024 E169     		ldr	r1, [r4, #28]
 4483 0026 3846     		mov	r0, r7
 4484              	.LVL531:
1603:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) break;
 4485              		.loc 1 1603 10 view .LVU1469
 4486 0028 FFF7FEFF 		bl	move_window
 4487              	.LVL532:
1604:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 4488              		.loc 1 1604 4 is_stmt 1 view .LVU1470
1604:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 4489              		.loc 1 1604 7 is_stmt 0 view .LVU1471
 4490 002c 0246     		mov	r2, r0
 4491 002e 40B9     		cbnz	r0, .L343
1608:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4492              		.loc 1 1608 4 is_stmt 1 view .LVU1472
1608:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4493              		.loc 1 1608 10 is_stmt 0 view .LVU1473
 4494 0030 236A     		ldr	r3, [r4, #32]
1608:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4495              		.loc 1 1608 15 view .LVU1474
 4496 0032 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
1608:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 4497              		.loc 1 1608 7 view .LVU1475
 4498 0034 002B     		cmp	r3, #0
 4499 0036 18BF     		it	ne
 4500 0038 E52B     		cmpne	r3, #229
 4501 003a ECD1     		bne	.L347
1610:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 4502              		.loc 1 1610 5 is_stmt 1 view .LVU1476
1610:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 4503              		.loc 1 1610 8 is_stmt 0 view .LVU1477
 4504 003c 0135     		adds	r5, r5, #1
 4505              	.LVL533:
1610:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 4506              		.loc 1 1610 8 view .LVU1478
 4507 003e B542     		cmp	r5, r6
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 204


 4508 0040 EAD1     		bne	.L344
 4509              	.LVL534:
 4510              	.L343:
1618:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4511              		.loc 1 1618 2 is_stmt 1 view .LVU1479
1618:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4512              		.loc 1 1618 5 is_stmt 0 view .LVU1480
 4513 0042 042A     		cmp	r2, #4
 4514 0044 01D0     		beq	.L350
 4515              	.LVL535:
 4516              	.L346:
1619:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4517              		.loc 1 1619 2 is_stmt 1 view .LVU1481
1620:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4518              		.loc 1 1620 1 is_stmt 0 view .LVU1482
 4519 0046 1046     		mov	r0, r2
 4520 0048 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 4521              	.LVL536:
 4522              	.L350:
1618:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4523              		.loc 1 1618 29 discriminator 1 view .LVU1483
 4524 004a 0722     		movs	r2, #7
 4525              	.LVL537:
1618:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4526              		.loc 1 1618 29 discriminator 1 view .LVU1484
 4527 004c FBE7     		b	.L346
 4528              		.cfi_endproc
 4529              	.LFE364:
 4531              		.section	.text.dir_register,"ax",%progbits
 4532              		.align	1
 4533              		.syntax unified
 4534              		.thumb
 4535              		.thumb_func
 4537              	dir_register:
 4538              	.LVL538:
 4539              	.LFB369:
2295:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4540              		.loc 1 2295 1 is_stmt 1 view -0
 4541              		.cfi_startproc
 4542              		@ args = 0, pretend = 0, frame = 0
 4543              		@ frame_needed = 0, uses_anonymous_args = 0
2295:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4544              		.loc 1 2295 1 is_stmt 0 view .LVU1486
 4545 0000 70B5     		push	{r4, r5, r6, lr}
 4546              	.LCFI36:
 4547              		.cfi_def_cfa_offset 16
 4548              		.cfi_offset 4, -16
 4549              		.cfi_offset 5, -12
 4550              		.cfi_offset 6, -8
 4551              		.cfi_offset 14, -4
 4552 0002 0446     		mov	r4, r0
2296:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 4553              		.loc 1 2296 2 is_stmt 1 view .LVU1487
2297:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4554              		.loc 1 2297 2 view .LVU1488
2297:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4555              		.loc 1 2297 9 is_stmt 0 view .LVU1489
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 205


 4556 0004 0668     		ldr	r6, [r0]
 4557              	.LVL539:
2366:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4558              		.loc 1 2366 2 is_stmt 1 view .LVU1490
2366:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4559              		.loc 1 2366 8 is_stmt 0 view .LVU1491
 4560 0006 0121     		movs	r1, #1
 4561 0008 FFF7FEFF 		bl	dir_alloc
 4562              	.LVL540:
2371:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4563              		.loc 1 2371 2 is_stmt 1 view .LVU1492
2371:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4564              		.loc 1 2371 5 is_stmt 0 view .LVU1493
 4565 000c 0546     		mov	r5, r0
 4566 000e 08B1     		cbz	r0, .L354
 4567              	.LVL541:
 4568              	.L352:
2383:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4569              		.loc 1 2383 2 is_stmt 1 view .LVU1494
2384:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4570              		.loc 1 2384 1 is_stmt 0 view .LVU1495
 4571 0010 2846     		mov	r0, r5
 4572 0012 70BD     		pop	{r4, r5, r6, pc}
 4573              	.LVL542:
 4574              	.L354:
2372:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 4575              		.loc 1 2372 3 is_stmt 1 view .LVU1496
2372:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 4576              		.loc 1 2372 9 is_stmt 0 view .LVU1497
 4577 0014 E169     		ldr	r1, [r4, #28]
 4578 0016 3046     		mov	r0, r6
 4579              	.LVL543:
2372:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 4580              		.loc 1 2372 9 view .LVU1498
 4581 0018 FFF7FEFF 		bl	move_window
 4582              	.LVL544:
2373:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZDIRE);	/* Clean the entry */
 4583              		.loc 1 2373 3 is_stmt 1 view .LVU1499
2373:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(dp->dir, 0, SZDIRE);	/* Clean the entry */
 4584              		.loc 1 2373 6 is_stmt 0 view .LVU1500
 4585 001c 0546     		mov	r5, r0
 4586 001e 0028     		cmp	r0, #0
 4587 0020 F6D1     		bne	.L352
2374:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(dp->dir + DIR_Name, dp->fn, 11);	/* Put SFN */
 4588              		.loc 1 2374 4 is_stmt 1 view .LVU1501
 4589 0022 2022     		movs	r2, #32
 4590 0024 0021     		movs	r1, #0
 4591 0026 206A     		ldr	r0, [r4, #32]
 4592              	.LVL545:
2374:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(dp->dir + DIR_Name, dp->fn, 11);	/* Put SFN */
 4593              		.loc 1 2374 4 is_stmt 0 view .LVU1502
 4594 0028 FFF7FEFF 		bl	mem_set
 4595              	.LVL546:
2375:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
 4596              		.loc 1 2375 4 is_stmt 1 view .LVU1503
 4597 002c 0B22     		movs	r2, #11
 4598 002e 04F12401 		add	r1, r4, #36
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 206


 4599 0032 206A     		ldr	r0, [r4, #32]
 4600 0034 FFF7FEFF 		bl	mem_cpy
 4601              	.LVL547:
2379:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4602              		.loc 1 2379 4 view .LVU1504
2379:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4603              		.loc 1 2379 14 is_stmt 0 view .LVU1505
 4604 0038 0123     		movs	r3, #1
 4605 003a F370     		strb	r3, [r6, #3]
 4606 003c E8E7     		b	.L352
 4607              		.cfi_endproc
 4608              	.LFE369:
 4610              		.section	.text.dir_read,"ax",%progbits
 4611              		.align	1
 4612              		.syntax unified
 4613              		.thumb
 4614              		.thumb_func
 4616              	dir_read:
 4617              	.LVL548:
 4618              	.LFB367:
2135:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_NO_FILE;
 4619              		.loc 1 2135 1 is_stmt 1 view -0
 4620              		.cfi_startproc
 4621              		@ args = 0, pretend = 0, frame = 0
 4622              		@ frame_needed = 0, uses_anonymous_args = 0
2135:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_NO_FILE;
 4623              		.loc 1 2135 1 is_stmt 0 view .LVU1507
 4624 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 4625              	.LCFI37:
 4626              		.cfi_def_cfa_offset 24
 4627              		.cfi_offset 3, -24
 4628              		.cfi_offset 4, -20
 4629              		.cfi_offset 5, -16
 4630              		.cfi_offset 6, -12
 4631              		.cfi_offset 7, -8
 4632              		.cfi_offset 14, -4
 4633 0002 0446     		mov	r4, r0
 4634 0004 0E46     		mov	r6, r1
2136:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 4635              		.loc 1 2136 2 is_stmt 1 view .LVU1508
 4636              	.LVL549:
2137:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, c;
 4637              		.loc 1 2137 2 view .LVU1509
2137:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE a, c;
 4638              		.loc 1 2137 9 is_stmt 0 view .LVU1510
 4639 0006 0568     		ldr	r5, [r0]
 4640              	.LVL550:
2138:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0
 4641              		.loc 1 2138 2 is_stmt 1 view .LVU1511
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4642              		.loc 1 2143 2 view .LVU1512
2136:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs = dp->obj.fs;
 4643              		.loc 1 2136 10 is_stmt 0 view .LVU1513
 4644 0008 0427     		movs	r7, #4
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4645              		.loc 1 2143 8 view .LVU1514
 4646 000a 05E0     		b	.L356
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 207


 4647              	.LVL551:
 4648              	.L358:
2193:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4649              		.loc 1 2193 3 is_stmt 1 view .LVU1515
2193:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4650              		.loc 1 2193 9 is_stmt 0 view .LVU1516
 4651 000c 0021     		movs	r1, #0
 4652 000e 2046     		mov	r0, r4
 4653              	.LVL552:
2193:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4654              		.loc 1 2193 9 view .LVU1517
 4655 0010 FFF7FEFF 		bl	dir_next
 4656              	.LVL553:
2194:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4657              		.loc 1 2194 3 is_stmt 1 view .LVU1518
2194:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4658              		.loc 1 2194 6 is_stmt 0 view .LVU1519
 4659 0014 0746     		mov	r7, r0
 4660 0016 E8B9     		cbnz	r0, .L357
 4661              	.LVL554:
 4662              	.L356:
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4663              		.loc 1 2143 9 is_stmt 1 view .LVU1520
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4664              		.loc 1 2143 11 is_stmt 0 view .LVU1521
 4665 0018 E169     		ldr	r1, [r4, #28]
2143:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = move_window(fs, dp->sect);
 4666              		.loc 1 2143 9 view .LVU1522
 4667 001a D9B1     		cbz	r1, .L357
2144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4668              		.loc 1 2144 3 is_stmt 1 view .LVU1523
2144:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res != FR_OK) break;
 4669              		.loc 1 2144 9 is_stmt 0 view .LVU1524
 4670 001c 2846     		mov	r0, r5
 4671 001e FFF7FEFF 		bl	move_window
 4672              	.LVL555:
2145:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];	/* Test for the entry type */
 4673              		.loc 1 2145 3 is_stmt 1 view .LVU1525
2145:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = dp->dir[DIR_Name];	/* Test for the entry type */
 4674              		.loc 1 2145 6 is_stmt 0 view .LVU1526
 4675 0022 0746     		mov	r7, r0
 4676 0024 B0B9     		cbnz	r0, .L357
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) {
 4677              		.loc 1 2146 3 is_stmt 1 view .LVU1527
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) {
 4678              		.loc 1 2146 9 is_stmt 0 view .LVU1528
 4679 0026 236A     		ldr	r3, [r4, #32]
2146:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) {
 4680              		.loc 1 2146 5 view .LVU1529
 4681 0028 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 4682              	.LVL556:
2147:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_NO_FILE; break; /* Reached to end of the directory */
 4683              		.loc 1 2147 3 is_stmt 1 view .LVU1530
2147:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_NO_FILE; break; /* Reached to end of the directory */
 4684              		.loc 1 2147 6 is_stmt 0 view .LVU1531
 4685 002a 92B1     		cbz	r2, .L361
2167:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 208


 4686              		.loc 1 2167 4 is_stmt 1 view .LVU1532
2167:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4687              		.loc 1 2167 30 is_stmt 0 view .LVU1533
 4688 002c DB7A     		ldrb	r3, [r3, #11]	@ zero_extendqisi2
2167:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4689              		.loc 1 2167 21 view .LVU1534
 4690 002e 03F03F03 		and	r3, r3, #63
 4691              	.LVL557:
2167:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_LFN != 0	/* LFN configuration */
 4692              		.loc 1 2167 17 view .LVU1535
 4693 0032 A371     		strb	r3, [r4, #6]
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
 4694              		.loc 1 2188 4 is_stmt 1 view .LVU1536
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
 4695              		.loc 1 2188 7 is_stmt 0 view .LVU1537
 4696 0034 E52A     		cmp	r2, #229
 4697 0036 18BF     		it	ne
 4698 0038 2E2A     		cmpne	r2, #46
 4699 003a E7D0     		beq	.L358
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
 4700              		.loc 1 2188 30 discriminator 1 view .LVU1538
 4701 003c 0F2B     		cmp	r3, #15
 4702 003e E5D0     		beq	.L358
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
 4703              		.loc 1 2188 57 discriminator 2 view .LVU1539
 4704 0040 23F02003 		bic	r3, r3, #32
 4705              	.LVL558:
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
 4706              		.loc 1 2188 48 discriminator 2 view .LVU1540
 4707 0044 082B     		cmp	r3, #8
 4708 0046 14BF     		ite	ne
 4709 0048 0023     		movne	r3, #0
 4710 004a 0123     		moveq	r3, #1
2188:Middlewares/Third_Party/FatFs/src/ff.c **** 				break;
 4711              		.loc 1 2188 45 discriminator 2 view .LVU1541
 4712 004c B342     		cmp	r3, r6
 4713 004e DDD1     		bne	.L358
 4714 0050 00E0     		b	.L357
 4715              	.LVL559:
 4716              	.L361:
2148:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4717              		.loc 1 2148 8 view .LVU1542
 4718 0052 0427     		movs	r7, #4
 4719              	.LVL560:
 4720              	.L357:
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4721              		.loc 1 2197 2 is_stmt 1 view .LVU1543
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4722              		.loc 1 2197 5 is_stmt 0 view .LVU1544
 4723 0054 0FB1     		cbz	r7, .L360
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4724              		.loc 1 2197 20 is_stmt 1 discriminator 1 view .LVU1545
2197:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4725              		.loc 1 2197 29 is_stmt 0 discriminator 1 view .LVU1546
 4726 0056 0023     		movs	r3, #0
 4727 0058 E361     		str	r3, [r4, #28]
 4728              	.L360:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 209


2198:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4729              		.loc 1 2198 2 is_stmt 1 view .LVU1547
2199:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4730              		.loc 1 2199 1 is_stmt 0 view .LVU1548
 4731 005a 3846     		mov	r0, r7
 4732 005c F8BD     		pop	{r3, r4, r5, r6, r7, pc}
2199:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4733              		.loc 1 2199 1 view .LVU1549
 4734              		.cfi_endproc
 4735              	.LFE367:
 4737              		.section	.text.unlock_fs,"ax",%progbits
 4738              		.align	1
 4739              		.syntax unified
 4740              		.thumb
 4741              		.thumb_func
 4743              	unlock_fs:
 4744              	.LVL561:
 4745              	.LFB347:
 755:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs && res != FR_NOT_ENABLED && res != FR_INVALID_DRIVE && res != FR_TIMEOUT) {
 4746              		.loc 1 755 1 is_stmt 1 view -0
 4747              		.cfi_startproc
 4748              		@ args = 0, pretend = 0, frame = 0
 4749              		@ frame_needed = 0, uses_anonymous_args = 0
 756:Middlewares/Third_Party/FatFs/src/ff.c **** 		ff_rel_grant(fs->sobj);
 4750              		.loc 1 756 2 view .LVU1551
 756:Middlewares/Third_Party/FatFs/src/ff.c **** 		ff_rel_grant(fs->sobj);
 4751              		.loc 1 756 5 is_stmt 0 view .LVU1552
 4752 0000 0028     		cmp	r0, #0
 4753 0002 18BF     		it	ne
 4754 0004 0C29     		cmpne	r1, #12
 4755 0006 0CD0     		beq	.L366
 755:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (fs && res != FR_NOT_ENABLED && res != FR_INVALID_DRIVE && res != FR_TIMEOUT) {
 4756              		.loc 1 755 1 view .LVU1553
 4757 0008 08B5     		push	{r3, lr}
 4758              	.LCFI38:
 4759              		.cfi_def_cfa_offset 8
 4760              		.cfi_offset 3, -8
 4761              		.cfi_offset 14, -4
 756:Middlewares/Third_Party/FatFs/src/ff.c **** 		ff_rel_grant(fs->sobj);
 4762              		.loc 1 756 68 discriminator 1 view .LVU1554
 4763 000a B1F10F02 		subs	r2, r1, #15
 4764 000e 18BF     		it	ne
 4765 0010 0122     		movne	r2, #1
 756:Middlewares/Third_Party/FatFs/src/ff.c **** 		ff_rel_grant(fs->sobj);
 4766              		.loc 1 756 61 discriminator 1 view .LVU1555
 4767 0012 0B29     		cmp	r1, #11
 4768 0014 00D0     		beq	.L363
 4769 0016 02B9     		cbnz	r2, .L369
 4770              	.LVL562:
 4771              	.L363:
 759:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4772              		.loc 1 759 1 view .LVU1556
 4773 0018 08BD     		pop	{r3, pc}
 4774              	.LVL563:
 4775              	.L369:
 757:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4776              		.loc 1 757 3 is_stmt 1 view .LVU1557
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 210


 4777 001a C068     		ldr	r0, [r0, #12]
 4778              	.LVL564:
 757:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4779              		.loc 1 757 3 is_stmt 0 view .LVU1558
 4780 001c FFF7FEFF 		bl	ff_rel_grant
 4781              	.LVL565:
 759:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4782              		.loc 1 759 1 view .LVU1559
 4783 0020 FAE7     		b	.L363
 4784              	.LVL566:
 4785              	.L366:
 4786              	.LCFI39:
 4787              		.cfi_def_cfa_offset 0
 4788              		.cfi_restore 3
 4789              		.cfi_restore 14
 759:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4790              		.loc 1 759 1 view .LVU1560
 4791 0022 7047     		bx	lr
 4792              		.cfi_endproc
 4793              	.LFE347:
 4795              		.section	.text.validate,"ax",%progbits
 4796              		.align	1
 4797              		.syntax unified
 4798              		.thumb
 4799              		.thumb_func
 4801              	validate:
 4802              	.LVL567:
 4803              	.LFB377:
3220:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_INVALID_OBJECT;
 4804              		.loc 1 3220 1 is_stmt 1 view -0
 4805              		.cfi_startproc
 4806              		@ args = 0, pretend = 0, frame = 0
 4807              		@ frame_needed = 0, uses_anonymous_args = 0
3220:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res = FR_INVALID_OBJECT;
 4808              		.loc 1 3220 1 is_stmt 0 view .LVU1562
 4809 0000 38B5     		push	{r3, r4, r5, lr}
 4810              	.LCFI40:
 4811              		.cfi_def_cfa_offset 16
 4812              		.cfi_offset 3, -16
 4813              		.cfi_offset 4, -12
 4814              		.cfi_offset 5, -8
 4815              		.cfi_offset 14, -4
 4816 0002 0D46     		mov	r5, r1
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4817              		.loc 1 3221 2 is_stmt 1 view .LVU1563
 4818              	.LVL568:
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 4819              		.loc 1 3224 2 view .LVU1564
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 4820              		.loc 1 3224 5 is_stmt 0 view .LVU1565
 4821 0004 0446     		mov	r4, r0
 4822 0006 08B3     		cbz	r0, .L373
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 4823              		.loc 1 3224 16 discriminator 1 view .LVU1566
 4824 0008 0068     		ldr	r0, [r0]
 4825              	.LVL569:
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 211


 4826              		.loc 1 3224 10 discriminator 1 view .LVU1567
 4827 000a 08B3     		cbz	r0, .L374
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 4828              		.loc 1 3224 31 discriminator 2 view .LVU1568
 4829 000c 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 4830              		.loc 1 3224 21 discriminator 2 view .LVU1569
 4831 000e 13B3     		cbz	r3, .L375
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 4832              		.loc 1 3224 47 discriminator 3 view .LVU1570
 4833 0010 A288     		ldrh	r2, [r4, #4]
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 4834              		.loc 1 3224 62 discriminator 3 view .LVU1571
 4835 0012 C388     		ldrh	r3, [r0, #6]
3224:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT
 4836              		.loc 1 3224 41 discriminator 3 view .LVU1572
 4837 0014 9A42     		cmp	r2, r3
 4838 0016 03D0     		beq	.L379
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4839              		.loc 1 3221 10 view .LVU1573
 4840 0018 0920     		movs	r0, #9
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4841              		.loc 1 3241 33 discriminator 2 view .LVU1574
 4842 001a 0024     		movs	r4, #0
 4843              	.LVL570:
 4844              	.L371:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4845              		.loc 1 3241 6 discriminator 4 view .LVU1575
 4846 001c 2C60     		str	r4, [r5]
3242:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4847              		.loc 1 3242 2 is_stmt 1 view .LVU1576
3243:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4848              		.loc 1 3243 1 is_stmt 0 view .LVU1577
 4849 001e 38BD     		pop	{r3, r4, r5, pc}
 4850              	.LVL571:
 4851              	.L379:
3226:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(disk_status(obj->fs->drv) & STA_NOINIT)) { /* Test if the phsical drive is kept initialize
 4852              		.loc 1 3226 3 is_stmt 1 view .LVU1578
3226:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(disk_status(obj->fs->drv) & STA_NOINIT)) { /* Test if the phsical drive is kept initialize
 4853              		.loc 1 3226 7 is_stmt 0 view .LVU1579
 4854 0020 FFF7FEFF 		bl	lock_fs
 4855              	.LVL572:
3226:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(disk_status(obj->fs->drv) & STA_NOINIT)) { /* Test if the phsical drive is kept initialize
 4856              		.loc 1 3226 6 discriminator 1 view .LVU1580
 4857 0024 10B9     		cbnz	r0, .L380
3233:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 4858              		.loc 1 3233 8 view .LVU1581
 4859 0026 0F20     		movs	r0, #15
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4860              		.loc 1 3241 33 discriminator 2 view .LVU1582
 4861 0028 0024     		movs	r4, #0
 4862              	.LVL573:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4863              		.loc 1 3241 33 discriminator 2 view .LVU1583
 4864 002a F7E7     		b	.L371
 4865              	.LVL574:
 4866              	.L380:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 212


3227:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
 4867              		.loc 1 3227 4 is_stmt 1 view .LVU1584
3227:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
 4868              		.loc 1 3227 25 is_stmt 0 view .LVU1585
 4869 002c 2368     		ldr	r3, [r4]
3227:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
 4870              		.loc 1 3227 10 view .LVU1586
 4871 002e 5878     		ldrb	r0, [r3, #1]	@ zero_extendqisi2
 4872 0030 FFF7FEFF 		bl	disk_status
 4873              	.LVL575:
3227:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_OK;
 4874              		.loc 1 3227 7 discriminator 1 view .LVU1587
 4875 0034 10F00100 		ands	r0, r0, #1
 4876 0038 01D1     		bne	.L372
 4877              	.LVL576:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4878              		.loc 1 3241 2 is_stmt 1 view .LVU1588
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4879              		.loc 1 3241 33 is_stmt 0 discriminator 1 view .LVU1589
 4880 003a 2468     		ldr	r4, [r4]
 4881              	.LVL577:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4882              		.loc 1 3241 33 discriminator 1 view .LVU1590
 4883 003c EEE7     		b	.L371
 4884              	.LVL578:
 4885              	.L372:
3230:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 4886              		.loc 1 3230 5 is_stmt 1 view .LVU1591
 4887 003e 0021     		movs	r1, #0
 4888 0040 2068     		ldr	r0, [r4]
 4889 0042 FFF7FEFF 		bl	unlock_fs
 4890              	.LVL579:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4891              		.loc 1 3241 2 view .LVU1592
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4892              		.loc 1 3221 10 is_stmt 0 view .LVU1593
 4893 0046 0920     		movs	r0, #9
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4894              		.loc 1 3241 33 discriminator 2 view .LVU1594
 4895 0048 0024     		movs	r4, #0
 4896              	.LVL580:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4897              		.loc 1 3241 33 discriminator 2 view .LVU1595
 4898 004a E7E7     		b	.L371
 4899              	.LVL581:
 4900              	.L373:
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4901              		.loc 1 3221 10 view .LVU1596
 4902 004c 0920     		movs	r0, #9
 4903              	.LVL582:
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4904              		.loc 1 3221 10 view .LVU1597
 4905 004e E5E7     		b	.L371
 4906              	.L374:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4907              		.loc 1 3241 33 discriminator 2 view .LVU1598
 4908 0050 0446     		mov	r4, r0
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 213


 4909              	.LVL583:
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4910              		.loc 1 3221 10 view .LVU1599
 4911 0052 0920     		movs	r0, #9
 4912 0054 E2E7     		b	.L371
 4913              	.LVL584:
 4914              	.L375:
3221:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4915              		.loc 1 3221 10 view .LVU1600
 4916 0056 0920     		movs	r0, #9
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4917              		.loc 1 3241 33 discriminator 2 view .LVU1601
 4918 0058 0024     		movs	r4, #0
 4919              	.LVL585:
3241:Middlewares/Third_Party/FatFs/src/ff.c **** 	return res;
 4920              		.loc 1 3241 33 discriminator 2 view .LVU1602
 4921 005a DFE7     		b	.L371
 4922              		.cfi_endproc
 4923              	.LFE377:
 4925              		.section	.text.sync_fs,"ax",%progbits
 4926              		.align	1
 4927              		.syntax unified
 4928              		.thumb
 4929              		.thumb_func
 4931              	sync_fs:
 4932              	.LVL586:
 4933              	.LFB355:
 947:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4934              		.loc 1 947 1 is_stmt 1 view -0
 4935              		.cfi_startproc
 4936              		@ args = 0, pretend = 0, frame = 0
 4937              		@ frame_needed = 0, uses_anonymous_args = 0
 947:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 4938              		.loc 1 947 1 is_stmt 0 view .LVU1604
 4939 0000 70B5     		push	{r4, r5, r6, lr}
 4940              	.LCFI41:
 4941              		.cfi_def_cfa_offset 16
 4942              		.cfi_offset 4, -16
 4943              		.cfi_offset 5, -12
 4944              		.cfi_offset 6, -8
 4945              		.cfi_offset 14, -4
 4946 0002 0446     		mov	r4, r0
 948:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4947              		.loc 1 948 2 is_stmt 1 view .LVU1605
 951:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 4948              		.loc 1 951 2 view .LVU1606
 951:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 4949              		.loc 1 951 8 is_stmt 0 view .LVU1607
 4950 0004 FFF7FEFF 		bl	sync_window
 4951              	.LVL587:
 952:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update FSInfo sector if needed */
 4952              		.loc 1 952 2 is_stmt 1 view .LVU1608
 952:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update FSInfo sector if needed */
 4953              		.loc 1 952 5 is_stmt 0 view .LVU1609
 4954 0008 0546     		mov	r5, r0
 4955 000a 48B9     		cbnz	r0, .L382
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 214


 4956              		.loc 1 954 3 is_stmt 1 view .LVU1610
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
 4957              		.loc 1 954 9 is_stmt 0 view .LVU1611
 4958 000c 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
 4959              		.loc 1 954 6 view .LVU1612
 4960 000e 032B     		cmp	r3, #3
 4961 0010 08D0     		beq	.L386
 4962              	.LVL588:
 4963              	.L383:
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4964              		.loc 1 968 3 is_stmt 1 view .LVU1613
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4965              		.loc 1 968 7 is_stmt 0 view .LVU1614
 4966 0012 0022     		movs	r2, #0
 4967 0014 1146     		mov	r1, r2
 4968 0016 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 4969 0018 FFF7FEFF 		bl	disk_ioctl
 4970              	.LVL589:
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4971              		.loc 1 968 6 discriminator 1 view .LVU1615
 4972 001c 00B1     		cbz	r0, .L382
 968:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 4973              		.loc 1 968 56 discriminator 1 view .LVU1616
 4974 001e 0125     		movs	r5, #1
 4975              	.LVL590:
 4976              	.L382:
 971:Middlewares/Third_Party/FatFs/src/ff.c **** }
 4977              		.loc 1 971 2 is_stmt 1 view .LVU1617
 972:Middlewares/Third_Party/FatFs/src/ff.c **** 
 4978              		.loc 1 972 1 is_stmt 0 view .LVU1618
 4979 0020 2846     		mov	r0, r5
 4980 0022 70BD     		pop	{r4, r5, r6, pc}
 4981              	.LVL591:
 4982              	.L386:
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
 4983              		.loc 1 954 36 discriminator 1 view .LVU1619
 4984 0024 2379     		ldrb	r3, [r4, #4]	@ zero_extendqisi2
 954:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Create FSInfo structure */
 4985              		.loc 1 954 31 discriminator 1 view .LVU1620
 4986 0026 012B     		cmp	r3, #1
 4987 0028 F3D1     		bne	.L383
 956:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);
 4988              		.loc 1 956 4 is_stmt 1 view .LVU1621
 956:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);
 4989              		.loc 1 956 14 is_stmt 0 view .LVU1622
 4990 002a 04F13406 		add	r6, r4, #52
 956:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);
 4991              		.loc 1 956 4 view .LVU1623
 4992 002e 4FF40072 		mov	r2, #512
 4993 0032 0021     		movs	r1, #0
 4994 0034 3046     		mov	r0, r6
 4995              	.LVL592:
 956:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(fs->win + BS_55AA, 0xAA55);
 4996              		.loc 1 956 4 view .LVU1624
 4997 0036 FFF7FEFF 		bl	mem_set
 4998              	.LVL593:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 215


 957:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_LeadSig, 0x41615252);
 4999              		.loc 1 957 4 is_stmt 1 view .LVU1625
 5000 003a 4AF65521 		movw	r1, #43605
 5001 003e 04F23220 		addw	r0, r4, #562
 5002 0042 FFF7FEFF 		bl	st_word
 5003              	.LVL594:
 958:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_StrucSig, 0x61417272);
 5004              		.loc 1 958 4 view .LVU1626
 5005 0046 0F49     		ldr	r1, .L387
 5006 0048 3046     		mov	r0, r6
 5007 004a FFF7FEFF 		bl	st_dword
 5008              	.LVL595:
 959:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_Free_Count, fs->free_clst);
 5009              		.loc 1 959 4 view .LVU1627
 5010 004e 0E49     		ldr	r1, .L387+4
 5011 0050 04F50670 		add	r0, r4, #536
 5012 0054 FFF7FEFF 		bl	st_dword
 5013              	.LVL596:
 960:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(fs->win + FSI_Nxt_Free, fs->last_clst);
 5014              		.loc 1 960 4 view .LVU1628
 5015 0058 6169     		ldr	r1, [r4, #20]
 5016 005a 04F50770 		add	r0, r4, #540
 5017 005e FFF7FEFF 		bl	st_dword
 5018              	.LVL597:
 961:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Write it into the FSInfo sector */
 5019              		.loc 1 961 4 view .LVU1629
 5020 0062 2169     		ldr	r1, [r4, #16]
 5021 0064 04F50870 		add	r0, r4, #544
 5022 0068 FFF7FEFF 		bl	st_dword
 5023              	.LVL598:
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 5024              		.loc 1 963 4 view .LVU1630
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 5025              		.loc 1 963 20 is_stmt 0 view .LVU1631
 5026 006c 226A     		ldr	r2, [r4, #32]
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 5027              		.loc 1 963 30 view .LVU1632
 5028 006e 0132     		adds	r2, r2, #1
 963:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(fs->drv, fs->win, fs->winsect, 1);
 5029              		.loc 1 963 16 view .LVU1633
 5030 0070 2263     		str	r2, [r4, #48]
 964:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag = 0;
 5031              		.loc 1 964 4 is_stmt 1 view .LVU1634
 5032 0072 0123     		movs	r3, #1
 5033 0074 3146     		mov	r1, r6
 5034 0076 6078     		ldrb	r0, [r4, #1]	@ zero_extendqisi2
 5035 0078 FFF7FEFF 		bl	disk_write
 5036              	.LVL599:
 965:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 5037              		.loc 1 965 4 view .LVU1635
 965:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 5038              		.loc 1 965 17 is_stmt 0 view .LVU1636
 5039 007c 0023     		movs	r3, #0
 5040 007e 2371     		strb	r3, [r4, #4]
 5041 0080 C7E7     		b	.L383
 5042              	.L388:
 5043 0082 00BF     		.align	2
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 216


 5044              	.L387:
 5045 0084 52526141 		.word	1096897106
 5046 0088 72724161 		.word	1631679090
 5047              		.cfi_endproc
 5048              	.LFE355:
 5050              		.section	.text.f_mount,"ax",%progbits
 5051              		.align	1
 5052              		.global	f_mount
 5053              		.syntax unified
 5054              		.thumb
 5055              		.thumb_func
 5057              	f_mount:
 5058              	.LVL600:
 5059              	.LFB378:
3265:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *cfs;
 5060              		.loc 1 3265 1 is_stmt 1 view -0
 5061              		.cfi_startproc
 5062              		@ args = 0, pretend = 0, frame = 16
 5063              		@ frame_needed = 0, uses_anonymous_args = 0
3265:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *cfs;
 5064              		.loc 1 3265 1 is_stmt 0 view .LVU1638
 5065 0000 70B5     		push	{r4, r5, r6, lr}
 5066              	.LCFI42:
 5067              		.cfi_def_cfa_offset 16
 5068              		.cfi_offset 4, -16
 5069              		.cfi_offset 5, -12
 5070              		.cfi_offset 6, -8
 5071              		.cfi_offset 14, -4
 5072 0002 84B0     		sub	sp, sp, #16
 5073              	.LCFI43:
 5074              		.cfi_def_cfa_offset 32
 5075 0004 0190     		str	r0, [sp, #4]
 5076 0006 0091     		str	r1, [sp]
 5077 0008 1646     		mov	r6, r2
3266:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
 5078              		.loc 1 3266 2 is_stmt 1 view .LVU1639
3267:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5079              		.loc 1 3267 2 view .LVU1640
3268:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR *rp = path;
 5080              		.loc 1 3268 2 view .LVU1641
3269:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5081              		.loc 1 3269 2 view .LVU1642
3269:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5082              		.loc 1 3269 15 is_stmt 0 view .LVU1643
 5083 000a 0391     		str	r1, [sp, #12]
3273:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 5084              		.loc 1 3273 2 is_stmt 1 view .LVU1644
3273:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 5085              		.loc 1 3273 8 is_stmt 0 view .LVU1645
 5086 000c 03A8     		add	r0, sp, #12
 5087              	.LVL601:
3273:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 5088              		.loc 1 3273 8 view .LVU1646
 5089 000e FFF7FEFF 		bl	get_ldnumber
 5090              	.LVL602:
3274:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 5091              		.loc 1 3274 2 is_stmt 1 view .LVU1647
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 217


3274:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 5092              		.loc 1 3274 5 is_stmt 0 view .LVU1648
 5093 0012 041E     		subs	r4, r0, #0
 5094 0014 30DB     		blt	.L393
3275:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5095              		.loc 1 3275 2 is_stmt 1 view .LVU1649
3275:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5096              		.loc 1 3275 6 is_stmt 0 view .LVU1650
 5097 0016 1B4B     		ldr	r3, .L399
 5098 0018 53F82450 		ldr	r5, [r3, r4, lsl #2]
 5099              	.LVL603:
3277:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5100              		.loc 1 3277 2 is_stmt 1 view .LVU1651
3277:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5101              		.loc 1 3277 5 is_stmt 0 view .LVU1652
 5102 001c 45B1     		cbz	r5, .L391
3279:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5103              		.loc 1 3279 3 is_stmt 1 view .LVU1653
 5104 001e 2846     		mov	r0, r5
 5105              	.LVL604:
3279:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5106              		.loc 1 3279 3 is_stmt 0 view .LVU1654
 5107 0020 FFF7FEFF 		bl	clear_lock
 5108              	.LVL605:
3282:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5109              		.loc 1 3282 3 is_stmt 1 view .LVU1655
3282:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5110              		.loc 1 3282 8 is_stmt 0 view .LVU1656
 5111 0024 E868     		ldr	r0, [r5, #12]
 5112 0026 FFF7FEFF 		bl	ff_del_syncobj
 5113              	.LVL606:
3282:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5114              		.loc 1 3282 6 discriminator 1 view .LVU1657
 5115 002a 38B3     		cbz	r0, .L394
3284:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5116              		.loc 1 3284 3 is_stmt 1 view .LVU1658
3284:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5117              		.loc 1 3284 16 is_stmt 0 view .LVU1659
 5118 002c 0023     		movs	r3, #0
 5119 002e 2B70     		strb	r3, [r5]
 5120              	.L391:
3287:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
 5121              		.loc 1 3287 2 is_stmt 1 view .LVU1660
3287:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
 5122              		.loc 1 3287 6 is_stmt 0 view .LVU1661
 5123 0030 019B     		ldr	r3, [sp, #4]
3287:Middlewares/Third_Party/FatFs/src/ff.c **** 		fs->fs_type = 0;				/* Clear new fs object */
 5124              		.loc 1 3287 5 view .LVU1662
 5125 0032 3BB1     		cbz	r3, .L392
3288:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Create sync object for the new volume */
 5126              		.loc 1 3288 3 is_stmt 1 view .LVU1663
3288:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_REENTRANT						/* Create sync object for the new volume */
 5127              		.loc 1 3288 15 is_stmt 0 view .LVU1664
 5128 0034 0022     		movs	r2, #0
 5129 0036 1A70     		strb	r2, [r3]
3290:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5130              		.loc 1 3290 3 is_stmt 1 view .LVU1665
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 218


3290:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5131              		.loc 1 3290 8 is_stmt 0 view .LVU1666
 5132 0038 0199     		ldr	r1, [sp, #4]
 5133 003a 0C31     		adds	r1, r1, #12
 5134 003c E0B2     		uxtb	r0, r4
 5135 003e FFF7FEFF 		bl	ff_cre_syncobj
 5136              	.LVL607:
3290:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5137              		.loc 1 3290 6 discriminator 1 view .LVU1667
 5138 0042 E8B1     		cbz	r0, .L395
 5139              	.L392:
3293:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5140              		.loc 1 3293 2 is_stmt 1 view .LVU1668
3293:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5141              		.loc 1 3293 13 is_stmt 0 view .LVU1669
 5142 0044 019B     		ldr	r3, [sp, #4]
 5143 0046 0F4A     		ldr	r2, .L399
 5144 0048 42F82430 		str	r3, [r2, r4, lsl #2]
3295:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5145              		.loc 1 3295 2 is_stmt 1 view .LVU1670
3295:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5146              		.loc 1 3295 17 is_stmt 0 view .LVU1671
 5147 004c 721E     		subs	r2, r6, #1
 5148 004e 18BF     		it	ne
 5149 0050 0122     		movne	r2, #1
3295:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5150              		.loc 1 3295 10 view .LVU1672
 5151 0052 002B     		cmp	r3, #0
 5152 0054 08BF     		it	eq
 5153 0056 42F00102 		orreq	r2, r2, #1
3295:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5154              		.loc 1 3295 5 view .LVU1673
 5155 005a 1AB1     		cbz	r2, .L398
3295:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5156              		.loc 1 3295 30 discriminator 1 view .LVU1674
 5157 005c 0024     		movs	r4, #0
 5158              	.LVL608:
 5159              	.L390:
3298:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5160              		.loc 1 3298 19 is_stmt 1 discriminator 1 view .LVU1675
3299:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5161              		.loc 1 3299 1 is_stmt 0 view .LVU1676
 5162 005e 2046     		mov	r0, r4
 5163 0060 04B0     		add	sp, sp, #16
 5164              	.LCFI44:
 5165              		.cfi_remember_state
 5166              		.cfi_def_cfa_offset 16
 5167              		@ sp needed
 5168 0062 70BD     		pop	{r4, r5, r6, pc}
 5169              	.LVL609:
 5170              	.L398:
 5171              	.LCFI45:
 5172              		.cfi_restore_state
3297:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
 5173              		.loc 1 3297 2 is_stmt 1 view .LVU1677
3297:Middlewares/Third_Party/FatFs/src/ff.c **** 	LEAVE_FF(fs, res);
 5174              		.loc 1 3297 8 is_stmt 0 view .LVU1678
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 219


 5175 0064 01A9     		add	r1, sp, #4
 5176 0066 6846     		mov	r0, sp
 5177 0068 FFF7FEFF 		bl	find_volume
 5178              	.LVL610:
 5179 006c 0446     		mov	r4, r0
 5180              	.LVL611:
3298:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5181              		.loc 1 3298 2 is_stmt 1 view .LVU1679
 5182 006e 0146     		mov	r1, r0
 5183 0070 0198     		ldr	r0, [sp, #4]
 5184              	.LVL612:
3298:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5185              		.loc 1 3298 2 is_stmt 0 view .LVU1680
 5186 0072 FFF7FEFF 		bl	unlock_fs
 5187              	.LVL613:
3298:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5188              		.loc 1 3298 2 is_stmt 1 discriminator 1 view .LVU1681
3298:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5189              		.loc 1 3298 2 is_stmt 0 view .LVU1682
 5190 0076 F2E7     		b	.L390
 5191              	.LVL614:
 5192              	.L393:
3274:Middlewares/Third_Party/FatFs/src/ff.c **** 	cfs = FatFs[vol];					/* Pointer to fs object */
 5193              		.loc 1 3274 22 discriminator 1 view .LVU1683
 5194 0078 0B24     		movs	r4, #11
 5195 007a F0E7     		b	.L390
 5196              	.LVL615:
 5197              	.L394:
3282:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5198              		.loc 1 3282 42 discriminator 1 view .LVU1684
 5199 007c 0224     		movs	r4, #2
 5200              	.LVL616:
3282:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5201              		.loc 1 3282 42 discriminator 1 view .LVU1685
 5202 007e EEE7     		b	.L390
 5203              	.LVL617:
 5204              	.L395:
3290:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5205              		.loc 1 3290 53 discriminator 1 view .LVU1686
 5206 0080 0224     		movs	r4, #2
 5207              	.LVL618:
3290:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5208              		.loc 1 3290 53 discriminator 1 view .LVU1687
 5209 0082 ECE7     		b	.L390
 5210              	.L400:
 5211              		.align	2
 5212              	.L399:
 5213 0084 00000000 		.word	FatFs
 5214              		.cfi_endproc
 5215              	.LFE378:
 5217              		.section	.text.f_open,"ax",%progbits
 5218              		.align	1
 5219              		.global	f_open
 5220              		.syntax unified
 5221              		.thumb
 5222              		.thumb_func
 5224              	f_open:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 220


 5225              	.LVL619:
 5226              	.LFB379:
3313:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5227              		.loc 1 3313 1 is_stmt 1 view -0
 5228              		.cfi_startproc
 5229              		@ args = 0, pretend = 0, frame = 64
 5230              		@ frame_needed = 0, uses_anonymous_args = 0
3313:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5231              		.loc 1 3313 1 is_stmt 0 view .LVU1689
 5232 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 5233              	.LCFI46:
 5234              		.cfi_def_cfa_offset 28
 5235              		.cfi_offset 4, -28
 5236              		.cfi_offset 5, -24
 5237              		.cfi_offset 6, -20
 5238              		.cfi_offset 7, -16
 5239              		.cfi_offset 8, -12
 5240              		.cfi_offset 9, -8
 5241              		.cfi_offset 14, -4
 5242 0004 91B0     		sub	sp, sp, #68
 5243              	.LCFI47:
 5244              		.cfi_def_cfa_offset 96
 5245 0006 0191     		str	r1, [sp, #4]
3314:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
 5246              		.loc 1 3314 2 is_stmt 1 view .LVU1690
3315:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 5247              		.loc 1 3315 2 view .LVU1691
3316:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5248              		.loc 1 3316 2 view .LVU1692
3318:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ofs;
 5249              		.loc 1 3318 2 view .LVU1693
3319:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5250              		.loc 1 3319 2 view .LVU1694
3324:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5251              		.loc 1 3324 2 view .LVU1695
3324:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5252              		.loc 1 3324 5 is_stmt 0 view .LVU1696
 5253 0008 0028     		cmp	r0, #0
 5254 000a 00F00D81 		beq	.L417
 5255 000e 1446     		mov	r4, r2
 5256 0010 0646     		mov	r6, r0
3327:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, mode);
 5257              		.loc 1 3327 2 is_stmt 1 view .LVU1697
3327:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, mode);
 5258              		.loc 1 3327 7 is_stmt 0 view .LVU1698
 5259 0012 02F03F07 		and	r7, r2, #63
 5260              	.LVL620:
3328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 5261              		.loc 1 3328 2 is_stmt 1 view .LVU1699
3328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 5262              		.loc 1 3328 8 is_stmt 0 view .LVU1700
 5263 0016 3A46     		mov	r2, r7
 5264 0018 03A9     		add	r1, sp, #12
 5265              	.LVL621:
3328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 5266              		.loc 1 3328 8 view .LVU1701
 5267 001a 01A8     		add	r0, sp, #4
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 221


 5268              	.LVL622:
3328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 5269              		.loc 1 3328 8 view .LVU1702
 5270 001c FFF7FEFF 		bl	find_volume
 5271              	.LVL623:
3329:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
 5272              		.loc 1 3329 2 is_stmt 1 view .LVU1703
3329:Middlewares/Third_Party/FatFs/src/ff.c **** 		dj.obj.fs = fs;
 5273              		.loc 1 3329 5 is_stmt 0 view .LVU1704
 5274 0020 0546     		mov	r5, r0
 5275 0022 48B1     		cbz	r0, .L431
 5276              	.LVL624:
 5277              	.L403:
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5278              		.loc 1 3499 20 is_stmt 1 discriminator 1 view .LVU1705
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5279              		.loc 1 3499 31 is_stmt 0 discriminator 1 view .LVU1706
 5280 0024 0023     		movs	r3, #0
 5281 0026 3360     		str	r3, [r6]
 5282              	.L416:
3501:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5283              		.loc 1 3501 2 is_stmt 1 view .LVU1707
 5284 0028 2946     		mov	r1, r5
 5285 002a 0398     		ldr	r0, [sp, #12]
 5286 002c FFF7FEFF 		bl	unlock_fs
 5287              	.LVL625:
3501:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5288              		.loc 1 3501 2 discriminator 1 view .LVU1708
 5289              	.L402:
3501:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5290              		.loc 1 3501 19 discriminator 1 view .LVU1709
3502:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5291              		.loc 1 3502 1 is_stmt 0 view .LVU1710
 5292 0030 2846     		mov	r0, r5
 5293 0032 11B0     		add	sp, sp, #68
 5294              	.LCFI48:
 5295              		.cfi_remember_state
 5296              		.cfi_def_cfa_offset 28
 5297              		@ sp needed
 5298 0034 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 5299              	.LVL626:
 5300              	.L431:
 5301              	.LCFI49:
 5302              		.cfi_restore_state
3330:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 5303              		.loc 1 3330 3 is_stmt 1 view .LVU1711
3330:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 5304              		.loc 1 3330 13 is_stmt 0 view .LVU1712
 5305 0038 039B     		ldr	r3, [sp, #12]
 5306 003a 0493     		str	r3, [sp, #16]
3331:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 5307              		.loc 1 3331 18 is_stmt 1 view .LVU1713
3332:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
 5308              		.loc 1 3332 3 view .LVU1714
3332:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
 5309              		.loc 1 3332 9 is_stmt 0 view .LVU1715
 5310 003c 0199     		ldr	r1, [sp, #4]
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 222


 5311 003e 04A8     		add	r0, sp, #16
 5312              	.LVL627:
3332:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY	/* R/W configuration */
 5313              		.loc 1 3332 9 view .LVU1716
 5314 0040 FFF7FEFF 		bl	follow_path
 5315              	.LVL628:
3334:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
 5316              		.loc 1 3334 3 is_stmt 1 view .LVU1717
3334:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* Origin directory itself? */
 5317              		.loc 1 3334 6 is_stmt 0 view .LVU1718
 5318 0044 0546     		mov	r5, r0
 5319 0046 60B9     		cbnz	r0, .L404
3335:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 5320              		.loc 1 3335 4 is_stmt 1 view .LVU1719
3335:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 5321              		.loc 1 3335 8 is_stmt 0 view .LVU1720
 5322 0048 9DF93F30 		ldrsb	r3, [sp, #63]
3335:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 5323              		.loc 1 3335 7 view .LVU1721
 5324 004c 002B     		cmp	r3, #0
 5325 004e 52DB     		blt	.L418
3340:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5326              		.loc 1 3340 5 is_stmt 1 view .LVU1722
3340:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5327              		.loc 1 3340 11 is_stmt 0 view .LVU1723
 5328 0050 14F03E0F 		tst	r4, #62
 5329 0054 14BF     		ite	ne
 5330 0056 0121     		movne	r1, #1
 5331 0058 0021     		moveq	r1, #0
 5332 005a 04A8     		add	r0, sp, #16
 5333              	.LVL629:
3340:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5334              		.loc 1 3340 11 view .LVU1724
 5335 005c FFF7FEFF 		bl	chk_lock
 5336              	.LVL630:
 5337 0060 0546     		mov	r5, r0
 5338              	.LVL631:
 5339              	.L404:
3345:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
 5340              		.loc 1 3345 3 is_stmt 1 view .LVU1725
3345:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res != FR_OK) {					/* No file, create new */
 5341              		.loc 1 3345 6 is_stmt 0 view .LVU1726
 5342 0062 14F01C0F 		tst	r4, #28
 5343 0066 5CD0     		beq	.L405
3346:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {		/* There is no file to open, create a new entry */
 5344              		.loc 1 3346 4 is_stmt 1 view .LVU1727
3346:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) {		/* There is no file to open, create a new entry */
 5345              		.loc 1 3346 7 is_stmt 0 view .LVU1728
 5346 0068 002D     		cmp	r5, #0
 5347 006a 50D0     		beq	.L406
3347:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5348              		.loc 1 3347 5 is_stmt 1 view .LVU1729
3347:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5349              		.loc 1 3347 8 is_stmt 0 view .LVU1730
 5350 006c 042D     		cmp	r5, #4
 5351 006e 44D0     		beq	.L432
 5352              	.LVL632:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 223


 5353              	.L407:
3354:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5354              		.loc 1 3354 5 is_stmt 1 view .LVU1731
3354:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5355              		.loc 1 3354 10 is_stmt 0 view .LVU1732
 5356 0070 47F00807 		orr	r7, r7, #8
 5357              	.LVL633:
 5358              	.L408:
3363:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();
 5359              		.loc 1 3363 4 is_stmt 1 view .LVU1733
3363:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();
 5360              		.loc 1 3363 7 is_stmt 0 view .LVU1734
 5361 0074 002D     		cmp	r5, #0
 5362 0076 D5D1     		bne	.L403
3363:Middlewares/Third_Party/FatFs/src/ff.c **** 				dw = GET_FATTIME();
 5363              		.loc 1 3363 21 discriminator 1 view .LVU1735
 5364 0078 17F0080F 		tst	r7, #8
 5365 007c 62D0     		beq	.L409
3364:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 5366              		.loc 1 3364 5 is_stmt 1 view .LVU1736
3364:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 5367              		.loc 1 3364 10 is_stmt 0 view .LVU1737
 5368 007e FFF7FEFF 		bl	get_fattime
 5369              	.LVL634:
 5370 0082 0446     		mov	r4, r0
 5371              	.LVL635:
3392:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_ModTime, dw);	/* Set modified time */
 5372              		.loc 1 3392 6 is_stmt 1 view .LVU1738
 5373 0084 0146     		mov	r1, r0
 5374 0086 0C98     		ldr	r0, [sp, #48]
 5375              	.LVL636:
3392:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_ModTime, dw);	/* Set modified time */
 5376              		.loc 1 3392 6 is_stmt 0 view .LVU1739
 5377 0088 0E30     		adds	r0, r0, #14
 5378 008a FFF7FEFF 		bl	st_dword
 5379              	.LVL637:
3393:Middlewares/Third_Party/FatFs/src/ff.c **** 					dj.dir[DIR_Attr] = AM_ARC;			/* Reset attribute */
 5380              		.loc 1 3393 6 is_stmt 1 view .LVU1740
 5381 008e 2146     		mov	r1, r4
 5382 0090 0C98     		ldr	r0, [sp, #48]
 5383 0092 1630     		adds	r0, r0, #22
 5384 0094 FFF7FEFF 		bl	st_dword
 5385              	.LVL638:
3394:Middlewares/Third_Party/FatFs/src/ff.c **** 					cl = ld_clust(fs, dj.dir);			/* Get cluster chain */
 5386              		.loc 1 3394 6 view .LVU1741
3394:Middlewares/Third_Party/FatFs/src/ff.c **** 					cl = ld_clust(fs, dj.dir);			/* Get cluster chain */
 5387              		.loc 1 3394 23 is_stmt 0 view .LVU1742
 5388 0098 0C9B     		ldr	r3, [sp, #48]
 5389 009a 2022     		movs	r2, #32
 5390 009c DA72     		strb	r2, [r3, #11]
3395:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
 5391              		.loc 1 3395 6 is_stmt 1 view .LVU1743
3395:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
 5392              		.loc 1 3395 11 is_stmt 0 view .LVU1744
 5393 009e DDF80C80 		ldr	r8, [sp, #12]
3395:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
 5394              		.loc 1 3395 26 view .LVU1745
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 224


 5395 00a2 DDF83090 		ldr	r9, [sp, #48]
3395:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dj.dir, 0);			/* Reset file allocation info */
 5396              		.loc 1 3395 11 view .LVU1746
 5397 00a6 4946     		mov	r1, r9
 5398 00a8 4046     		mov	r0, r8
 5399 00aa FFF7FEFF 		bl	ld_clust
 5400              	.LVL639:
 5401 00ae 0446     		mov	r4, r0
 5402              	.LVL640:
3396:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_FileSize, 0);
 5403              		.loc 1 3396 6 is_stmt 1 view .LVU1747
 5404 00b0 0022     		movs	r2, #0
 5405 00b2 4946     		mov	r1, r9
 5406 00b4 4046     		mov	r0, r8
 5407              	.LVL641:
3396:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dj.dir + DIR_FileSize, 0);
 5408              		.loc 1 3396 6 is_stmt 0 view .LVU1748
 5409 00b6 FFF7FEFF 		bl	st_clust
 5410              	.LVL642:
3397:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 5411              		.loc 1 3397 6 is_stmt 1 view .LVU1749
 5412 00ba 0021     		movs	r1, #0
 5413 00bc 0C98     		ldr	r0, [sp, #48]
 5414 00be 1C30     		adds	r0, r0, #28
 5415 00c0 FFF7FEFF 		bl	st_dword
 5416              	.LVL643:
3398:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5417              		.loc 1 3398 6 view .LVU1750
3398:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5418              		.loc 1 3398 16 is_stmt 0 view .LVU1751
 5419 00c4 039B     		ldr	r3, [sp, #12]
 5420 00c6 0122     		movs	r2, #1
 5421 00c8 DA70     		strb	r2, [r3, #3]
3400:Middlewares/Third_Party/FatFs/src/ff.c **** 						dw = fs->winsect;
 5422              		.loc 1 3400 6 is_stmt 1 view .LVU1752
3400:Middlewares/Third_Party/FatFs/src/ff.c **** 						dw = fs->winsect;
 5423              		.loc 1 3400 9 is_stmt 0 view .LVU1753
 5424 00ca 002C     		cmp	r4, #0
 5425 00cc 3AD0     		beq	.L409
3401:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
 5426              		.loc 1 3401 7 is_stmt 1 view .LVU1754
3401:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
 5427              		.loc 1 3401 14 is_stmt 0 view .LVU1755
 5428 00ce 039B     		ldr	r3, [sp, #12]
3401:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = remove_chain(&dj.obj, cl, 0);
 5429              		.loc 1 3401 10 view .LVU1756
 5430 00d0 D3F83080 		ldr	r8, [r3, #48]
 5431              	.LVL644:
3402:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 5432              		.loc 1 3402 7 is_stmt 1 view .LVU1757
3402:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 5433              		.loc 1 3402 13 is_stmt 0 view .LVU1758
 5434 00d4 0022     		movs	r2, #0
 5435 00d6 2146     		mov	r1, r4
 5436 00d8 04A8     		add	r0, sp, #16
 5437 00da FFF7FEFF 		bl	remove_chain
 5438              	.LVL645:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 225


3403:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, dw);
 5439              		.loc 1 3403 7 is_stmt 1 view .LVU1759
3403:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, dw);
 5440              		.loc 1 3403 10 is_stmt 0 view .LVU1760
 5441 00de 0546     		mov	r5, r0
 5442 00e0 0028     		cmp	r0, #0
 5443 00e2 9FD1     		bne	.L403
3404:Middlewares/Third_Party/FatFs/src/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
 5444              		.loc 1 3404 8 is_stmt 1 view .LVU1761
3404:Middlewares/Third_Party/FatFs/src/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
 5445              		.loc 1 3404 14 is_stmt 0 view .LVU1762
 5446 00e4 4146     		mov	r1, r8
 5447 00e6 0398     		ldr	r0, [sp, #12]
 5448              	.LVL646:
3404:Middlewares/Third_Party/FatFs/src/ff.c **** 							fs->last_clst = cl - 1;		/* Reuse the cluster hole */
 5449              		.loc 1 3404 14 view .LVU1763
 5450 00e8 FFF7FEFF 		bl	move_window
 5451              	.LVL647:
 5452 00ec 0546     		mov	r5, r0
 5453              	.LVL648:
3405:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 5454              		.loc 1 3405 8 is_stmt 1 view .LVU1764
3405:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 5455              		.loc 1 3405 27 is_stmt 0 view .LVU1765
 5456 00ee 013C     		subs	r4, r4, #1
 5457              	.LVL649:
3405:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 5458              		.loc 1 3405 22 view .LVU1766
 5459 00f0 039B     		ldr	r3, [sp, #12]
 5460 00f2 1C61     		str	r4, [r3, #16]
 5461 00f4 26E0     		b	.L409
 5462              	.LVL650:
 5463              	.L418:
3336:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5464              		.loc 1 3336 9 view .LVU1767
 5465 00f6 0625     		movs	r5, #6
 5466 00f8 B3E7     		b	.L404
 5467              	.LVL651:
 5468              	.L432:
3349:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5469              		.loc 1 3349 6 is_stmt 1 view .LVU1768
3349:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5470              		.loc 1 3349 12 is_stmt 0 view .LVU1769
 5471 00fa FFF7FEFF 		bl	enq_lock
 5472              	.LVL652:
3349:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5473              		.loc 1 3349 43 discriminator 1 view .LVU1770
 5474 00fe 08B9     		cbnz	r0, .L433
3349:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5475              		.loc 1 3349 43 discriminator 2 view .LVU1771
 5476 0100 1225     		movs	r5, #18
 5477              	.LVL653:
3349:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5478              		.loc 1 3349 43 discriminator 2 view .LVU1772
 5479 0102 B5E7     		b	.L407
 5480              	.LVL654:
 5481              	.L433:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 226


3349:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5482              		.loc 1 3349 25 discriminator 1 view .LVU1773
 5483 0104 04A8     		add	r0, sp, #16
 5484 0106 FFF7FEFF 		bl	dir_register
 5485              	.LVL655:
 5486 010a 0546     		mov	r5, r0
 5487              	.LVL656:
3349:Middlewares/Third_Party/FatFs/src/ff.c **** #else
 5488              		.loc 1 3349 25 discriminator 1 view .LVU1774
 5489 010c B0E7     		b	.L407
 5490              	.LVL657:
 5491              	.L406:
3357:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;
 5492              		.loc 1 3357 5 is_stmt 1 view .LVU1775
3357:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;
 5493              		.loc 1 3357 15 is_stmt 0 view .LVU1776
 5494 010e 9DF81630 		ldrb	r3, [sp, #22]	@ zero_extendqisi2
3357:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;
 5495              		.loc 1 3357 8 view .LVU1777
 5496 0112 13F0110F 		tst	r3, #17
 5497 0116 14D1     		bne	.L420
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5498              		.loc 1 3360 6 is_stmt 1 view .LVU1778
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5499              		.loc 1 3360 9 is_stmt 0 view .LVU1779
 5500 0118 14F0040F 		tst	r4, #4
 5501 011c AAD0     		beq	.L408
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5502              		.loc 1 3360 36 discriminator 1 view .LVU1780
 5503 011e 0825     		movs	r5, #8
 5504              	.LVL658:
3360:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5505              		.loc 1 3360 36 discriminator 1 view .LVU1781
 5506 0120 80E7     		b	.L403
 5507              	.LVL659:
 5508              	.L405:
3412:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* It is a directory */
 5509              		.loc 1 3412 4 is_stmt 1 view .LVU1782
3412:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (dj.obj.attr & AM_DIR) {		/* It is a directory */
 5510              		.loc 1 3412 7 is_stmt 0 view .LVU1783
 5511 0122 002D     		cmp	r5, #0
 5512 0124 7FF47EAF 		bne	.L403
3413:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
 5513              		.loc 1 3413 5 is_stmt 1 view .LVU1784
3413:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
 5514              		.loc 1 3413 15 is_stmt 0 view .LVU1785
 5515 0128 9DF81630 		ldrb	r3, [sp, #22]	@ zero_extendqisi2
3413:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_NO_FILE;
 5516              		.loc 1 3413 8 view .LVU1786
 5517 012c 13F0100F 		tst	r3, #16
 5518 0130 76D1     		bne	.L422
3416:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
 5519              		.loc 1 3416 6 is_stmt 1 view .LVU1787
3416:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
 5520              		.loc 1 3416 9 is_stmt 0 view .LVU1788
 5521 0132 14F0020F 		tst	r4, #2
 5522 0136 05D0     		beq	.L409
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 227


3416:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_DENIED;
 5523              		.loc 1 3416 28 discriminator 1 view .LVU1789
 5524 0138 13F0010F 		tst	r3, #1
 5525 013c 02D0     		beq	.L409
3417:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5526              		.loc 1 3417 11 view .LVU1790
 5527 013e 0725     		movs	r5, #7
 5528              	.LVL660:
3417:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5529              		.loc 1 3417 11 view .LVU1791
 5530 0140 70E7     		b	.L403
 5531              	.LVL661:
 5532              	.L420:
3358:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 5533              		.loc 1 3358 10 view .LVU1792
 5534 0142 0725     		movs	r5, #7
 5535              	.LVL662:
 5536              	.L409:
3422:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
 5537              		.loc 1 3422 3 is_stmt 1 view .LVU1793
3422:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (mode & FA_CREATE_ALWAYS)		/* Set file change flag if created or overwritten */
 5538              		.loc 1 3422 6 is_stmt 0 view .LVU1794
 5539 0144 002D     		cmp	r5, #0
 5540 0146 7FF46DAF 		bne	.L403
3423:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA_MODIFIED;
 5541              		.loc 1 3423 4 is_stmt 1 view .LVU1795
3423:Middlewares/Third_Party/FatFs/src/ff.c **** 				mode |= FA_MODIFIED;
 5542              		.loc 1 3423 7 is_stmt 0 view .LVU1796
 5543 014a 17F0080F 		tst	r7, #8
 5544 014e 01D0     		beq	.L410
3424:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
 5545              		.loc 1 3424 5 is_stmt 1 view .LVU1797
3424:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_sect = fs->winsect;			/* Pointer to the directory entry */
 5546              		.loc 1 3424 10 is_stmt 0 view .LVU1798
 5547 0150 47F04007 		orr	r7, r7, #64
 5548              	.LVL663:
 5549              	.L410:
3425:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_ptr = dj.dir;
 5550              		.loc 1 3425 4 is_stmt 1 view .LVU1799
3425:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_ptr = dj.dir;
 5551              		.loc 1 3425 21 is_stmt 0 view .LVU1800
 5552 0154 039B     		ldr	r3, [sp, #12]
 5553 0156 1B6B     		ldr	r3, [r3, #48]
3425:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->dir_ptr = dj.dir;
 5554              		.loc 1 3425 17 view .LVU1801
 5555 0158 7362     		str	r3, [r6, #36]
3426:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5556              		.loc 1 3426 4 is_stmt 1 view .LVU1802
3426:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5557              		.loc 1 3426 20 is_stmt 0 view .LVU1803
 5558 015a 0C9B     		ldr	r3, [sp, #48]
3426:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 5559              		.loc 1 3426 16 view .LVU1804
 5560 015c B362     		str	r3, [r6, #40]
3428:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->obj.lockid) res = FR_INT_ERR;
 5561              		.loc 1 3428 4 is_stmt 1 view .LVU1805
3428:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->obj.lockid) res = FR_INT_ERR;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 228


 5562              		.loc 1 3428 21 is_stmt 0 view .LVU1806
 5563 015e 012F     		cmp	r7, #1
 5564 0160 94BF     		ite	ls
 5565 0162 0021     		movls	r1, #0
 5566 0164 0121     		movhi	r1, #1
 5567 0166 04A8     		add	r0, sp, #16
 5568 0168 FFF7FEFF 		bl	inc_lock
 5569              	.LVL664:
3428:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!fp->obj.lockid) res = FR_INT_ERR;
 5570              		.loc 1 3428 19 discriminator 1 view .LVU1807
 5571 016c 3061     		str	r0, [r6, #16]
3429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5572              		.loc 1 3429 4 is_stmt 1 view .LVU1808
3429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5573              		.loc 1 3429 7 is_stmt 0 view .LVU1809
 5574 016e 08B9     		cbnz	r0, .L434
3429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5575              		.loc 1 3429 29 discriminator 1 view .LVU1810
 5576 0170 0225     		movs	r5, #2
 5577              	.LVL665:
3429:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5578              		.loc 1 3429 29 discriminator 1 view .LVU1811
 5579 0172 57E7     		b	.L403
 5580              	.LVL666:
 5581              	.L434:
3444:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 5582              		.loc 1 3444 3 is_stmt 1 view .LVU1812
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 5583              		.loc 1 3456 5 view .LVU1813
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 5584              		.loc 1 3456 22 is_stmt 0 view .LVU1814
 5585 0174 039C     		ldr	r4, [sp, #12]
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 5586              		.loc 1 3456 37 view .LVU1815
 5587 0176 DDF83080 		ldr	r8, [sp, #48]
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 5588              		.loc 1 3456 22 view .LVU1816
 5589 017a 4146     		mov	r1, r8
 5590 017c 2046     		mov	r0, r4
 5591 017e FFF7FEFF 		bl	ld_clust
 5592              	.LVL667:
3456:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->obj.objsize = ld_dword(dj.dir + DIR_FileSize);
 5593              		.loc 1 3456 20 discriminator 1 view .LVU1817
 5594 0182 B060     		str	r0, [r6, #8]
3457:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5595              		.loc 1 3457 5 is_stmt 1 view .LVU1818
3457:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5596              		.loc 1 3457 23 is_stmt 0 view .LVU1819
 5597 0184 08F11C00 		add	r0, r8, #28
 5598 0188 FFF7FEFF 		bl	ld_dword
 5599              	.LVL668:
3457:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 5600              		.loc 1 3457 21 discriminator 1 view .LVU1820
 5601 018c F060     		str	r0, [r6, #12]
3460:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5602              		.loc 1 3460 4 is_stmt 1 view .LVU1821
3460:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 229


 5603              		.loc 1 3460 14 is_stmt 0 view .LVU1822
 5604 018e 0021     		movs	r1, #0
 5605 0190 F162     		str	r1, [r6, #44]
3462:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.id = fs->id;
 5606              		.loc 1 3462 4 is_stmt 1 view .LVU1823
3462:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.id = fs->id;
 5607              		.loc 1 3462 15 is_stmt 0 view .LVU1824
 5608 0192 3460     		str	r4, [r6]
3463:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag = mode;		/* Set file access mode */
 5609              		.loc 1 3463 4 is_stmt 1 view .LVU1825
3463:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag = mode;		/* Set file access mode */
 5610              		.loc 1 3463 19 is_stmt 0 view .LVU1826
 5611 0194 E388     		ldrh	r3, [r4, #6]
3463:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag = mode;		/* Set file access mode */
 5612              		.loc 1 3463 15 view .LVU1827
 5613 0196 B380     		strh	r3, [r6, #4]	@ movhi
3464:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->err = 0;			/* Clear error flag */
 5614              		.loc 1 3464 4 is_stmt 1 view .LVU1828
3464:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->err = 0;			/* Clear error flag */
 5615              		.loc 1 3464 13 is_stmt 0 view .LVU1829
 5616 0198 3775     		strb	r7, [r6, #20]
3465:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = 0;			/* Invalidate current data sector */
 5617              		.loc 1 3465 4 is_stmt 1 view .LVU1830
3465:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->sect = 0;			/* Invalidate current data sector */
 5618              		.loc 1 3465 12 is_stmt 0 view .LVU1831
 5619 019a 7175     		strb	r1, [r6, #21]
3466:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = 0;			/* Set file pointer top of the file */
 5620              		.loc 1 3466 4 is_stmt 1 view .LVU1832
3466:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = 0;			/* Set file pointer top of the file */
 5621              		.loc 1 3466 13 is_stmt 0 view .LVU1833
 5622 019c 3162     		str	r1, [r6, #32]
3467:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5623              		.loc 1 3467 4 is_stmt 1 view .LVU1834
3467:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 5624              		.loc 1 3467 13 is_stmt 0 view .LVU1835
 5625 019e B161     		str	r1, [r6, #24]
3470:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5626              		.loc 1 3470 4 is_stmt 1 view .LVU1836
3470:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5627              		.loc 1 3470 14 is_stmt 0 view .LVU1837
 5628 01a0 06F13008 		add	r8, r6, #48
3470:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5629              		.loc 1 3470 4 view .LVU1838
 5630 01a4 4FF40072 		mov	r2, #512
 5631 01a8 4046     		mov	r0, r8
 5632 01aa FFF7FEFF 		bl	mem_set
 5633              	.LVL669:
3472:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 5634              		.loc 1 3472 4 is_stmt 1 view .LVU1839
3472:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 5635              		.loc 1 3472 7 is_stmt 0 view .LVU1840
 5636 01ae 17F0200F 		tst	r7, #32
 5637 01b2 31D0     		beq	.L411
3472:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
 5638              		.loc 1 3472 38 discriminator 1 view .LVU1841
 5639 01b4 F468     		ldr	r4, [r6, #12]
3472:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = fp->obj.objsize;			/* Offset to seek */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 230


 5640              		.loc 1 3472 28 discriminator 1 view .LVU1842
 5641 01b6 7CB3     		cbz	r4, .L411
3473:Middlewares/Third_Party/FatFs/src/ff.c **** 				bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size in byte */
 5642              		.loc 1 3473 5 is_stmt 1 view .LVU1843
3473:Middlewares/Third_Party/FatFs/src/ff.c **** 				bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size in byte */
 5643              		.loc 1 3473 14 is_stmt 0 view .LVU1844
 5644 01b8 B461     		str	r4, [r6, #24]
3474:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 5645              		.loc 1 3474 5 is_stmt 1 view .LVU1845
3474:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 5646              		.loc 1 3474 20 is_stmt 0 view .LVU1846
 5647 01ba 039B     		ldr	r3, [sp, #12]
 5648 01bc 5F89     		ldrh	r7, [r3, #10]
 5649              	.LVL670:
3474:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->obj.sclust;				/* Follow the cluster chain */
 5650              		.loc 1 3474 9 view .LVU1847
 5651 01be 7F02     		lsls	r7, r7, #9
 5652              	.LVL671:
3475:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (ofs = fp->obj.objsize; res == FR_OK && ofs > bcs; ofs -= bcs) {
 5653              		.loc 1 3475 5 is_stmt 1 view .LVU1848
3475:Middlewares/Third_Party/FatFs/src/ff.c **** 				for (ofs = fp->obj.objsize; res == FR_OK && ofs > bcs; ofs -= bcs) {
 5654              		.loc 1 3475 10 is_stmt 0 view .LVU1849
 5655 01c0 B168     		ldr	r1, [r6, #8]
 5656              	.LVL672:
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5657              		.loc 1 3476 5 is_stmt 1 view .LVU1850
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5658              		.loc 1 3476 5 is_stmt 0 view .LVU1851
 5659 01c2 01E0     		b	.L412
 5660              	.LVL673:
 5661              	.L425:
3478:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 5662              		.loc 1 3478 25 discriminator 1 view .LVU1852
 5663 01c4 0225     		movs	r5, #2
 5664              	.LVL674:
 5665              	.L413:
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5666              		.loc 1 3476 64 is_stmt 1 discriminator 2 view .LVU1853
 5667 01c6 E41B     		subs	r4, r4, r7
 5668              	.LVL675:
 5669              	.L412:
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5670              		.loc 1 3476 46 discriminator 1 view .LVU1854
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5671              		.loc 1 3476 53 is_stmt 0 discriminator 1 view .LVU1855
 5672 01c8 BC42     		cmp	r4, r7
 5673 01ca 94BF     		ite	ls
 5674 01cc 0023     		movls	r3, #0
 5675 01ce 0123     		movhi	r3, #1
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5676              		.loc 1 3476 46 discriminator 1 view .LVU1856
 5677 01d0 5DB9     		cbnz	r5, .L429
3476:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = get_fat(&fp->obj, clst);
 5678              		.loc 1 3476 46 discriminator 1 view .LVU1857
 5679 01d2 53B1     		cbz	r3, .L429
3477:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
 5680              		.loc 1 3477 6 is_stmt 1 view .LVU1858
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 231


3477:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
 5681              		.loc 1 3477 13 is_stmt 0 view .LVU1859
 5682 01d4 3046     		mov	r0, r6
 5683 01d6 FFF7FEFF 		bl	get_fat
 5684              	.LVL676:
3477:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1) res = FR_INT_ERR;
 5685              		.loc 1 3477 13 view .LVU1860
 5686 01da 0146     		mov	r1, r0
 5687              	.LVL677:
3478:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 5688              		.loc 1 3478 6 is_stmt 1 view .LVU1861
3478:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) res = FR_DISK_ERR;
 5689              		.loc 1 3478 9 is_stmt 0 view .LVU1862
 5690 01dc 0128     		cmp	r0, #1
 5691 01de F1D9     		bls	.L425
3479:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5692              		.loc 1 3479 6 is_stmt 1 view .LVU1863
3479:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5693              		.loc 1 3479 9 is_stmt 0 view .LVU1864
 5694 01e0 B0F1FF3F 		cmp	r0, #-1
 5695 01e4 EFD1     		bne	.L413
3479:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5696              		.loc 1 3479 34 discriminator 1 view .LVU1865
 5697 01e6 0125     		movs	r5, #1
 5698              	.LVL678:
3479:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 5699              		.loc 1 3479 34 discriminator 1 view .LVU1866
 5700 01e8 EDE7     		b	.L413
 5701              	.LVL679:
 5702              	.L429:
3481:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && ofs % SS(fs)) {	/* Fill sector buffer if not on the sector boundary */
 5703              		.loc 1 3481 5 is_stmt 1 view .LVU1867
3481:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && ofs % SS(fs)) {	/* Fill sector buffer if not on the sector boundary */
 5704              		.loc 1 3481 15 is_stmt 0 view .LVU1868
 5705 01ea F161     		str	r1, [r6, #28]
3482:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((sc = clust2sect(fs, clst)) == 0) {
 5706              		.loc 1 3482 5 is_stmt 1 view .LVU1869
3482:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((sc = clust2sect(fs, clst)) == 0) {
 5707              		.loc 1 3482 8 is_stmt 0 view .LVU1870
 5708 01ec 002D     		cmp	r5, #0
 5709 01ee 7FF419AF 		bne	.L403
3482:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((sc = clust2sect(fs, clst)) == 0) {
 5710              		.loc 1 3482 29 discriminator 1 view .LVU1871
 5711 01f2 C4F30803 		ubfx	r3, r4, #0, #9
3482:Middlewares/Third_Party/FatFs/src/ff.c **** 					if ((sc = clust2sect(fs, clst)) == 0) {
 5712              		.loc 1 3482 22 discriminator 1 view .LVU1872
 5713 01f6 7BB1     		cbz	r3, .L411
3483:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_INT_ERR;
 5714              		.loc 1 3483 6 is_stmt 1 view .LVU1873
3483:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_INT_ERR;
 5715              		.loc 1 3483 16 is_stmt 0 view .LVU1874
 5716 01f8 039F     		ldr	r7, [sp, #12]
 5717              	.LVL680:
3483:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_INT_ERR;
 5718              		.loc 1 3483 16 view .LVU1875
 5719 01fa 3846     		mov	r0, r7
 5720 01fc FFF7FEFF 		bl	clust2sect
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 232


 5721              	.LVL681:
3483:Middlewares/Third_Party/FatFs/src/ff.c **** 						res = FR_INT_ERR;
 5722              		.loc 1 3483 9 discriminator 1 view .LVU1876
 5723 0200 08B9     		cbnz	r0, .L435
3484:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 5724              		.loc 1 3484 11 view .LVU1877
 5725 0202 0225     		movs	r5, #2
 5726              	.LVL682:
3484:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 5727              		.loc 1 3484 11 view .LVU1878
 5728 0204 0EE7     		b	.L403
 5729              	.LVL683:
 5730              	.L435:
3486:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 5731              		.loc 1 3486 7 is_stmt 1 view .LVU1879
3486:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 5732              		.loc 1 3486 21 is_stmt 0 view .LVU1880
 5733 0206 00EB5422 		add	r2, r0, r4, lsr #9
3486:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 5734              		.loc 1 3486 16 view .LVU1881
 5735 020a 3262     		str	r2, [r6, #32]
3488:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5736              		.loc 1 3488 7 is_stmt 1 view .LVU1882
3488:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5737              		.loc 1 3488 11 is_stmt 0 view .LVU1883
 5738 020c 0123     		movs	r3, #1
 5739 020e 4146     		mov	r1, r8
 5740 0210 7878     		ldrb	r0, [r7, #1]	@ zero_extendqisi2
 5741              	.LVL684:
3488:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5742              		.loc 1 3488 11 view .LVU1884
 5743 0212 FFF7FEFF 		bl	disk_read
 5744              	.LVL685:
3488:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5745              		.loc 1 3488 10 discriminator 1 view .LVU1885
 5746 0216 28B9     		cbnz	r0, .L428
 5747              	.LVL686:
 5748              	.L411:
3496:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 5749              		.loc 1 3496 16 is_stmt 1 view .LVU1886
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5750              		.loc 1 3499 2 view .LVU1887
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5751              		.loc 1 3499 5 is_stmt 0 view .LVU1888
 5752 0218 002D     		cmp	r5, #0
 5753 021a 3FF405AF 		beq	.L416
3499:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5754              		.loc 1 3499 5 view .LVU1889
 5755 021e 01E7     		b	.L403
 5756              	.LVL687:
 5757              	.L422:
3414:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 5758              		.loc 1 3414 10 view .LVU1890
 5759 0220 0425     		movs	r5, #4
 5760              	.LVL688:
3414:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 5761              		.loc 1 3414 10 view .LVU1891
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 233


 5762 0222 FFE6     		b	.L403
 5763              	.LVL689:
 5764              	.L428:
3488:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5765              		.loc 1 3488 67 discriminator 1 view .LVU1892
 5766 0224 0125     		movs	r5, #1
 5767              	.LVL690:
3488:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 5768              		.loc 1 3488 67 discriminator 1 view .LVU1893
 5769 0226 FDE6     		b	.L403
 5770              	.LVL691:
 5771              	.L417:
3324:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5772              		.loc 1 3324 18 discriminator 1 view .LVU1894
 5773 0228 0925     		movs	r5, #9
 5774 022a 01E7     		b	.L402
 5775              		.cfi_endproc
 5776              	.LFE379:
 5778              		.section	.text.f_read,"ax",%progbits
 5779              		.align	1
 5780              		.global	f_read
 5781              		.syntax unified
 5782              		.thumb
 5783              		.thumb_func
 5785              	f_read:
 5786              	.LVL692:
 5787              	.LFB380:
3517:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5788              		.loc 1 3517 1 is_stmt 1 view -0
 5789              		.cfi_startproc
 5790              		@ args = 0, pretend = 0, frame = 16
 5791              		@ frame_needed = 0, uses_anonymous_args = 0
3517:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 5792              		.loc 1 3517 1 is_stmt 0 view .LVU1896
 5793 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 5794              	.LCFI50:
 5795              		.cfi_def_cfa_offset 36
 5796              		.cfi_offset 4, -36
 5797              		.cfi_offset 5, -32
 5798              		.cfi_offset 6, -28
 5799              		.cfi_offset 7, -24
 5800              		.cfi_offset 8, -20
 5801              		.cfi_offset 9, -16
 5802              		.cfi_offset 10, -12
 5803              		.cfi_offset 11, -8
 5804              		.cfi_offset 14, -4
 5805 0004 85B0     		sub	sp, sp, #20
 5806              	.LCFI51:
 5807              		.cfi_def_cfa_offset 56
 5808 0006 0446     		mov	r4, r0
 5809 0008 8846     		mov	r8, r1
 5810 000a 1546     		mov	r5, r2
 5811 000c 9946     		mov	r9, r3
3518:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 5812              		.loc 1 3518 2 is_stmt 1 view .LVU1897
3519:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
 5813              		.loc 1 3519 2 view .LVU1898
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 234


3520:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t remain;
 5814              		.loc 1 3520 2 view .LVU1899
3521:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rcnt, cc, csect;
 5815              		.loc 1 3521 2 view .LVU1900
3522:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *rbuff = (BYTE*)buff;
 5816              		.loc 1 3522 2 view .LVU1901
3523:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5817              		.loc 1 3523 2 view .LVU1902
 5818              	.LVL693:
3526:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
 5819              		.loc 1 3526 2 view .LVU1903
3526:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
 5820              		.loc 1 3526 6 is_stmt 0 view .LVU1904
 5821 000e 0023     		movs	r3, #0
 5822              	.LVL694:
3526:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);				/* Check validity of the file object */
 5823              		.loc 1 3526 6 view .LVU1905
 5824 0010 C9F80030 		str	r3, [r9]
3527:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 5825              		.loc 1 3527 2 is_stmt 1 view .LVU1906
3527:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 5826              		.loc 1 3527 8 is_stmt 0 view .LVU1907
 5827 0014 03A9     		add	r1, sp, #12
 5828              	.LVL695:
3527:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 5829              		.loc 1 3527 8 view .LVU1908
 5830 0016 FFF7FEFF 		bl	validate
 5831              	.LVL696:
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 5832              		.loc 1 3528 2 is_stmt 1 view .LVU1909
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 5833              		.loc 1 3528 5 is_stmt 0 view .LVU1910
 5834 001a 0190     		str	r0, [sp, #4]
 5835 001c 68B9     		cbnz	r0, .L437
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 5836              		.loc 1 3528 27 discriminator 2 view .LVU1911
 5837 001e 637D     		ldrb	r3, [r4, #21]	@ zero_extendqisi2
 5838 0020 0193     		str	r3, [sp, #4]
 5839              	.LVL697:
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 5840              		.loc 1 3528 19 discriminator 2 view .LVU1912
 5841 0022 53B9     		cbnz	r3, .L437
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 5842              		.loc 1 3528 74 is_stmt 1 discriminator 4 view .LVU1913
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 5843              		.loc 1 3529 2 view .LVU1914
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 5844              		.loc 1 3529 10 is_stmt 0 view .LVU1915
 5845 0024 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 5846              	.LVL698:
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 5847              		.loc 1 3529 5 view .LVU1916
 5848 0026 13F0010F 		tst	r3, #1
 5849 002a 0ED0     		beq	.L465
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 5850              		.loc 1 3529 52 is_stmt 1 discriminator 2 view .LVU1917
3530:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 235


 5851              		.loc 1 3530 2 view .LVU1918
3530:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 5852              		.loc 1 3530 18 is_stmt 0 view .LVU1919
 5853 002c E668     		ldr	r6, [r4, #12]
3530:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 5854              		.loc 1 3530 31 view .LVU1920
 5855 002e A369     		ldr	r3, [r4, #24]
3530:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (btr > remain) btr = (UINT)remain;		/* Truncate btr by remaining bytes */
 5856              		.loc 1 3530 9 view .LVU1921
 5857 0030 F61A     		subs	r6, r6, r3
 5858              	.LVL699:
3531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5859              		.loc 1 3531 2 is_stmt 1 view .LVU1922
3531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5860              		.loc 1 3531 5 is_stmt 0 view .LVU1923
 5861 0032 AE42     		cmp	r6, r5
 5862 0034 75D3     		bcc	.L460
 5863 0036 2E46     		mov	r6, r5
 5864              	.LVL700:
3531:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5865              		.loc 1 3531 5 view .LVU1924
 5866 0038 73E0     		b	.L460
 5867              	.LVL701:
 5868              	.L437:
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 5869              		.loc 1 3528 57 is_stmt 1 discriminator 3 view .LVU1925
 5870 003a 0199     		ldr	r1, [sp, #4]
 5871 003c 0398     		ldr	r0, [sp, #12]
 5872 003e FFF7FEFF 		bl	unlock_fs
 5873              	.LVL702:
3528:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_READ)) LEAVE_FF(fs, FR_DENIED); /* Check access mode */
 5874              		.loc 1 3528 57 discriminator 1 view .LVU1926
 5875              	.L439:
3600:Middlewares/Third_Party/FatFs/src/ff.c **** }
 5876              		.loc 1 3600 21 discriminator 1 view .LVU1927
3601:Middlewares/Third_Party/FatFs/src/ff.c **** 
 5877              		.loc 1 3601 1 is_stmt 0 view .LVU1928
 5878 0042 0198     		ldr	r0, [sp, #4]
 5879 0044 05B0     		add	sp, sp, #20
 5880              	.LCFI52:
 5881              		.cfi_remember_state
 5882              		.cfi_def_cfa_offset 36
 5883              		@ sp needed
 5884 0046 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 5885              	.LVL703:
 5886              	.L465:
 5887              	.LCFI53:
 5888              		.cfi_restore_state
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 5889              		.loc 1 3529 29 is_stmt 1 discriminator 1 view .LVU1929
 5890 004a 0721     		movs	r1, #7
 5891 004c 0398     		ldr	r0, [sp, #12]
 5892 004e FFF7FEFF 		bl	unlock_fs
 5893              	.LVL704:
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 5894              		.loc 1 3529 29 discriminator 1 view .LVU1930
 5895 0052 0723     		movs	r3, #7
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 236


 5896 0054 0193     		str	r3, [sp, #4]
 5897              	.LVL705:
3529:Middlewares/Third_Party/FatFs/src/ff.c **** 	remain = fp->obj.objsize - fp->fptr;
 5898              		.loc 1 3529 29 is_stmt 0 view .LVU1931
 5899 0056 F4E7     		b	.L439
 5900              	.LVL706:
 5901              	.L445:
3542:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 5902              		.loc 1 3542 6 is_stmt 1 view .LVU1932
3542:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 5903              		.loc 1 3542 12 is_stmt 0 view .LVU1933
 5904 0058 E36A     		ldr	r3, [r4, #44]
3542:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 5905              		.loc 1 3542 9 view .LVU1934
 5906 005a 1BB1     		cbz	r3, .L447
3543:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
 5907              		.loc 1 3543 7 is_stmt 1 view .LVU1935
3543:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
 5908              		.loc 1 3543 14 is_stmt 0 view .LVU1936
 5909 005c 2046     		mov	r0, r4
 5910 005e FFF7FEFF 		bl	clmt_clust
 5911              	.LVL707:
3543:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
 5912              		.loc 1 3543 14 view .LVU1937
 5913 0062 6EE0     		b	.L446
 5914              	.LVL708:
 5915              	.L447:
3547:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5916              		.loc 1 3547 7 is_stmt 1 view .LVU1938
3547:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5917              		.loc 1 3547 14 is_stmt 0 view .LVU1939
 5918 0064 E169     		ldr	r1, [r4, #28]
 5919 0066 2046     		mov	r0, r4
 5920 0068 FFF7FEFF 		bl	get_fat
 5921              	.LVL709:
3547:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 5922              		.loc 1 3547 14 view .LVU1940
 5923 006c 69E0     		b	.L446
 5924              	.L469:
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 5925              		.loc 1 3550 19 is_stmt 1 discriminator 1 view .LVU1941
 5926 006e 0225     		movs	r5, #2
 5927 0070 6575     		strb	r5, [r4, #21]
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 5928              		.loc 1 3550 19 discriminator 1 view .LVU1942
 5929 0072 2946     		mov	r1, r5
 5930 0074 0398     		ldr	r0, [sp, #12]
 5931              	.LVL710:
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 5932              		.loc 1 3550 19 is_stmt 0 discriminator 1 view .LVU1943
 5933 0076 FFF7FEFF 		bl	unlock_fs
 5934              	.LVL711:
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 5935              		.loc 1 3550 19 is_stmt 1 discriminator 1 view .LVU1944
 5936 007a 0195     		str	r5, [sp, #4]
 5937              	.LVL712:
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 237


 5938              		.loc 1 3550 19 is_stmt 0 view .LVU1945
 5939 007c E1E7     		b	.L439
 5940              	.LVL713:
 5941              	.L470:
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 5942              		.loc 1 3551 29 is_stmt 1 discriminator 1 view .LVU1946
 5943 007e 0125     		movs	r5, #1
 5944 0080 6575     		strb	r5, [r4, #21]
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 5945              		.loc 1 3551 29 discriminator 1 view .LVU1947
 5946 0082 2946     		mov	r1, r5
 5947 0084 0398     		ldr	r0, [sp, #12]
 5948              	.LVL714:
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 5949              		.loc 1 3551 29 is_stmt 0 discriminator 1 view .LVU1948
 5950 0086 FFF7FEFF 		bl	unlock_fs
 5951              	.LVL715:
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 5952              		.loc 1 3551 29 is_stmt 1 discriminator 1 view .LVU1949
 5953 008a 0195     		str	r5, [sp, #4]
 5954              	.LVL716:
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 5955              		.loc 1 3551 29 is_stmt 0 view .LVU1950
 5956 008c D9E7     		b	.L439
 5957              	.LVL717:
 5958              	.L471:
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 5959              		.loc 1 3555 15 is_stmt 1 discriminator 1 view .LVU1951
 5960 008e 0225     		movs	r5, #2
 5961 0090 6575     		strb	r5, [r4, #21]
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 5962              		.loc 1 3555 15 discriminator 1 view .LVU1952
 5963 0092 2946     		mov	r1, r5
 5964 0094 5846     		mov	r0, fp
 5965              	.LVL718:
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 5966              		.loc 1 3555 15 is_stmt 0 discriminator 1 view .LVU1953
 5967 0096 FFF7FEFF 		bl	unlock_fs
 5968              	.LVL719:
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 5969              		.loc 1 3555 15 is_stmt 1 discriminator 1 view .LVU1954
 5970 009a 0195     		str	r5, [sp, #4]
 5971              	.LVL720:
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 5972              		.loc 1 3555 15 is_stmt 0 view .LVU1955
 5973 009c D1E7     		b	.L439
 5974              	.LVL721:
 5975              	.L472:
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 5976              		.loc 1 3562 56 is_stmt 1 discriminator 1 view .LVU1956
 5977 009e 0125     		movs	r5, #1
 5978              	.LVL722:
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 5979              		.loc 1 3562 56 is_stmt 0 discriminator 1 view .LVU1957
 5980 00a0 6575     		strb	r5, [r4, #21]
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 5981              		.loc 1 3562 56 is_stmt 1 discriminator 1 view .LVU1958
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 238


 5982 00a2 2946     		mov	r1, r5
 5983 00a4 0398     		ldr	r0, [sp, #12]
 5984 00a6 FFF7FEFF 		bl	unlock_fs
 5985              	.LVL723:
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 5986              		.loc 1 3562 56 discriminator 1 view .LVU1959
 5987 00aa 0195     		str	r5, [sp, #4]
 5988              	.LVL724:
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 5989              		.loc 1 3562 56 is_stmt 0 view .LVU1960
 5990 00ac C9E7     		b	.L439
 5991              	.LVL725:
 5992              	.L473:
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 5993              		.loc 1 3569 36 discriminator 1 view .LVU1961
 5994 00ae 206A     		ldr	r0, [r4, #32]
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 5995              		.loc 1 3569 43 discriminator 1 view .LVU1962
 5996 00b0 A0EB0A00 		sub	r0, r0, r10
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 5997              		.loc 1 3569 31 discriminator 1 view .LVU1963
 5998 00b4 A842     		cmp	r0, r5
 5999 00b6 6BD2     		bcs	.L454
3570:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6000              		.loc 1 3570 6 is_stmt 1 view .LVU1964
 6001 00b8 4FF40072 		mov	r2, #512
 6002 00bc 04F13001 		add	r1, r4, #48
 6003 00c0 08EB4020 		add	r0, r8, r0, lsl #9
 6004 00c4 FFF7FEFF 		bl	mem_cpy
 6005              	.LVL726:
 6006 00c8 62E0     		b	.L454
 6007              	.L451:
3578:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 6008              		.loc 1 3578 4 view .LVU1965
3578:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 6009              		.loc 1 3578 10 is_stmt 0 view .LVU1966
 6010 00ca 226A     		ldr	r2, [r4, #32]
3578:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 6011              		.loc 1 3578 7 view .LVU1967
 6012 00cc 5245     		cmp	r2, r10
 6013 00ce 0DD0     		beq	.L456
3580:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 6014              		.loc 1 3580 5 is_stmt 1 view .LVU1968
3580:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 6015              		.loc 1 3580 9 is_stmt 0 view .LVU1969
 6016 00d0 94F91430 		ldrsb	r3, [r4, #20]
3580:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 6017              		.loc 1 3580 8 view .LVU1970
 6018 00d4 002B     		cmp	r3, #0
 6019 00d6 5DDB     		blt	.L466
 6020              	.L457:
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6021              		.loc 1 3585 5 is_stmt 1 view .LVU1971
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6022              		.loc 1 3585 9 is_stmt 0 view .LVU1972
 6023 00d8 0123     		movs	r3, #1
 6024 00da 5246     		mov	r2, r10
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 239


 6025 00dc 04F13001 		add	r1, r4, #48
 6026 00e0 0398     		ldr	r0, [sp, #12]
 6027 00e2 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 6028 00e4 FFF7FEFF 		bl	disk_read
 6029              	.LVL727:
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6030              		.loc 1 3585 8 discriminator 1 view .LVU1973
 6031 00e8 0028     		cmp	r0, #0
 6032 00ea 68D1     		bne	.L467
 6033              	.L456:
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6034              		.loc 1 3585 57 is_stmt 1 discriminator 2 view .LVU1974
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6035              		.loc 1 3585 79 discriminator 2 view .LVU1975
3588:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 6036              		.loc 1 3588 4 view .LVU1976
3588:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 6037              		.loc 1 3588 13 is_stmt 0 view .LVU1977
 6038 00ec C4F820A0 		str	r10, [r4, #32]
 6039              	.LVL728:
 6040              	.L443:
3590:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 6041              		.loc 1 3590 3 is_stmt 1 view .LVU1978
3590:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 6042              		.loc 1 3590 27 is_stmt 0 view .LVU1979
 6043 00f0 A369     		ldr	r3, [r4, #24]
3590:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 6044              		.loc 1 3590 34 view .LVU1980
 6045 00f2 C3F30803 		ubfx	r3, r3, #0, #9
3590:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rcnt > btr) rcnt = btr;					/* Clip it by btr if needed */
 6046              		.loc 1 3590 8 view .LVU1981
 6047 00f6 C3F50075 		rsb	r5, r3, #512
 6048              	.LVL729:
3591:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 6049              		.loc 1 3591 3 is_stmt 1 view .LVU1982
3591:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 6050              		.loc 1 3591 6 is_stmt 0 view .LVU1983
 6051 00fa AE42     		cmp	r6, r5
 6052 00fc 00D2     		bcs	.L459
3591:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 6053              		.loc 1 3591 24 discriminator 1 view .LVU1984
 6054 00fe 3546     		mov	r5, r6
 6055              	.LVL730:
 6056              	.L459:
3596:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6057              		.loc 1 3596 3 is_stmt 1 view .LVU1985
3596:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6058              		.loc 1 3596 18 is_stmt 0 view .LVU1986
 6059 0100 04F13001 		add	r1, r4, #48
3596:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6060              		.loc 1 3596 3 view .LVU1987
 6061 0104 2A46     		mov	r2, r5
 6062 0106 1944     		add	r1, r1, r3
 6063 0108 4046     		mov	r0, r8
 6064 010a FFF7FEFF 		bl	mem_cpy
 6065              	.LVL731:
 6066              	.L455:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 240


3534:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 6067              		.loc 1 3534 47 is_stmt 1 view .LVU1988
3534:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 6068              		.loc 1 3534 9 is_stmt 0 view .LVU1989
 6069 010e A844     		add	r8, r8, r5
 6070              	.LVL732:
3534:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 6071              		.loc 1 3534 20 view .LVU1990
 6072 0110 A369     		ldr	r3, [r4, #24]
3534:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 6073              		.loc 1 3534 27 view .LVU1991
 6074 0112 2B44     		add	r3, r3, r5
 6075 0114 A361     		str	r3, [r4, #24]
3534:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 6076              		.loc 1 3534 36 view .LVU1992
 6077 0116 D9F80030 		ldr	r3, [r9]
3534:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 6078              		.loc 1 3534 40 view .LVU1993
 6079 011a 2B44     		add	r3, r3, r5
 6080 011c C9F80030 		str	r3, [r9]
3534:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {			/* On the sector boundary? */
 6081              		.loc 1 3534 53 view .LVU1994
 6082 0120 761B     		subs	r6, r6, r5
 6083              	.LVL733:
 6084              	.L460:
3533:Middlewares/Third_Party/FatFs/src/ff.c **** 		rbuff += rcnt, fp->fptr += rcnt, *br += rcnt, btr -= rcnt) {
 6085              		.loc 1 3533 11 is_stmt 1 view .LVU1995
 6086 0122 002E     		cmp	r6, #0
 6087 0124 53D0     		beq	.L468
3535:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 6088              		.loc 1 3535 3 view .LVU1996
3535:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 6089              		.loc 1 3535 9 is_stmt 0 view .LVU1997
 6090 0126 A169     		ldr	r1, [r4, #24]
3535:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 6091              		.loc 1 3535 16 view .LVU1998
 6092 0128 C1F30803 		ubfx	r3, r1, #0, #9
3535:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs) & (fs->csize - 1));	/* Sector offset in the cluster */
 6093              		.loc 1 3535 6 view .LVU1999
 6094 012c 002B     		cmp	r3, #0
 6095 012e DFD1     		bne	.L443
3536:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 6096              		.loc 1 3536 4 is_stmt 1 view .LVU2000
3536:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 6097              		.loc 1 3536 42 is_stmt 0 view .LVU2001
 6098 0130 039B     		ldr	r3, [sp, #12]
 6099 0132 5F89     		ldrh	r7, [r3, #10]
3536:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {					/* On the cluster boundary? */
 6100              		.loc 1 3536 50 view .LVU2002
 6101 0134 013F     		subs	r7, r7, #1
 6102              	.LVL734:
3537:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 6103              		.loc 1 3537 4 is_stmt 1 view .LVU2003
3537:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 6104              		.loc 1 3537 7 is_stmt 0 view .LVU2004
 6105 0136 17EA5127 		ands	r7, r7, r1, lsr #9
 6106              	.LVL735:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 241


3537:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {			/* On the top of the file? */
 6107              		.loc 1 3537 7 view .LVU2005
 6108 013a 08D1     		bne	.L444
3538:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;		/* Follow cluster chain from the origin */
 6109              		.loc 1 3538 5 is_stmt 1 view .LVU2006
3538:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;		/* Follow cluster chain from the origin */
 6110              		.loc 1 3538 8 is_stmt 0 view .LVU2007
 6111 013c 0029     		cmp	r1, #0
 6112 013e 8BD1     		bne	.L445
3539:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* Middle or end of the file */
 6113              		.loc 1 3539 6 is_stmt 1 view .LVU2008
3539:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {						/* Middle or end of the file */
 6114              		.loc 1 3539 11 is_stmt 0 view .LVU2009
 6115 0140 A068     		ldr	r0, [r4, #8]
 6116              	.LVL736:
 6117              	.L446:
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6118              		.loc 1 3550 5 is_stmt 1 view .LVU2010
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6119              		.loc 1 3550 8 is_stmt 0 view .LVU2011
 6120 0142 0128     		cmp	r0, #1
 6121 0144 93D9     		bls	.L469
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6122              		.loc 1 3550 19 is_stmt 1 discriminator 2 view .LVU2012
3550:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6123              		.loc 1 3550 40 discriminator 2 view .LVU2013
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 6124              		.loc 1 3551 5 view .LVU2014
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 6125              		.loc 1 3551 8 is_stmt 0 view .LVU2015
 6126 0146 B0F1FF3F 		cmp	r0, #-1
 6127 014a 98D0     		beq	.L470
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 6128              		.loc 1 3551 29 is_stmt 1 discriminator 2 view .LVU2016
3551:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;				/* Update current cluster */
 6129              		.loc 1 3551 51 discriminator 2 view .LVU2017
3552:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6130              		.loc 1 3552 5 view .LVU2018
3552:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6131              		.loc 1 3552 15 is_stmt 0 view .LVU2019
 6132 014c E061     		str	r0, [r4, #28]
 6133              	.LVL737:
 6134              	.L444:
3554:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
 6135              		.loc 1 3554 4 is_stmt 1 view .LVU2020
3554:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
 6136              		.loc 1 3554 11 is_stmt 0 view .LVU2021
 6137 014e DDF80CB0 		ldr	fp, [sp, #12]
 6138 0152 E169     		ldr	r1, [r4, #28]
 6139 0154 5846     		mov	r0, fp
 6140 0156 FFF7FEFF 		bl	clust2sect
 6141              	.LVL738:
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6142              		.loc 1 3555 4 is_stmt 1 view .LVU2022
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6143              		.loc 1 3555 7 is_stmt 0 view .LVU2023
 6144 015a 8246     		mov	r10, r0
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 242


 6145 015c 0028     		cmp	r0, #0
 6146 015e 96D0     		beq	.L471
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6147              		.loc 1 3555 15 is_stmt 1 discriminator 2 view .LVU2024
3555:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6148              		.loc 1 3555 36 discriminator 2 view .LVU2025
3556:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btr / SS(fs);					/* When remaining bytes >= sector size, */
 6149              		.loc 1 3556 4 view .LVU2026
3556:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btr / SS(fs);					/* When remaining bytes >= sector size, */
 6150              		.loc 1 3556 9 is_stmt 0 view .LVU2027
 6151 0160 BA44     		add	r10, r10, r7
 6152              	.LVL739:
3557:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
 6153              		.loc 1 3557 4 is_stmt 1 view .LVU2028
3557:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {							/* Read maximum contiguous sectors directly */
 6154              		.loc 1 3557 7 is_stmt 0 view .LVU2029
 6155 0162 750A     		lsrs	r5, r6, #9
 6156              	.LVL740:
3558:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 6157              		.loc 1 3558 4 is_stmt 1 view .LVU2030
3558:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 6158              		.loc 1 3558 7 is_stmt 0 view .LVU2031
 6159 0164 B6F5007F 		cmp	r6, #512
 6160 0168 AFD3     		bcc	.L451
3559:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6161              		.loc 1 3559 5 is_stmt 1 view .LVU2032
3559:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6162              		.loc 1 3559 15 is_stmt 0 view .LVU2033
 6163 016a 7B19     		adds	r3, r7, r5
3559:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6164              		.loc 1 3559 24 view .LVU2034
 6165 016c BBF80A20 		ldrh	r2, [fp, #10]
3559:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6166              		.loc 1 3559 8 view .LVU2035
 6167 0170 9342     		cmp	r3, r2
 6168 0172 00D9     		bls	.L452
3560:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6169              		.loc 1 3560 6 is_stmt 1 view .LVU2036
3560:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6170              		.loc 1 3560 9 is_stmt 0 view .LVU2037
 6171 0174 D51B     		subs	r5, r2, r7
 6172              	.LVL741:
 6173              	.L452:
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6174              		.loc 1 3562 5 is_stmt 1 view .LVU2038
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6175              		.loc 1 3562 9 is_stmt 0 view .LVU2039
 6176 0176 2B46     		mov	r3, r5
 6177 0178 5246     		mov	r2, r10
 6178 017a 4146     		mov	r1, r8
 6179 017c 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 6180 0180 FFF7FEFF 		bl	disk_read
 6181              	.LVL742:
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6182              		.loc 1 3562 8 discriminator 1 view .LVU2040
 6183 0184 0028     		cmp	r0, #0
 6184 0186 8AD1     		bne	.L472
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 243


3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6185              		.loc 1 3562 56 is_stmt 1 discriminator 2 view .LVU2041
3562:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY && _FS_MINIMIZE <= 2			/* Replace one of the read sectors with cached data if it 
 6186              		.loc 1 3562 78 discriminator 2 view .LVU2042
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 6187              		.loc 1 3569 5 view .LVU2043
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 6188              		.loc 1 3569 9 is_stmt 0 view .LVU2044
 6189 0188 94F91430 		ldrsb	r3, [r4, #20]
3569:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(rbuff + ((fp->sect - sect) * SS(fs)), fp->buf, SS(fs));
 6190              		.loc 1 3569 8 view .LVU2045
 6191 018c 002B     		cmp	r3, #0
 6192 018e 8EDB     		blt	.L473
 6193              	.L454:
3574:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
 6194              		.loc 1 3574 5 is_stmt 1 view .LVU2046
3574:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
 6195              		.loc 1 3574 10 is_stmt 0 view .LVU2047
 6196 0190 6D02     		lsls	r5, r5, #9
 6197              	.LVL743:
3575:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6198              		.loc 1 3575 5 is_stmt 1 view .LVU2048
 6199 0192 BCE7     		b	.L455
 6200              	.LVL744:
 6201              	.L466:
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6202              		.loc 1 3581 6 view .LVU2049
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6203              		.loc 1 3581 10 is_stmt 0 view .LVU2050
 6204 0194 0123     		movs	r3, #1
 6205 0196 04F13001 		add	r1, r4, #48
 6206 019a 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 6207 019e FFF7FEFF 		bl	disk_write
 6208              	.LVL745:
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6209              		.loc 1 3581 9 discriminator 1 view .LVU2051
 6210 01a2 20B9     		cbnz	r0, .L474
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6211              		.loc 1 3581 63 is_stmt 1 discriminator 2 view .LVU2052
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6212              		.loc 1 3581 85 discriminator 2 view .LVU2053
3582:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6213              		.loc 1 3582 6 view .LVU2054
3582:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6214              		.loc 1 3582 8 is_stmt 0 view .LVU2055
 6215 01a4 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
3582:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6216              		.loc 1 3582 15 view .LVU2056
 6217 01a6 03F07F03 		and	r3, r3, #127
 6218 01aa 2375     		strb	r3, [r4, #20]
 6219 01ac 94E7     		b	.L457
 6220              	.L474:
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6221              		.loc 1 3581 63 is_stmt 1 discriminator 1 view .LVU2057
 6222 01ae 0125     		movs	r5, #1
 6223              	.LVL746:
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 244


 6224              		.loc 1 3581 63 is_stmt 0 discriminator 1 view .LVU2058
 6225 01b0 6575     		strb	r5, [r4, #21]
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6226              		.loc 1 3581 63 is_stmt 1 discriminator 1 view .LVU2059
 6227 01b2 2946     		mov	r1, r5
 6228 01b4 0398     		ldr	r0, [sp, #12]
 6229 01b6 FFF7FEFF 		bl	unlock_fs
 6230              	.LVL747:
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6231              		.loc 1 3581 63 discriminator 1 view .LVU2060
 6232 01ba 0195     		str	r5, [sp, #4]
 6233              	.LVL748:
3581:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6234              		.loc 1 3581 63 is_stmt 0 view .LVU2061
 6235 01bc 41E7     		b	.L439
 6236              	.LVL749:
 6237              	.L467:
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6238              		.loc 1 3585 57 is_stmt 1 discriminator 1 view .LVU2062
 6239 01be 0125     		movs	r5, #1
 6240              	.LVL750:
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6241              		.loc 1 3585 57 is_stmt 0 discriminator 1 view .LVU2063
 6242 01c0 6575     		strb	r5, [r4, #21]
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6243              		.loc 1 3585 57 is_stmt 1 discriminator 1 view .LVU2064
 6244 01c2 2946     		mov	r1, r5
 6245 01c4 0398     		ldr	r0, [sp, #12]
 6246 01c6 FFF7FEFF 		bl	unlock_fs
 6247              	.LVL751:
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6248              		.loc 1 3585 57 discriminator 1 view .LVU2065
 6249 01ca 0195     		str	r5, [sp, #4]
 6250              	.LVL752:
3585:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6251              		.loc 1 3585 57 is_stmt 0 view .LVU2066
 6252 01cc 39E7     		b	.L439
 6253              	.LVL753:
 6254              	.L468:
3600:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6255              		.loc 1 3600 2 is_stmt 1 view .LVU2067
 6256 01ce 0021     		movs	r1, #0
 6257 01d0 0398     		ldr	r0, [sp, #12]
 6258 01d2 FFF7FEFF 		bl	unlock_fs
 6259              	.LVL754:
3600:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6260              		.loc 1 3600 2 discriminator 1 view .LVU2068
3600:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6261              		.loc 1 3600 2 is_stmt 0 view .LVU2069
 6262 01d6 34E7     		b	.L439
 6263              		.cfi_endproc
 6264              	.LFE380:
 6266              		.section	.text.f_write,"ax",%progbits
 6267              		.align	1
 6268              		.global	f_write
 6269              		.syntax unified
 6270              		.thumb
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 245


 6271              		.thumb_func
 6273              	f_write:
 6274              	.LVL755:
 6275              	.LFB381:
3617:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6276              		.loc 1 3617 1 is_stmt 1 view -0
 6277              		.cfi_startproc
 6278              		@ args = 0, pretend = 0, frame = 16
 6279              		@ frame_needed = 0, uses_anonymous_args = 0
3617:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 6280              		.loc 1 3617 1 is_stmt 0 view .LVU2071
 6281 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 6282              	.LCFI54:
 6283              		.cfi_def_cfa_offset 36
 6284              		.cfi_offset 4, -36
 6285              		.cfi_offset 5, -32
 6286              		.cfi_offset 6, -28
 6287              		.cfi_offset 7, -24
 6288              		.cfi_offset 8, -20
 6289              		.cfi_offset 9, -16
 6290              		.cfi_offset 10, -12
 6291              		.cfi_offset 11, -8
 6292              		.cfi_offset 14, -4
 6293 0004 85B0     		sub	sp, sp, #20
 6294              	.LCFI55:
 6295              		.cfi_def_cfa_offset 56
 6296 0006 0446     		mov	r4, r0
 6297 0008 8846     		mov	r8, r1
 6298 000a 1646     		mov	r6, r2
 6299 000c 9946     		mov	r9, r3
3618:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 6300              		.loc 1 3618 2 is_stmt 1 view .LVU2072
3619:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, sect;
 6301              		.loc 1 3619 2 view .LVU2073
3620:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT wcnt, cc, csect;
 6302              		.loc 1 3620 2 view .LVU2074
3621:Middlewares/Third_Party/FatFs/src/ff.c **** 	const BYTE *wbuff = (const BYTE*)buff;
 6303              		.loc 1 3621 2 view .LVU2075
3622:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6304              		.loc 1 3622 2 view .LVU2076
 6305              	.LVL756:
3625:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
 6306              		.loc 1 3625 2 view .LVU2077
3625:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
 6307              		.loc 1 3625 6 is_stmt 0 view .LVU2078
 6308 000e 0023     		movs	r3, #0
 6309              	.LVL757:
3625:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = validate(&fp->obj, &fs);			/* Check validity of the file object */
 6310              		.loc 1 3625 6 view .LVU2079
 6311 0010 C9F80030 		str	r3, [r9]
3626:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 6312              		.loc 1 3626 2 is_stmt 1 view .LVU2080
3626:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
 6313              		.loc 1 3626 8 is_stmt 0 view .LVU2081
 6314 0014 03A9     		add	r1, sp, #12
 6315              	.LVL758:
3626:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);	/* Check validity */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 246


 6316              		.loc 1 3626 8 view .LVU2082
 6317 0016 FFF7FEFF 		bl	validate
 6318              	.LVL759:
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 6319              		.loc 1 3627 2 is_stmt 1 view .LVU2083
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 6320              		.loc 1 3627 5 is_stmt 0 view .LVU2084
 6321 001a 0190     		str	r0, [sp, #4]
 6322 001c 60B9     		cbnz	r0, .L476
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 6323              		.loc 1 3627 27 discriminator 2 view .LVU2085
 6324 001e 637D     		ldrb	r3, [r4, #21]	@ zero_extendqisi2
 6325 0020 0193     		str	r3, [sp, #4]
 6326              	.LVL760:
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 6327              		.loc 1 3627 19 discriminator 2 view .LVU2086
 6328 0022 4BB9     		cbnz	r3, .L476
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 6329              		.loc 1 3627 74 is_stmt 1 discriminator 4 view .LVU2087
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6330              		.loc 1 3628 2 view .LVU2088
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6331              		.loc 1 3628 10 is_stmt 0 view .LVU2089
 6332 0024 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
 6333              	.LVL761:
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6334              		.loc 1 3628 5 view .LVU2090
 6335 0026 13F0020F 		tst	r3, #2
 6336 002a 0DD0     		beq	.L504
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6337              		.loc 1 3628 53 is_stmt 1 discriminator 2 view .LVU2091
3631:Middlewares/Third_Party/FatFs/src/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
 6338              		.loc 1 3631 2 view .LVU2092
3631:Middlewares/Third_Party/FatFs/src/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
 6339              		.loc 1 3631 59 is_stmt 0 view .LVU2093
 6340 002c A369     		ldr	r3, [r4, #24]
3631:Middlewares/Third_Party/FatFs/src/ff.c **** 		btw = (UINT)(0xFFFFFFFF - (DWORD)fp->fptr);
 6341              		.loc 1 3631 5 view .LVU2094
 6342 002e F342     		cmn	r3, r6
 6343 0030 C0F0BE80 		bcc	.L500
3632:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6344              		.loc 1 3632 3 is_stmt 1 view .LVU2095
3632:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6345              		.loc 1 3632 7 is_stmt 0 view .LVU2096
 6346 0034 DE43     		mvns	r6, r3
 6347              	.LVL762:
3632:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6348              		.loc 1 3632 7 view .LVU2097
 6349 0036 BBE0     		b	.L500
 6350              	.LVL763:
 6351              	.L476:
3627:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 6352              		.loc 1 3627 57 is_stmt 1 discriminator 3 view .LVU2098
 6353 0038 0199     		ldr	r1, [sp, #4]
 6354 003a 0398     		ldr	r0, [sp, #12]
 6355 003c FFF7FEFF 		bl	unlock_fs
 6356              	.LVL764:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 247


3627:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 6357              		.loc 1 3627 57 discriminator 1 view .LVU2099
 6358              	.L478:
3722:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6359              		.loc 1 3722 21 discriminator 1 view .LVU2100
3723:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6360              		.loc 1 3723 1 is_stmt 0 view .LVU2101
 6361 0040 0198     		ldr	r0, [sp, #4]
 6362 0042 05B0     		add	sp, sp, #20
 6363              	.LCFI56:
 6364              		.cfi_remember_state
 6365              		.cfi_def_cfa_offset 36
 6366              		@ sp needed
 6367 0044 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 6368              	.LVL765:
 6369              	.L504:
 6370              	.LCFI57:
 6371              		.cfi_restore_state
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6372              		.loc 1 3628 30 is_stmt 1 discriminator 1 view .LVU2102
 6373 0048 0721     		movs	r1, #7
 6374 004a 0398     		ldr	r0, [sp, #12]
 6375 004c FFF7FEFF 		bl	unlock_fs
 6376              	.LVL766:
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6377              		.loc 1 3628 30 discriminator 1 view .LVU2103
 6378 0050 0723     		movs	r3, #7
 6379 0052 0193     		str	r3, [sp, #4]
 6380              	.LVL767:
3628:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6381              		.loc 1 3628 30 is_stmt 0 view .LVU2104
 6382 0054 F4E7     		b	.L478
 6383              	.LVL768:
 6384              	.L483:
3647:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 6385              		.loc 1 3647 6 is_stmt 1 view .LVU2105
3647:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 6386              		.loc 1 3647 12 is_stmt 0 view .LVU2106
 6387 0056 E36A     		ldr	r3, [r4, #44]
3647:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = clmt_clust(fp, fp->fptr);	/* Get cluster# from the CLMT */
 6388              		.loc 1 3647 9 view .LVU2107
 6389 0058 002B     		cmp	r3, #0
 6390 005a 36D0     		beq	.L486
3648:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
 6391              		.loc 1 3648 7 is_stmt 1 view .LVU2108
3648:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else
 6392              		.loc 1 3648 14 is_stmt 0 view .LVU2109
 6393 005c 2046     		mov	r0, r4
 6394 005e FFF7FEFF 		bl	clmt_clust
 6395              	.LVL769:
 6396              	.L485:
3655:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 1) ABORT(fs, FR_INT_ERR);
 6397              		.loc 1 3655 5 is_stmt 1 view .LVU2110
3655:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 1) ABORT(fs, FR_INT_ERR);
 6398              		.loc 1 3655 8 is_stmt 0 view .LVU2111
 6399 0062 0028     		cmp	r0, #0
 6400 0064 00F0CE80 		beq	.L487
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 248


 6401              	.L484:
 6402              	.LVL770:
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6403              		.loc 1 3656 5 is_stmt 1 view .LVU2112
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6404              		.loc 1 3656 8 is_stmt 0 view .LVU2113
 6405 0068 0128     		cmp	r0, #1
 6406 006a 33D0     		beq	.L505
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6407              		.loc 1 3656 20 is_stmt 1 discriminator 2 view .LVU2114
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6408              		.loc 1 3656 41 discriminator 2 view .LVU2115
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6409              		.loc 1 3657 5 view .LVU2116
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6410              		.loc 1 3657 8 is_stmt 0 view .LVU2117
 6411 006c B0F1FF3F 		cmp	r0, #-1
 6412 0070 38D0     		beq	.L506
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6413              		.loc 1 3657 29 is_stmt 1 discriminator 2 view .LVU2118
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6414              		.loc 1 3657 51 discriminator 2 view .LVU2119
3658:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->obj.sclust == 0) fp->obj.sclust = clst;	/* Set start cluster if the first write */
 6415              		.loc 1 3658 5 view .LVU2120
3658:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->obj.sclust == 0) fp->obj.sclust = clst;	/* Set start cluster if the first write */
 6416              		.loc 1 3658 15 is_stmt 0 view .LVU2121
 6417 0072 E061     		str	r0, [r4, #28]
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6418              		.loc 1 3659 5 is_stmt 1 view .LVU2122
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6419              		.loc 1 3659 16 is_stmt 0 view .LVU2123
 6420 0074 A368     		ldr	r3, [r4, #8]
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6421              		.loc 1 3659 8 view .LVU2124
 6422 0076 03B9     		cbnz	r3, .L482
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6423              		.loc 1 3659 30 is_stmt 1 discriminator 1 view .LVU2125
3659:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6424              		.loc 1 3659 45 is_stmt 0 discriminator 1 view .LVU2126
 6425 0078 A060     		str	r0, [r4, #8]
 6426              	.L482:
3664:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 6427              		.loc 1 3664 4 is_stmt 1 view .LVU2127
3664:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 6428              		.loc 1 3664 8 is_stmt 0 view .LVU2128
 6429 007a 94F91430 		ldrsb	r3, [r4, #20]
3664:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 6430              		.loc 1 3664 7 view .LVU2129
 6431 007e 002B     		cmp	r3, #0
 6432 0080 38DB     		blt	.L507
 6433              	.L490:
3669:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
 6434              		.loc 1 3669 4 is_stmt 1 view .LVU2130
3669:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!sect) ABORT(fs, FR_INT_ERR);
 6435              		.loc 1 3669 11 is_stmt 0 view .LVU2131
 6436 0082 DDF80CB0 		ldr	fp, [sp, #12]
 6437 0086 E169     		ldr	r1, [r4, #28]
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 249


 6438 0088 5846     		mov	r0, fp
 6439 008a FFF7FEFF 		bl	clust2sect
 6440              	.LVL771:
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6441              		.loc 1 3670 4 is_stmt 1 view .LVU2132
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6442              		.loc 1 3670 7 is_stmt 0 view .LVU2133
 6443 008e 8246     		mov	r10, r0
 6444 0090 0028     		cmp	r0, #0
 6445 0092 45D0     		beq	.L508
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6446              		.loc 1 3670 15 is_stmt 1 discriminator 2 view .LVU2134
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6447              		.loc 1 3670 36 discriminator 2 view .LVU2135
3671:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btw / SS(fs);				/* When remaining bytes >= sector size, */
 6448              		.loc 1 3671 4 view .LVU2136
3671:Middlewares/Third_Party/FatFs/src/ff.c **** 			cc = btw / SS(fs);				/* When remaining bytes >= sector size, */
 6449              		.loc 1 3671 9 is_stmt 0 view .LVU2137
 6450 0094 BA44     		add	r10, r10, r7
 6451              	.LVL772:
3672:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {						/* Write maximum contiguous sectors directly */
 6452              		.loc 1 3672 4 is_stmt 1 view .LVU2138
3672:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cc) {						/* Write maximum contiguous sectors directly */
 6453              		.loc 1 3672 7 is_stmt 0 view .LVU2139
 6454 0096 750A     		lsrs	r5, r6, #9
 6455              	.LVL773:
3673:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 6456              		.loc 1 3673 4 is_stmt 1 view .LVU2140
3673:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (csect + cc > fs->csize) {	/* Clip at cluster boundary */
 6457              		.loc 1 3673 7 is_stmt 0 view .LVU2141
 6458 0098 B6F5007F 		cmp	r6, #512
 6459 009c 5DD3     		bcc	.L493
3674:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6460              		.loc 1 3674 5 is_stmt 1 view .LVU2142
3674:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6461              		.loc 1 3674 15 is_stmt 0 view .LVU2143
 6462 009e 7B19     		adds	r3, r7, r5
3674:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6463              		.loc 1 3674 24 view .LVU2144
 6464 00a0 BBF80A20 		ldrh	r2, [fp, #10]
3674:Middlewares/Third_Party/FatFs/src/ff.c **** 					cc = fs->csize - csect;
 6465              		.loc 1 3674 8 view .LVU2145
 6466 00a4 9342     		cmp	r3, r2
 6467 00a6 00D9     		bls	.L494
3675:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6468              		.loc 1 3675 6 is_stmt 1 view .LVU2146
3675:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6469              		.loc 1 3675 9 is_stmt 0 view .LVU2147
 6470 00a8 D51B     		subs	r5, r2, r7
 6471              	.LVL774:
 6472              	.L494:
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6473              		.loc 1 3677 5 is_stmt 1 view .LVU2148
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6474              		.loc 1 3677 9 is_stmt 0 view .LVU2149
 6475 00aa 2B46     		mov	r3, r5
 6476 00ac 5246     		mov	r2, r10
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 250


 6477 00ae 4146     		mov	r1, r8
 6478 00b0 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 6479 00b4 FFF7FEFF 		bl	disk_write
 6480              	.LVL775:
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6481              		.loc 1 3677 8 discriminator 1 view .LVU2150
 6482 00b8 0028     		cmp	r0, #0
 6483 00ba 39D1     		bne	.L509
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6484              		.loc 1 3677 57 is_stmt 1 discriminator 2 view .LVU2151
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6485              		.loc 1 3677 79 discriminator 2 view .LVU2152
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 6486              		.loc 1 3685 5 view .LVU2153
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 6487              		.loc 1 3685 11 is_stmt 0 view .LVU2154
 6488 00bc 216A     		ldr	r1, [r4, #32]
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 6489              		.loc 1 3685 18 view .LVU2155
 6490 00be A1EB0A01 		sub	r1, r1, r10
3685:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(fp->buf, wbuff + ((fp->sect - sect) * SS(fs)), SS(fs));
 6491              		.loc 1 3685 8 view .LVU2156
 6492 00c2 A942     		cmp	r1, r5
 6493 00c4 3CD3     		bcc	.L510
 6494              	.L496:
3691:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
 6495              		.loc 1 3691 5 is_stmt 1 view .LVU2157
3691:Middlewares/Third_Party/FatFs/src/ff.c **** 				continue;
 6496              		.loc 1 3691 10 is_stmt 0 view .LVU2158
 6497 00c6 6D02     		lsls	r5, r5, #9
 6498              	.LVL776:
3692:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6499              		.loc 1 3692 5 is_stmt 1 view .LVU2159
 6500 00c8 63E0     		b	.L497
 6501              	.LVL777:
 6502              	.L486:
3652:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6503              		.loc 1 3652 7 view .LVU2160
3652:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6504              		.loc 1 3652 14 is_stmt 0 view .LVU2161
 6505 00ca E169     		ldr	r1, [r4, #28]
 6506 00cc 2046     		mov	r0, r4
 6507 00ce FFF7FEFF 		bl	create_chain
 6508              	.LVL778:
3652:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6509              		.loc 1 3652 14 view .LVU2162
 6510 00d2 C6E7     		b	.L485
 6511              	.LVL779:
 6512              	.L505:
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6513              		.loc 1 3656 20 is_stmt 1 discriminator 1 view .LVU2163
 6514 00d4 0225     		movs	r5, #2
 6515 00d6 6575     		strb	r5, [r4, #21]
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6516              		.loc 1 3656 20 discriminator 1 view .LVU2164
 6517 00d8 2946     		mov	r1, r5
 6518 00da 0398     		ldr	r0, [sp, #12]
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 251


 6519 00dc FFF7FEFF 		bl	unlock_fs
 6520              	.LVL780:
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6521              		.loc 1 3656 20 discriminator 1 view .LVU2165
 6522 00e0 0195     		str	r5, [sp, #4]
 6523              	.LVL781:
3656:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 6524              		.loc 1 3656 20 is_stmt 0 view .LVU2166
 6525 00e2 ADE7     		b	.L478
 6526              	.LVL782:
 6527              	.L506:
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6528              		.loc 1 3657 29 is_stmt 1 discriminator 1 view .LVU2167
 6529 00e4 0125     		movs	r5, #1
 6530 00e6 6575     		strb	r5, [r4, #21]
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6531              		.loc 1 3657 29 discriminator 1 view .LVU2168
 6532 00e8 2946     		mov	r1, r5
 6533 00ea 0398     		ldr	r0, [sp, #12]
 6534 00ec FFF7FEFF 		bl	unlock_fs
 6535              	.LVL783:
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6536              		.loc 1 3657 29 discriminator 1 view .LVU2169
 6537 00f0 0195     		str	r5, [sp, #4]
 6538              	.LVL784:
3657:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clst;			/* Update current cluster */
 6539              		.loc 1 3657 29 is_stmt 0 view .LVU2170
 6540 00f2 A5E7     		b	.L478
 6541              	.LVL785:
 6542              	.L507:
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6543              		.loc 1 3665 5 is_stmt 1 view .LVU2171
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6544              		.loc 1 3665 9 is_stmt 0 view .LVU2172
 6545 00f4 0123     		movs	r3, #1
 6546 00f6 226A     		ldr	r2, [r4, #32]
 6547 00f8 04F13001 		add	r1, r4, #48
 6548 00fc 0398     		ldr	r0, [sp, #12]
 6549 00fe 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 6550 0100 FFF7FEFF 		bl	disk_write
 6551              	.LVL786:
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6552              		.loc 1 3665 8 discriminator 1 view .LVU2173
 6553 0104 20B9     		cbnz	r0, .L511
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6554              		.loc 1 3665 62 is_stmt 1 discriminator 2 view .LVU2174
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6555              		.loc 1 3665 84 discriminator 2 view .LVU2175
3666:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6556              		.loc 1 3666 5 view .LVU2176
3666:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6557              		.loc 1 3666 7 is_stmt 0 view .LVU2177
 6558 0106 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
3666:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6559              		.loc 1 3666 14 view .LVU2178
 6560 0108 03F07F03 		and	r3, r3, #127
 6561 010c 2375     		strb	r3, [r4, #20]
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 252


 6562 010e B8E7     		b	.L490
 6563              	.L511:
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6564              		.loc 1 3665 62 is_stmt 1 discriminator 1 view .LVU2179
 6565 0110 0125     		movs	r5, #1
 6566 0112 6575     		strb	r5, [r4, #21]
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6567              		.loc 1 3665 62 discriminator 1 view .LVU2180
 6568 0114 2946     		mov	r1, r5
 6569 0116 0398     		ldr	r0, [sp, #12]
 6570 0118 FFF7FEFF 		bl	unlock_fs
 6571              	.LVL787:
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6572              		.loc 1 3665 62 discriminator 1 view .LVU2181
 6573 011c 0195     		str	r5, [sp, #4]
 6574              	.LVL788:
3665:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 6575              		.loc 1 3665 62 is_stmt 0 view .LVU2182
 6576 011e 8FE7     		b	.L478
 6577              	.LVL789:
 6578              	.L508:
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6579              		.loc 1 3670 15 is_stmt 1 discriminator 1 view .LVU2183
 6580 0120 0225     		movs	r5, #2
 6581 0122 6575     		strb	r5, [r4, #21]
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6582              		.loc 1 3670 15 discriminator 1 view .LVU2184
 6583 0124 2946     		mov	r1, r5
 6584 0126 5846     		mov	r0, fp
 6585              	.LVL790:
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6586              		.loc 1 3670 15 is_stmt 0 discriminator 1 view .LVU2185
 6587 0128 FFF7FEFF 		bl	unlock_fs
 6588              	.LVL791:
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6589              		.loc 1 3670 15 is_stmt 1 discriminator 1 view .LVU2186
 6590 012c 0195     		str	r5, [sp, #4]
 6591              	.LVL792:
3670:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += csect;
 6592              		.loc 1 3670 15 is_stmt 0 view .LVU2187
 6593 012e 87E7     		b	.L478
 6594              	.LVL793:
 6595              	.L509:
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6596              		.loc 1 3677 57 is_stmt 1 discriminator 1 view .LVU2188
 6597 0130 0125     		movs	r5, #1
 6598              	.LVL794:
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6599              		.loc 1 3677 57 is_stmt 0 discriminator 1 view .LVU2189
 6600 0132 6575     		strb	r5, [r4, #21]
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6601              		.loc 1 3677 57 is_stmt 1 discriminator 1 view .LVU2190
 6602 0134 2946     		mov	r1, r5
 6603 0136 0398     		ldr	r0, [sp, #12]
 6604 0138 FFF7FEFF 		bl	unlock_fs
 6605              	.LVL795:
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 253


 6606              		.loc 1 3677 57 discriminator 1 view .LVU2191
 6607 013c 0195     		str	r5, [sp, #4]
 6608              	.LVL796:
3677:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_MINIMIZE <= 2
 6609              		.loc 1 3677 57 is_stmt 0 view .LVU2192
 6610 013e 7FE7     		b	.L478
 6611              	.LVL797:
 6612              	.L510:
3686:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_DIRTY;
 6613              		.loc 1 3686 6 is_stmt 1 view .LVU2193
 6614 0140 4FF40072 		mov	r2, #512
 6615 0144 08EB4121 		add	r1, r8, r1, lsl #9
 6616 0148 04F13000 		add	r0, r4, #48
 6617 014c FFF7FEFF 		bl	mem_cpy
 6618              	.LVL798:
3687:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6619              		.loc 1 3687 6 view .LVU2194
3687:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6620              		.loc 1 3687 8 is_stmt 0 view .LVU2195
 6621 0150 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
3687:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 6622              		.loc 1 3687 15 view .LVU2196
 6623 0152 03F07F03 		and	r3, r3, #127
 6624 0156 2375     		strb	r3, [r4, #20]
 6625 0158 B5E7     		b	.L496
 6626              	.L493:
3700:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr < fp->obj.objsize &&
 6627              		.loc 1 3700 4 is_stmt 1 view .LVU2197
3700:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr < fp->obj.objsize &&
 6628              		.loc 1 3700 10 is_stmt 0 view .LVU2198
 6629 015a 236A     		ldr	r3, [r4, #32]
3700:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr < fp->obj.objsize &&
 6630              		.loc 1 3700 7 view .LVU2199
 6631 015c 5345     		cmp	r3, r10
 6632 015e 03D0     		beq	.L498
3701:Middlewares/Third_Party/FatFs/src/ff.c **** 				disk_read(fs->drv, fp->buf, sect, 1) != RES_OK) {
 6633              		.loc 1 3701 7 view .LVU2200
 6634 0160 A269     		ldr	r2, [r4, #24]
3701:Middlewares/Third_Party/FatFs/src/ff.c **** 				disk_read(fs->drv, fp->buf, sect, 1) != RES_OK) {
 6635              		.loc 1 3701 23 view .LVU2201
 6636 0162 E368     		ldr	r3, [r4, #12]
3700:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr < fp->obj.objsize &&
 6637              		.loc 1 3700 25 discriminator 1 view .LVU2202
 6638 0164 9A42     		cmp	r2, r3
 6639 0166 3BD3     		bcc	.L512
 6640              	.L498:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6641              		.loc 1 3703 6 is_stmt 1 view .LVU2203
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6642              		.loc 1 3703 28 view .LVU2204
3706:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 6643              		.loc 1 3706 4 view .LVU2205
3706:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 6644              		.loc 1 3706 13 is_stmt 0 view .LVU2206
 6645 0168 C4F820A0 		str	r10, [r4, #32]
 6646              	.LVL799:
 6647              	.L481:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 254


3708:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 6648              		.loc 1 3708 3 is_stmt 1 view .LVU2207
3708:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 6649              		.loc 1 3708 27 is_stmt 0 view .LVU2208
 6650 016c A369     		ldr	r3, [r4, #24]
3708:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 6651              		.loc 1 3708 34 view .LVU2209
 6652 016e C3F30803 		ubfx	r3, r3, #0, #9
3708:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (wcnt > btw) wcnt = btw;					/* Clip it by btw if needed */
 6653              		.loc 1 3708 8 view .LVU2210
 6654 0172 C3F50075 		rsb	r5, r3, #512
 6655              	.LVL800:
3709:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 6656              		.loc 1 3709 3 is_stmt 1 view .LVU2211
3709:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 6657              		.loc 1 3709 6 is_stmt 0 view .LVU2212
 6658 0176 AE42     		cmp	r6, r5
 6659 0178 00D2     		bcs	.L499
3709:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_TINY
 6660              		.loc 1 3709 24 discriminator 1 view .LVU2213
 6661 017a 3546     		mov	r5, r6
 6662              	.LVL801:
 6663              	.L499:
3715:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_DIRTY;
 6664              		.loc 1 3715 3 is_stmt 1 view .LVU2214
3715:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_DIRTY;
 6665              		.loc 1 3715 11 is_stmt 0 view .LVU2215
 6666 017c 04F13000 		add	r0, r4, #48
3715:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_DIRTY;
 6667              		.loc 1 3715 3 view .LVU2216
 6668 0180 2A46     		mov	r2, r5
 6669 0182 4146     		mov	r1, r8
 6670 0184 1844     		add	r0, r0, r3
 6671 0186 FFF7FEFF 		bl	mem_cpy
 6672              	.LVL802:
3716:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6673              		.loc 1 3716 3 is_stmt 1 view .LVU2217
3716:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6674              		.loc 1 3716 5 is_stmt 0 view .LVU2218
 6675 018a 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
3716:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6676              		.loc 1 3716 12 view .LVU2219
 6677 018c 63F07F03 		orn	r3, r3, #127
 6678 0190 2375     		strb	r3, [r4, #20]
 6679              	.L497:
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6680              		.loc 1 3636 124 is_stmt 1 view .LVU2220
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6681              		.loc 1 3636 9 is_stmt 0 view .LVU2221
 6682 0192 A844     		add	r8, r8, r5
 6683              	.LVL803:
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6684              		.loc 1 3636 20 view .LVU2222
 6685 0194 A369     		ldr	r3, [r4, #24]
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6686              		.loc 1 3636 27 view .LVU2223
 6687 0196 2B44     		add	r3, r3, r5
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 255


 6688 0198 A361     		str	r3, [r4, #24]
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6689              		.loc 1 3636 73 view .LVU2224
 6690 019a E268     		ldr	r2, [r4, #12]
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6691              		.loc 1 3636 94 view .LVU2225
 6692 019c 9342     		cmp	r3, r2
 6693 019e 38BF     		it	cc
 6694 01a0 1346     		movcc	r3, r2
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6695              		.loc 1 3636 52 view .LVU2226
 6696 01a2 E360     		str	r3, [r4, #12]
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6697              		.loc 1 3636 113 view .LVU2227
 6698 01a4 D9F80030 		ldr	r3, [r9]
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6699              		.loc 1 3636 117 view .LVU2228
 6700 01a8 2B44     		add	r3, r3, r5
 6701 01aa C9F80030 		str	r3, [r9]
3636:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr % SS(fs) == 0) {		/* On the sector boundary? */
 6702              		.loc 1 3636 130 view .LVU2229
 6703 01ae 761B     		subs	r6, r6, r5
 6704              	.LVL804:
 6705              	.L500:
3635:Middlewares/Third_Party/FatFs/src/ff.c **** 		wbuff += wcnt, fp->fptr += wcnt, fp->obj.objsize = (fp->fptr > fp->obj.objsize) ? fp->fptr : fp->
 6706              		.loc 1 3635 11 is_stmt 1 view .LVU2230
 6707 01b0 46B3     		cbz	r6, .L487
3637:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 6708              		.loc 1 3637 3 view .LVU2231
3637:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 6709              		.loc 1 3637 9 is_stmt 0 view .LVU2232
 6710 01b2 A169     		ldr	r1, [r4, #24]
3637:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 6711              		.loc 1 3637 16 view .LVU2233
 6712 01b4 C1F30803 		ubfx	r3, r1, #0, #9
3637:Middlewares/Third_Party/FatFs/src/ff.c **** 			csect = (UINT)(fp->fptr / SS(fs)) & (fs->csize - 1);	/* Sector offset in the cluster */
 6713              		.loc 1 3637 6 view .LVU2234
 6714 01b8 002B     		cmp	r3, #0
 6715 01ba D7D1     		bne	.L481
3638:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 6716              		.loc 1 3638 4 is_stmt 1 view .LVU2235
3638:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 6717              		.loc 1 3638 43 is_stmt 0 view .LVU2236
 6718 01bc 039B     		ldr	r3, [sp, #12]
 6719 01be 5F89     		ldrh	r7, [r3, #10]
3638:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (csect == 0) {				/* On the cluster boundary? */
 6720              		.loc 1 3638 51 view .LVU2237
 6721 01c0 013F     		subs	r7, r7, #1
 6722              	.LVL805:
3639:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 6723              		.loc 1 3639 4 is_stmt 1 view .LVU2238
3639:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 6724              		.loc 1 3639 7 is_stmt 0 view .LVU2239
 6725 01c2 17EA5127 		ands	r7, r7, r1, lsr #9
 6726              	.LVL806:
3639:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr == 0) {		/* On the top of the file? */
 6727              		.loc 1 3639 7 view .LVU2240
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 256


 6728 01c6 7FF458AF 		bne	.L482
3640:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;	/* Follow from the origin */
 6729              		.loc 1 3640 5 is_stmt 1 view .LVU2241
3640:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = fp->obj.sclust;	/* Follow from the origin */
 6730              		.loc 1 3640 8 is_stmt 0 view .LVU2242
 6731 01ca 0029     		cmp	r1, #0
 6732 01cc 7FF443AF 		bne	.L483
3641:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) {		/* If no cluster is allocated, */
 6733              		.loc 1 3641 6 is_stmt 1 view .LVU2243
3641:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0) {		/* If no cluster is allocated, */
 6734              		.loc 1 3641 11 is_stmt 0 view .LVU2244
 6735 01d0 A068     		ldr	r0, [r4, #8]
 6736              	.LVL807:
3642:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(&fp->obj, 0);	/* create a new cluster chain */
 6737              		.loc 1 3642 6 is_stmt 1 view .LVU2245
3642:Middlewares/Third_Party/FatFs/src/ff.c **** 						clst = create_chain(&fp->obj, 0);	/* create a new cluster chain */
 6738              		.loc 1 3642 9 is_stmt 0 view .LVU2246
 6739 01d2 0028     		cmp	r0, #0
 6740 01d4 7FF448AF 		bne	.L484
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6741              		.loc 1 3643 7 is_stmt 1 view .LVU2247
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6742              		.loc 1 3643 14 is_stmt 0 view .LVU2248
 6743 01d8 2046     		mov	r0, r4
 6744              	.LVL808:
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6745              		.loc 1 3643 14 view .LVU2249
 6746 01da FFF7FEFF 		bl	create_chain
 6747              	.LVL809:
3643:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 6748              		.loc 1 3643 14 view .LVU2250
 6749 01de 40E7     		b	.L485
 6750              	.LVL810:
 6751              	.L512:
3702:Middlewares/Third_Party/FatFs/src/ff.c **** 					ABORT(fs, FR_DISK_ERR);
 6752              		.loc 1 3702 5 view .LVU2251
 6753 01e0 0123     		movs	r3, #1
 6754 01e2 5246     		mov	r2, r10
 6755 01e4 04F13001 		add	r1, r4, #48
 6756 01e8 9BF80100 		ldrb	r0, [fp, #1]	@ zero_extendqisi2
 6757 01ec FFF7FEFF 		bl	disk_read
 6758              	.LVL811:
3701:Middlewares/Third_Party/FatFs/src/ff.c **** 				disk_read(fs->drv, fp->buf, sect, 1) != RES_OK) {
 6759              		.loc 1 3701 32 view .LVU2252
 6760 01f0 0028     		cmp	r0, #0
 6761 01f2 B9D0     		beq	.L498
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6762              		.loc 1 3703 6 is_stmt 1 view .LVU2253
 6763 01f4 0125     		movs	r5, #1
 6764              	.LVL812:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6765              		.loc 1 3703 6 is_stmt 0 view .LVU2254
 6766 01f6 6575     		strb	r5, [r4, #21]
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6767              		.loc 1 3703 6 is_stmt 1 view .LVU2255
 6768 01f8 2946     		mov	r1, r5
 6769 01fa 0398     		ldr	r0, [sp, #12]
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 257


 6770 01fc FFF7FEFF 		bl	unlock_fs
 6771              	.LVL813:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6772              		.loc 1 3703 6 discriminator 1 view .LVU2256
 6773 0200 0195     		str	r5, [sp, #4]
 6774              	.LVL814:
3703:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 6775              		.loc 1 3703 6 is_stmt 0 view .LVU2257
 6776 0202 1DE7     		b	.L478
 6777              	.LVL815:
 6778              	.L487:
3720:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6779              		.loc 1 3720 2 is_stmt 1 view .LVU2258
3720:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6780              		.loc 1 3720 4 is_stmt 0 view .LVU2259
 6781 0204 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
3720:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6782              		.loc 1 3720 11 view .LVU2260
 6783 0206 43F04003 		orr	r3, r3, #64
 6784 020a 2375     		strb	r3, [r4, #20]
3722:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6785              		.loc 1 3722 2 is_stmt 1 view .LVU2261
 6786 020c 0021     		movs	r1, #0
 6787 020e 0398     		ldr	r0, [sp, #12]
 6788 0210 FFF7FEFF 		bl	unlock_fs
 6789              	.LVL816:
3722:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6790              		.loc 1 3722 2 discriminator 1 view .LVU2262
3722:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6791              		.loc 1 3722 2 is_stmt 0 view .LVU2263
 6792 0214 14E7     		b	.L478
 6793              		.cfi_endproc
 6794              	.LFE381:
 6796              		.section	.text.putc_bfd,"ax",%progbits
 6797              		.align	1
 6798              		.syntax unified
 6799              		.thumb
 6800              		.thumb_func
 6802              	putc_bfd:
 6803              	.LVL817:
 6804              	.LFB396:
5921:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bw;
 6805              		.loc 1 5921 1 is_stmt 1 view -0
 6806              		.cfi_startproc
 6807              		@ args = 0, pretend = 0, frame = 8
 6808              		@ frame_needed = 0, uses_anonymous_args = 0
5921:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT bw;
 6809              		.loc 1 5921 1 is_stmt 0 view .LVU2265
 6810 0000 70B5     		push	{r4, r5, r6, lr}
 6811              	.LCFI58:
 6812              		.cfi_def_cfa_offset 16
 6813              		.cfi_offset 4, -16
 6814              		.cfi_offset 5, -12
 6815              		.cfi_offset 6, -8
 6816              		.cfi_offset 14, -4
 6817 0002 82B0     		sub	sp, sp, #8
 6818              	.LCFI59:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 258


 6819              		.cfi_def_cfa_offset 24
 6820 0004 0446     		mov	r4, r0
 6821 0006 0D46     		mov	r5, r1
5922:Middlewares/Third_Party/FatFs/src/ff.c **** 	int i;
 6822              		.loc 1 5922 2 is_stmt 1 view .LVU2266
5923:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6823              		.loc 1 5923 2 view .LVU2267
5926:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(pb, '\r');
 6824              		.loc 1 5926 2 view .LVU2268
5926:Middlewares/Third_Party/FatFs/src/ff.c **** 		putc_bfd(pb, '\r');
 6825              		.loc 1 5926 5 is_stmt 0 view .LVU2269
 6826 0008 0A29     		cmp	r1, #10
 6827 000a 0DD0     		beq	.L520
 6828              	.LVL818:
 6829              	.L514:
5930:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i < 0) return;
 6830              		.loc 1 5930 2 is_stmt 1 view .LVU2270
5930:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (i < 0) return;
 6831              		.loc 1 5930 4 is_stmt 0 view .LVU2271
 6832 000c 6368     		ldr	r3, [r4, #4]
 6833              	.LVL819:
5931:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6834              		.loc 1 5931 2 is_stmt 1 view .LVU2272
5931:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6835              		.loc 1 5931 5 is_stmt 0 view .LVU2273
 6836 000e 002B     		cmp	r3, #0
 6837 0010 08DB     		blt	.L513
5960:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6838              		.loc 1 5960 2 is_stmt 1 view .LVU2274
5960:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6839              		.loc 1 5960 11 is_stmt 0 view .LVU2275
 6840 0012 5E1C     		adds	r6, r3, #1
 6841              	.LVL820:
5960:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 6842              		.loc 1 5960 15 view .LVU2276
 6843 0014 2344     		add	r3, r3, r4
 6844 0016 1D73     		strb	r5, [r3, #12]
5963:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
 6845              		.loc 1 5963 2 is_stmt 1 view .LVU2277
5963:Middlewares/Third_Party/FatFs/src/ff.c **** 		f_write(pb->fp, pb->buf, (UINT)i, &bw);
 6846              		.loc 1 5963 5 is_stmt 0 view .LVU2278
 6847 0018 3C2E     		cmp	r6, #60
 6848 001a 09DC     		bgt	.L521
 6849              	.LVL821:
 6850              	.L517:
5967:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->nchr++;
 6851              		.loc 1 5967 2 is_stmt 1 view .LVU2279
5967:Middlewares/Third_Party/FatFs/src/ff.c **** 	pb->nchr++;
 6852              		.loc 1 5967 10 is_stmt 0 view .LVU2280
 6853 001c 6660     		str	r6, [r4, #4]
5968:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6854              		.loc 1 5968 2 is_stmt 1 view .LVU2281
5968:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6855              		.loc 1 5968 4 is_stmt 0 view .LVU2282
 6856 001e A368     		ldr	r3, [r4, #8]
5968:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6857              		.loc 1 5968 10 view .LVU2283
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 259


 6858 0020 0133     		adds	r3, r3, #1
 6859 0022 A360     		str	r3, [r4, #8]
 6860              	.LVL822:
 6861              	.L513:
5969:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6862              		.loc 1 5969 1 view .LVU2284
 6863 0024 02B0     		add	sp, sp, #8
 6864              	.LCFI60:
 6865              		.cfi_remember_state
 6866              		.cfi_def_cfa_offset 16
 6867              		@ sp needed
 6868 0026 70BD     		pop	{r4, r5, r6, pc}
 6869              	.LVL823:
 6870              	.L520:
 6871              	.LCFI61:
 6872              		.cfi_restore_state
5927:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6873              		.loc 1 5927 3 is_stmt 1 view .LVU2285
 6874 0028 0D21     		movs	r1, #13
 6875              	.LVL824:
5927:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6876              		.loc 1 5927 3 is_stmt 0 view .LVU2286
 6877 002a FFF7E9FF 		bl	putc_bfd
 6878              	.LVL825:
5927:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6879              		.loc 1 5927 3 view .LVU2287
 6880 002e EDE7     		b	.L514
 6881              	.LVL826:
 6882              	.L521:
5964:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = (bw == (UINT)i) ? 0 : -1;
 6883              		.loc 1 5964 3 is_stmt 1 view .LVU2288
5964:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = (bw == (UINT)i) ? 0 : -1;
 6884              		.loc 1 5964 21 is_stmt 0 view .LVU2289
 6885 0030 2146     		mov	r1, r4
5964:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = (bw == (UINT)i) ? 0 : -1;
 6886              		.loc 1 5964 3 view .LVU2290
 6887 0032 51F80C0B 		ldr	r0, [r1], #12
 6888 0036 01AB     		add	r3, sp, #4
 6889 0038 3246     		mov	r2, r6
 6890 003a FFF7FEFF 		bl	f_write
 6891              	.LVL827:
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6892              		.loc 1 5965 3 is_stmt 1 view .LVU2291
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6893              		.loc 1 5965 11 is_stmt 0 view .LVU2292
 6894 003e 019B     		ldr	r3, [sp, #4]
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6895              		.loc 1 5965 27 view .LVU2293
 6896 0040 9E42     		cmp	r6, r3
 6897 0042 02D0     		beq	.L522
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6898              		.loc 1 5965 27 discriminator 2 view .LVU2294
 6899 0044 4FF0FF36 		mov	r6, #-1
 6900              	.LVL828:
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6901              		.loc 1 5965 27 discriminator 2 view .LVU2295
 6902 0048 E8E7     		b	.L517
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 260


 6903              	.LVL829:
 6904              	.L522:
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6905              		.loc 1 5965 27 discriminator 1 view .LVU2296
 6906 004a 0026     		movs	r6, #0
 6907              	.LVL830:
5965:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 6908              		.loc 1 5965 27 discriminator 1 view .LVU2297
 6909 004c E6E7     		b	.L517
 6910              		.cfi_endproc
 6911              	.LFE396:
 6913              		.section	.text.putc_flush,"ax",%progbits
 6914              		.align	1
 6915              		.syntax unified
 6916              		.thumb
 6917              		.thumb_func
 6919              	putc_flush:
 6920              	.LVL831:
 6921              	.LFB397:
5976:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw;
 6922              		.loc 1 5976 1 is_stmt 1 view -0
 6923              		.cfi_startproc
 6924              		@ args = 0, pretend = 0, frame = 8
 6925              		@ frame_needed = 0, uses_anonymous_args = 0
5977:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6926              		.loc 1 5977 2 view .LVU2299
5979:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb->fp, pb->buf, (UINT)pb->idx, &nw) == FR_OK
 6927              		.loc 1 5979 2 view .LVU2300
5979:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb->fp, pb->buf, (UINT)pb->idx, &nw) == FR_OK
 6928              		.loc 1 5979 11 is_stmt 0 view .LVU2301
 6929 0000 4268     		ldr	r2, [r0, #4]
5979:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& f_write(pb->fp, pb->buf, (UINT)pb->idx, &nw) == FR_OK
 6930              		.loc 1 5979 5 view .LVU2302
 6931 0002 002A     		cmp	r2, #0
 6932 0004 10DB     		blt	.L525
5976:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT nw;
 6933              		.loc 1 5976 1 view .LVU2303
 6934 0006 10B5     		push	{r4, lr}
 6935              	.LCFI62:
 6936              		.cfi_def_cfa_offset 8
 6937              		.cfi_offset 4, -8
 6938              		.cfi_offset 14, -4
 6939 0008 82B0     		sub	sp, sp, #8
 6940              	.LCFI63:
 6941              		.cfi_def_cfa_offset 16
 6942 000a 0446     		mov	r4, r0
5980:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb->idx == nw) return pb->nchr;
 6943              		.loc 1 5980 24 view .LVU2304
 6944 000c 0146     		mov	r1, r0
5980:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb->idx == nw) return pb->nchr;
 6945              		.loc 1 5980 6 view .LVU2305
 6946 000e 51F80C0B 		ldr	r0, [r1], #12
 6947              	.LVL832:
5980:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb->idx == nw) return pb->nchr;
 6948              		.loc 1 5980 6 view .LVU2306
 6949 0012 01AB     		add	r3, sp, #4
 6950 0014 FFF7FEFF 		bl	f_write
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 261


 6951              	.LVL833:
5980:Middlewares/Third_Party/FatFs/src/ff.c **** 		&& (UINT)pb->idx == nw) return pb->nchr;
 6952              		.loc 1 5980 3 discriminator 1 view .LVU2307
 6953 0018 48B9     		cbnz	r0, .L526
5981:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 6954              		.loc 1 5981 14 view .LVU2308
 6955 001a 6268     		ldr	r2, [r4, #4]
5981:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 6956              		.loc 1 5981 20 view .LVU2309
 6957 001c 019B     		ldr	r3, [sp, #4]
5981:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 6958              		.loc 1 5981 3 view .LVU2310
 6959 001e 9A42     		cmp	r2, r3
 6960 0020 08D1     		bne	.L527
5981:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 6961              		.loc 1 5981 27 is_stmt 1 discriminator 1 view .LVU2311
5981:Middlewares/Third_Party/FatFs/src/ff.c **** 	return EOF;
 6962              		.loc 1 5981 36 is_stmt 0 discriminator 1 view .LVU2312
 6963 0022 A068     		ldr	r0, [r4, #8]
 6964              	.L523:
5983:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6965              		.loc 1 5983 1 view .LVU2313
 6966 0024 02B0     		add	sp, sp, #8
 6967              	.LCFI64:
 6968              		.cfi_def_cfa_offset 8
 6969              		@ sp needed
 6970 0026 10BD     		pop	{r4, pc}
 6971              	.LVL834:
 6972              	.L525:
 6973              	.LCFI65:
 6974              		.cfi_def_cfa_offset 0
 6975              		.cfi_restore 4
 6976              		.cfi_restore 14
5982:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6977              		.loc 1 5982 9 view .LVU2314
 6978 0028 4FF0FF30 		mov	r0, #-1
 6979              	.LVL835:
5983:Middlewares/Third_Party/FatFs/src/ff.c **** 
 6980              		.loc 1 5983 1 view .LVU2315
 6981 002c 7047     		bx	lr
 6982              	.LVL836:
 6983              	.L526:
 6984              	.LCFI66:
 6985              		.cfi_def_cfa_offset 16
 6986              		.cfi_offset 4, -8
 6987              		.cfi_offset 14, -4
5982:Middlewares/Third_Party/FatFs/src/ff.c **** }
 6988              		.loc 1 5982 9 view .LVU2316
 6989 002e 4FF0FF30 		mov	r0, #-1
 6990 0032 F7E7     		b	.L523
 6991              	.L527:
 6992 0034 4FF0FF30 		mov	r0, #-1
 6993 0038 F4E7     		b	.L523
 6994              		.cfi_endproc
 6995              	.LFE397:
 6997              		.section	.text.f_sync,"ax",%progbits
 6998              		.align	1
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 262


 6999              		.global	f_sync
 7000              		.syntax unified
 7001              		.thumb
 7002              		.thumb_func
 7004              	f_sync:
 7005              	.LVL837:
 7006              	.LFB382:
3735:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7007              		.loc 1 3735 1 is_stmt 1 view -0
 7008              		.cfi_startproc
 7009              		@ args = 0, pretend = 0, frame = 8
 7010              		@ frame_needed = 0, uses_anonymous_args = 0
3735:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7011              		.loc 1 3735 1 is_stmt 0 view .LVU2318
 7012 0000 70B5     		push	{r4, r5, r6, lr}
 7013              	.LCFI67:
 7014              		.cfi_def_cfa_offset 16
 7015              		.cfi_offset 4, -16
 7016              		.cfi_offset 5, -12
 7017              		.cfi_offset 6, -8
 7018              		.cfi_offset 14, -4
 7019 0002 82B0     		sub	sp, sp, #8
 7020              	.LCFI68:
 7021              		.cfi_def_cfa_offset 24
 7022 0004 0446     		mov	r4, r0
3736:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 7023              		.loc 1 3736 2 is_stmt 1 view .LVU2319
3737:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD tm;
 7024              		.loc 1 3737 2 view .LVU2320
3738:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
 7025              		.loc 1 3738 2 view .LVU2321
3739:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 7026              		.loc 1 3739 2 view .LVU2322
3745:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7027              		.loc 1 3745 2 view .LVU2323
3745:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 7028              		.loc 1 3745 8 is_stmt 0 view .LVU2324
 7029 0006 01A9     		add	r1, sp, #4
 7030 0008 FFF7FEFF 		bl	validate
 7031              	.LVL838:
3746:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->flag & FA_MODIFIED) {	/* Is there any change to the file? */
 7032              		.loc 1 3746 2 is_stmt 1 view .LVU2325
3746:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->flag & FA_MODIFIED) {	/* Is there any change to the file? */
 7033              		.loc 1 3746 5 is_stmt 0 view .LVU2326
 7034 000c 0546     		mov	r5, r0
 7035 000e 78B9     		cbnz	r0, .L533
3747:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7036              		.loc 1 3747 3 is_stmt 1 view .LVU2327
3747:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7037              		.loc 1 3747 9 is_stmt 0 view .LVU2328
 7038 0010 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
3747:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7039              		.loc 1 3747 6 view .LVU2329
 7040 0012 13F0400F 		tst	r3, #64
 7041 0016 0BD0     		beq	.L533
3749:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) LEAVE_FF(fs, FR_DISK_ERR);
 7042              		.loc 1 3749 4 is_stmt 1 view .LVU2330
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 263


3749:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) LEAVE_FF(fs, FR_DISK_ERR);
 7043              		.loc 1 3749 7 is_stmt 0 view .LVU2331
 7044 0018 13F0800F 		tst	r3, #128
 7045 001c 0FD1     		bne	.L538
 7046              	.LVL839:
 7047              	.L534:
3755:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 7048              		.loc 1 3755 4 is_stmt 1 view .LVU2332
3755:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 7049              		.loc 1 3755 9 is_stmt 0 view .LVU2333
 7050 001e FFF7FEFF 		bl	get_fattime
 7051              	.LVL840:
 7052 0022 0646     		mov	r6, r0
 7053              	.LVL841:
3785:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
 7054              		.loc 1 3785 5 is_stmt 1 view .LVU2334
3785:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
 7055              		.loc 1 3785 11 is_stmt 0 view .LVU2335
 7056 0024 616A     		ldr	r1, [r4, #36]
 7057 0026 0198     		ldr	r0, [sp, #4]
 7058              	.LVL842:
3785:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
 7059              		.loc 1 3785 11 view .LVU2336
 7060 0028 FFF7FEFF 		bl	move_window
 7061              	.LVL843:
3786:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir = fp->dir_ptr;
 7062              		.loc 1 3786 5 is_stmt 1 view .LVU2337
3786:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir = fp->dir_ptr;
 7063              		.loc 1 3786 8 is_stmt 0 view .LVU2338
 7064 002c 0546     		mov	r5, r0
 7065 002e D0B1     		cbz	r0, .L539
 7066              	.LVL844:
 7067              	.L533:
3801:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7068              		.loc 1 3801 2 is_stmt 1 view .LVU2339
 7069 0030 2946     		mov	r1, r5
 7070 0032 0198     		ldr	r0, [sp, #4]
 7071 0034 FFF7FEFF 		bl	unlock_fs
 7072              	.LVL845:
3801:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7073              		.loc 1 3801 2 discriminator 1 view .LVU2340
 7074              	.L536:
3801:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7075              		.loc 1 3801 19 discriminator 1 view .LVU2341
3802:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7076              		.loc 1 3802 1 is_stmt 0 view .LVU2342
 7077 0038 2846     		mov	r0, r5
 7078 003a 02B0     		add	sp, sp, #8
 7079              	.LCFI69:
 7080              		.cfi_remember_state
 7081              		.cfi_def_cfa_offset 16
 7082              		@ sp needed
 7083 003c 70BD     		pop	{r4, r5, r6, pc}
 7084              	.LVL846:
 7085              	.L538:
 7086              	.LCFI70:
 7087              		.cfi_restore_state
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 264


3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7088              		.loc 1 3750 5 is_stmt 1 view .LVU2343
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7089              		.loc 1 3750 9 is_stmt 0 view .LVU2344
 7090 003e 0123     		movs	r3, #1
 7091 0040 226A     		ldr	r2, [r4, #32]
 7092 0042 04F13001 		add	r1, r4, #48
 7093 0046 0198     		ldr	r0, [sp, #4]
 7094              	.LVL847:
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7095              		.loc 1 3750 9 view .LVU2345
 7096 0048 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 7097 004a FFF7FEFF 		bl	disk_write
 7098              	.LVL848:
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7099              		.loc 1 3750 8 discriminator 1 view .LVU2346
 7100 004e 20B9     		cbnz	r0, .L540
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7101              		.loc 1 3750 87 is_stmt 1 discriminator 2 view .LVU2347
3751:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7102              		.loc 1 3751 5 view .LVU2348
3751:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7103              		.loc 1 3751 7 is_stmt 0 view .LVU2349
 7104 0050 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
3751:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7105              		.loc 1 3751 14 view .LVU2350
 7106 0052 03F07F03 		and	r3, r3, #127
 7107 0056 2375     		strb	r3, [r4, #20]
 7108 0058 E1E7     		b	.L534
 7109              	.L540:
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7110              		.loc 1 3750 62 is_stmt 1 discriminator 1 view .LVU2351
 7111 005a 0121     		movs	r1, #1
 7112 005c 0198     		ldr	r0, [sp, #4]
 7113 005e FFF7FEFF 		bl	unlock_fs
 7114              	.LVL849:
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7115              		.loc 1 3750 62 discriminator 1 view .LVU2352
 7116 0062 0125     		movs	r5, #1
 7117              	.LVL850:
3750:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 7118              		.loc 1 3750 62 is_stmt 0 view .LVU2353
 7119 0064 E8E7     		b	.L536
 7120              	.LVL851:
 7121              	.L539:
3787:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] |= AM_ARC;						/* Set archive bit */
 7122              		.loc 1 3787 6 is_stmt 1 view .LVU2354
3787:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] |= AM_ARC;						/* Set archive bit */
 7123              		.loc 1 3787 10 is_stmt 0 view .LVU2355
 7124 0066 A56A     		ldr	r5, [r4, #40]
 7125              	.LVL852:
3788:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation info  */
 7126              		.loc 1 3788 6 is_stmt 1 view .LVU2356
3788:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation info  */
 7127              		.loc 1 3788 9 is_stmt 0 view .LVU2357
 7128 0068 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
3788:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fp->obj.fs, dir, fp->obj.sclust);		/* Update file allocation info  */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 265


 7129              		.loc 1 3788 20 view .LVU2358
 7130 006a 43F02003 		orr	r3, r3, #32
 7131 006e EB72     		strb	r3, [r5, #11]
3789:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_FileSize, (DWORD)fp->obj.objsize);	/* Update file size */
 7132              		.loc 1 3789 6 is_stmt 1 view .LVU2359
 7133 0070 A268     		ldr	r2, [r4, #8]
 7134 0072 2946     		mov	r1, r5
 7135 0074 2068     		ldr	r0, [r4]
 7136              	.LVL853:
3789:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_FileSize, (DWORD)fp->obj.objsize);	/* Update file size */
 7137              		.loc 1 3789 6 is_stmt 0 view .LVU2360
 7138 0076 FFF7FEFF 		bl	st_clust
 7139              	.LVL854:
3790:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);				/* Update modified time */
 7140              		.loc 1 3790 6 is_stmt 1 view .LVU2361
 7141 007a E168     		ldr	r1, [r4, #12]
 7142 007c 05F11C00 		add	r0, r5, #28
 7143 0080 FFF7FEFF 		bl	st_dword
 7144              	.LVL855:
3791:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_word(dir + DIR_LstAccDate, 0);
 7145              		.loc 1 3791 6 view .LVU2362
 7146 0084 3146     		mov	r1, r6
 7147 0086 05F11600 		add	r0, r5, #22
 7148 008a FFF7FEFF 		bl	st_dword
 7149              	.LVL856:
3792:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 7150              		.loc 1 3792 6 view .LVU2363
 7151 008e 0021     		movs	r1, #0
 7152 0090 05F11200 		add	r0, r5, #18
 7153 0094 FFF7FEFF 		bl	st_word
 7154              	.LVL857:
3793:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
 7155              		.loc 1 3793 6 view .LVU2364
3793:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);					/* Restore it to the directory */
 7156              		.loc 1 3793 16 is_stmt 0 view .LVU2365
 7157 0098 019B     		ldr	r3, [sp, #4]
 7158 009a 0122     		movs	r2, #1
 7159 009c DA70     		strb	r2, [r3, #3]
3794:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_MODIFIED;
 7160              		.loc 1 3794 6 is_stmt 1 view .LVU2366
3794:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->flag &= (BYTE)~FA_MODIFIED;
 7161              		.loc 1 3794 12 is_stmt 0 view .LVU2367
 7162 009e 0198     		ldr	r0, [sp, #4]
 7163 00a0 FFF7FEFF 		bl	sync_fs
 7164              	.LVL858:
 7165 00a4 0546     		mov	r5, r0
 7166              	.LVL859:
3795:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7167              		.loc 1 3795 6 is_stmt 1 view .LVU2368
3795:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7168              		.loc 1 3795 8 is_stmt 0 view .LVU2369
 7169 00a6 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
3795:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7170              		.loc 1 3795 15 view .LVU2370
 7171 00a8 23F04003 		bic	r3, r3, #64
 7172 00ac 2375     		strb	r3, [r4, #20]
 7173 00ae BFE7     		b	.L533
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 266


 7174              		.cfi_endproc
 7175              	.LFE382:
 7177              		.section	.text.f_close,"ax",%progbits
 7178              		.align	1
 7179              		.global	f_close
 7180              		.syntax unified
 7181              		.thumb
 7182              		.thumb_func
 7184              	f_close:
 7185              	.LVL860:
 7186              	.LFB383:
3816:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7187              		.loc 1 3816 1 is_stmt 1 view -0
 7188              		.cfi_startproc
 7189              		@ args = 0, pretend = 0, frame = 8
 7190              		@ frame_needed = 0, uses_anonymous_args = 0
3816:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7191              		.loc 1 3816 1 is_stmt 0 view .LVU2372
 7192 0000 30B5     		push	{r4, r5, lr}
 7193              	.LCFI71:
 7194              		.cfi_def_cfa_offset 12
 7195              		.cfi_offset 4, -12
 7196              		.cfi_offset 5, -8
 7197              		.cfi_offset 14, -4
 7198 0002 83B0     		sub	sp, sp, #12
 7199              	.LCFI72:
 7200              		.cfi_def_cfa_offset 24
 7201 0004 0446     		mov	r4, r0
3817:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 7202              		.loc 1 3817 2 is_stmt 1 view .LVU2373
3818:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7203              		.loc 1 3818 2 view .LVU2374
3821:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK)
 7204              		.loc 1 3821 2 view .LVU2375
3821:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK)
 7205              		.loc 1 3821 8 is_stmt 0 view .LVU2376
 7206 0006 FFF7FEFF 		bl	f_sync
 7207              	.LVL861:
3822:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7208              		.loc 1 3822 2 is_stmt 1 view .LVU2377
3822:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7209              		.loc 1 3822 5 is_stmt 0 view .LVU2378
 7210 000a 0546     		mov	r5, r0
 7211 000c 10B1     		cbz	r0, .L545
 7212              	.LVL862:
 7213              	.L542:
3839:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7214              		.loc 1 3839 2 is_stmt 1 view .LVU2379
3840:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7215              		.loc 1 3840 1 is_stmt 0 view .LVU2380
 7216 000e 2846     		mov	r0, r5
 7217 0010 03B0     		add	sp, sp, #12
 7218              	.LCFI73:
 7219              		.cfi_remember_state
 7220              		.cfi_def_cfa_offset 12
 7221              		@ sp needed
 7222 0012 30BD     		pop	{r4, r5, pc}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 267


 7223              	.LVL863:
 7224              	.L545:
 7225              	.LCFI74:
 7226              		.cfi_restore_state
3825:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 7227              		.loc 1 3825 3 is_stmt 1 view .LVU2381
3825:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 7228              		.loc 1 3825 9 is_stmt 0 view .LVU2382
 7229 0014 01A9     		add	r1, sp, #4
 7230 0016 2046     		mov	r0, r4
 7231              	.LVL864:
3825:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {
 7232              		.loc 1 3825 9 view .LVU2383
 7233 0018 FFF7FEFF 		bl	validate
 7234              	.LVL865:
3826:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 7235              		.loc 1 3826 3 is_stmt 1 view .LVU2384
3826:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 7236              		.loc 1 3826 6 is_stmt 0 view .LVU2385
 7237 001c 0546     		mov	r5, r0
 7238 001e 0028     		cmp	r0, #0
 7239 0020 F5D1     		bne	.L542
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)
 7240              		.loc 1 3828 4 is_stmt 1 view .LVU2386
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)
 7241              		.loc 1 3828 10 is_stmt 0 view .LVU2387
 7242 0022 2069     		ldr	r0, [r4, #16]
 7243              	.LVL866:
3828:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK)
 7244              		.loc 1 3828 10 view .LVU2388
 7245 0024 FFF7FEFF 		bl	dec_lock
 7246              	.LVL867:
3829:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7247              		.loc 1 3829 4 is_stmt 1 view .LVU2389
3829:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7248              		.loc 1 3829 7 is_stmt 0 view .LVU2390
 7249 0028 0546     		mov	r5, r0
 7250 002a 08B9     		cbnz	r0, .L543
3832:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7251              		.loc 1 3832 5 is_stmt 1 view .LVU2391
3832:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7252              		.loc 1 3832 16 is_stmt 0 view .LVU2392
 7253 002c 0023     		movs	r3, #0
 7254 002e 2360     		str	r3, [r4]
 7255              	.L543:
3835:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7256              		.loc 1 3835 4 is_stmt 1 view .LVU2393
 7257 0030 0021     		movs	r1, #0
 7258 0032 0198     		ldr	r0, [sp, #4]
 7259              	.LVL868:
3835:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7260              		.loc 1 3835 4 is_stmt 0 view .LVU2394
 7261 0034 FFF7FEFF 		bl	unlock_fs
 7262              	.LVL869:
 7263 0038 E9E7     		b	.L542
 7264              		.cfi_endproc
 7265              	.LFE383:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 268


 7267              		.section	.text.f_lseek,"ax",%progbits
 7268              		.align	1
 7269              		.global	f_lseek
 7270              		.syntax unified
 7271              		.thumb
 7272              		.thumb_func
 7274              	f_lseek:
 7275              	.LVL870:
 7276              	.LFB384:
4005:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7277              		.loc 1 4005 1 is_stmt 1 view -0
 7278              		.cfi_startproc
 7279              		@ args = 0, pretend = 0, frame = 8
 7280              		@ frame_needed = 0, uses_anonymous_args = 0
4005:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 7281              		.loc 1 4005 1 is_stmt 0 view .LVU2396
 7282 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 7283              	.LCFI75:
 7284              		.cfi_def_cfa_offset 36
 7285              		.cfi_offset 4, -36
 7286              		.cfi_offset 5, -32
 7287              		.cfi_offset 6, -28
 7288              		.cfi_offset 7, -24
 7289              		.cfi_offset 8, -20
 7290              		.cfi_offset 9, -16
 7291              		.cfi_offset 10, -12
 7292              		.cfi_offset 11, -8
 7293              		.cfi_offset 14, -4
 7294 0004 83B0     		sub	sp, sp, #12
 7295              	.LCFI76:
 7296              		.cfi_def_cfa_offset 48
 7297 0006 0446     		mov	r4, r0
 7298 0008 0D46     		mov	r5, r1
4006:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 7299              		.loc 1 4006 2 is_stmt 1 view .LVU2397
4007:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD clst, bcs, nsect;
 7300              		.loc 1 4007 2 view .LVU2398
4008:Middlewares/Third_Party/FatFs/src/ff.c **** 	FSIZE_t ifptr;
 7301              		.loc 1 4008 2 view .LVU2399
4009:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_FASTSEEK
 7302              		.loc 1 4009 2 view .LVU2400
4011:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7303              		.loc 1 4011 2 view .LVU2401
4014:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
 7304              		.loc 1 4014 2 view .LVU2402
4014:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
 7305              		.loc 1 4014 8 is_stmt 0 view .LVU2403
 7306 000a 01A9     		add	r1, sp, #4
 7307              	.LVL871:
4014:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) res = (FRESULT)fp->err;
 7308              		.loc 1 4014 8 view .LVU2404
 7309 000c FFF7FEFF 		bl	validate
 7310              	.LVL872:
4015:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
 7311              		.loc 1 4015 2 is_stmt 1 view .LVU2405
4015:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
 7312              		.loc 1 4015 5 is_stmt 0 view .LVU2406
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 269


 7313 0010 0646     		mov	r6, r0
 7314 0012 A0B9     		cbnz	r0, .L547
4015:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
 7315              		.loc 1 4015 20 is_stmt 1 discriminator 1 view .LVU2407
4015:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT && !_FS_READONLY
 7316              		.loc 1 4015 24 is_stmt 0 discriminator 1 view .LVU2408
 7317 0014 667D     		ldrb	r6, [r4, #21]	@ zero_extendqisi2
 7318              	.LVL873:
4021:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7319              		.loc 1 4021 2 is_stmt 1 view .LVU2409
4021:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7320              		.loc 1 4021 5 is_stmt 0 view .LVU2410
 7321 0016 96B9     		cbnz	r6, .L547
4021:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7322              		.loc 1 4021 37 is_stmt 1 discriminator 2 view .LVU2411
4024:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
 7323              		.loc 1 4024 2 view .LVU2412
4024:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
 7324              		.loc 1 4024 8 is_stmt 0 view .LVU2413
 7325 0018 E36A     		ldr	r3, [r4, #44]
4024:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs == CREATE_LINKMAP) {	/* Create CLMT */
 7326              		.loc 1 4024 5 view .LVU2414
 7327 001a 002B     		cmp	r3, #0
 7328 001c 00F0A780 		beq	.L550
4025:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fp->cltbl;
 7329              		.loc 1 4025 3 is_stmt 1 view .LVU2415
4025:Middlewares/Third_Party/FatFs/src/ff.c **** 			tbl = fp->cltbl;
 7330              		.loc 1 4025 6 is_stmt 0 view .LVU2416
 7331 0020 B5F1FF3F 		cmp	r5, #-1
 7332 0024 13D0     		beq	.L591
4051:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
 7333              		.loc 1 4051 4 is_stmt 1 view .LVU2417
4051:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
 7334              		.loc 1 4051 21 is_stmt 0 view .LVU2418
 7335 0026 E768     		ldr	r7, [r4, #12]
4051:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->fptr = ofs;				/* Set file pointer */
 7336              		.loc 1 4051 7 view .LVU2419
 7337 0028 AF42     		cmp	r7, r5
 7338 002a 00D3     		bcc	.L559
 7339 002c 2F46     		mov	r7, r5
 7340              	.L559:
 7341              	.LVL874:
4052:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs) {
 7342              		.loc 1 4052 4 is_stmt 1 view .LVU2420
4052:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ofs) {
 7343              		.loc 1 4052 13 is_stmt 0 view .LVU2421
 7344 002e A761     		str	r7, [r4, #24]
4053:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
 7345              		.loc 1 4053 4 is_stmt 1 view .LVU2422
4053:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->clust = clmt_clust(fp, ofs - 1);
 7346              		.loc 1 4053 7 is_stmt 0 view .LVU2423
 7347 0030 002F     		cmp	r7, #0
 7348 0032 50D1     		bne	.L592
 7349              	.LVL875:
 7350              	.L558:
4152:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7351              		.loc 1 4152 2 is_stmt 1 view .LVU2424
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 270


 7352 0034 3146     		mov	r1, r6
 7353 0036 0198     		ldr	r0, [sp, #4]
 7354 0038 FFF7FEFF 		bl	unlock_fs
 7355              	.LVL876:
4152:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7356              		.loc 1 4152 2 discriminator 1 view .LVU2425
4152:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7357              		.loc 1 4152 2 is_stmt 0 view .LVU2426
 7358 003c 03E0     		b	.L549
 7359              	.LVL877:
 7360              	.L547:
4021:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7361              		.loc 1 4021 20 is_stmt 1 discriminator 1 view .LVU2427
 7362 003e 3146     		mov	r1, r6
 7363 0040 0198     		ldr	r0, [sp, #4]
 7364 0042 FFF7FEFF 		bl	unlock_fs
 7365              	.LVL878:
4021:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7366              		.loc 1 4021 20 discriminator 1 view .LVU2428
 7367              	.L549:
4152:Middlewares/Third_Party/FatFs/src/ff.c **** }
 7368              		.loc 1 4152 19 discriminator 1 view .LVU2429
4153:Middlewares/Third_Party/FatFs/src/ff.c **** 
 7369              		.loc 1 4153 1 is_stmt 0 view .LVU2430
 7370 0046 3046     		mov	r0, r6
 7371 0048 03B0     		add	sp, sp, #12
 7372              	.LCFI77:
 7373              		.cfi_remember_state
 7374              		.cfi_def_cfa_offset 36
 7375              		@ sp needed
 7376 004a BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 7377              	.LVL879:
 7378              	.L591:
 7379              	.LCFI78:
 7380              		.cfi_restore_state
4026:Middlewares/Third_Party/FatFs/src/ff.c **** 			tlen = *tbl++; ulen = 2;	/* Given table size and required table size */
 7381              		.loc 1 4026 4 is_stmt 1 view .LVU2431
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
 7382              		.loc 1 4027 4 view .LVU2432
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
 7383              		.loc 1 4027 15 is_stmt 0 view .LVU2433
 7384 004e 9846     		mov	r8, r3
 7385              	.LVL880:
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
 7386              		.loc 1 4027 9 view .LVU2434
 7387 0050 58F804BB 		ldr	fp, [r8], #4
 7388              	.LVL881:
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
 7389              		.loc 1 4027 19 is_stmt 1 view .LVU2435
4028:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl) {
 7390              		.loc 1 4028 4 view .LVU2436
4028:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (cl) {
 7391              		.loc 1 4028 7 is_stmt 0 view .LVU2437
 7392 0054 D4F808A0 		ldr	r10, [r4, #8]
 7393              	.LVL882:
4029:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 7394              		.loc 1 4029 4 is_stmt 1 view .LVU2438
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 271


4029:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 7395              		.loc 1 4029 7 is_stmt 0 view .LVU2439
 7396 0058 BAF1000F 		cmp	r10, #0
 7397 005c 2FD0     		beq	.L584
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
 7398              		.loc 1 4027 24 view .LVU2440
 7399 005e 4FF00209 		mov	r9, #2
 7400              	.LVL883:
 7401              	.L557:
4030:Middlewares/Third_Party/FatFs/src/ff.c **** 					/* Get a fragment */
 7402              		.loc 1 4030 5 is_stmt 1 view .LVU2441
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 7403              		.loc 1 4032 6 view .LVU2442
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 7404              		.loc 1 4032 16 view .LVU2443
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 7405              		.loc 1 4032 25 view .LVU2444
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 7406              		.loc 1 4032 30 is_stmt 0 view .LVU2445
 7407 0062 09F10209 		add	r9, r9, #2
 7408              	.LVL884:
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 7409              		.loc 1 4032 30 view .LVU2446
 7410 0066 5146     		mov	r1, r10
4032:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 7411              		.loc 1 4032 20 view .LVU2447
 7412 0068 0027     		movs	r7, #0
 7413              	.LVL885:
 7414              	.L555:
4033:Middlewares/Third_Party/FatFs/src/ff.c **** 						pcl = cl; ncl++;
 7415              		.loc 1 4033 6 is_stmt 1 view .LVU2448
4034:Middlewares/Third_Party/FatFs/src/ff.c **** 						cl = get_fat(&fp->obj, cl);
 7416              		.loc 1 4034 7 view .LVU2449
4034:Middlewares/Third_Party/FatFs/src/ff.c **** 						cl = get_fat(&fp->obj, cl);
 7417              		.loc 1 4034 17 view .LVU2450
4034:Middlewares/Third_Party/FatFs/src/ff.c **** 						cl = get_fat(&fp->obj, cl);
 7418              		.loc 1 4034 20 is_stmt 0 view .LVU2451
 7419 006a 0137     		adds	r7, r7, #1
 7420              	.LVL886:
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
 7421              		.loc 1 4035 7 is_stmt 1 view .LVU2452
 7422 006c 0D46     		mov	r5, r1
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
 7423              		.loc 1 4035 12 is_stmt 0 view .LVU2453
 7424 006e 2046     		mov	r0, r4
 7425 0070 FFF7FEFF 		bl	get_fat
 7426              	.LVL887:
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
 7427              		.loc 1 4035 12 view .LVU2454
 7428 0074 0146     		mov	r1, r0
 7429              	.LVL888:
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7430              		.loc 1 4036 7 is_stmt 1 view .LVU2455
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7431              		.loc 1 4036 10 is_stmt 0 view .LVU2456
 7432 0076 0128     		cmp	r0, #1
 7433 0078 13D9     		bls	.L593
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 272


4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7434              		.loc 1 4036 20 is_stmt 1 discriminator 2 view .LVU2457
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7435              		.loc 1 4036 41 discriminator 2 view .LVU2458
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7436              		.loc 1 4037 7 view .LVU2459
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7437              		.loc 1 4037 10 is_stmt 0 view .LVU2460
 7438 007a B0F1FF3F 		cmp	r0, #-1
 7439 007e 17D0     		beq	.L594
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7440              		.loc 1 4037 29 is_stmt 1 discriminator 2 view .LVU2461
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7441              		.loc 1 4037 51 discriminator 2 view .LVU2462
4038:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 7442              		.loc 1 4038 18 view .LVU2463
4038:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 7443              		.loc 1 4038 25 is_stmt 0 view .LVU2464
 7444 0080 0135     		adds	r5, r5, #1
 7445              	.LVL889:
4038:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (ulen <= tlen) {		/* Store the length and top of the fragment */
 7446              		.loc 1 4038 18 view .LVU2465
 7447 0082 8542     		cmp	r5, r0
 7448 0084 F1D0     		beq	.L555
4039:Middlewares/Third_Party/FatFs/src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
 7449              		.loc 1 4039 6 is_stmt 1 view .LVU2466
4039:Middlewares/Third_Party/FatFs/src/ff.c **** 						*tbl++ = ncl; *tbl++ = tcl;
 7450              		.loc 1 4039 9 is_stmt 0 view .LVU2467
 7451 0086 CB45     		cmp	fp, r9
 7452 0088 05D3     		bcc	.L556
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7453              		.loc 1 4040 7 is_stmt 1 view .LVU2468
 7454              	.LVL890:
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7455              		.loc 1 4040 14 is_stmt 0 view .LVU2469
 7456 008a 4346     		mov	r3, r8
 7457 008c 43F8087B 		str	r7, [r3], #8
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7458              		.loc 1 4040 21 is_stmt 1 view .LVU2470
 7459              	.LVL891:
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7460              		.loc 1 4040 28 is_stmt 0 view .LVU2471
 7461 0090 C8F804A0 		str	r10, [r8, #4]
4040:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7462              		.loc 1 4040 25 view .LVU2472
 7463 0094 9846     		mov	r8, r3
 7464              	.LVL892:
 7465              	.L556:
4042:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7466              		.loc 1 4042 17 is_stmt 1 view .LVU2473
4042:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7467              		.loc 1 4042 21 is_stmt 0 view .LVU2474
 7468 0096 019B     		ldr	r3, [sp, #4]
 7469 0098 9B69     		ldr	r3, [r3, #24]
4042:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7470              		.loc 1 4042 17 view .LVU2475
 7471 009a 8B42     		cmp	r3, r1
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 273


 7472 009c 11D9     		bls	.L552
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
 7473              		.loc 1 4035 12 view .LVU2476
 7474 009e 8A46     		mov	r10, r1
 7475              	.LVL893:
4035:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl <= 1) ABORT(fs, FR_INT_ERR);
 7476              		.loc 1 4035 12 view .LVU2477
 7477 00a0 DFE7     		b	.L557
 7478              	.LVL894:
 7479              	.L593:
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7480              		.loc 1 4036 20 is_stmt 1 discriminator 1 view .LVU2478
 7481 00a2 0226     		movs	r6, #2
 7482              	.LVL895:
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7483              		.loc 1 4036 20 is_stmt 0 discriminator 1 view .LVU2479
 7484 00a4 6675     		strb	r6, [r4, #21]
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7485              		.loc 1 4036 20 is_stmt 1 discriminator 1 view .LVU2480
 7486 00a6 3146     		mov	r1, r6
 7487 00a8 0198     		ldr	r0, [sp, #4]
 7488              	.LVL896:
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7489              		.loc 1 4036 20 is_stmt 0 discriminator 1 view .LVU2481
 7490 00aa FFF7FEFF 		bl	unlock_fs
 7491              	.LVL897:
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7492              		.loc 1 4036 20 is_stmt 1 discriminator 1 view .LVU2482
4036:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (cl == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7493              		.loc 1 4036 20 is_stmt 0 view .LVU2483
 7494 00ae CAE7     		b	.L549
 7495              	.LVL898:
 7496              	.L594:
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7497              		.loc 1 4037 29 is_stmt 1 discriminator 1 view .LVU2484
 7498 00b0 0126     		movs	r6, #1
 7499              	.LVL899:
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7500              		.loc 1 4037 29 is_stmt 0 discriminator 1 view .LVU2485
 7501 00b2 6675     		strb	r6, [r4, #21]
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7502              		.loc 1 4037 29 is_stmt 1 discriminator 1 view .LVU2486
 7503 00b4 3146     		mov	r1, r6
 7504 00b6 0198     		ldr	r0, [sp, #4]
 7505              	.LVL900:
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7506              		.loc 1 4037 29 is_stmt 0 discriminator 1 view .LVU2487
 7507 00b8 FFF7FEFF 		bl	unlock_fs
 7508              	.LVL901:
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7509              		.loc 1 4037 29 is_stmt 1 discriminator 1 view .LVU2488
4037:Middlewares/Third_Party/FatFs/src/ff.c **** 					} while (cl == pcl + 1);
 7510              		.loc 1 4037 29 is_stmt 0 view .LVU2489
 7511 00bc C3E7     		b	.L549
 7512              	.LVL902:
 7513              	.L584:
4027:Middlewares/Third_Party/FatFs/src/ff.c **** 			cl = fp->obj.sclust;		/* Origin of the chain */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 274


 7514              		.loc 1 4027 24 view .LVU2490
 7515 00be 4FF00209 		mov	r9, #2
 7516              	.LVL903:
 7517              	.L552:
4044:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ulen <= tlen) {
 7518              		.loc 1 4044 4 is_stmt 1 view .LVU2491
4044:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ulen <= tlen) {
 7519              		.loc 1 4044 7 is_stmt 0 view .LVU2492
 7520 00c2 E36A     		ldr	r3, [r4, #44]
4044:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ulen <= tlen) {
 7521              		.loc 1 4044 15 view .LVU2493
 7522 00c4 C3F80090 		str	r9, [r3]
4045:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tbl = 0;		/* Terminate table */
 7523              		.loc 1 4045 4 is_stmt 1 view .LVU2494
4045:Middlewares/Third_Party/FatFs/src/ff.c **** 				*tbl = 0;		/* Terminate table */
 7524              		.loc 1 4045 7 is_stmt 0 view .LVU2495
 7525 00c8 D945     		cmp	r9, fp
 7526 00ca 00F21781 		bhi	.L586
4046:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 7527              		.loc 1 4046 5 is_stmt 1 view .LVU2496
4046:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 7528              		.loc 1 4046 10 is_stmt 0 view .LVU2497
 7529 00ce 0023     		movs	r3, #0
 7530 00d0 C8F80030 		str	r3, [r8]
 7531 00d4 AEE7     		b	.L558
 7532              	.LVL904:
 7533              	.L592:
4054:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, fp->clust);
 7534              		.loc 1 4054 5 is_stmt 1 view .LVU2498
4054:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, fp->clust);
 7535              		.loc 1 4054 17 is_stmt 0 view .LVU2499
 7536 00d6 07F1FF39 		add	r9, r7, #-1
 7537 00da 4946     		mov	r1, r9
 7538 00dc 2046     		mov	r0, r4
 7539 00de FFF7FEFF 		bl	clmt_clust
 7540              	.LVL905:
 7541 00e2 0146     		mov	r1, r0
4054:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, fp->clust);
 7542              		.loc 1 4054 15 discriminator 1 view .LVU2500
 7543 00e4 E061     		str	r0, [r4, #28]
4055:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!dsc) ABORT(fs, FR_INT_ERR);
 7544              		.loc 1 4055 5 is_stmt 1 view .LVU2501
4055:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!dsc) ABORT(fs, FR_INT_ERR);
 7545              		.loc 1 4055 11 is_stmt 0 view .LVU2502
 7546 00e6 DDF80480 		ldr	r8, [sp, #4]
 7547 00ea 4046     		mov	r0, r8
 7548 00ec FFF7FEFF 		bl	clust2sect
 7549              	.LVL906:
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7550              		.loc 1 4056 5 is_stmt 1 view .LVU2503
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7551              		.loc 1 4056 8 is_stmt 0 view .LVU2504
 7552 00f0 D8B1     		cbz	r0, .L595
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7553              		.loc 1 4056 15 is_stmt 1 discriminator 2 view .LVU2505
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7554              		.loc 1 4056 36 discriminator 2 view .LVU2506
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 275


4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
 7555              		.loc 1 4057 5 view .LVU2507
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
 7556              		.loc 1 4057 45 is_stmt 0 view .LVU2508
 7557 00f2 B8F80A50 		ldrh	r5, [r8, #10]
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
 7558              		.loc 1 4057 53 view .LVU2509
 7559 00f6 013D     		subs	r5, r5, #1
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
 7560              		.loc 1 4057 40 view .LVU2510
 7561 00f8 05EA5925 		and	r5, r5, r9, lsr #9
4057:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (fp->fptr % SS(fs) && dsc != fp->sect) {	/* Refill sector cache if needed */
 7562              		.loc 1 4057 9 view .LVU2511
 7563 00fc 0544     		add	r5, r5, r0
 7564              	.LVL907:
4058:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7565              		.loc 1 4058 5 is_stmt 1 view .LVU2512
4058:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7566              		.loc 1 4058 18 is_stmt 0 view .LVU2513
 7567 00fe C7F30807 		ubfx	r7, r7, #0, #9
 7568              	.LVL908:
4058:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7569              		.loc 1 4058 8 view .LVU2514
 7570 0102 002F     		cmp	r7, #0
 7571 0104 96D0     		beq	.L558
4058:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7572              		.loc 1 4058 39 discriminator 1 view .LVU2515
 7573 0106 226A     		ldr	r2, [r4, #32]
4058:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7574              		.loc 1 4058 27 discriminator 1 view .LVU2516
 7575 0108 AA42     		cmp	r2, r5
 7576 010a 93D0     		beq	.L558
4061:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 7577              		.loc 1 4061 6 is_stmt 1 view .LVU2517
4061:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 7578              		.loc 1 4061 10 is_stmt 0 view .LVU2518
 7579 010c 94F91430 		ldrsb	r3, [r4, #20]
4061:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 7580              		.loc 1 4061 9 view .LVU2519
 7581 0110 002B     		cmp	r3, #0
 7582 0112 11DB     		blt	.L596
 7583              	.L561:
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7584              		.loc 1 4066 6 is_stmt 1 view .LVU2520
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7585              		.loc 1 4066 10 is_stmt 0 view .LVU2521
 7586 0114 0123     		movs	r3, #1
 7587 0116 2A46     		mov	r2, r5
 7588 0118 04F13001 		add	r1, r4, #48
 7589 011c 0198     		ldr	r0, [sp, #4]
 7590 011e 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 7591 0120 FFF7FEFF 		bl	disk_read
 7592              	.LVL909:
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7593              		.loc 1 4066 9 discriminator 1 view .LVU2522
 7594 0124 E0B9     		cbnz	r0, .L597
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 276


 7595              		.loc 1 4066 57 is_stmt 1 discriminator 2 view .LVU2523
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7596              		.loc 1 4066 79 discriminator 2 view .LVU2524
4068:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7597              		.loc 1 4068 6 view .LVU2525
4068:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7598              		.loc 1 4068 15 is_stmt 0 view .LVU2526
 7599 0126 2562     		str	r5, [r4, #32]
 7600 0128 84E7     		b	.L558
 7601              	.LVL910:
 7602              	.L595:
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7603              		.loc 1 4056 15 is_stmt 1 discriminator 1 view .LVU2527
 7604 012a 0226     		movs	r6, #2
 7605              	.LVL911:
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7606              		.loc 1 4056 15 is_stmt 0 discriminator 1 view .LVU2528
 7607 012c 6675     		strb	r6, [r4, #21]
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7608              		.loc 1 4056 15 is_stmt 1 discriminator 1 view .LVU2529
 7609 012e 3146     		mov	r1, r6
 7610 0130 4046     		mov	r0, r8
 7611              	.LVL912:
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7612              		.loc 1 4056 15 is_stmt 0 discriminator 1 view .LVU2530
 7613 0132 FFF7FEFF 		bl	unlock_fs
 7614              	.LVL913:
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7615              		.loc 1 4056 15 is_stmt 1 discriminator 1 view .LVU2531
4056:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc += (DWORD)((ofs - 1) / SS(fs)) & (fs->csize - 1);
 7616              		.loc 1 4056 15 is_stmt 0 view .LVU2532
 7617 0136 86E7     		b	.L549
 7618              	.LVL914:
 7619              	.L596:
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7620              		.loc 1 4062 7 is_stmt 1 view .LVU2533
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7621              		.loc 1 4062 11 is_stmt 0 view .LVU2534
 7622 0138 0123     		movs	r3, #1
 7623 013a 04F13001 		add	r1, r4, #48
 7624 013e 98F80100 		ldrb	r0, [r8, #1]	@ zero_extendqisi2
 7625 0142 FFF7FEFF 		bl	disk_write
 7626              	.LVL915:
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7627              		.loc 1 4062 10 discriminator 1 view .LVU2535
 7628 0146 20B9     		cbnz	r0, .L598
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7629              		.loc 1 4062 64 is_stmt 1 discriminator 2 view .LVU2536
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7630              		.loc 1 4062 86 discriminator 2 view .LVU2537
4063:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7631              		.loc 1 4063 7 view .LVU2538
4063:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7632              		.loc 1 4063 9 is_stmt 0 view .LVU2539
 7633 0148 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
4063:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7634              		.loc 1 4063 16 view .LVU2540
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 277


 7635 014a 03F07F03 		and	r3, r3, #127
 7636 014e 2375     		strb	r3, [r4, #20]
 7637 0150 E0E7     		b	.L561
 7638              	.L598:
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7639              		.loc 1 4062 64 is_stmt 1 discriminator 1 view .LVU2541
 7640 0152 0126     		movs	r6, #1
 7641              	.LVL916:
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7642              		.loc 1 4062 64 is_stmt 0 discriminator 1 view .LVU2542
 7643 0154 6675     		strb	r6, [r4, #21]
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7644              		.loc 1 4062 64 is_stmt 1 discriminator 1 view .LVU2543
 7645 0156 3146     		mov	r1, r6
 7646 0158 0198     		ldr	r0, [sp, #4]
 7647 015a FFF7FEFF 		bl	unlock_fs
 7648              	.LVL917:
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7649              		.loc 1 4062 64 discriminator 1 view .LVU2544
4062:Middlewares/Third_Party/FatFs/src/ff.c **** 						fp->flag &= (BYTE)~FA_DIRTY;
 7650              		.loc 1 4062 64 is_stmt 0 view .LVU2545
 7651 015e 72E7     		b	.L549
 7652              	.LVL918:
 7653              	.L597:
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7654              		.loc 1 4066 57 is_stmt 1 discriminator 1 view .LVU2546
 7655 0160 0126     		movs	r6, #1
 7656              	.LVL919:
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7657              		.loc 1 4066 57 is_stmt 0 discriminator 1 view .LVU2547
 7658 0162 6675     		strb	r6, [r4, #21]
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7659              		.loc 1 4066 57 is_stmt 1 discriminator 1 view .LVU2548
 7660 0164 3146     		mov	r1, r6
 7661 0166 0198     		ldr	r0, [sp, #4]
 7662 0168 FFF7FEFF 		bl	unlock_fs
 7663              	.LVL920:
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7664              		.loc 1 4066 57 discriminator 1 view .LVU2549
4066:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7665              		.loc 1 4066 57 is_stmt 0 view .LVU2550
 7666 016c 6BE7     		b	.L549
 7667              	.LVL921:
 7668              	.L550:
4080:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
 7669              		.loc 1 4080 3 is_stmt 1 view .LVU2551
4080:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
 7670              		.loc 1 4080 20 is_stmt 0 view .LVU2552
 7671 016e E368     		ldr	r3, [r4, #12]
4080:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
 7672              		.loc 1 4080 6 view .LVU2553
 7673 0170 AB42     		cmp	r3, r5
 7674 0172 04D2     		bcs	.L564
4080:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
 7675              		.loc 1 4080 53 discriminator 1 view .LVU2554
 7676 0174 227D     		ldrb	r2, [r4, #20]	@ zero_extendqisi2
4080:Middlewares/Third_Party/FatFs/src/ff.c **** 			ofs = fp->obj.objsize;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 278


 7677              		.loc 1 4080 29 discriminator 1 view .LVU2555
 7678 0176 12F0020F 		tst	r2, #2
 7679 017a 00D1     		bne	.L564
4081:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7680              		.loc 1 4081 8 view .LVU2556
 7681 017c 1D46     		mov	r5, r3
 7682              	.LVL922:
 7683              	.L564:
4083:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr = nsect = 0;
 7684              		.loc 1 4083 3 is_stmt 1 view .LVU2557
4083:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->fptr = nsect = 0;
 7685              		.loc 1 4083 9 is_stmt 0 view .LVU2558
 7686 017e A369     		ldr	r3, [r4, #24]
 7687              	.LVL923:
4084:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 7688              		.loc 1 4084 3 is_stmt 1 view .LVU2559
4084:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 7689              		.loc 1 4084 12 is_stmt 0 view .LVU2560
 7690 0180 0022     		movs	r2, #0
 7691 0182 A261     		str	r2, [r4, #24]
4085:Middlewares/Third_Party/FatFs/src/ff.c **** 			bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size (byte) */
 7692              		.loc 1 4085 3 is_stmt 1 view .LVU2561
4085:Middlewares/Third_Party/FatFs/src/ff.c **** 			bcs = (DWORD)fs->csize * SS(fs);	/* Cluster size (byte) */
 7693              		.loc 1 4085 6 is_stmt 0 view .LVU2562
 7694 0184 DDB1     		cbz	r5, .L565
4086:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ifptr > 0 &&
 7695              		.loc 1 4086 4 is_stmt 1 view .LVU2563
4086:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ifptr > 0 &&
 7696              		.loc 1 4086 19 is_stmt 0 view .LVU2564
 7697 0186 019A     		ldr	r2, [sp, #4]
 7698 0188 B2F80A80 		ldrh	r8, [r2, #10]
4086:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ifptr > 0 &&
 7699              		.loc 1 4086 8 view .LVU2565
 7700 018c 4FEA4828 		lsl	r8, r8, #9
 7701              	.LVL924:
4087:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 7702              		.loc 1 4087 4 is_stmt 1 view .LVU2566
4087:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 7703              		.loc 1 4087 7 is_stmt 0 view .LVU2567
 7704 0190 73B1     		cbz	r3, .L566
4088:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 7705              		.loc 1 4088 10 view .LVU2568
 7706 0192 6A1E     		subs	r2, r5, #1
4088:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 7707              		.loc 1 4088 15 view .LVU2569
 7708 0194 B2FBF8F2 		udiv	r2, r2, r8
4088:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 7709              		.loc 1 4088 31 view .LVU2570
 7710 0198 013B     		subs	r3, r3, #1
 7711              	.LVL925:
4088:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->fptr = (ifptr - 1) & ~(FSIZE_t)(bcs - 1);	/* start from the current cluster */
 7712              		.loc 1 4088 36 view .LVU2571
 7713 019a B3FBF8F1 		udiv	r1, r3, r8
4087:Middlewares/Third_Party/FatFs/src/ff.c **** 				(ofs - 1) / bcs >= (ifptr - 1) / bcs) {	/* When seek to same or following cluster, */
 7714              		.loc 1 4087 18 discriminator 1 view .LVU2572
 7715 019e 8A42     		cmp	r2, r1
 7716 01a0 06D3     		bcc	.L566
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 279


4089:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
 7717              		.loc 1 4089 5 is_stmt 1 view .LVU2573
4089:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
 7718              		.loc 1 4089 30 is_stmt 0 view .LVU2574
 7719 01a2 C8F10002 		rsb	r2, r8, #0
4089:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
 7720              		.loc 1 4089 28 view .LVU2575
 7721 01a6 1340     		ands	r3, r3, r2
 7722              	.LVL926:
4089:Middlewares/Third_Party/FatFs/src/ff.c **** 				ofs -= fp->fptr;
 7723              		.loc 1 4089 14 view .LVU2576
 7724 01a8 A361     		str	r3, [r4, #24]
4090:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->clust;
 7725              		.loc 1 4090 5 is_stmt 1 view .LVU2577
4090:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = fp->clust;
 7726              		.loc 1 4090 9 is_stmt 0 view .LVU2578
 7727 01aa EF1A     		subs	r7, r5, r3
 7728              	.LVL927:
4091:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* When seek to back cluster, */
 7729              		.loc 1 4091 5 is_stmt 1 view .LVU2579
4091:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* When seek to back cluster, */
 7730              		.loc 1 4091 10 is_stmt 0 view .LVU2580
 7731 01ac E569     		ldr	r5, [r4, #28]
 7732              	.LVL928:
4091:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {									/* When seek to back cluster, */
 7733              		.loc 1 4091 10 view .LVU2581
 7734 01ae 04E0     		b	.L567
 7735              	.LVL929:
 7736              	.L566:
4093:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 7737              		.loc 1 4093 5 is_stmt 1 view .LVU2582
4093:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 7738              		.loc 1 4093 10 is_stmt 0 view .LVU2583
 7739 01b0 A068     		ldr	r0, [r4, #8]
 7740              	.LVL930:
4095:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(&fp->obj, 0);
 7741              		.loc 1 4095 5 is_stmt 1 view .LVU2584
4095:Middlewares/Third_Party/FatFs/src/ff.c **** 					clst = create_chain(&fp->obj, 0);
 7742              		.loc 1 4095 8 is_stmt 0 view .LVU2585
 7743 01b2 30B3     		cbz	r0, .L599
 7744              	.L568:
4102:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7745              		.loc 1 4102 5 is_stmt 1 view .LVU2586
4102:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 7746              		.loc 1 4102 15 is_stmt 0 view .LVU2587
 7747 01b4 E061     		str	r0, [r4, #28]
 7748 01b6 2F46     		mov	r7, r5
 7749 01b8 0546     		mov	r5, r0
 7750              	.LVL931:
 7751              	.L567:
4104:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 7752              		.loc 1 4104 4 is_stmt 1 view .LVU2588
4104:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (ofs > bcs) {						/* Cluster following loop */
 7753              		.loc 1 4104 7 is_stmt 0 view .LVU2589
 7754 01ba 002D     		cmp	r5, #0
 7755 01bc 49D1     		bne	.L571
 7756              	.LVL932:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 280


 7757              	.L565:
4134:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fp->fptr;
 7758              		.loc 1 4134 3 is_stmt 1 view .LVU2590
4134:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fp->fptr;
 7759              		.loc 1 4134 26 is_stmt 0 view .LVU2591
 7760 01be A369     		ldr	r3, [r4, #24]
4134:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fp->fptr;
 7761              		.loc 1 4134 42 view .LVU2592
 7762 01c0 E268     		ldr	r2, [r4, #12]
4134:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.objsize = fp->fptr;
 7763              		.loc 1 4134 6 view .LVU2593
 7764 01c2 9342     		cmp	r3, r2
 7765 01c4 04D9     		bls	.L580
4135:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA_MODIFIED;
 7766              		.loc 1 4135 4 is_stmt 1 view .LVU2594
4135:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->flag |= FA_MODIFIED;
 7767              		.loc 1 4135 20 is_stmt 0 view .LVU2595
 7768 01c6 E360     		str	r3, [r4, #12]
4136:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7769              		.loc 1 4136 4 is_stmt 1 view .LVU2596
4136:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7770              		.loc 1 4136 6 is_stmt 0 view .LVU2597
 7771 01c8 227D     		ldrb	r2, [r4, #20]	@ zero_extendqisi2
4136:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7772              		.loc 1 4136 13 view .LVU2598
 7773 01ca 42F04002 		orr	r2, r2, #64
 7774 01ce 2275     		strb	r2, [r4, #20]
 7775              	.L580:
4138:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7776              		.loc 1 4138 3 is_stmt 1 view .LVU2599
4138:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7777              		.loc 1 4138 16 is_stmt 0 view .LVU2600
 7778 01d0 C3F30803 		ubfx	r3, r3, #0, #9
4138:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7779              		.loc 1 4138 6 view .LVU2601
 7780 01d4 002B     		cmp	r3, #0
 7781 01d6 3FF42DAF 		beq	.L558
4138:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7782              		.loc 1 4138 39 discriminator 1 view .LVU2602
 7783 01da 226A     		ldr	r2, [r4, #32]
4138:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 7784              		.loc 1 4138 25 discriminator 1 view .LVU2603
 7785 01dc AA42     		cmp	r2, r5
 7786 01de 3FF429AF 		beq	.L558
4141:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 7787              		.loc 1 4141 4 is_stmt 1 view .LVU2604
4141:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 7788              		.loc 1 4141 8 is_stmt 0 view .LVU2605
 7789 01e2 94F91430 		ldrsb	r3, [r4, #20]
4141:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) ABORT(fs, FR_DISK_ERR);
 7790              		.loc 1 4141 7 view .LVU2606
 7791 01e6 002B     		cmp	r3, #0
 7792 01e8 6DDB     		blt	.L600
 7793              	.L581:
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7794              		.loc 1 4146 4 is_stmt 1 view .LVU2607
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 281


 7795              		.loc 1 4146 8 is_stmt 0 view .LVU2608
 7796 01ea 0123     		movs	r3, #1
 7797 01ec 2A46     		mov	r2, r5
 7798 01ee 04F13001 		add	r1, r4, #48
 7799 01f2 0198     		ldr	r0, [sp, #4]
 7800 01f4 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 7801 01f6 FFF7FEFF 		bl	disk_read
 7802              	.LVL933:
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7803              		.loc 1 4146 7 discriminator 1 view .LVU2609
 7804 01fa 0028     		cmp	r0, #0
 7805 01fc 77D1     		bne	.L601
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7806              		.loc 1 4146 57 is_stmt 1 discriminator 2 view .LVU2610
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 7807              		.loc 1 4146 79 discriminator 2 view .LVU2611
4148:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7808              		.loc 1 4148 4 view .LVU2612
4148:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 7809              		.loc 1 4148 13 is_stmt 0 view .LVU2613
 7810 01fe 2562     		str	r5, [r4, #32]
 7811 0200 18E7     		b	.L558
 7812              	.LVL934:
 7813              	.L599:
4096:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
 7814              		.loc 1 4096 6 is_stmt 1 view .LVU2614
4096:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
 7815              		.loc 1 4096 13 is_stmt 0 view .LVU2615
 7816 0202 0021     		movs	r1, #0
 7817 0204 2046     		mov	r0, r4
 7818              	.LVL935:
4096:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 1) ABORT(fs, FR_INT_ERR);
 7819              		.loc 1 4096 13 view .LVU2616
 7820 0206 FFF7FEFF 		bl	create_chain
 7821              	.LVL936:
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7822              		.loc 1 4097 6 is_stmt 1 view .LVU2617
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7823              		.loc 1 4097 9 is_stmt 0 view .LVU2618
 7824 020a 0128     		cmp	r0, #1
 7825 020c 04D0     		beq	.L602
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7826              		.loc 1 4097 21 is_stmt 1 discriminator 2 view .LVU2619
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7827              		.loc 1 4097 42 discriminator 2 view .LVU2620
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7828              		.loc 1 4098 6 view .LVU2621
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7829              		.loc 1 4098 9 is_stmt 0 view .LVU2622
 7830 020e B0F1FF3F 		cmp	r0, #-1
 7831 0212 08D0     		beq	.L603
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7832              		.loc 1 4098 30 is_stmt 1 discriminator 2 view .LVU2623
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7833              		.loc 1 4098 52 discriminator 2 view .LVU2624
4099:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7834              		.loc 1 4099 6 view .LVU2625
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 282


4099:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7835              		.loc 1 4099 21 is_stmt 0 view .LVU2626
 7836 0214 A060     		str	r0, [r4, #8]
 7837 0216 CDE7     		b	.L568
 7838              	.L602:
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7839              		.loc 1 4097 21 is_stmt 1 discriminator 1 view .LVU2627
 7840 0218 0226     		movs	r6, #2
 7841              	.LVL937:
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7842              		.loc 1 4097 21 is_stmt 0 discriminator 1 view .LVU2628
 7843 021a 6675     		strb	r6, [r4, #21]
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7844              		.loc 1 4097 21 is_stmt 1 discriminator 1 view .LVU2629
 7845 021c 3146     		mov	r1, r6
 7846 021e 0198     		ldr	r0, [sp, #4]
 7847              	.LVL938:
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7848              		.loc 1 4097 21 is_stmt 0 discriminator 1 view .LVU2630
 7849 0220 FFF7FEFF 		bl	unlock_fs
 7850              	.LVL939:
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7851              		.loc 1 4097 21 is_stmt 1 discriminator 1 view .LVU2631
4097:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst == 0xFFFFFFFF) ABORT(fs, FR_DISK_ERR);
 7852              		.loc 1 4097 21 is_stmt 0 view .LVU2632
 7853 0224 0FE7     		b	.L549
 7854              	.LVL940:
 7855              	.L603:
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7856              		.loc 1 4098 30 is_stmt 1 discriminator 1 view .LVU2633
 7857 0226 0126     		movs	r6, #1
 7858              	.LVL941:
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7859              		.loc 1 4098 30 is_stmt 0 discriminator 1 view .LVU2634
 7860 0228 6675     		strb	r6, [r4, #21]
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7861              		.loc 1 4098 30 is_stmt 1 discriminator 1 view .LVU2635
 7862 022a 3146     		mov	r1, r6
 7863 022c 0198     		ldr	r0, [sp, #4]
 7864              	.LVL942:
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7865              		.loc 1 4098 30 is_stmt 0 discriminator 1 view .LVU2636
 7866 022e FFF7FEFF 		bl	unlock_fs
 7867              	.LVL943:
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7868              		.loc 1 4098 30 is_stmt 1 discriminator 1 view .LVU2637
4098:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->obj.sclust = clst;
 7869              		.loc 1 4098 30 is_stmt 0 view .LVU2638
 7870 0232 08E7     		b	.L549
 7871              	.LVL944:
 7872              	.L572:
4120:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7873              		.loc 1 4120 7 is_stmt 1 view .LVU2639
4120:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 7874              		.loc 1 4120 14 is_stmt 0 view .LVU2640
 7875 0234 2946     		mov	r1, r5
 7876 0236 2046     		mov	r0, r4
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 283


 7877 0238 FFF7FEFF 		bl	get_fat
 7878              	.LVL945:
 7879 023c 0546     		mov	r5, r0
 7880              	.LVL946:
 7881              	.L574:
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 7882              		.loc 1 4122 6 is_stmt 1 view .LVU2641
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 7883              		.loc 1 4122 9 is_stmt 0 view .LVU2642
 7884 023e B5F1FF3F 		cmp	r5, #-1
 7885 0242 29D0     		beq	.L604
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 7886              		.loc 1 4122 30 is_stmt 1 discriminator 2 view .LVU2643
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 7887              		.loc 1 4122 52 discriminator 2 view .LVU2644
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7888              		.loc 1 4123 6 view .LVU2645
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7889              		.loc 1 4123 9 is_stmt 0 view .LVU2646
 7890 0244 012D     		cmp	r5, #1
 7891 0246 2ED9     		bls	.L576
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7892              		.loc 1 4123 33 discriminator 2 view .LVU2647
 7893 0248 019B     		ldr	r3, [sp, #4]
 7894 024a 9B69     		ldr	r3, [r3, #24]
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7895              		.loc 1 4123 20 discriminator 2 view .LVU2648
 7896 024c AB42     		cmp	r3, r5
 7897 024e 2AD9     		bls	.L576
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7898              		.loc 1 4123 45 is_stmt 1 discriminator 4 view .LVU2649
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7899              		.loc 1 4123 66 discriminator 4 view .LVU2650
4124:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7900              		.loc 1 4124 6 view .LVU2651
4124:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7901              		.loc 1 4124 16 is_stmt 0 view .LVU2652
 7902 0250 E561     		str	r5, [r4, #28]
 7903              	.LVL947:
 7904              	.L571:
4105:Middlewares/Third_Party/FatFs/src/ff.c **** 					ofs -= bcs; fp->fptr += bcs;
 7905              		.loc 1 4105 16 is_stmt 1 view .LVU2653
 7906 0252 4745     		cmp	r7, r8
 7907 0254 10D9     		bls	.L573
4106:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 7908              		.loc 1 4106 6 view .LVU2654
4106:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 7909              		.loc 1 4106 10 is_stmt 0 view .LVU2655
 7910 0256 A7EB0807 		sub	r7, r7, r8
 7911              	.LVL948:
4106:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 7912              		.loc 1 4106 18 is_stmt 1 view .LVU2656
4106:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 7913              		.loc 1 4106 20 is_stmt 0 view .LVU2657
 7914 025a A369     		ldr	r3, [r4, #24]
4106:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_READONLY
 7915              		.loc 1 4106 27 view .LVU2658
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 284


 7916 025c 4344     		add	r3, r3, r8
 7917 025e A361     		str	r3, [r4, #24]
4108:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize t
 7918              		.loc 1 4108 6 is_stmt 1 view .LVU2659
4108:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize t
 7919              		.loc 1 4108 12 is_stmt 0 view .LVU2660
 7920 0260 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
4108:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (_FS_EXFAT && fp->fptr > fp->obj.objsize) {	/* No FAT chain object needs correct objsize t
 7921              		.loc 1 4108 9 view .LVU2661
 7922 0262 13F0020F 		tst	r3, #2
 7923 0266 E5D0     		beq	.L572
4109:Middlewares/Third_Party/FatFs/src/ff.c **** 							fp->obj.objsize = fp->fptr;
 7924              		.loc 1 4109 7 is_stmt 1 view .LVU2662
4113:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (clst == 0) {				/* Clip file size in case of disk full */
 7925              		.loc 1 4113 7 view .LVU2663
4113:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (clst == 0) {				/* Clip file size in case of disk full */
 7926              		.loc 1 4113 14 is_stmt 0 view .LVU2664
 7927 0268 2946     		mov	r1, r5
 7928 026a 2046     		mov	r0, r4
 7929 026c FFF7FEFF 		bl	create_chain
 7930              	.LVL949:
4114:Middlewares/Third_Party/FatFs/src/ff.c **** 							ofs = 0; break;
 7931              		.loc 1 4114 7 is_stmt 1 view .LVU2665
4114:Middlewares/Third_Party/FatFs/src/ff.c **** 							ofs = 0; break;
 7932              		.loc 1 4114 10 is_stmt 0 view .LVU2666
 7933 0270 0546     		mov	r5, r0
 7934 0272 0028     		cmp	r0, #0
 7935 0274 E3D1     		bne	.L574
4115:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 7936              		.loc 1 4115 12 view .LVU2667
 7937 0276 0746     		mov	r7, r0
 7938              	.LVL950:
 7939              	.L573:
4126:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ofs % SS(fs)) {
 7940              		.loc 1 4126 5 is_stmt 1 view .LVU2668
4126:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ofs % SS(fs)) {
 7941              		.loc 1 4126 7 is_stmt 0 view .LVU2669
 7942 0278 A369     		ldr	r3, [r4, #24]
4126:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (ofs % SS(fs)) {
 7943              		.loc 1 4126 14 view .LVU2670
 7944 027a 3B44     		add	r3, r3, r7
 7945 027c A361     		str	r3, [r4, #24]
4127:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fs, clst);	/* Current sector */
 7946              		.loc 1 4127 5 is_stmt 1 view .LVU2671
4127:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fs, clst);	/* Current sector */
 7947              		.loc 1 4127 13 is_stmt 0 view .LVU2672
 7948 027e C7F30803 		ubfx	r3, r7, #0, #9
4127:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect = clust2sect(fs, clst);	/* Current sector */
 7949              		.loc 1 4127 8 view .LVU2673
 7950 0282 F3B1     		cbz	r3, .L589
4128:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!nsect) ABORT(fs, FR_INT_ERR);
 7951              		.loc 1 4128 6 is_stmt 1 view .LVU2674
4128:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!nsect) ABORT(fs, FR_INT_ERR);
 7952              		.loc 1 4128 14 is_stmt 0 view .LVU2675
 7953 0284 DDF80480 		ldr	r8, [sp, #4]
 7954              	.LVL951:
4128:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!nsect) ABORT(fs, FR_INT_ERR);
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 285


 7955              		.loc 1 4128 14 view .LVU2676
 7956 0288 2946     		mov	r1, r5
 7957 028a 4046     		mov	r0, r8
 7958 028c FFF7FEFF 		bl	clust2sect
 7959              	.LVL952:
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 7960              		.loc 1 4129 6 is_stmt 1 view .LVU2677
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 7961              		.loc 1 4129 9 is_stmt 0 view .LVU2678
 7962 0290 80B1     		cbz	r0, .L605
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 7963              		.loc 1 4129 18 is_stmt 1 discriminator 2 view .LVU2679
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 7964              		.loc 1 4129 39 discriminator 2 view .LVU2680
4130:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7965              		.loc 1 4130 6 view .LVU2681
4130:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7966              		.loc 1 4130 12 is_stmt 0 view .LVU2682
 7967 0292 00EB5725 		add	r5, r0, r7, lsr #9
 7968              	.LVL953:
4130:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 7969              		.loc 1 4130 12 view .LVU2683
 7970 0296 92E7     		b	.L565
 7971              	.LVL954:
 7972              	.L604:
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 7973              		.loc 1 4122 30 is_stmt 1 discriminator 1 view .LVU2684
 7974 0298 0126     		movs	r6, #1
 7975              	.LVL955:
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 7976              		.loc 1 4122 30 is_stmt 0 discriminator 1 view .LVU2685
 7977 029a 6675     		strb	r6, [r4, #21]
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 7978              		.loc 1 4122 30 is_stmt 1 discriminator 1 view .LVU2686
 7979 029c 3146     		mov	r1, r6
 7980 029e 0198     		ldr	r0, [sp, #4]
 7981              	.LVL956:
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 7982              		.loc 1 4122 30 is_stmt 0 discriminator 1 view .LVU2687
 7983 02a0 FFF7FEFF 		bl	unlock_fs
 7984              	.LVL957:
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 7985              		.loc 1 4122 30 is_stmt 1 discriminator 1 view .LVU2688
4122:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (clst <= 1 || clst >= fs->n_fatent) ABORT(fs, FR_INT_ERR);
 7986              		.loc 1 4122 30 is_stmt 0 view .LVU2689
 7987 02a4 CFE6     		b	.L549
 7988              	.LVL958:
 7989              	.L576:
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7990              		.loc 1 4123 45 is_stmt 1 discriminator 3 view .LVU2690
 7991 02a6 0226     		movs	r6, #2
 7992              	.LVL959:
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7993              		.loc 1 4123 45 is_stmt 0 discriminator 3 view .LVU2691
 7994 02a8 6675     		strb	r6, [r4, #21]
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7995              		.loc 1 4123 45 is_stmt 1 discriminator 3 view .LVU2692
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 286


 7996 02aa 3146     		mov	r1, r6
 7997 02ac 0198     		ldr	r0, [sp, #4]
 7998              	.LVL960:
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 7999              		.loc 1 4123 45 is_stmt 0 discriminator 3 view .LVU2693
 8000 02ae FFF7FEFF 		bl	unlock_fs
 8001              	.LVL961:
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 8002              		.loc 1 4123 45 is_stmt 1 discriminator 1 view .LVU2694
4123:Middlewares/Third_Party/FatFs/src/ff.c **** 					fp->clust = clst;
 8003              		.loc 1 4123 45 is_stmt 0 view .LVU2695
 8004 02b2 C8E6     		b	.L549
 8005              	.LVL962:
 8006              	.L605:
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 8007              		.loc 1 4129 18 is_stmt 1 discriminator 1 view .LVU2696
 8008 02b4 0226     		movs	r6, #2
 8009              	.LVL963:
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 8010              		.loc 1 4129 18 is_stmt 0 discriminator 1 view .LVU2697
 8011 02b6 6675     		strb	r6, [r4, #21]
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 8012              		.loc 1 4129 18 is_stmt 1 discriminator 1 view .LVU2698
 8013 02b8 3146     		mov	r1, r6
 8014 02ba 4046     		mov	r0, r8
 8015              	.LVL964:
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 8016              		.loc 1 4129 18 is_stmt 0 discriminator 1 view .LVU2699
 8017 02bc FFF7FEFF 		bl	unlock_fs
 8018              	.LVL965:
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 8019              		.loc 1 4129 18 is_stmt 1 discriminator 1 view .LVU2700
4129:Middlewares/Third_Party/FatFs/src/ff.c **** 					nsect += (DWORD)(ofs / SS(fs));
 8020              		.loc 1 4129 18 is_stmt 0 view .LVU2701
 8021 02c0 C1E6     		b	.L549
 8022              	.LVL966:
 8023              	.L589:
4084:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 8024              		.loc 1 4084 20 view .LVU2702
 8025 02c2 1D46     		mov	r5, r3
 8026              	.LVL967:
4084:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (ofs) {
 8027              		.loc 1 4084 20 view .LVU2703
 8028 02c4 7BE7     		b	.L565
 8029              	.LVL968:
 8030              	.L600:
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8031              		.loc 1 4142 5 is_stmt 1 view .LVU2704
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8032              		.loc 1 4142 9 is_stmt 0 view .LVU2705
 8033 02c6 0123     		movs	r3, #1
 8034 02c8 04F13001 		add	r1, r4, #48
 8035 02cc 0198     		ldr	r0, [sp, #4]
 8036 02ce 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 8037 02d0 FFF7FEFF 		bl	disk_write
 8038              	.LVL969:
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 287


 8039              		.loc 1 4142 8 discriminator 1 view .LVU2706
 8040 02d4 20B9     		cbnz	r0, .L606
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8041              		.loc 1 4142 62 is_stmt 1 discriminator 2 view .LVU2707
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8042              		.loc 1 4142 84 discriminator 2 view .LVU2708
4143:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8043              		.loc 1 4143 5 view .LVU2709
4143:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8044              		.loc 1 4143 7 is_stmt 0 view .LVU2710
 8045 02d6 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
4143:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8046              		.loc 1 4143 14 view .LVU2711
 8047 02d8 03F07F03 		and	r3, r3, #127
 8048 02dc 2375     		strb	r3, [r4, #20]
 8049 02de 84E7     		b	.L581
 8050              	.L606:
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8051              		.loc 1 4142 62 is_stmt 1 discriminator 1 view .LVU2712
 8052 02e0 0126     		movs	r6, #1
 8053              	.LVL970:
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8054              		.loc 1 4142 62 is_stmt 0 discriminator 1 view .LVU2713
 8055 02e2 6675     		strb	r6, [r4, #21]
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8056              		.loc 1 4142 62 is_stmt 1 discriminator 1 view .LVU2714
 8057 02e4 3146     		mov	r1, r6
 8058 02e6 0198     		ldr	r0, [sp, #4]
 8059 02e8 FFF7FEFF 		bl	unlock_fs
 8060              	.LVL971:
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8061              		.loc 1 4142 62 discriminator 1 view .LVU2715
4142:Middlewares/Third_Party/FatFs/src/ff.c **** 				fp->flag &= (BYTE)~FA_DIRTY;
 8062              		.loc 1 4142 62 is_stmt 0 view .LVU2716
 8063 02ec ABE6     		b	.L549
 8064              	.LVL972:
 8065              	.L601:
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8066              		.loc 1 4146 57 is_stmt 1 discriminator 1 view .LVU2717
 8067 02ee 0126     		movs	r6, #1
 8068              	.LVL973:
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8069              		.loc 1 4146 57 is_stmt 0 discriminator 1 view .LVU2718
 8070 02f0 6675     		strb	r6, [r4, #21]
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8071              		.loc 1 4146 57 is_stmt 1 discriminator 1 view .LVU2719
 8072 02f2 3146     		mov	r1, r6
 8073 02f4 0198     		ldr	r0, [sp, #4]
 8074 02f6 FFF7FEFF 		bl	unlock_fs
 8075              	.LVL974:
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8076              		.loc 1 4146 57 discriminator 1 view .LVU2720
4146:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8077              		.loc 1 4146 57 is_stmt 0 view .LVU2721
 8078 02fa A4E6     		b	.L549
 8079              	.LVL975:
 8080              	.L586:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 288


4048:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8081              		.loc 1 4048 9 view .LVU2722
 8082 02fc 1126     		movs	r6, #17
 8083              	.LVL976:
4048:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8084              		.loc 1 4048 9 view .LVU2723
 8085 02fe 99E6     		b	.L558
 8086              		.cfi_endproc
 8087              	.LFE384:
 8089              		.section	.text.f_opendir,"ax",%progbits
 8090              		.align	1
 8091              		.global	f_opendir
 8092              		.syntax unified
 8093              		.thumb
 8094              		.thumb_func
 8096              	f_opendir:
 8097              	.LVL977:
 8098              	.LFB385:
4166:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8099              		.loc 1 4166 1 is_stmt 1 view -0
 8100              		.cfi_startproc
 8101              		@ args = 0, pretend = 0, frame = 16
 8102              		@ frame_needed = 0, uses_anonymous_args = 0
4166:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8103              		.loc 1 4166 1 is_stmt 0 view .LVU2725
 8104 0000 30B5     		push	{r4, r5, lr}
 8105              	.LCFI79:
 8106              		.cfi_def_cfa_offset 12
 8107              		.cfi_offset 4, -12
 8108              		.cfi_offset 5, -8
 8109              		.cfi_offset 14, -4
 8110 0002 85B0     		sub	sp, sp, #20
 8111              	.LCFI80:
 8112              		.cfi_def_cfa_offset 32
 8113 0004 0191     		str	r1, [sp, #4]
4167:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 8114              		.loc 1 4167 2 is_stmt 1 view .LVU2726
4168:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID *obj;
 8115              		.loc 1 4168 2 view .LVU2727
4169:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
 8116              		.loc 1 4169 2 view .LVU2728
4173:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8117              		.loc 1 4173 2 view .LVU2729
4173:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8118              		.loc 1 4173 5 is_stmt 0 view .LVU2730
 8119 0006 0028     		cmp	r0, #0
 8120 0008 43D0     		beq	.L615
 8121 000a 0546     		mov	r5, r0
4176:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path, &fs, 0);
 8122              		.loc 1 4176 2 is_stmt 1 view .LVU2731
 8123              	.LVL978:
4177:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8124              		.loc 1 4177 2 view .LVU2732
4177:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8125              		.loc 1 4177 8 is_stmt 0 view .LVU2733
 8126 000c 0022     		movs	r2, #0
 8127 000e 03A9     		add	r1, sp, #12
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 289


 8128              	.LVL979:
4177:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8129              		.loc 1 4177 8 view .LVU2734
 8130 0010 01A8     		add	r0, sp, #4
 8131              	.LVL980:
4177:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8132              		.loc 1 4177 8 view .LVU2735
 8133 0012 FFF7FEFF 		bl	find_volume
 8134              	.LVL981:
4178:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->fs = fs;
 8135              		.loc 1 4178 2 is_stmt 1 view .LVU2736
4178:Middlewares/Third_Party/FatFs/src/ff.c **** 		obj->fs = fs;
 8136              		.loc 1 4178 5 is_stmt 0 view .LVU2737
 8137 0016 0446     		mov	r4, r0
 8138 0018 40B1     		cbz	r0, .L620
 8139              	.LVL982:
 8140              	.L609:
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8141              		.loc 1 4220 20 is_stmt 1 discriminator 1 view .LVU2738
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8142              		.loc 1 4220 28 is_stmt 0 discriminator 1 view .LVU2739
 8143 001a 0023     		movs	r3, #0
 8144 001c 2B60     		str	r3, [r5]
 8145              	.L614:
4222:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8146              		.loc 1 4222 2 is_stmt 1 view .LVU2740
 8147 001e 2146     		mov	r1, r4
 8148 0020 0398     		ldr	r0, [sp, #12]
 8149 0022 FFF7FEFF 		bl	unlock_fs
 8150              	.LVL983:
4222:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8151              		.loc 1 4222 2 discriminator 1 view .LVU2741
 8152              	.L608:
4222:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8153              		.loc 1 4222 19 discriminator 1 view .LVU2742
4223:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8154              		.loc 1 4223 1 is_stmt 0 view .LVU2743
 8155 0026 2046     		mov	r0, r4
 8156 0028 05B0     		add	sp, sp, #20
 8157              	.LCFI81:
 8158              		.cfi_remember_state
 8159              		.cfi_def_cfa_offset 12
 8160              		@ sp needed
 8161 002a 30BD     		pop	{r4, r5, pc}
 8162              	.LVL984:
 8163              	.L620:
 8164              	.LCFI82:
 8165              		.cfi_restore_state
4179:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 8166              		.loc 1 4179 3 is_stmt 1 view .LVU2744
4179:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 8167              		.loc 1 4179 11 is_stmt 0 view .LVU2745
 8168 002c 039B     		ldr	r3, [sp, #12]
 8169 002e 2B60     		str	r3, [r5]
4180:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(dp, path);			/* Follow the path to the directory */
 8170              		.loc 1 4180 18 is_stmt 1 view .LVU2746
4181:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 290


 8171              		.loc 1 4181 3 view .LVU2747
4181:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
 8172              		.loc 1 4181 9 is_stmt 0 view .LVU2748
 8173 0030 0199     		ldr	r1, [sp, #4]
 8174 0032 2846     		mov	r0, r5
 8175              	.LVL985:
4181:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {						/* Follow completed */
 8176              		.loc 1 4181 9 view .LVU2749
 8177 0034 FFF7FEFF 		bl	follow_path
 8178              	.LVL986:
4182:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(dp->fn[NSFLAG] & NS_NONAME)) {	/* It is not the origin directory itself */
 8179              		.loc 1 4182 3 is_stmt 1 view .LVU2750
4182:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(dp->fn[NSFLAG] & NS_NONAME)) {	/* It is not the origin directory itself */
 8180              		.loc 1 4182 6 is_stmt 0 view .LVU2751
 8181 0038 0446     		mov	r4, r0
 8182 003a 18BB     		cbnz	r0, .L610
4183:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->attr & AM_DIR) {		/* This object is a sub-directory */
 8183              		.loc 1 4183 4 is_stmt 1 view .LVU2752
4183:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->attr & AM_DIR) {		/* This object is a sub-directory */
 8184              		.loc 1 4183 8 is_stmt 0 view .LVU2753
 8185 003c 95F92F30 		ldrsb	r3, [r5, #47]
4183:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (obj->attr & AM_DIR) {		/* This object is a sub-directory */
 8186              		.loc 1 4183 7 view .LVU2754
 8187 0040 002B     		cmp	r3, #0
 8188 0042 08DB     		blt	.L611
4184:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 8189              		.loc 1 4184 5 is_stmt 1 view .LVU2755
4184:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 8190              		.loc 1 4184 12 is_stmt 0 view .LVU2756
 8191 0044 AB79     		ldrb	r3, [r5, #6]	@ zero_extendqisi2
4184:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 8192              		.loc 1 4184 8 view .LVU2757
 8193 0046 13F0100F 		tst	r3, #16
 8194 004a 1AD0     		beq	.L616
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 8195              		.loc 1 4196 7 is_stmt 1 view .LVU2758
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 8196              		.loc 1 4196 21 is_stmt 0 view .LVU2759
 8197 004c 296A     		ldr	r1, [r5, #32]
 8198 004e 0398     		ldr	r0, [sp, #12]
 8199              	.LVL987:
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 8200              		.loc 1 4196 21 view .LVU2760
 8201 0050 FFF7FEFF 		bl	ld_clust
 8202              	.LVL988:
4196:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 8203              		.loc 1 4196 19 discriminator 1 view .LVU2761
 8204 0054 A860     		str	r0, [r5, #8]
 8205              	.L611:
4202:Middlewares/Third_Party/FatFs/src/ff.c **** 				obj->id = fs->id;
 8206              		.loc 1 4202 4 is_stmt 1 view .LVU2762
4203:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 8207              		.loc 1 4203 5 view .LVU2763
4203:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 8208              		.loc 1 4203 17 is_stmt 0 view .LVU2764
 8209 0056 039B     		ldr	r3, [sp, #12]
 8210 0058 DB88     		ldrh	r3, [r3, #6]
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 291


4203:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_sdi(dp, 0);			/* Rewind directory */
 8211              		.loc 1 4203 13 view .LVU2765
 8212 005a AB80     		strh	r3, [r5, #4]	@ movhi
4204:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 8213              		.loc 1 4204 5 is_stmt 1 view .LVU2766
4204:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 8214              		.loc 1 4204 11 is_stmt 0 view .LVU2767
 8215 005c 0021     		movs	r1, #0
 8216 005e 2846     		mov	r0, r5
 8217 0060 FFF7FEFF 		bl	dir_sdi
 8218              	.LVL989:
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (obj->sclust) {
 8219              		.loc 1 4206 5 is_stmt 1 view .LVU2768
4206:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (obj->sclust) {
 8220              		.loc 1 4206 8 is_stmt 0 view .LVU2769
 8221 0064 0446     		mov	r4, r0
 8222 0066 68B9     		cbnz	r0, .L610
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
 8223              		.loc 1 4207 6 is_stmt 1 view .LVU2770
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
 8224              		.loc 1 4207 13 is_stmt 0 view .LVU2771
 8225 0068 AB68     		ldr	r3, [r5, #8]
4207:Middlewares/Third_Party/FatFs/src/ff.c **** 						obj->lockid = inc_lock(dp, 0);	/* Lock the sub directory */
 8226              		.loc 1 4207 9 view .LVU2772
 8227 006a 13B9     		cbnz	r3, .L621
4211:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 8228              		.loc 1 4211 7 is_stmt 1 view .LVU2773
4211:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 8229              		.loc 1 4211 19 is_stmt 0 view .LVU2774
 8230 006c 0023     		movs	r3, #0
 8231 006e 2B61     		str	r3, [r5, #16]
 8232 0070 08E0     		b	.L610
 8233              	.L621:
4208:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!obj->lockid) res = FR_TOO_MANY_OPEN_FILES;
 8234              		.loc 1 4208 7 is_stmt 1 view .LVU2775
4208:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!obj->lockid) res = FR_TOO_MANY_OPEN_FILES;
 8235              		.loc 1 4208 21 is_stmt 0 view .LVU2776
 8236 0072 0021     		movs	r1, #0
 8237 0074 2846     		mov	r0, r5
 8238              	.LVL990:
4208:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!obj->lockid) res = FR_TOO_MANY_OPEN_FILES;
 8239              		.loc 1 4208 21 view .LVU2777
 8240 0076 FFF7FEFF 		bl	inc_lock
 8241              	.LVL991:
4208:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (!obj->lockid) res = FR_TOO_MANY_OPEN_FILES;
 8242              		.loc 1 4208 19 discriminator 1 view .LVU2778
 8243 007a 2861     		str	r0, [r5, #16]
4209:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 8244              		.loc 1 4209 7 is_stmt 1 view .LVU2779
4209:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 8245              		.loc 1 4209 10 is_stmt 0 view .LVU2780
 8246 007c 10B9     		cbnz	r0, .L610
 8247              	.LVL992:
4209:Middlewares/Third_Party/FatFs/src/ff.c **** 					} else {
 8248              		.loc 1 4209 29 discriminator 1 view .LVU2781
 8249 007e 1224     		movs	r4, #18
 8250 0080 02E0     		b	.L613
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 292


 8251              	.LVL993:
 8252              	.L616:
4199:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8253              		.loc 1 4199 10 view .LVU2782
 8254 0082 0524     		movs	r4, #5
 8255              	.LVL994:
 8256              	.L610:
4217:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_NO_FILE) res = FR_NO_PATH;
 8257              		.loc 1 4217 16 is_stmt 1 view .LVU2783
4218:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8258              		.loc 1 4218 3 view .LVU2784
4218:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8259              		.loc 1 4218 6 is_stmt 0 view .LVU2785
 8260 0084 042C     		cmp	r4, #4
 8261 0086 02D0     		beq	.L622
 8262              	.LVL995:
 8263              	.L613:
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8264              		.loc 1 4220 2 is_stmt 1 view .LVU2786
4220:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8265              		.loc 1 4220 5 is_stmt 0 view .LVU2787
 8266 0088 002C     		cmp	r4, #0
 8267 008a C8D0     		beq	.L614
 8268 008c C5E7     		b	.L609
 8269              	.L622:
 8270              	.LVL996:
4218:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8271              		.loc 1 4218 30 discriminator 1 view .LVU2788
 8272 008e 0524     		movs	r4, #5
 8273 0090 C3E7     		b	.L609
 8274              	.LVL997:
 8275              	.L615:
4173:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8276              		.loc 1 4173 18 discriminator 1 view .LVU2789
 8277 0092 0924     		movs	r4, #9
 8278 0094 C7E7     		b	.L608
 8279              		.cfi_endproc
 8280              	.LFE385:
 8282              		.section	.text.f_closedir,"ax",%progbits
 8283              		.align	1
 8284              		.global	f_closedir
 8285              		.syntax unified
 8286              		.thumb
 8287              		.thumb_func
 8289              	f_closedir:
 8290              	.LVL998:
 8291              	.LFB386:
4235:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8292              		.loc 1 4235 1 is_stmt 1 view -0
 8293              		.cfi_startproc
 8294              		@ args = 0, pretend = 0, frame = 8
 8295              		@ frame_needed = 0, uses_anonymous_args = 0
4235:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8296              		.loc 1 4235 1 is_stmt 0 view .LVU2791
 8297 0000 30B5     		push	{r4, r5, lr}
 8298              	.LCFI83:
 8299              		.cfi_def_cfa_offset 12
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 293


 8300              		.cfi_offset 4, -12
 8301              		.cfi_offset 5, -8
 8302              		.cfi_offset 14, -4
 8303 0002 83B0     		sub	sp, sp, #12
 8304              	.LCFI84:
 8305              		.cfi_def_cfa_offset 24
 8306 0004 0446     		mov	r4, r0
4236:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 8307              		.loc 1 4236 2 is_stmt 1 view .LVU2792
4237:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8308              		.loc 1 4237 2 view .LVU2793
4240:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8309              		.loc 1 4240 2 view .LVU2794
4240:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8310              		.loc 1 4240 8 is_stmt 0 view .LVU2795
 8311 0006 01A9     		add	r1, sp, #4
 8312 0008 FFF7FEFF 		bl	validate
 8313              	.LVL999:
4241:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 8314              		.loc 1 4241 2 is_stmt 1 view .LVU2796
4241:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 8315              		.loc 1 4241 5 is_stmt 0 view .LVU2797
 8316 000c 0546     		mov	r5, r0
 8317 000e 40B9     		cbnz	r0, .L624
4243:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(dp->obj.lockid);
 8318              		.loc 1 4243 3 is_stmt 1 view .LVU2798
4243:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(dp->obj.lockid);
 8319              		.loc 1 4243 14 is_stmt 0 view .LVU2799
 8320 0010 2069     		ldr	r0, [r4, #16]
 8321              	.LVL1000:
4243:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dec_lock(dp->obj.lockid);
 8322              		.loc 1 4243 6 view .LVU2800
 8323 0012 48B9     		cbnz	r0, .L628
 8324              	.LVL1001:
 8325              	.L625:
4246:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8326              		.loc 1 4246 3 is_stmt 1 view .LVU2801
4246:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8327              		.loc 1 4246 6 is_stmt 0 view .LVU2802
 8328 0014 0DB9     		cbnz	r5, .L626
4249:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8329              		.loc 1 4249 4 is_stmt 1 view .LVU2803
4249:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8330              		.loc 1 4249 15 is_stmt 0 view .LVU2804
 8331 0016 0023     		movs	r3, #0
 8332 0018 2360     		str	r3, [r4]
 8333              	.L626:
4252:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 8334              		.loc 1 4252 3 is_stmt 1 view .LVU2805
 8335 001a 0021     		movs	r1, #0
 8336 001c 0198     		ldr	r0, [sp, #4]
 8337 001e FFF7FEFF 		bl	unlock_fs
 8338              	.LVL1002:
 8339              	.L624:
4255:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8340              		.loc 1 4255 2 view .LVU2806
4256:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 294


 8341              		.loc 1 4256 1 is_stmt 0 view .LVU2807
 8342 0022 2846     		mov	r0, r5
 8343 0024 03B0     		add	sp, sp, #12
 8344              	.LCFI85:
 8345              		.cfi_remember_state
 8346              		.cfi_def_cfa_offset 12
 8347              		@ sp needed
 8348 0026 30BD     		pop	{r4, r5, pc}
 8349              	.LVL1003:
 8350              	.L628:
 8351              	.LCFI86:
 8352              		.cfi_restore_state
4244:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8353              		.loc 1 4244 4 is_stmt 1 view .LVU2808
4244:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8354              		.loc 1 4244 10 is_stmt 0 view .LVU2809
 8355 0028 FFF7FEFF 		bl	dec_lock
 8356              	.LVL1004:
 8357 002c 0546     		mov	r5, r0
 8358              	.LVL1005:
4244:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8359              		.loc 1 4244 10 view .LVU2810
 8360 002e F1E7     		b	.L625
 8361              		.cfi_endproc
 8362              	.LFE386:
 8364              		.section	.text.f_readdir,"ax",%progbits
 8365              		.align	1
 8366              		.global	f_readdir
 8367              		.syntax unified
 8368              		.thumb
 8369              		.thumb_func
 8371              	f_readdir:
 8372              	.LVL1006:
 8373              	.LFB387:
4269:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8374              		.loc 1 4269 1 is_stmt 1 view -0
 8375              		.cfi_startproc
 8376              		@ args = 0, pretend = 0, frame = 8
 8377              		@ frame_needed = 0, uses_anonymous_args = 0
4269:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8378              		.loc 1 4269 1 is_stmt 0 view .LVU2812
 8379 0000 70B5     		push	{r4, r5, r6, lr}
 8380              	.LCFI87:
 8381              		.cfi_def_cfa_offset 16
 8382              		.cfi_offset 4, -16
 8383              		.cfi_offset 5, -12
 8384              		.cfi_offset 6, -8
 8385              		.cfi_offset 14, -4
 8386 0002 82B0     		sub	sp, sp, #8
 8387              	.LCFI88:
 8388              		.cfi_def_cfa_offset 24
 8389 0004 0446     		mov	r4, r0
 8390 0006 0E46     		mov	r6, r1
4270:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 8391              		.loc 1 4270 2 is_stmt 1 view .LVU2813
4271:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
 8392              		.loc 1 4271 2 view .LVU2814
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 295


4275:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8393              		.loc 1 4275 2 view .LVU2815
4275:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8394              		.loc 1 4275 8 is_stmt 0 view .LVU2816
 8395 0008 01A9     		add	r1, sp, #4
 8396              	.LVL1007:
4275:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8397              		.loc 1 4275 8 view .LVU2817
 8398 000a FFF7FEFF 		bl	validate
 8399              	.LVL1008:
4276:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!fno) {
 8400              		.loc 1 4276 2 is_stmt 1 view .LVU2818
4276:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!fno) {
 8401              		.loc 1 4276 5 is_stmt 0 view .LVU2819
 8402 000e 0546     		mov	r5, r0
 8403 0010 C0B9     		cbnz	r0, .L630
4277:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
 8404              		.loc 1 4277 3 is_stmt 1 view .LVU2820
4277:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_sdi(dp, 0);			/* Rewind the directory object */
 8405              		.loc 1 4277 6 is_stmt 0 view .LVU2821
 8406 0012 96B1     		cbz	r6, .L635
4280:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = dir_read(dp, 0);			/* Read an item */
 8407              		.loc 1 4280 19 is_stmt 1 view .LVU2822
4281:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 8408              		.loc 1 4281 4 view .LVU2823
4281:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 8409              		.loc 1 4281 10 is_stmt 0 view .LVU2824
 8410 0014 0021     		movs	r1, #0
 8411 0016 2046     		mov	r0, r4
 8412              	.LVL1009:
4281:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory */
 8413              		.loc 1 4281 10 view .LVU2825
 8414 0018 FFF7FEFF 		bl	dir_read
 8415              	.LVL1010:
4282:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
 8416              		.loc 1 4282 4 is_stmt 1 view .LVU2826
4282:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {				/* A valid entry is found */
 8417              		.loc 1 4282 7 is_stmt 0 view .LVU2827
 8418 001c 0428     		cmp	r0, #4
 8419 001e 00D0     		beq	.L632
4283:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 8420              		.loc 1 4283 4 is_stmt 1 view .LVU2828
4283:Middlewares/Third_Party/FatFs/src/ff.c **** 				get_fileinfo(dp, fno);		/* Get the object information */
 8421              		.loc 1 4283 7 is_stmt 0 view .LVU2829
 8422 0020 B8B9     		cbnz	r0, .L633
 8423              	.L632:
 8424              	.LVL1011:
4284:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_next(dp, 0);		/* Increment index for next */
 8425              		.loc 1 4284 5 is_stmt 1 view .LVU2830
 8426 0022 3146     		mov	r1, r6
 8427 0024 2046     		mov	r0, r4
 8428 0026 FFF7FEFF 		bl	get_fileinfo
 8429              	.LVL1012:
4285:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
 8430              		.loc 1 4285 5 view .LVU2831
4285:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
 8431              		.loc 1 4285 11 is_stmt 0 view .LVU2832
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 296


 8432 002a 0021     		movs	r1, #0
 8433 002c 2046     		mov	r0, r4
 8434 002e FFF7FEFF 		bl	dir_next
 8435              	.LVL1013:
4286:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8436              		.loc 1 4286 5 is_stmt 1 view .LVU2833
4286:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8437              		.loc 1 4286 8 is_stmt 0 view .LVU2834
 8438 0032 0428     		cmp	r0, #4
 8439 0034 06D0     		beq	.L630
4285:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_NO_FILE) res = FR_OK;	/* Ignore end of directory now */
 8440              		.loc 1 4285 11 view .LVU2835
 8441 0036 0546     		mov	r5, r0
 8442 0038 04E0     		b	.L630
 8443              	.L635:
4278:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 8444              		.loc 1 4278 4 is_stmt 1 view .LVU2836
4278:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 8445              		.loc 1 4278 10 is_stmt 0 view .LVU2837
 8446 003a 0021     		movs	r1, #0
 8447 003c 2046     		mov	r0, r4
 8448              	.LVL1014:
4278:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 8449              		.loc 1 4278 10 view .LVU2838
 8450 003e FFF7FEFF 		bl	dir_sdi
 8451              	.LVL1015:
 8452 0042 0546     		mov	r5, r0
 8453              	.LVL1016:
 8454              	.L630:
4288:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8455              		.loc 1 4288 17 is_stmt 1 view .LVU2839
4291:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8456              		.loc 1 4291 2 view .LVU2840
 8457 0044 2946     		mov	r1, r5
 8458 0046 0198     		ldr	r0, [sp, #4]
 8459 0048 FFF7FEFF 		bl	unlock_fs
 8460              	.LVL1017:
4291:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8461              		.loc 1 4291 2 discriminator 1 view .LVU2841
4291:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8462              		.loc 1 4291 19 discriminator 1 view .LVU2842
4292:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8463              		.loc 1 4292 1 is_stmt 0 view .LVU2843
 8464 004c 2846     		mov	r0, r5
 8465 004e 02B0     		add	sp, sp, #8
 8466              	.LCFI89:
 8467              		.cfi_remember_state
 8468              		.cfi_def_cfa_offset 16
 8469              		@ sp needed
 8470 0050 70BD     		pop	{r4, r5, r6, pc}
 8471              	.LVL1018:
 8472              	.L633:
 8473              	.LCFI90:
 8474              		.cfi_restore_state
4292:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8475              		.loc 1 4292 1 view .LVU2844
 8476 0052 0546     		mov	r5, r0
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 297


 8477 0054 F6E7     		b	.L630
 8478              		.cfi_endproc
 8479              	.LFE387:
 8481              		.section	.text.f_stat,"ax",%progbits
 8482              		.align	1
 8483              		.global	f_stat
 8484              		.syntax unified
 8485              		.thumb
 8486              		.thumb_func
 8488              	f_stat:
 8489              	.LVL1019:
 8490              	.LFB388:
4357:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8491              		.loc 1 4357 1 is_stmt 1 view -0
 8492              		.cfi_startproc
 8493              		@ args = 0, pretend = 0, frame = 56
 8494              		@ frame_needed = 0, uses_anonymous_args = 0
4357:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8495              		.loc 1 4357 1 is_stmt 0 view .LVU2846
 8496 0000 30B5     		push	{r4, r5, lr}
 8497              	.LCFI91:
 8498              		.cfi_def_cfa_offset 12
 8499              		.cfi_offset 4, -12
 8500              		.cfi_offset 5, -8
 8501              		.cfi_offset 14, -4
 8502 0002 8FB0     		sub	sp, sp, #60
 8503              	.LCFI92:
 8504              		.cfi_def_cfa_offset 72
 8505 0004 0190     		str	r0, [sp, #4]
 8506 0006 0D46     		mov	r5, r1
4358:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
 8507              		.loc 1 4358 2 is_stmt 1 view .LVU2847
4359:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
 8508              		.loc 1 4359 2 view .LVU2848
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8509              		.loc 1 4364 2 view .LVU2849
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8510              		.loc 1 4364 8 is_stmt 0 view .LVU2850
 8511 0008 0022     		movs	r2, #0
 8512 000a 02A9     		add	r1, sp, #8
 8513              	.LVL1020:
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8514              		.loc 1 4364 8 view .LVU2851
 8515 000c 01A8     		add	r0, sp, #4
 8516              	.LVL1021:
4364:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8517              		.loc 1 4364 8 view .LVU2852
 8518 000e FFF7FEFF 		bl	find_volume
 8519              	.LVL1022:
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(dj.obj.fs);
 8520              		.loc 1 4365 2 is_stmt 1 view .LVU2853
4365:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(dj.obj.fs);
 8521              		.loc 1 4365 5 is_stmt 0 view .LVU2854
 8522 0012 0446     		mov	r4, r0
 8523 0014 30B1     		cbz	r0, .L640
 8524              	.LVL1023:
 8525              	.L637:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 298


4375:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8526              		.loc 1 4375 16 is_stmt 1 view .LVU2855
4378:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8527              		.loc 1 4378 2 view .LVU2856
 8528 0016 2146     		mov	r1, r4
 8529 0018 0298     		ldr	r0, [sp, #8]
 8530 001a FFF7FEFF 		bl	unlock_fs
 8531              	.LVL1024:
4378:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8532              		.loc 1 4378 2 discriminator 1 view .LVU2857
4378:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8533              		.loc 1 4378 26 discriminator 1 view .LVU2858
4379:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8534              		.loc 1 4379 1 is_stmt 0 view .LVU2859
 8535 001e 2046     		mov	r0, r4
 8536 0020 0FB0     		add	sp, sp, #60
 8537              	.LCFI93:
 8538              		.cfi_remember_state
 8539              		.cfi_def_cfa_offset 12
 8540              		@ sp needed
 8541 0022 30BD     		pop	{r4, r5, pc}
 8542              	.LVL1025:
 8543              	.L640:
 8544              	.LCFI94:
 8545              		.cfi_restore_state
4366:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);	/* Follow the file path */
 8546              		.loc 1 4366 25 is_stmt 1 view .LVU2860
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 8547              		.loc 1 4367 3 view .LVU2861
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 8548              		.loc 1 4367 9 is_stmt 0 view .LVU2862
 8549 0024 0199     		ldr	r1, [sp, #4]
 8550 0026 02A8     		add	r0, sp, #8
 8551              	.LVL1026:
4367:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) {				/* Follow completed */
 8552              		.loc 1 4367 9 view .LVU2863
 8553 0028 FFF7FEFF 		bl	follow_path
 8554              	.LVL1027:
4368:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* It is origin directory */
 8555              		.loc 1 4368 3 is_stmt 1 view .LVU2864
4368:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {	/* It is origin directory */
 8556              		.loc 1 4368 6 is_stmt 0 view .LVU2865
 8557 002c 0446     		mov	r4, r0
 8558 002e 0028     		cmp	r0, #0
 8559 0030 F1D1     		bne	.L637
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 8560              		.loc 1 4369 4 is_stmt 1 view .LVU2866
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 8561              		.loc 1 4369 8 is_stmt 0 view .LVU2867
 8562 0032 9DF93730 		ldrsb	r3, [sp, #55]
4369:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;
 8563              		.loc 1 4369 7 view .LVU2868
 8564 0036 002B     		cmp	r3, #0
 8565 0038 06DB     		blt	.L638
4372:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8566              		.loc 1 4372 5 is_stmt 1 view .LVU2869
4372:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 299


 8567              		.loc 1 4372 8 is_stmt 0 view .LVU2870
 8568 003a 002D     		cmp	r5, #0
 8569 003c EBD0     		beq	.L637
4372:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8570              		.loc 1 4372 14 is_stmt 1 discriminator 1 view .LVU2871
 8571 003e 2946     		mov	r1, r5
 8572 0040 02A8     		add	r0, sp, #8
 8573              	.LVL1028:
4372:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 8574              		.loc 1 4372 14 is_stmt 0 discriminator 1 view .LVU2872
 8575 0042 FFF7FEFF 		bl	get_fileinfo
 8576              	.LVL1029:
 8577 0046 E6E7     		b	.L637
 8578              	.LVL1030:
 8579              	.L638:
4370:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {							/* Found an object */
 8580              		.loc 1 4370 9 view .LVU2873
 8581 0048 0624     		movs	r4, #6
 8582 004a E4E7     		b	.L637
 8583              		.cfi_endproc
 8584              	.LFE388:
 8586              		.section	.text.f_getfree,"ax",%progbits
 8587              		.align	1
 8588              		.global	f_getfree
 8589              		.syntax unified
 8590              		.thumb
 8591              		.thumb_func
 8593              	f_getfree:
 8594              	.LVL1031:
 8595              	.LFB389:
4393:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8596              		.loc 1 4393 1 is_stmt 1 view -0
 8597              		.cfi_startproc
 8598              		@ args = 0, pretend = 0, frame = 32
 8599              		@ frame_needed = 0, uses_anonymous_args = 0
4393:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8600              		.loc 1 4393 1 is_stmt 0 view .LVU2875
 8601 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 8602              	.LCFI95:
 8603              		.cfi_def_cfa_offset 32
 8604              		.cfi_offset 4, -32
 8605              		.cfi_offset 5, -28
 8606              		.cfi_offset 6, -24
 8607              		.cfi_offset 7, -20
 8608              		.cfi_offset 8, -16
 8609              		.cfi_offset 9, -12
 8610              		.cfi_offset 10, -8
 8611              		.cfi_offset 14, -4
 8612 0004 88B0     		sub	sp, sp, #32
 8613              	.LCFI96:
 8614              		.cfi_def_cfa_offset 64
 8615 0006 0190     		str	r0, [sp, #4]
 8616 0008 8946     		mov	r9, r1
 8617 000a 1446     		mov	r4, r2
4394:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 8618              		.loc 1 4394 2 is_stmt 1 view .LVU2876
4395:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD nfree, clst, sect, stat;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 300


 8619              		.loc 1 4395 2 view .LVU2877
4396:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 8620              		.loc 1 4396 2 view .LVU2878
4397:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *p;
 8621              		.loc 1 4397 2 view .LVU2879
4398:Middlewares/Third_Party/FatFs/src/ff.c **** 	_FDID obj;
 8622              		.loc 1 4398 2 view .LVU2880
4399:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8623              		.loc 1 4399 2 view .LVU2881
4403:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8624              		.loc 1 4403 2 view .LVU2882
4403:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8625              		.loc 1 4403 8 is_stmt 0 view .LVU2883
 8626 000c 0022     		movs	r2, #0
 8627              	.LVL1032:
4403:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8628              		.loc 1 4403 8 view .LVU2884
 8629 000e 07A9     		add	r1, sp, #28
 8630              	.LVL1033:
4403:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8631              		.loc 1 4403 8 view .LVU2885
 8632 0010 01A8     		add	r0, sp, #4
 8633              	.LVL1034:
4403:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 8634              		.loc 1 4403 8 view .LVU2886
 8635 0012 FFF7FEFF 		bl	find_volume
 8636              	.LVL1035:
4404:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fatfs = fs;				/* Return ptr to the fs object */
 8637              		.loc 1 4404 2 is_stmt 1 view .LVU2887
4404:Middlewares/Third_Party/FatFs/src/ff.c **** 		*fatfs = fs;				/* Return ptr to the fs object */
 8638              		.loc 1 4404 5 is_stmt 0 view .LVU2888
 8639 0016 0746     		mov	r7, r0
 8640 0018 0028     		cmp	r0, #0
 8641 001a 5ED1     		bne	.L642
4405:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* If free_clst is valid, return it without full cluster scan */
 8642              		.loc 1 4405 3 is_stmt 1 view .LVU2889
4405:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* If free_clst is valid, return it without full cluster scan */
 8643              		.loc 1 4405 10 is_stmt 0 view .LVU2890
 8644 001c 079B     		ldr	r3, [sp, #28]
 8645 001e 2360     		str	r3, [r4]
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clst;
 8646              		.loc 1 4407 3 is_stmt 1 view .LVU2891
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clst;
 8647              		.loc 1 4407 9 is_stmt 0 view .LVU2892
 8648 0020 5A69     		ldr	r2, [r3, #20]
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clst;
 8649              		.loc 1 4407 26 view .LVU2893
 8650 0022 9D69     		ldr	r5, [r3, #24]
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clst;
 8651              		.loc 1 4407 37 view .LVU2894
 8652 0024 A91E     		subs	r1, r5, #2
4407:Middlewares/Third_Party/FatFs/src/ff.c **** 			*nclst = fs->free_clst;
 8653              		.loc 1 4407 6 view .LVU2895
 8654 0026 8A42     		cmp	r2, r1
 8655 0028 02D8     		bhi	.L643
4408:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 8656              		.loc 1 4408 4 is_stmt 1 view .LVU2896
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 301


4408:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 8657              		.loc 1 4408 11 is_stmt 0 view .LVU2897
 8658 002a C9F80020 		str	r2, [r9]
 8659 002e 54E0     		b	.L642
 8660              	.L643:
4411:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Sector unalighed FAT entries */
 8661              		.loc 1 4411 4 is_stmt 1 view .LVU2898
 8662              	.LVL1036:
4412:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = 2; obj.fs = fs;
 8663              		.loc 1 4412 4 view .LVU2899
4412:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = 2; obj.fs = fs;
 8664              		.loc 1 4412 10 is_stmt 0 view .LVU2900
 8665 0030 1E78     		ldrb	r6, [r3]	@ zero_extendqisi2
4412:Middlewares/Third_Party/FatFs/src/ff.c **** 				clst = 2; obj.fs = fs;
 8666              		.loc 1 4412 7 view .LVU2901
 8667 0032 012E     		cmp	r6, #1
 8668 0034 05D0     		beq	.L657
4440:Middlewares/Third_Party/FatFs/src/ff.c **** 					i = 0; p = 0;
 8669              		.loc 1 4440 6 is_stmt 1 view .LVU2902
 8670              	.LVL1037:
4440:Middlewares/Third_Party/FatFs/src/ff.c **** 					i = 0; p = 0;
 8671              		.loc 1 4440 27 view .LVU2903
4440:Middlewares/Third_Party/FatFs/src/ff.c **** 					i = 0; p = 0;
 8672              		.loc 1 4440 32 is_stmt 0 view .LVU2904
 8673 0036 D3F824A0 		ldr	r10, [r3, #36]
 8674              	.LVL1038:
4441:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 8675              		.loc 1 4441 6 is_stmt 1 view .LVU2905
4441:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 8676              		.loc 1 4441 13 view .LVU2906
4441:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 8677              		.loc 1 4441 15 is_stmt 0 view .LVU2907
 8678 003a 0024     		movs	r4, #0
 8679              	.LVL1039:
4441:Middlewares/Third_Party/FatFs/src/ff.c **** 					do {
 8680              		.loc 1 4441 8 view .LVU2908
 8681 003c 2646     		mov	r6, r4
4411:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Sector unalighed FAT entries */
 8682              		.loc 1 4411 10 view .LVU2909
 8683 003e A046     		mov	r8, r4
 8684 0040 32E0     		b	.L653
 8685              	.LVL1040:
 8686              	.L657:
4413:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 8687              		.loc 1 4413 5 is_stmt 1 view .LVU2910
4413:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 8688              		.loc 1 4413 15 view .LVU2911
4413:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 8689              		.loc 1 4413 22 is_stmt 0 view .LVU2912
 8690 0042 0293     		str	r3, [sp, #8]
4413:Middlewares/Third_Party/FatFs/src/ff.c **** 				do {
 8691              		.loc 1 4413 10 view .LVU2913
 8692 0044 0224     		movs	r4, #2
 8693              	.LVL1041:
4411:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fs->fs_type == FS_FAT12) {	/* FAT12: Sector unalighed FAT entries */
 8694              		.loc 1 4411 10 view .LVU2914
 8695 0046 4FF00008 		mov	r8, #0
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 302


 8696 004a 04E0     		b	.L647
 8697              	.LVL1042:
 8698              	.L646:
4419:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 8699              		.loc 1 4419 21 is_stmt 1 view .LVU2915
 8700 004c 0134     		adds	r4, r4, #1
 8701              	.LVL1043:
4419:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 8702              		.loc 1 4419 25 is_stmt 0 view .LVU2916
 8703 004e 079B     		ldr	r3, [sp, #28]
 8704 0050 9B69     		ldr	r3, [r3, #24]
4419:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 8705              		.loc 1 4419 21 view .LVU2917
 8706 0052 A342     		cmp	r3, r4
 8707 0054 38D9     		bls	.L645
 8708              	.LVL1044:
 8709              	.L647:
4414:Middlewares/Third_Party/FatFs/src/ff.c **** 					stat = get_fat(&obj, clst);
 8710              		.loc 1 4414 5 is_stmt 1 view .LVU2918
4415:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
 8711              		.loc 1 4415 6 view .LVU2919
4415:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0xFFFFFFFF) { res = FR_DISK_ERR; break; }
 8712              		.loc 1 4415 13 is_stmt 0 view .LVU2920
 8713 0056 2146     		mov	r1, r4
 8714 0058 02A8     		add	r0, sp, #8
 8715 005a FFF7FEFF 		bl	get_fat
 8716              	.LVL1045:
4416:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 8717              		.loc 1 4416 6 is_stmt 1 view .LVU2921
4416:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 8718              		.loc 1 4416 9 is_stmt 0 view .LVU2922
 8719 005e B0F1FF3F 		cmp	r0, #-1
 8720 0062 30D0     		beq	.L654
4417:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) nfree++;
 8721              		.loc 1 4417 6 is_stmt 1 view .LVU2923
4417:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) nfree++;
 8722              		.loc 1 4417 9 is_stmt 0 view .LVU2924
 8723 0064 0128     		cmp	r0, #1
 8724 0066 40D0     		beq	.L655
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 8725              		.loc 1 4418 6 is_stmt 1 view .LVU2925
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 8726              		.loc 1 4418 9 is_stmt 0 view .LVU2926
 8727 0068 0028     		cmp	r0, #0
 8728 006a EFD1     		bne	.L646
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 8729              		.loc 1 4418 21 is_stmt 1 discriminator 1 view .LVU2927
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 8730              		.loc 1 4418 26 is_stmt 0 discriminator 1 view .LVU2928
 8731 006c 08F10108 		add	r8, r8, #1
 8732              	.LVL1046:
4418:Middlewares/Third_Party/FatFs/src/ff.c **** 				} while (++clst < fs->n_fatent);
 8733              		.loc 1 4418 26 discriminator 1 view .LVU2929
 8734 0070 ECE7     		b	.L646
 8735              	.LVL1047:
 8736              	.L658:
4444:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res != FR_OK) break;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 303


 8737              		.loc 1 4444 8 is_stmt 1 view .LVU2930
4444:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res != FR_OK) break;
 8738              		.loc 1 4444 14 is_stmt 0 view .LVU2931
 8739 0072 0AF10106 		add	r6, r10, #1
 8740              	.LVL1048:
4444:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res != FR_OK) break;
 8741              		.loc 1 4444 14 view .LVU2932
 8742 0076 5146     		mov	r1, r10
 8743 0078 0798     		ldr	r0, [sp, #28]
 8744 007a FFF7FEFF 		bl	move_window
 8745              	.LVL1049:
4445:Middlewares/Third_Party/FatFs/src/ff.c **** 							p = fs->win;
 8746              		.loc 1 4445 8 is_stmt 1 view .LVU2933
4445:Middlewares/Third_Party/FatFs/src/ff.c **** 							p = fs->win;
 8747              		.loc 1 4445 11 is_stmt 0 view .LVU2934
 8748 007e 0746     		mov	r7, r0
 8749 0080 10BB     		cbnz	r0, .L645
4446:Middlewares/Third_Party/FatFs/src/ff.c **** 							i = SS(fs);
 8750              		.loc 1 4446 8 is_stmt 1 view .LVU2935
4446:Middlewares/Third_Party/FatFs/src/ff.c **** 							i = SS(fs);
 8751              		.loc 1 4446 14 is_stmt 0 view .LVU2936
 8752 0082 079C     		ldr	r4, [sp, #28]
 8753              	.LVL1050:
4446:Middlewares/Third_Party/FatFs/src/ff.c **** 							i = SS(fs);
 8754              		.loc 1 4446 10 view .LVU2937
 8755 0084 3434     		adds	r4, r4, #52
 8756              	.LVL1051:
4447:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8757              		.loc 1 4447 8 is_stmt 1 view .LVU2938
4444:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res != FR_OK) break;
 8758              		.loc 1 4444 14 is_stmt 0 view .LVU2939
 8759 0086 B246     		mov	r10, r6
4447:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8760              		.loc 1 4447 10 view .LVU2940
 8761 0088 4FF40076 		mov	r6, #512
 8762              	.LVL1052:
4447:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8763              		.loc 1 4447 10 view .LVU2941
 8764 008c 0EE0     		b	.L648
 8765              	.LVL1053:
 8766              	.L659:
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
 8767              		.loc 1 4450 8 is_stmt 1 view .LVU2942
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
 8768              		.loc 1 4450 12 is_stmt 0 view .LVU2943
 8769 008e 2046     		mov	r0, r4
 8770 0090 FFF7FEFF 		bl	ld_word
 8771              	.LVL1054:
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
 8772              		.loc 1 4450 11 discriminator 1 view .LVU2944
 8773 0094 08B9     		cbnz	r0, .L650
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
 8774              		.loc 1 4450 29 is_stmt 1 discriminator 1 view .LVU2945
4450:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 2; i -= 2;
 8775              		.loc 1 4450 34 is_stmt 0 discriminator 1 view .LVU2946
 8776 0096 08F10108 		add	r8, r8, #1
 8777              	.LVL1055:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 304


 8778              	.L650:
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
 8779              		.loc 1 4451 8 is_stmt 1 view .LVU2947
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
 8780              		.loc 1 4451 10 is_stmt 0 view .LVU2948
 8781 009a 0234     		adds	r4, r4, #2
 8782              	.LVL1056:
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
 8783              		.loc 1 4451 16 is_stmt 1 view .LVU2949
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
 8784              		.loc 1 4451 18 is_stmt 0 view .LVU2950
 8785 009c 023E     		subs	r6, r6, #2
 8786              	.LVL1057:
4451:Middlewares/Third_Party/FatFs/src/ff.c **** 						} else {
 8787              		.loc 1 4451 18 view .LVU2951
 8788 009e 01E0     		b	.L651
 8789              	.L652:
4454:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8790              		.loc 1 4454 8 is_stmt 1 view .LVU2952
4454:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8791              		.loc 1 4454 10 is_stmt 0 view .LVU2953
 8792 00a0 0434     		adds	r4, r4, #4
 8793              	.LVL1058:
4454:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8794              		.loc 1 4454 16 is_stmt 1 view .LVU2954
4454:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 8795              		.loc 1 4454 18 is_stmt 0 view .LVU2955
 8796 00a2 043E     		subs	r6, r6, #4
 8797              	.LVL1059:
 8798              	.L651:
4456:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8799              		.loc 1 4456 15 is_stmt 1 view .LVU2956
4456:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8800              		.loc 1 4456 15 is_stmt 0 view .LVU2957
 8801 00a4 013D     		subs	r5, r5, #1
 8802              	.LVL1060:
4456:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 8803              		.loc 1 4456 15 view .LVU2958
 8804 00a6 0FD0     		beq	.L645
 8805              	.LVL1061:
 8806              	.L653:
4442:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (i == 0) {
 8807              		.loc 1 4442 6 is_stmt 1 view .LVU2959
4443:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, sect++);
 8808              		.loc 1 4443 7 view .LVU2960
4443:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = move_window(fs, sect++);
 8809              		.loc 1 4443 10 is_stmt 0 view .LVU2961
 8810 00a8 002E     		cmp	r6, #0
 8811 00aa E2D0     		beq	.L658
 8812              	.LVL1062:
 8813              	.L648:
4449:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (ld_word(p) == 0) nfree++;
 8814              		.loc 1 4449 7 is_stmt 1 view .LVU2962
4449:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (ld_word(p) == 0) nfree++;
 8815              		.loc 1 4449 13 is_stmt 0 view .LVU2963
 8816 00ac 079B     		ldr	r3, [sp, #28]
 8817 00ae 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 305


4449:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (ld_word(p) == 0) nfree++;
 8818              		.loc 1 4449 10 view .LVU2964
 8819 00b0 022B     		cmp	r3, #2
 8820 00b2 ECD0     		beq	.L659
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
 8821              		.loc 1 4453 8 is_stmt 1 view .LVU2965
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
 8822              		.loc 1 4453 13 is_stmt 0 view .LVU2966
 8823 00b4 2046     		mov	r0, r4
 8824 00b6 FFF7FEFF 		bl	ld_dword
 8825              	.LVL1063:
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
 8826              		.loc 1 4453 11 discriminator 1 view .LVU2967
 8827 00ba 30F07043 		bics	r3, r0, #-268435456
 8828 00be EFD1     		bne	.L652
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
 8829              		.loc 1 4453 45 is_stmt 1 discriminator 1 view .LVU2968
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
 8830              		.loc 1 4453 50 is_stmt 0 discriminator 1 view .LVU2969
 8831 00c0 08F10108 		add	r8, r8, #1
 8832              	.LVL1064:
4453:Middlewares/Third_Party/FatFs/src/ff.c **** 							p += 4; i -= 4;
 8833              		.loc 1 4453 50 discriminator 1 view .LVU2970
 8834 00c4 ECE7     		b	.L652
 8835              	.LVL1065:
 8836              	.L654:
4416:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 1) { res = FR_INT_ERR; break; }
 8837              		.loc 1 4416 36 discriminator 1 view .LVU2971
 8838 00c6 3746     		mov	r7, r6
 8839              	.LVL1066:
 8840              	.L645:
4459:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst = nfree;	/* Now free_clst is valid */
 8841              		.loc 1 4459 4 is_stmt 1 view .LVU2972
4459:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->free_clst = nfree;	/* Now free_clst is valid */
 8842              		.loc 1 4459 11 is_stmt 0 view .LVU2973
 8843 00c8 C9F80080 		str	r8, [r9]
4460:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;		/* FSInfo is to be updated */
 8844              		.loc 1 4460 4 is_stmt 1 view .LVU2974
4460:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;		/* FSInfo is to be updated */
 8845              		.loc 1 4460 6 is_stmt 0 view .LVU2975
 8846 00cc 079B     		ldr	r3, [sp, #28]
4460:Middlewares/Third_Party/FatFs/src/ff.c **** 			fs->fsi_flag |= 1;		/* FSInfo is to be updated */
 8847              		.loc 1 4460 18 view .LVU2976
 8848 00ce C3F81480 		str	r8, [r3, #20]
4461:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8849              		.loc 1 4461 4 is_stmt 1 view .LVU2977
4461:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8850              		.loc 1 4461 6 is_stmt 0 view .LVU2978
 8851 00d2 1A79     		ldrb	r2, [r3, #4]	@ zero_extendqisi2
4461:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 8852              		.loc 1 4461 17 view .LVU2979
 8853 00d4 42F00102 		orr	r2, r2, #1
 8854 00d8 1A71     		strb	r2, [r3, #4]
 8855              	.LVL1067:
 8856              	.L642:
4465:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8857              		.loc 1 4465 2 is_stmt 1 view .LVU2980
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 306


 8858 00da 3946     		mov	r1, r7
 8859 00dc 0798     		ldr	r0, [sp, #28]
 8860 00de FFF7FEFF 		bl	unlock_fs
 8861              	.LVL1068:
4465:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8862              		.loc 1 4465 2 discriminator 1 view .LVU2981
4465:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8863              		.loc 1 4465 19 discriminator 1 view .LVU2982
4466:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8864              		.loc 1 4466 1 is_stmt 0 view .LVU2983
 8865 00e2 3846     		mov	r0, r7
 8866 00e4 08B0     		add	sp, sp, #32
 8867              	.LCFI97:
 8868              		.cfi_remember_state
 8869              		.cfi_def_cfa_offset 32
 8870              		@ sp needed
 8871 00e6 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 8872              	.LVL1069:
 8873              	.L655:
 8874              	.LCFI98:
 8875              		.cfi_restore_state
4417:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) nfree++;
 8876              		.loc 1 4417 27 discriminator 1 view .LVU2984
 8877 00ea 0227     		movs	r7, #2
 8878              	.LVL1070:
4417:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (stat == 0) nfree++;
 8879              		.loc 1 4417 27 discriminator 1 view .LVU2985
 8880 00ec ECE7     		b	.L645
 8881              		.cfi_endproc
 8882              	.LFE389:
 8884              		.section	.text.f_truncate,"ax",%progbits
 8885              		.align	1
 8886              		.global	f_truncate
 8887              		.syntax unified
 8888              		.thumb
 8889              		.thumb_func
 8891              	f_truncate:
 8892              	.LVL1071:
 8893              	.LFB390:
4478:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8894              		.loc 1 4478 1 is_stmt 1 view -0
 8895              		.cfi_startproc
 8896              		@ args = 0, pretend = 0, frame = 8
 8897              		@ frame_needed = 0, uses_anonymous_args = 0
4478:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 8898              		.loc 1 4478 1 is_stmt 0 view .LVU2987
 8899 0000 30B5     		push	{r4, r5, lr}
 8900              	.LCFI99:
 8901              		.cfi_def_cfa_offset 12
 8902              		.cfi_offset 4, -12
 8903              		.cfi_offset 5, -8
 8904              		.cfi_offset 14, -4
 8905 0002 83B0     		sub	sp, sp, #12
 8906              	.LCFI100:
 8907              		.cfi_def_cfa_offset 24
 8908 0004 0446     		mov	r4, r0
4479:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 307


 8909              		.loc 1 4479 2 is_stmt 1 view .LVU2988
4480:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD ncl;
 8910              		.loc 1 4480 2 view .LVU2989
4481:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8911              		.loc 1 4481 2 view .LVU2990
4484:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
 8912              		.loc 1 4484 2 view .LVU2991
4484:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res != FR_OK || (res = (FRESULT)fp->err) != FR_OK) LEAVE_FF(fs, res);
 8913              		.loc 1 4484 8 is_stmt 0 view .LVU2992
 8914 0006 01A9     		add	r1, sp, #4
 8915 0008 FFF7FEFF 		bl	validate
 8916              	.LVL1072:
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8917              		.loc 1 4485 2 is_stmt 1 view .LVU2993
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8918              		.loc 1 4485 5 is_stmt 0 view .LVU2994
 8919 000c 0546     		mov	r5, r0
 8920 000e 10BB     		cbnz	r0, .L661
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8921              		.loc 1 4485 27 discriminator 2 view .LVU2995
 8922 0010 657D     		ldrb	r5, [r4, #21]	@ zero_extendqisi2
 8923              	.LVL1073:
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8924              		.loc 1 4485 19 discriminator 2 view .LVU2996
 8925 0012 05BB     		cbnz	r5, .L661
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8926              		.loc 1 4485 74 is_stmt 1 discriminator 4 view .LVU2997
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8927              		.loc 1 4486 2 view .LVU2998
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8928              		.loc 1 4486 10 is_stmt 0 view .LVU2999
 8929 0014 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8930              		.loc 1 4486 5 view .LVU3000
 8931 0016 13F0020F 		tst	r3, #2
 8932 001a 23D0     		beq	.L674
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8933              		.loc 1 4486 53 is_stmt 1 discriminator 2 view .LVU3001
4488:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 8934              		.loc 1 4488 2 view .LVU3002
4488:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 8935              		.loc 1 4488 8 is_stmt 0 view .LVU3003
 8936 001c A369     		ldr	r3, [r4, #24]
4488:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 8937              		.loc 1 4488 24 view .LVU3004
 8938 001e E268     		ldr	r2, [r4, #12]
4488:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fp->fptr == 0) {	/* When set file size to zero, remove entire cluster chain */
 8939              		.loc 1 4488 5 view .LVU3005
 8940 0020 9342     		cmp	r3, r2
 8941 0022 13D2     		bcs	.L665
4489:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = remove_chain(&fp->obj, fp->obj.sclust, 0);
 8942              		.loc 1 4489 3 is_stmt 1 view .LVU3006
4489:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = remove_chain(&fp->obj, fp->obj.sclust, 0);
 8943              		.loc 1 4489 6 is_stmt 0 view .LVU3007
 8944 0024 23BB     		cbnz	r3, .L666
4490:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.sclust = 0;
 8945              		.loc 1 4490 4 is_stmt 1 view .LVU3008
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 308


4490:Middlewares/Third_Party/FatFs/src/ff.c **** 			fp->obj.sclust = 0;
 8946              		.loc 1 4490 10 is_stmt 0 view .LVU3009
 8947 0026 0022     		movs	r2, #0
 8948 0028 A168     		ldr	r1, [r4, #8]
 8949 002a 2046     		mov	r0, r4
 8950 002c FFF7FEFF 		bl	remove_chain
 8951              	.LVL1074:
 8952 0030 0546     		mov	r5, r0
 8953              	.LVL1075:
4491:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* When truncate a part of the file, remove remaining clusters */
 8954              		.loc 1 4491 4 is_stmt 1 view .LVU3010
4491:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {				/* When truncate a part of the file, remove remaining clusters */
 8955              		.loc 1 4491 19 is_stmt 0 view .LVU3011
 8956 0032 0023     		movs	r3, #0
 8957 0034 A360     		str	r3, [r4, #8]
 8958              	.LVL1076:
 8959              	.L667:
4501:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_MODIFIED;
 8960              		.loc 1 4501 3 is_stmt 1 view .LVU3012
4501:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_MODIFIED;
 8961              		.loc 1 4501 23 is_stmt 0 view .LVU3013
 8962 0036 A369     		ldr	r3, [r4, #24]
4501:Middlewares/Third_Party/FatFs/src/ff.c **** 		fp->flag |= FA_MODIFIED;
 8963              		.loc 1 4501 19 view .LVU3014
 8964 0038 E360     		str	r3, [r4, #12]
4502:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 8965              		.loc 1 4502 3 is_stmt 1 view .LVU3015
4502:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 8966              		.loc 1 4502 5 is_stmt 0 view .LVU3016
 8967 003a 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
4502:Middlewares/Third_Party/FatFs/src/ff.c **** #if !_FS_TINY
 8968              		.loc 1 4502 12 view .LVU3017
 8969 003c 43F04003 		orr	r3, r3, #64
 8970 0040 2375     		strb	r3, [r4, #20]
4504:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) {
 8971              		.loc 1 4504 3 is_stmt 1 view .LVU3018
4504:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) {
 8972              		.loc 1 4504 6 is_stmt 0 view .LVU3019
 8973 0042 002D     		cmp	r5, #0
 8974 0044 3DD1     		bne	.L669
4504:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(fs->drv, fp->buf, fp->sect, 1) != RES_OK) {
 8975              		.loc 1 4504 20 discriminator 1 view .LVU3020
 8976 0046 13F0800F 		tst	r3, #128
 8977 004a 2BD1     		bne	.L675
 8978              	.L665:
4512:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8979              		.loc 1 4512 21 is_stmt 1 discriminator 2 view .LVU3021
4512:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 8980              		.loc 1 4512 35 discriminator 2 view .LVU3022
4515:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8981              		.loc 1 4515 2 view .LVU3023
 8982 004c 2946     		mov	r1, r5
 8983 004e 0198     		ldr	r0, [sp, #4]
 8984 0050 FFF7FEFF 		bl	unlock_fs
 8985              	.LVL1077:
4515:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8986              		.loc 1 4515 2 discriminator 1 view .LVU3024
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 309


4515:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8987              		.loc 1 4515 2 is_stmt 0 view .LVU3025
 8988 0054 03E0     		b	.L663
 8989              	.LVL1078:
 8990              	.L661:
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8991              		.loc 1 4485 57 is_stmt 1 discriminator 3 view .LVU3026
 8992 0056 2946     		mov	r1, r5
 8993 0058 0198     		ldr	r0, [sp, #4]
 8994 005a FFF7FEFF 		bl	unlock_fs
 8995              	.LVL1079:
4485:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!(fp->flag & FA_WRITE)) LEAVE_FF(fs, FR_DENIED);	/* Check access mode */
 8996              		.loc 1 4485 57 discriminator 1 view .LVU3027
 8997              	.L663:
4515:Middlewares/Third_Party/FatFs/src/ff.c **** }
 8998              		.loc 1 4515 19 discriminator 1 view .LVU3028
4516:Middlewares/Third_Party/FatFs/src/ff.c **** 
 8999              		.loc 1 4516 1 is_stmt 0 view .LVU3029
 9000 005e 2846     		mov	r0, r5
 9001 0060 03B0     		add	sp, sp, #12
 9002              	.LCFI101:
 9003              		.cfi_remember_state
 9004              		.cfi_def_cfa_offset 12
 9005              		@ sp needed
 9006 0062 30BD     		pop	{r4, r5, pc}
 9007              	.LVL1080:
 9008              	.L674:
 9009              	.LCFI102:
 9010              		.cfi_restore_state
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9011              		.loc 1 4486 30 is_stmt 1 discriminator 1 view .LVU3030
 9012 0064 0721     		movs	r1, #7
 9013 0066 0198     		ldr	r0, [sp, #4]
 9014 0068 FFF7FEFF 		bl	unlock_fs
 9015              	.LVL1081:
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9016              		.loc 1 4486 30 discriminator 1 view .LVU3031
 9017 006c 0725     		movs	r5, #7
 9018              	.LVL1082:
4486:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9019              		.loc 1 4486 30 is_stmt 0 view .LVU3032
 9020 006e F6E7     		b	.L663
 9021              	.LVL1083:
 9022              	.L666:
4493:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 9023              		.loc 1 4493 4 is_stmt 1 view .LVU3033
4493:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 9024              		.loc 1 4493 10 is_stmt 0 view .LVU3034
 9025 0070 E169     		ldr	r1, [r4, #28]
 9026 0072 2046     		mov	r0, r4
 9027 0074 FFF7FEFF 		bl	get_fat
 9028              	.LVL1084:
4494:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 0xFFFFFFFF) res = FR_DISK_ERR;
 9029              		.loc 1 4494 4 is_stmt 1 view .LVU3035
4495:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
 9030              		.loc 1 4495 4 view .LVU3036
4495:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 310


 9031              		.loc 1 4495 7 is_stmt 0 view .LVU3037
 9032 0078 B0F1FF3F 		cmp	r0, #-1
 9033 007c 0ED0     		beq	.L670
4496:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
 9034              		.loc 1 4496 4 is_stmt 1 view .LVU3038
4496:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
 9035              		.loc 1 4496 7 is_stmt 0 view .LVU3039
 9036 007e 0128     		cmp	r0, #1
 9037 0080 0ED0     		beq	.L676
 9038              	.L668:
 9039              	.LVL1085:
4497:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 9040              		.loc 1 4497 4 is_stmt 1 view .LVU3040
4497:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 9041              		.loc 1 4497 7 is_stmt 0 view .LVU3041
 9042 0082 002D     		cmp	r5, #0
 9043 0084 D7D1     		bne	.L667
4497:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 9044              		.loc 1 4497 32 discriminator 1 view .LVU3042
 9045 0086 019B     		ldr	r3, [sp, #4]
 9046 0088 9B69     		ldr	r3, [r3, #24]
4497:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = remove_chain(&fp->obj, ncl, fp->clust);
 9047              		.loc 1 4497 21 discriminator 1 view .LVU3043
 9048 008a 8342     		cmp	r3, r0
 9049 008c D3D9     		bls	.L667
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9050              		.loc 1 4498 5 is_stmt 1 view .LVU3044
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9051              		.loc 1 4498 11 is_stmt 0 view .LVU3045
 9052 008e E269     		ldr	r2, [r4, #28]
 9053 0090 0146     		mov	r1, r0
 9054 0092 2046     		mov	r0, r4
 9055              	.LVL1086:
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9056              		.loc 1 4498 11 view .LVU3046
 9057 0094 FFF7FEFF 		bl	remove_chain
 9058              	.LVL1087:
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9059              		.loc 1 4498 11 view .LVU3047
 9060 0098 0546     		mov	r5, r0
 9061              	.LVL1088:
4498:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9062              		.loc 1 4498 11 view .LVU3048
 9063 009a CCE7     		b	.L667
 9064              	.LVL1089:
 9065              	.L670:
4495:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (ncl == 1) res = FR_INT_ERR;
 9066              		.loc 1 4495 31 discriminator 1 view .LVU3049
 9067 009c 0125     		movs	r5, #1
 9068 009e F0E7     		b	.L668
 9069              	.L676:
4496:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK && ncl < fs->n_fatent) {
 9070              		.loc 1 4496 22 discriminator 1 view .LVU3050
 9071 00a0 0225     		movs	r5, #2
 9072 00a2 C8E7     		b	.L667
 9073              	.LVL1090:
 9074              	.L675:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 311


4505:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 9075              		.loc 1 4505 4 is_stmt 1 view .LVU3051
4505:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 9076              		.loc 1 4505 8 is_stmt 0 view .LVU3052
 9077 00a4 0123     		movs	r3, #1
 9078 00a6 226A     		ldr	r2, [r4, #32]
 9079 00a8 04F13001 		add	r1, r4, #48
 9080 00ac 0198     		ldr	r0, [sp, #4]
 9081 00ae 4078     		ldrb	r0, [r0, #1]	@ zero_extendqisi2
 9082 00b0 FFF7FEFF 		bl	disk_write
 9083              	.LVL1091:
4505:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_DISK_ERR;
 9084              		.loc 1 4505 7 discriminator 1 view .LVU3053
 9085 00b4 20B9     		cbnz	r0, .L672
4508:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9086              		.loc 1 4508 5 is_stmt 1 view .LVU3054
4508:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9087              		.loc 1 4508 7 is_stmt 0 view .LVU3055
 9088 00b6 237D     		ldrb	r3, [r4, #20]	@ zero_extendqisi2
4508:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9089              		.loc 1 4508 14 view .LVU3056
 9090 00b8 03F07F03 		and	r3, r3, #127
 9091 00bc 2375     		strb	r3, [r4, #20]
 9092 00be C5E7     		b	.L665
 9093              	.L672:
4506:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 9094              		.loc 1 4506 9 view .LVU3057
 9095 00c0 0125     		movs	r5, #1
 9096              	.LVL1092:
 9097              	.L669:
4512:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9098              		.loc 1 4512 21 is_stmt 1 discriminator 1 view .LVU3058
 9099 00c2 6575     		strb	r5, [r4, #21]
4512:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9100              		.loc 1 4512 21 discriminator 1 view .LVU3059
 9101 00c4 2946     		mov	r1, r5
 9102 00c6 0198     		ldr	r0, [sp, #4]
 9103 00c8 FFF7FEFF 		bl	unlock_fs
 9104              	.LVL1093:
4512:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9105              		.loc 1 4512 21 discriminator 1 view .LVU3060
4512:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9106              		.loc 1 4512 21 is_stmt 0 view .LVU3061
 9107 00cc C7E7     		b	.L663
 9108              		.cfi_endproc
 9109              	.LFE390:
 9111              		.section	.text.f_unlink,"ax",%progbits
 9112              		.align	1
 9113              		.global	f_unlink
 9114              		.syntax unified
 9115              		.thumb
 9116              		.thumb_func
 9118              	f_unlink:
 9119              	.LVL1094:
 9120              	.LFB391:
4528:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 9121              		.loc 1 4528 1 is_stmt 1 view -0
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 312


 9122              		.cfi_startproc
 9123              		@ args = 0, pretend = 0, frame = 112
 9124              		@ frame_needed = 0, uses_anonymous_args = 0
4528:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 9125              		.loc 1 4528 1 is_stmt 0 view .LVU3063
 9126 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 9127              	.LCFI103:
 9128              		.cfi_def_cfa_offset 20
 9129              		.cfi_offset 4, -20
 9130              		.cfi_offset 5, -16
 9131              		.cfi_offset 6, -12
 9132              		.cfi_offset 7, -8
 9133              		.cfi_offset 14, -4
 9134 0002 9DB0     		sub	sp, sp, #116
 9135              	.LCFI104:
 9136              		.cfi_def_cfa_offset 136
 9137 0004 0190     		str	r0, [sp, #4]
4529:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj, sdj;
 9138              		.loc 1 4529 2 is_stmt 1 view .LVU3064
4530:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dclst = 0;
 9139              		.loc 1 4530 2 view .LVU3065
4531:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 9140              		.loc 1 4531 2 view .LVU3066
 9141              	.LVL1095:
4532:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9142              		.loc 1 4532 2 view .LVU3067
4540:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
 9143              		.loc 1 4540 2 view .LVU3068
4540:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
 9144              		.loc 1 4540 8 is_stmt 0 view .LVU3069
 9145 0006 0222     		movs	r2, #2
 9146 0008 03A9     		add	r1, sp, #12
 9147 000a 01A8     		add	r0, sp, #4
 9148              	.LVL1096:
4540:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
 9149              		.loc 1 4540 8 view .LVU3070
 9150 000c FFF7FEFF 		bl	find_volume
 9151              	.LVL1097:
4541:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 9152              		.loc 1 4541 2 is_stmt 1 view .LVU3071
4541:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 9153              		.loc 1 4541 12 is_stmt 0 view .LVU3072
 9154 0010 039B     		ldr	r3, [sp, #12]
 9155 0012 1093     		str	r3, [sp, #64]
4542:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 9156              		.loc 1 4542 2 is_stmt 1 view .LVU3073
4542:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 9157              		.loc 1 4542 5 is_stmt 0 view .LVU3074
 9158 0014 0446     		mov	r4, r0
 9159 0016 30B1     		cbz	r0, .L686
 9160              	.LVL1098:
 9161              	.L678:
4607:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9162              		.loc 1 4607 16 is_stmt 1 view .LVU3075
4610:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9163              		.loc 1 4610 2 view .LVU3076
 9164 0018 2146     		mov	r1, r4
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 313


 9165 001a 0398     		ldr	r0, [sp, #12]
 9166 001c FFF7FEFF 		bl	unlock_fs
 9167              	.LVL1099:
4610:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9168              		.loc 1 4610 2 discriminator 1 view .LVU3077
4610:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9169              		.loc 1 4610 19 discriminator 1 view .LVU3078
4611:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9170              		.loc 1 4611 1 is_stmt 0 view .LVU3079
 9171 0020 2046     		mov	r0, r4
 9172 0022 1DB0     		add	sp, sp, #116
 9173              	.LCFI105:
 9174              		.cfi_remember_state
 9175              		.cfi_def_cfa_offset 20
 9176              		@ sp needed
 9177 0024 F0BD     		pop	{r4, r5, r6, r7, pc}
 9178              	.LVL1100:
 9179              	.L686:
 9180              	.LCFI106:
 9181              		.cfi_restore_state
4543:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);		/* Follow the file path */
 9182              		.loc 1 4543 18 is_stmt 1 view .LVU3080
4544:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
 9183              		.loc 1 4544 3 view .LVU3081
4544:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
 9184              		.loc 1 4544 9 is_stmt 0 view .LVU3082
 9185 0026 0199     		ldr	r1, [sp, #4]
 9186 0028 10A8     		add	r0, sp, #64
 9187              	.LVL1101:
4544:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_OK && (dj.fn[NSFLAG] & NS_DOT)) {
 9188              		.loc 1 4544 9 view .LVU3083
 9189 002a FFF7FEFF 		bl	follow_path
 9190              	.LVL1102:
4545:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;			/* Cannot remove dot entry */
 9191              		.loc 1 4545 3 is_stmt 1 view .LVU3084
4549:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 9192              		.loc 1 4549 3 view .LVU3085
4549:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 9193              		.loc 1 4549 6 is_stmt 0 view .LVU3086
 9194 002e 0446     		mov	r4, r0
 9195 0030 0028     		cmp	r0, #0
 9196 0032 F1D1     		bne	.L678
4549:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 9197              		.loc 1 4549 21 is_stmt 1 discriminator 1 view .LVU3087
4549:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 9198              		.loc 1 4549 27 is_stmt 0 discriminator 1 view .LVU3088
 9199 0034 0221     		movs	r1, #2
 9200 0036 10A8     		add	r0, sp, #64
 9201              	.LVL1103:
4549:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 9202              		.loc 1 4549 27 discriminator 1 view .LVU3089
 9203 0038 FFF7FEFF 		bl	chk_lock
 9204              	.LVL1104:
4551:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
 9205              		.loc 1 4551 3 is_stmt 1 view .LVU3090
4551:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dj.fn[NSFLAG] & NS_NONAME) {
 9206              		.loc 1 4551 6 is_stmt 0 view .LVU3091
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 314


 9207 003c 0446     		mov	r4, r0
 9208 003e 0028     		cmp	r0, #0
 9209 0040 EAD1     		bne	.L678
4552:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 9210              		.loc 1 4552 4 is_stmt 1 view .LVU3092
4552:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 9211              		.loc 1 4552 8 is_stmt 0 view .LVU3093
 9212 0042 9DF96F30 		ldrsb	r3, [sp, #111]
4552:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = FR_INVALID_NAME;		/* Cannot remove the origin directory */
 9213              		.loc 1 4552 7 view .LVU3094
 9214 0046 002B     		cmp	r3, #0
 9215 0048 3CDB     		blt	.L682
4555:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 9216              		.loc 1 4555 5 is_stmt 1 view .LVU3095
4555:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 9217              		.loc 1 4555 15 is_stmt 0 view .LVU3096
 9218 004a 9DF84650 		ldrb	r5, [sp, #70]	@ zero_extendqisi2
4555:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = FR_DENIED;		/* Cannot remove R/O object */
 9219              		.loc 1 4555 8 view .LVU3097
 9220 004e 15F0010F 		tst	r5, #1
 9221 0052 39D1     		bne	.L683
 9222              	.LVL1105:
4559:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9223              		.loc 1 4559 4 is_stmt 1 view .LVU3098
4569:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9224              		.loc 1 4569 6 view .LVU3099
4569:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9225              		.loc 1 4569 14 is_stmt 0 view .LVU3100
 9226 0054 039F     		ldr	r7, [sp, #12]
 9227 0056 1899     		ldr	r1, [sp, #96]
 9228 0058 3846     		mov	r0, r7
 9229 005a FFF7FEFF 		bl	ld_clust
 9230              	.LVL1106:
 9231 005e 0646     		mov	r6, r0
 9232              	.LVL1107:
4571:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
 9233              		.loc 1 4571 5 is_stmt 1 view .LVU3101
4571:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_RPATH != 0
 9234              		.loc 1 4571 8 is_stmt 0 view .LVU3102
 9235 0060 15F0100F 		tst	r5, #16
 9236 0064 13D1     		bne	.L687
 9237              	.LVL1108:
 9238              	.L679:
4595:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&dj);			/* Remove the directory entry */
 9239              		.loc 1 4595 4 is_stmt 1 view .LVU3103
4595:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&dj);			/* Remove the directory entry */
 9240              		.loc 1 4595 7 is_stmt 0 view .LVU3104
 9241 0066 002C     		cmp	r4, #0
 9242 0068 D6D1     		bne	.L678
 9243              	.LVL1109:
 9244              	.L680:
4596:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && dclst) {	/* Remove the cluster chain if exist */
 9245              		.loc 1 4596 5 is_stmt 1 view .LVU3105
4596:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK && dclst) {	/* Remove the cluster chain if exist */
 9246              		.loc 1 4596 11 is_stmt 0 view .LVU3106
 9247 006a 10A8     		add	r0, sp, #64
 9248 006c FFF7FEFF 		bl	dir_remove
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 315


 9249              	.LVL1110:
4597:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9250              		.loc 1 4597 5 is_stmt 1 view .LVU3107
4597:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9251              		.loc 1 4597 13 is_stmt 0 view .LVU3108
 9252 0070 0446     		mov	r4, r0
4597:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9253              		.loc 1 4597 22 view .LVU3109
 9254 0072 B0FA80F0 		clz	r0, r0
 9255              	.LVL1111:
4597:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9256              		.loc 1 4597 22 view .LVU3110
 9257 0076 4009     		lsrs	r0, r0, #5
 9258 0078 002E     		cmp	r6, #0
 9259 007a 08BF     		it	eq
 9260 007c 0020     		moveq	r0, #0
4597:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9261              		.loc 1 4597 8 view .LVU3111
 9262 007e D0B9     		cbnz	r0, .L688
 9263              	.LVL1112:
 9264              	.L681:
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9265              		.loc 1 4604 5 is_stmt 1 view .LVU3112
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9266              		.loc 1 4604 8 is_stmt 0 view .LVU3113
 9267 0080 002C     		cmp	r4, #0
 9268 0082 C9D1     		bne	.L678
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9269              		.loc 1 4604 23 is_stmt 1 discriminator 1 view .LVU3114
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9270              		.loc 1 4604 29 is_stmt 0 discriminator 1 view .LVU3115
 9271 0084 0398     		ldr	r0, [sp, #12]
 9272 0086 FFF7FEFF 		bl	sync_fs
 9273              	.LVL1113:
 9274 008a 0446     		mov	r4, r0
 9275              	.LVL1114:
4604:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9276              		.loc 1 4604 29 discriminator 1 view .LVU3116
 9277 008c C4E7     		b	.L678
 9278              	.LVL1115:
 9279              	.L687:
4578:Middlewares/Third_Party/FatFs/src/ff.c **** 						sdj.obj.sclust = dclst;
 9280              		.loc 1 4578 7 is_stmt 1 view .LVU3117
4578:Middlewares/Third_Party/FatFs/src/ff.c **** 						sdj.obj.sclust = dclst;
 9281              		.loc 1 4578 18 is_stmt 0 view .LVU3118
 9282 008e 0497     		str	r7, [sp, #16]
4579:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9283              		.loc 1 4579 7 is_stmt 1 view .LVU3119
4579:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9284              		.loc 1 4579 22 is_stmt 0 view .LVU3120
 9285 0090 0690     		str	r0, [sp, #24]
4586:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 9286              		.loc 1 4586 7 is_stmt 1 view .LVU3121
4586:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 9287              		.loc 1 4586 13 is_stmt 0 view .LVU3122
 9288 0092 0021     		movs	r1, #0
 9289 0094 04A8     		add	r0, sp, #16
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 316


 9290              	.LVL1116:
4586:Middlewares/Third_Party/FatFs/src/ff.c **** 						if (res == FR_OK) {
 9291              		.loc 1 4586 13 view .LVU3123
 9292 0096 FFF7FEFF 		bl	dir_sdi
 9293              	.LVL1117:
4587:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_read(&sdj, 0);			/* Read an item */
 9294              		.loc 1 4587 7 is_stmt 1 view .LVU3124
4587:Middlewares/Third_Party/FatFs/src/ff.c **** 							res = dir_read(&sdj, 0);			/* Read an item */
 9295              		.loc 1 4587 10 is_stmt 0 view .LVU3125
 9296 009a 0446     		mov	r4, r0
 9297 009c 0028     		cmp	r0, #0
 9298 009e BBD1     		bne	.L678
4588:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
 9299              		.loc 1 4588 8 is_stmt 1 view .LVU3126
4588:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
 9300              		.loc 1 4588 14 is_stmt 0 view .LVU3127
 9301 00a0 0021     		movs	r1, #0
 9302 00a2 04A8     		add	r0, sp, #16
 9303              	.LVL1118:
4588:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_OK) res = FR_DENIED;	/* Not empty? */
 9304              		.loc 1 4588 14 view .LVU3128
 9305 00a4 FFF7FEFF 		bl	dir_read
 9306              	.LVL1119:
4589:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
 9307              		.loc 1 4589 8 is_stmt 1 view .LVU3129
4589:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
 9308              		.loc 1 4589 11 is_stmt 0 view .LVU3130
 9309 00a8 0446     		mov	r4, r0
 9310 00aa 10B1     		cbz	r0, .L684
4590:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 9311              		.loc 1 4590 8 is_stmt 1 view .LVU3131
4590:Middlewares/Third_Party/FatFs/src/ff.c **** 						}
 9312              		.loc 1 4590 11 is_stmt 0 view .LVU3132
 9313 00ac 0428     		cmp	r0, #4
 9314 00ae DAD1     		bne	.L679
 9315 00b0 DBE7     		b	.L680
 9316              	.L684:
4589:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (res == FR_NO_FILE) res = FR_OK;	/* Empty? */
 9317              		.loc 1 4589 30 discriminator 1 view .LVU3133
 9318 00b2 0724     		movs	r4, #7
 9319 00b4 D7E7     		b	.L679
 9320              	.LVL1120:
 9321              	.L688:
4601:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 9322              		.loc 1 4601 6 is_stmt 1 view .LVU3134
4601:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 9323              		.loc 1 4601 12 is_stmt 0 view .LVU3135
 9324 00b6 0022     		movs	r2, #0
 9325 00b8 3146     		mov	r1, r6
 9326 00ba 10A8     		add	r0, sp, #64
 9327 00bc FFF7FEFF 		bl	remove_chain
 9328              	.LVL1121:
 9329 00c0 0446     		mov	r4, r0
 9330              	.LVL1122:
4601:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 9331              		.loc 1 4601 12 view .LVU3136
 9332 00c2 DDE7     		b	.L681
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 317


 9333              	.LVL1123:
 9334              	.L682:
4553:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 9335              		.loc 1 4553 9 view .LVU3137
 9336 00c4 0624     		movs	r4, #6
 9337 00c6 A7E7     		b	.L678
 9338              	.L683:
4556:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9339              		.loc 1 4556 10 view .LVU3138
 9340 00c8 0724     		movs	r4, #7
 9341 00ca A5E7     		b	.L678
 9342              		.cfi_endproc
 9343              	.LFE391:
 9345              		.section	.text.f_mkdir,"ax",%progbits
 9346              		.align	1
 9347              		.global	f_mkdir
 9348              		.syntax unified
 9349              		.thumb
 9350              		.thumb_func
 9352              	f_mkdir:
 9353              	.LVL1124:
 9354              	.LFB392:
4623:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 9355              		.loc 1 4623 1 is_stmt 1 view -0
 9356              		.cfi_startproc
 9357              		@ args = 0, pretend = 0, frame = 64
 9358              		@ frame_needed = 0, uses_anonymous_args = 0
4623:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 9359              		.loc 1 4623 1 is_stmt 0 view .LVU3140
 9360 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 9361              	.LCFI107:
 9362              		.cfi_def_cfa_offset 36
 9363              		.cfi_offset 4, -36
 9364              		.cfi_offset 5, -32
 9365              		.cfi_offset 6, -28
 9366              		.cfi_offset 7, -24
 9367              		.cfi_offset 8, -20
 9368              		.cfi_offset 9, -16
 9369              		.cfi_offset 10, -12
 9370              		.cfi_offset 11, -8
 9371              		.cfi_offset 14, -4
 9372 0004 91B0     		sub	sp, sp, #68
 9373              	.LCFI108:
 9374              		.cfi_def_cfa_offset 104
 9375 0006 0190     		str	r0, [sp, #4]
4624:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR dj;
 9376              		.loc 1 4624 2 is_stmt 1 view .LVU3141
4625:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 9377              		.loc 1 4625 2 view .LVU3142
4626:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE *dir;
 9378              		.loc 1 4626 2 view .LVU3143
4627:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT n;
 9379              		.loc 1 4627 2 view .LVU3144
4628:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dsc, dcl, pcl, tm;
 9380              		.loc 1 4628 2 view .LVU3145
4629:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
 9381              		.loc 1 4629 2 view .LVU3146
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 318


4634:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
 9382              		.loc 1 4634 2 view .LVU3147
4634:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
 9383              		.loc 1 4634 8 is_stmt 0 view .LVU3148
 9384 0008 0222     		movs	r2, #2
 9385 000a 03A9     		add	r1, sp, #12
 9386 000c 01A8     		add	r0, sp, #4
 9387              	.LVL1125:
4634:Middlewares/Third_Party/FatFs/src/ff.c **** 	dj.obj.fs = fs;
 9388              		.loc 1 4634 8 view .LVU3149
 9389 000e FFF7FEFF 		bl	find_volume
 9390              	.LVL1126:
4635:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 9391              		.loc 1 4635 2 is_stmt 1 view .LVU3150
4635:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 9392              		.loc 1 4635 12 is_stmt 0 view .LVU3151
 9393 0012 039B     		ldr	r3, [sp, #12]
 9394 0014 0493     		str	r3, [sp, #16]
4636:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 9395              		.loc 1 4636 2 is_stmt 1 view .LVU3152
4636:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 9396              		.loc 1 4636 5 is_stmt 0 view .LVU3153
 9397 0016 0446     		mov	r4, r0
 9398 0018 38B1     		cbz	r0, .L706
 9399              	.LVL1127:
 9400              	.L690:
4704:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9401              		.loc 1 4704 16 is_stmt 1 view .LVU3154
4707:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9402              		.loc 1 4707 2 view .LVU3155
 9403 001a 2146     		mov	r1, r4
 9404 001c 0398     		ldr	r0, [sp, #12]
 9405 001e FFF7FEFF 		bl	unlock_fs
 9406              	.LVL1128:
4707:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9407              		.loc 1 4707 2 discriminator 1 view .LVU3156
4707:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9408              		.loc 1 4707 19 discriminator 1 view .LVU3157
4708:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9409              		.loc 1 4708 1 is_stmt 0 view .LVU3158
 9410 0022 2046     		mov	r0, r4
 9411 0024 11B0     		add	sp, sp, #68
 9412              	.LCFI109:
 9413              		.cfi_remember_state
 9414              		.cfi_def_cfa_offset 36
 9415              		@ sp needed
 9416 0026 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 9417              	.LVL1129:
 9418              	.L706:
 9419              	.LCFI110:
 9420              		.cfi_restore_state
4637:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&dj, path);			/* Follow the file path */
 9421              		.loc 1 4637 18 is_stmt 1 view .LVU3159
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 9422              		.loc 1 4638 3 view .LVU3160
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 9423              		.loc 1 4638 9 is_stmt 0 view .LVU3161
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 319


 9424 002a 0199     		ldr	r1, [sp, #4]
 9425 002c 04A8     		add	r0, sp, #16
 9426              	.LVL1130:
4638:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK) res = FR_EXIST;		/* Any object with same name is already existing */
 9427              		.loc 1 4638 9 view .LVU3162
 9428 002e FFF7FEFF 		bl	follow_path
 9429              	.LVL1131:
4639:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {
 9430              		.loc 1 4639 3 is_stmt 1 view .LVU3163
4639:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {
 9431              		.loc 1 4639 6 is_stmt 0 view .LVU3164
 9432 0032 0028     		cmp	r0, #0
 9433 0034 00F09680 		beq	.L699
4640:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_INVALID_NAME;
 9434              		.loc 1 4640 3 is_stmt 1 view .LVU3165
4643:Middlewares/Third_Party/FatFs/src/ff.c **** 			dcl = create_chain(&dj.obj, 0);		/* Allocate a cluster for the new directory table */
 9435              		.loc 1 4643 3 view .LVU3166
4643:Middlewares/Third_Party/FatFs/src/ff.c **** 			dcl = create_chain(&dj.obj, 0);		/* Allocate a cluster for the new directory table */
 9436              		.loc 1 4643 6 is_stmt 0 view .LVU3167
 9437 0038 0428     		cmp	r0, #4
 9438 003a 01D0     		beq	.L707
 9439 003c 0446     		mov	r4, r0
 9440 003e ECE7     		b	.L690
 9441              	.L707:
4644:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.obj.objsize = (DWORD)fs->csize * SS(fs);
 9442              		.loc 1 4644 4 is_stmt 1 view .LVU3168
4644:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.obj.objsize = (DWORD)fs->csize * SS(fs);
 9443              		.loc 1 4644 10 is_stmt 0 view .LVU3169
 9444 0040 0021     		movs	r1, #0
 9445 0042 04A8     		add	r0, sp, #16
 9446              	.LVL1132:
4644:Middlewares/Third_Party/FatFs/src/ff.c **** 			dj.obj.objsize = (DWORD)fs->csize * SS(fs);
 9447              		.loc 1 4644 10 view .LVU3170
 9448 0044 FFF7FEFF 		bl	create_chain
 9449              	.LVL1133:
4645:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 9450              		.loc 1 4645 4 is_stmt 1 view .LVU3171
4645:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 9451              		.loc 1 4645 30 is_stmt 0 view .LVU3172
 9452 0048 039A     		ldr	r2, [sp, #12]
 9453 004a 5389     		ldrh	r3, [r2, #10]
4645:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 9454              		.loc 1 4645 38 view .LVU3173
 9455 004c 5B02     		lsls	r3, r3, #9
4645:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = FR_OK;
 9456              		.loc 1 4645 19 view .LVU3174
 9457 004e 0793     		str	r3, [sp, #28]
4646:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0) res = FR_DENIED;		/* No space to allocate a new cluster */
 9458              		.loc 1 4646 4 is_stmt 1 view .LVU3175
 9459              	.LVL1134:
4647:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 9460              		.loc 1 4647 4 view .LVU3176
4647:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 9461              		.loc 1 4647 7 is_stmt 0 view .LVU3177
 9462 0050 8146     		mov	r9, r0
 9463 0052 18B1     		cbz	r0, .L701
4648:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 320


 9464              		.loc 1 4648 4 is_stmt 1 view .LVU3178
4648:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 9465              		.loc 1 4648 7 is_stmt 0 view .LVU3179
 9466 0054 0128     		cmp	r0, #1
 9467 0056 02D1     		bne	.L691
4648:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 0xFFFFFFFF) res = FR_DISK_ERR;
 9468              		.loc 1 4648 22 discriminator 1 view .LVU3180
 9469 0058 0224     		movs	r4, #2
 9470 005a 03E0     		b	.L692
 9471              	.L701:
4647:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (dcl == 1) res = FR_INT_ERR;
 9472              		.loc 1 4647 22 discriminator 1 view .LVU3181
 9473 005c 0724     		movs	r4, #7
 9474              	.L691:
 9475              	.LVL1135:
4649:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = sync_window(fs);	/* Flush FAT */
 9476              		.loc 1 4649 4 is_stmt 1 view .LVU3182
4649:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = sync_window(fs);	/* Flush FAT */
 9477              		.loc 1 4649 7 is_stmt 0 view .LVU3183
 9478 005e B9F1FF3F 		cmp	r9, #-1
 9479 0062 56D0     		beq	.L708
 9480              	.LVL1136:
 9481              	.L692:
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
 9482              		.loc 1 4650 4 is_stmt 1 view .LVU3184
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
 9483              		.loc 1 4650 7 is_stmt 0 view .LVU3185
 9484 0064 002C     		cmp	r4, #0
 9485 0066 4FD0     		beq	.L709
 9486              	.LVL1137:
 9487              	.L693:
4651:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
 9488              		.loc 1 4651 4 is_stmt 1 view .LVU3186
4651:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) {					/* Initialize the new directory table */
 9489              		.loc 1 4651 9 is_stmt 0 view .LVU3187
 9490 0068 FFF7FEFF 		bl	get_fattime
 9491              	.LVL1138:
 9492 006c 8246     		mov	r10, r0
 9493              	.LVL1139:
4652:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, dcl);
 9494              		.loc 1 4652 4 is_stmt 1 view .LVU3188
4652:Middlewares/Third_Party/FatFs/src/ff.c **** 				dsc = clust2sect(fs, dcl);
 9495              		.loc 1 4652 7 is_stmt 0 view .LVU3189
 9496 006e 002C     		cmp	r4, #0
 9497 0070 57D1     		bne	.L694
4653:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = fs->win;
 9498              		.loc 1 4653 5 is_stmt 1 view .LVU3190
4653:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = fs->win;
 9499              		.loc 1 4653 11 is_stmt 0 view .LVU3191
 9500 0072 039E     		ldr	r6, [sp, #12]
 9501 0074 4946     		mov	r1, r9
 9502 0076 3046     		mov	r0, r6
 9503              	.LVL1140:
4653:Middlewares/Third_Party/FatFs/src/ff.c **** 				dir = fs->win;
 9504              		.loc 1 4653 11 view .LVU3192
 9505 0078 FFF7FEFF 		bl	clust2sect
 9506              	.LVL1141:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 321


 9507 007c 0546     		mov	r5, r0
 9508              	.LVL1142:
4654:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(dir, 0, SS(fs));
 9509              		.loc 1 4654 5 is_stmt 1 view .LVU3193
4654:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(dir, 0, SS(fs));
 9510              		.loc 1 4654 9 is_stmt 0 view .LVU3194
 9511 007e 06F13408 		add	r8, r6, #52
 9512              	.LVL1143:
4655:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 9513              		.loc 1 4655 5 is_stmt 1 view .LVU3195
 9514 0082 4FF40072 		mov	r2, #512
 9515 0086 0021     		movs	r1, #0
 9516 0088 4046     		mov	r0, r8
 9517              	.LVL1144:
4655:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!_FS_EXFAT || fs->fs_type != FS_EXFAT) {
 9518              		.loc 1 4655 5 is_stmt 0 view .LVU3196
 9519 008a FFF7FEFF 		bl	mem_set
 9520              	.LVL1145:
4656:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir + DIR_Name, ' ', 11);	/* Create "." entry */
 9521              		.loc 1 4656 5 is_stmt 1 view .LVU3197
4657:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Name] = '.';
 9522              		.loc 1 4657 6 view .LVU3198
 9523 008e 0B22     		movs	r2, #11
 9524 0090 2021     		movs	r1, #32
 9525 0092 4046     		mov	r0, r8
 9526 0094 FFF7FEFF 		bl	mem_set
 9527              	.LVL1146:
4658:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] = AM_DIR;
 9528              		.loc 1 4658 6 view .LVU3199
4658:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] = AM_DIR;
 9529              		.loc 1 4658 20 is_stmt 0 view .LVU3200
 9530 0098 4FF02E0B 		mov	fp, #46
 9531 009c 86F834B0 		strb	fp, [r6, #52]
4659:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);
 9532              		.loc 1 4659 6 is_stmt 1 view .LVU3201
4659:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);
 9533              		.loc 1 4659 20 is_stmt 0 view .LVU3202
 9534 00a0 1023     		movs	r3, #16
 9535 00a2 86F83F30 		strb	r3, [r6, #63]
4660:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir, dcl);
 9536              		.loc 1 4660 6 is_stmt 1 view .LVU3203
 9537 00a6 5146     		mov	r1, r10
 9538 00a8 06F14A00 		add	r0, r6, #74
 9539 00ac FFF7FEFF 		bl	st_dword
 9540              	.LVL1147:
4661:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_cpy(dir + SZDIRE, dir, SZDIRE); 	/* Create ".." entry */
 9541              		.loc 1 4661 6 view .LVU3204
 9542 00b0 4A46     		mov	r2, r9
 9543 00b2 4146     		mov	r1, r8
 9544 00b4 0398     		ldr	r0, [sp, #12]
 9545 00b6 FFF7FEFF 		bl	st_clust
 9546              	.LVL1148:
4662:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
 9547              		.loc 1 4662 6 view .LVU3205
4662:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
 9548              		.loc 1 4662 18 is_stmt 0 view .LVU3206
 9549 00ba 06F15407 		add	r7, r6, #84
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 322


4662:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[SZDIRE + 1] = '.'; pcl = dj.obj.sclust;
 9550              		.loc 1 4662 6 view .LVU3207
 9551 00be 2022     		movs	r2, #32
 9552 00c0 4146     		mov	r1, r8
 9553 00c2 3846     		mov	r0, r7
 9554 00c4 FFF7FEFF 		bl	mem_cpy
 9555              	.LVL1149:
4663:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_FAT32 && pcl == fs->dirbase) pcl = 0;
 9556              		.loc 1 4663 6 is_stmt 1 view .LVU3208
4663:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_FAT32 && pcl == fs->dirbase) pcl = 0;
 9557              		.loc 1 4663 22 is_stmt 0 view .LVU3209
 9558 00c8 86F855B0 		strb	fp, [r6, #85]
4663:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_FAT32 && pcl == fs->dirbase) pcl = 0;
 9559              		.loc 1 4663 29 is_stmt 1 view .LVU3210
4663:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (fs->fs_type == FS_FAT32 && pcl == fs->dirbase) pcl = 0;
 9560              		.loc 1 4663 33 is_stmt 0 view .LVU3211
 9561 00cc 069A     		ldr	r2, [sp, #24]
 9562              	.LVL1150:
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9563              		.loc 1 4664 6 is_stmt 1 view .LVU3212
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9564              		.loc 1 4664 12 is_stmt 0 view .LVU3213
 9565 00ce 0398     		ldr	r0, [sp, #12]
 9566 00d0 0378     		ldrb	r3, [r0]	@ zero_extendqisi2
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9567              		.loc 1 4664 9 view .LVU3214
 9568 00d2 032B     		cmp	r3, #3
 9569 00d4 1FD0     		beq	.L710
 9570              	.LVL1151:
 9571              	.L695:
4665:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9572              		.loc 1 4665 6 is_stmt 1 view .LVU3215
 9573 00d6 3946     		mov	r1, r7
 9574 00d8 FFF7FEFF 		bl	st_clust
 9575              	.LVL1152:
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
 9576              		.loc 1 4667 5 view .LVU3216
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
 9577              		.loc 1 4667 16 is_stmt 0 view .LVU3217
 9578 00dc 039B     		ldr	r3, [sp, #12]
 9579 00de 5E89     		ldrh	r6, [r3, #10]
 9580              	.LVL1153:
 9581              	.L696:
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
 9582              		.loc 1 4667 25 is_stmt 1 discriminator 1 view .LVU3218
 9583 00e0 F6B1     		cbz	r6, .L697
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9584              		.loc 1 4668 6 view .LVU3219
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9585              		.loc 1 4668 23 is_stmt 0 view .LVU3220
 9586 00e2 6F1C     		adds	r7, r5, #1
 9587              	.LVL1154:
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9588              		.loc 1 4668 8 view .LVU3221
 9589 00e4 039B     		ldr	r3, [sp, #12]
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9590              		.loc 1 4668 18 view .LVU3222
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 323


 9591 00e6 1D63     		str	r5, [r3, #48]
4669:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_window(fs);
 9592              		.loc 1 4669 6 is_stmt 1 view .LVU3223
4669:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_window(fs);
 9593              		.loc 1 4669 16 is_stmt 0 view .LVU3224
 9594 00e8 0122     		movs	r2, #1
 9595 00ea DA70     		strb	r2, [r3, #3]
4670:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
 9596              		.loc 1 4670 6 is_stmt 1 view .LVU3225
4670:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res != FR_OK) break;
 9597              		.loc 1 4670 12 is_stmt 0 view .LVU3226
 9598 00ec 0398     		ldr	r0, [sp, #12]
 9599 00ee FFF7FEFF 		bl	sync_window
 9600              	.LVL1155:
4671:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir, 0, SS(fs));
 9601              		.loc 1 4671 6 is_stmt 1 view .LVU3227
4671:Middlewares/Third_Party/FatFs/src/ff.c **** 					mem_set(dir, 0, SS(fs));
 9602              		.loc 1 4671 9 is_stmt 0 view .LVU3228
 9603 00f2 0446     		mov	r4, r0
 9604 00f4 A0B9     		cbnz	r0, .L697
4672:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9605              		.loc 1 4672 6 is_stmt 1 view .LVU3229
 9606 00f6 4FF40072 		mov	r2, #512
 9607 00fa 0021     		movs	r1, #0
 9608 00fc 4046     		mov	r0, r8
 9609              	.LVL1156:
4672:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9610              		.loc 1 4672 6 is_stmt 0 view .LVU3230
 9611 00fe FFF7FEFF 		bl	mem_set
 9612              	.LVL1157:
4667:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->winsect = dsc++;
 9613              		.loc 1 4667 29 is_stmt 1 discriminator 2 view .LVU3231
 9614 0102 013E     		subs	r6, r6, #1
 9615              	.LVL1158:
4668:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9616              		.loc 1 4668 23 is_stmt 0 view .LVU3232
 9617 0104 3D46     		mov	r5, r7
 9618 0106 EBE7     		b	.L696
 9619              	.LVL1159:
 9620              	.L709:
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
 9621              		.loc 1 4650 22 is_stmt 1 discriminator 1 view .LVU3233
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
 9622              		.loc 1 4650 28 is_stmt 0 discriminator 1 view .LVU3234
 9623 0108 1046     		mov	r0, r2
 9624              	.LVL1160:
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
 9625              		.loc 1 4650 28 discriminator 1 view .LVU3235
 9626 010a FFF7FEFF 		bl	sync_window
 9627              	.LVL1161:
 9628 010e 0446     		mov	r4, r0
 9629              	.LVL1162:
4650:Middlewares/Third_Party/FatFs/src/ff.c **** 			tm = GET_FATTIME();
 9630              		.loc 1 4650 28 discriminator 1 view .LVU3236
 9631 0110 AAE7     		b	.L693
 9632              	.LVL1163:
 9633              	.L708:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 324


4649:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = sync_window(fs);	/* Flush FAT */
 9634              		.loc 1 4649 31 discriminator 1 view .LVU3237
 9635 0112 0124     		movs	r4, #1
 9636              	.LVL1164:
4649:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (res == FR_OK) res = sync_window(fs);	/* Flush FAT */
 9637              		.loc 1 4649 31 discriminator 1 view .LVU3238
 9638 0114 A8E7     		b	.L693
 9639              	.LVL1165:
 9640              	.L710:
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9641              		.loc 1 4664 46 discriminator 1 view .LVU3239
 9642 0116 836A     		ldr	r3, [r0, #40]
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9643              		.loc 1 4664 34 discriminator 1 view .LVU3240
 9644 0118 9342     		cmp	r3, r2
 9645 011a DCD1     		bne	.L695
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9646              		.loc 1 4664 61 discriminator 2 view .LVU3241
 9647 011c 0022     		movs	r2, #0
 9648              	.LVL1166:
4664:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir + SZDIRE, pcl);
 9649              		.loc 1 4664 61 discriminator 2 view .LVU3242
 9650 011e DAE7     		b	.L695
 9651              	.LVL1167:
 9652              	.L697:
4675:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_register(&dj);	/* Register the object to the directoy */
 9653              		.loc 1 4675 4 is_stmt 1 view .LVU3243
4675:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_register(&dj);	/* Register the object to the directoy */
 9654              		.loc 1 4675 7 is_stmt 0 view .LVU3244
 9655 0120 2CB1     		cbz	r4, .L711
 9656              	.LVL1168:
 9657              	.L694:
4701:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9658              		.loc 1 4701 5 is_stmt 1 view .LVU3245
 9659 0122 0022     		movs	r2, #0
 9660 0124 4946     		mov	r1, r9
 9661 0126 04A8     		add	r0, sp, #16
 9662 0128 FFF7FEFF 		bl	remove_chain
 9663              	.LVL1169:
 9664 012c 75E7     		b	.L690
 9665              	.LVL1170:
 9666              	.L711:
4676:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9667              		.loc 1 4676 5 view .LVU3246
4676:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 9668              		.loc 1 4676 11 is_stmt 0 view .LVU3247
 9669 012e 04A8     		add	r0, sp, #16
 9670 0130 FFF7FEFF 		bl	dir_register
 9671              	.LVL1171:
4678:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9672              		.loc 1 4678 4 is_stmt 1 view .LVU3248
4678:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9673              		.loc 1 4678 7 is_stmt 0 view .LVU3249
 9674 0134 0446     		mov	r4, r0
 9675 0136 0028     		cmp	r0, #0
 9676 0138 F3D1     		bne	.L694
4691:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);	/* Created time */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 325


 9677              		.loc 1 4691 6 is_stmt 1 view .LVU3250
4691:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_dword(dir + DIR_ModTime, tm);	/* Created time */
 9678              		.loc 1 4691 10 is_stmt 0 view .LVU3251
 9679 013a 0C9C     		ldr	r4, [sp, #48]
 9680              	.LVL1172:
4692:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir, dcl);				/* Table start cluster */
 9681              		.loc 1 4692 6 is_stmt 1 view .LVU3252
 9682 013c 5146     		mov	r1, r10
 9683 013e 04F11600 		add	r0, r4, #22
 9684              	.LVL1173:
4692:Middlewares/Third_Party/FatFs/src/ff.c **** 					st_clust(fs, dir, dcl);				/* Table start cluster */
 9685              		.loc 1 4692 6 is_stmt 0 view .LVU3253
 9686 0142 FFF7FEFF 		bl	st_dword
 9687              	.LVL1174:
4693:Middlewares/Third_Party/FatFs/src/ff.c **** 					dir[DIR_Attr] = AM_DIR;				/* Attribute */
 9688              		.loc 1 4693 6 is_stmt 1 view .LVU3254
 9689 0146 4A46     		mov	r2, r9
 9690 0148 2146     		mov	r1, r4
 9691 014a 0398     		ldr	r0, [sp, #12]
 9692 014c FFF7FEFF 		bl	st_clust
 9693              	.LVL1175:
4694:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9694              		.loc 1 4694 6 view .LVU3255
4694:Middlewares/Third_Party/FatFs/src/ff.c **** 					fs->wflag = 1;
 9695              		.loc 1 4694 20 is_stmt 0 view .LVU3256
 9696 0150 1023     		movs	r3, #16
 9697 0152 E372     		strb	r3, [r4, #11]
4695:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9698              		.loc 1 4695 6 is_stmt 1 view .LVU3257
4695:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9699              		.loc 1 4695 16 is_stmt 0 view .LVU3258
 9700 0154 039B     		ldr	r3, [sp, #12]
 9701 0156 0122     		movs	r2, #1
 9702 0158 DA70     		strb	r2, [r3, #3]
4697:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);
 9703              		.loc 1 4697 5 is_stmt 1 view .LVU3259
4698:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9704              		.loc 1 4698 6 view .LVU3260
4698:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9705              		.loc 1 4698 12 is_stmt 0 view .LVU3261
 9706 015a 0398     		ldr	r0, [sp, #12]
 9707 015c FFF7FEFF 		bl	sync_fs
 9708              	.LVL1176:
 9709 0160 0446     		mov	r4, r0
 9710              	.LVL1177:
4698:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9711              		.loc 1 4698 12 view .LVU3262
 9712 0162 5AE7     		b	.L690
 9713              	.LVL1178:
 9714              	.L699:
4639:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_RPATH && res == FR_NO_FILE && (dj.fn[NSFLAG] & NS_DOT)) {
 9715              		.loc 1 4639 25 discriminator 1 view .LVU3263
 9716 0164 0824     		movs	r4, #8
 9717 0166 58E7     		b	.L690
 9718              		.cfi_endproc
 9719              	.LFE392:
 9721              		.section	.text.f_rename,"ax",%progbits
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 326


 9722              		.align	1
 9723              		.global	f_rename
 9724              		.syntax unified
 9725              		.thumb
 9726              		.thumb_func
 9728              	f_rename:
 9729              	.LVL1179:
 9730              	.LFB393:
4721:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 9731              		.loc 1 4721 1 is_stmt 1 view -0
 9732              		.cfi_startproc
 9733              		@ args = 0, pretend = 0, frame = 136
 9734              		@ frame_needed = 0, uses_anonymous_args = 0
4721:Middlewares/Third_Party/FatFs/src/ff.c **** 	FRESULT res;
 9735              		.loc 1 4721 1 is_stmt 0 view .LVU3265
 9736 0000 30B5     		push	{r4, r5, lr}
 9737              	.LCFI111:
 9738              		.cfi_def_cfa_offset 12
 9739              		.cfi_offset 4, -12
 9740              		.cfi_offset 5, -8
 9741              		.cfi_offset 14, -4
 9742 0002 A3B0     		sub	sp, sp, #140
 9743              	.LCFI112:
 9744              		.cfi_def_cfa_offset 152
 9745 0004 0190     		str	r0, [sp, #4]
 9746 0006 0091     		str	r1, [sp]
4722:Middlewares/Third_Party/FatFs/src/ff.c **** 	DIR djo, djn;
 9747              		.loc 1 4722 2 is_stmt 1 view .LVU3266
4723:Middlewares/Third_Party/FatFs/src/ff.c **** 	FATFS *fs;
 9748              		.loc 1 4723 2 view .LVU3267
4724:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE buf[_FS_EXFAT ? SZDIRE * 2 : 24], *dir;
 9749              		.loc 1 4724 2 view .LVU3268
4725:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD dw;
 9750              		.loc 1 4725 2 view .LVU3269
4726:Middlewares/Third_Party/FatFs/src/ff.c **** 	DEF_NAMBUF
 9751              		.loc 1 4726 2 view .LVU3270
4730:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path_old, &fs, FA_WRITE);	/* Get logical drive of the old object */
 9752              		.loc 1 4730 2 view .LVU3271
 9753 0008 6846     		mov	r0, sp
 9754              	.LVL1180:
4730:Middlewares/Third_Party/FatFs/src/ff.c **** 	res = find_volume(&path_old, &fs, FA_WRITE);	/* Get logical drive of the old object */
 9755              		.loc 1 4730 2 is_stmt 0 view .LVU3272
 9756 000a FFF7FEFF 		bl	get_ldnumber
 9757              	.LVL1181:
4731:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 9758              		.loc 1 4731 2 is_stmt 1 view .LVU3273
4731:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (res == FR_OK) {
 9759              		.loc 1 4731 8 is_stmt 0 view .LVU3274
 9760 000e 0222     		movs	r2, #2
 9761 0010 09A9     		add	r1, sp, #36
 9762 0012 01A8     		add	r0, sp, #4
 9763 0014 FFF7FEFF 		bl	find_volume
 9764              	.LVL1182:
4732:Middlewares/Third_Party/FatFs/src/ff.c **** 		djo.obj.fs = fs;
 9765              		.loc 1 4732 2 is_stmt 1 view .LVU3275
4732:Middlewares/Third_Party/FatFs/src/ff.c **** 		djo.obj.fs = fs;
 9766              		.loc 1 4732 5 is_stmt 0 view .LVU3276
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 327


 9767 0018 0446     		mov	r4, r0
 9768 001a 30B1     		cbz	r0, .L722
 9769              	.LVL1183:
 9770              	.L713:
4807:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 9771              		.loc 1 4807 16 is_stmt 1 view .LVU3277
4810:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9772              		.loc 1 4810 2 view .LVU3278
 9773 001c 2146     		mov	r1, r4
 9774 001e 0998     		ldr	r0, [sp, #36]
 9775 0020 FFF7FEFF 		bl	unlock_fs
 9776              	.LVL1184:
4810:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9777              		.loc 1 4810 2 discriminator 1 view .LVU3279
4810:Middlewares/Third_Party/FatFs/src/ff.c **** }
 9778              		.loc 1 4810 19 discriminator 1 view .LVU3280
4811:Middlewares/Third_Party/FatFs/src/ff.c **** 
 9779              		.loc 1 4811 1 is_stmt 0 view .LVU3281
 9780 0024 2046     		mov	r0, r4
 9781 0026 23B0     		add	sp, sp, #140
 9782              	.LCFI113:
 9783              		.cfi_remember_state
 9784              		.cfi_def_cfa_offset 12
 9785              		@ sp needed
 9786 0028 30BD     		pop	{r4, r5, pc}
 9787              	.LVL1185:
 9788              	.L722:
 9789              	.LCFI114:
 9790              		.cfi_restore_state
4733:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 9791              		.loc 1 4733 3 is_stmt 1 view .LVU3282
4733:Middlewares/Third_Party/FatFs/src/ff.c **** 		INIT_NAMBUF(fs);
 9792              		.loc 1 4733 14 is_stmt 0 view .LVU3283
 9793 002a 099B     		ldr	r3, [sp, #36]
 9794 002c 1693     		str	r3, [sp, #88]
4734:Middlewares/Third_Party/FatFs/src/ff.c **** 		res = follow_path(&djo, path_old);		/* Check old object */
 9795              		.loc 1 4734 18 is_stmt 1 view .LVU3284
4735:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
 9796              		.loc 1 4735 3 view .LVU3285
4735:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
 9797              		.loc 1 4735 9 is_stmt 0 view .LVU3286
 9798 002e 0199     		ldr	r1, [sp, #4]
 9799 0030 16A8     		add	r0, sp, #88
 9800              	.LVL1186:
4735:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (res == FR_OK && (djo.fn[NSFLAG] & (NS_DOT | NS_NONAME))) res = FR_INVALID_NAME;	/* Check vali
 9801              		.loc 1 4735 9 view .LVU3287
 9802 0032 FFF7FEFF 		bl	follow_path
 9803              	.LVL1187:
4736:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 9804              		.loc 1 4736 3 is_stmt 1 view .LVU3288
4736:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 9805              		.loc 1 4736 6 is_stmt 0 view .LVU3289
 9806 0036 0446     		mov	r4, r0
 9807 0038 48B9     		cbnz	r0, .L714
4736:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 9808              		.loc 1 4736 30 discriminator 1 view .LVU3290
 9809 003a 9DF88730 		ldrb	r3, [sp, #135]	@ zero_extendqisi2
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 328


4736:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_LOCK != 0
 9810              		.loc 1 4736 20 discriminator 1 view .LVU3291
 9811 003e 13F0A00F 		tst	r3, #160
 9812 0042 72D1     		bne	.L718
4738:Middlewares/Third_Party/FatFs/src/ff.c **** 			res = chk_lock(&djo, 2);
 9813              		.loc 1 4738 3 is_stmt 1 view .LVU3292
4739:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9814              		.loc 1 4739 4 view .LVU3293
4739:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9815              		.loc 1 4739 10 is_stmt 0 view .LVU3294
 9816 0044 0221     		movs	r1, #2
 9817 0046 16A8     		add	r0, sp, #88
 9818              	.LVL1188:
4739:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 9819              		.loc 1 4739 10 view .LVU3295
 9820 0048 FFF7FEFF 		bl	chk_lock
 9821              	.LVL1189:
 9822 004c 0446     		mov	r4, r0
 9823              	.LVL1190:
 9824              	.L714:
4742:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9825              		.loc 1 4742 3 is_stmt 1 view .LVU3296
4742:Middlewares/Third_Party/FatFs/src/ff.c **** #if _FS_EXFAT
 9826              		.loc 1 4742 6 is_stmt 0 view .LVU3297
 9827 004e 002C     		cmp	r4, #0
 9828 0050 E4D1     		bne	.L713
4769:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_cpy(&djn, &djo, sizeof (DIR));		/* Duplicate the directory object */
 9829              		.loc 1 4769 5 is_stmt 1 view .LVU3298
 9830 0052 1522     		movs	r2, #21
 9831 0054 1E99     		ldr	r1, [sp, #120]
 9832 0056 0B31     		adds	r1, r1, #11
 9833 0058 03A8     		add	r0, sp, #12
 9834 005a FFF7FEFF 		bl	mem_cpy
 9835              	.LVL1191:
4770:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = follow_path(&djn, path_new);		/* Make sure if new object name is not in use */
 9836              		.loc 1 4770 5 view .LVU3299
 9837 005e 3022     		movs	r2, #48
 9838 0060 16A9     		add	r1, sp, #88
 9839 0062 0AA8     		add	r0, sp, #40
 9840 0064 FFF7FEFF 		bl	mem_cpy
 9841              	.LVL1192:
4771:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
 9842              		.loc 1 4771 5 view .LVU3300
4771:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {						/* Is new name already in use by any other object? */
 9843              		.loc 1 4771 11 is_stmt 0 view .LVU3301
 9844 0068 0099     		ldr	r1, [sp]
 9845 006a 0AA8     		add	r0, sp, #40
 9846 006c FFF7FEFF 		bl	follow_path
 9847              	.LVL1193:
4772:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
 9848              		.loc 1 4772 5 is_stmt 1 view .LVU3302
4772:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = (djn.obj.sclust == djo.obj.sclust && djn.dptr == djo.dptr) ? FR_NO_FILE : FR_EXIST;
 9849              		.loc 1 4772 8 is_stmt 0 view .LVU3303
 9850 0070 0446     		mov	r4, r0
 9851 0072 58B9     		cbnz	r0, .L715
4773:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9852              		.loc 1 4773 6 is_stmt 1 view .LVU3304
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 329


4773:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9853              		.loc 1 4773 84 is_stmt 0 view .LVU3305
 9854 0074 0C9A     		ldr	r2, [sp, #48]
 9855 0076 189B     		ldr	r3, [sp, #96]
 9856 0078 9A42     		cmp	r2, r3
 9857 007a 01D0     		beq	.L723
 9858              	.LVL1194:
4773:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9859              		.loc 1 4773 10 discriminator 6 view .LVU3306
 9860 007c 0824     		movs	r4, #8
 9861 007e 07E0     		b	.L716
 9862              	.LVL1195:
 9863              	.L723:
4773:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9864              		.loc 1 4773 46 discriminator 1 view .LVU3307
 9865 0080 0F9A     		ldr	r2, [sp, #60]
 9866 0082 1B9B     		ldr	r3, [sp, #108]
 9867 0084 9A42     		cmp	r2, r3
 9868 0086 10D0     		beq	.L717
 9869              	.LVL1196:
4773:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9870              		.loc 1 4773 10 discriminator 6 view .LVU3308
 9871 0088 0824     		movs	r4, #8
 9872 008a 01E0     		b	.L716
 9873              	.LVL1197:
 9874              	.L715:
4775:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
 9875              		.loc 1 4775 5 is_stmt 1 view .LVU3309
4775:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = dir_register(&djn);			/* Register the new entry */
 9876              		.loc 1 4775 8 is_stmt 0 view .LVU3310
 9877 008c 0428     		cmp	r0, #4
 9878 008e 0CD0     		beq	.L717
 9879              	.LVL1198:
 9880              	.L716:
4799:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&djo);		/* Remove old entry */
 9881              		.loc 1 4799 4 is_stmt 1 view .LVU3311
4799:Middlewares/Third_Party/FatFs/src/ff.c **** 				res = dir_remove(&djo);		/* Remove old entry */
 9882              		.loc 1 4799 7 is_stmt 0 view .LVU3312
 9883 0090 002C     		cmp	r4, #0
 9884 0092 C3D1     		bne	.L713
4800:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
 9885              		.loc 1 4800 5 is_stmt 1 view .LVU3313
4800:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (res == FR_OK) {
 9886              		.loc 1 4800 11 is_stmt 0 view .LVU3314
 9887 0094 16A8     		add	r0, sp, #88
 9888 0096 FFF7FEFF 		bl	dir_remove
 9889              	.LVL1199:
4801:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);
 9890              		.loc 1 4801 5 is_stmt 1 view .LVU3315
4801:Middlewares/Third_Party/FatFs/src/ff.c **** 					res = sync_fs(fs);
 9891              		.loc 1 4801 8 is_stmt 0 view .LVU3316
 9892 009a 0446     		mov	r4, r0
 9893 009c 0028     		cmp	r0, #0
 9894 009e BDD1     		bne	.L713
4802:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9895              		.loc 1 4802 6 is_stmt 1 view .LVU3317
4802:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 330


 9896              		.loc 1 4802 12 is_stmt 0 view .LVU3318
 9897 00a0 0998     		ldr	r0, [sp, #36]
 9898              	.LVL1200:
4802:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9899              		.loc 1 4802 12 view .LVU3319
 9900 00a2 FFF7FEFF 		bl	sync_fs
 9901              	.LVL1201:
 9902 00a6 0446     		mov	r4, r0
 9903              	.LVL1202:
4802:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 9904              		.loc 1 4802 12 view .LVU3320
 9905 00a8 B8E7     		b	.L713
 9906              	.LVL1203:
 9907              	.L717:
4776:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
 9908              		.loc 1 4776 6 is_stmt 1 view .LVU3321
4776:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (res == FR_OK) {
 9909              		.loc 1 4776 12 is_stmt 0 view .LVU3322
 9910 00aa 0AA8     		add	r0, sp, #40
 9911 00ac FFF7FEFF 		bl	dir_register
 9912              	.LVL1204:
4777:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir = djn.dir;					/* Copy information about object except name */
 9913              		.loc 1 4777 6 is_stmt 1 view .LVU3323
4777:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir = djn.dir;					/* Copy information about object except name */
 9914              		.loc 1 4777 9 is_stmt 0 view .LVU3324
 9915 00b0 0446     		mov	r4, r0
 9916 00b2 0028     		cmp	r0, #0
 9917 00b4 B2D1     		bne	.L713
4778:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(dir + 13, buf + 2, 19);
 9918              		.loc 1 4778 7 is_stmt 1 view .LVU3325
4778:Middlewares/Third_Party/FatFs/src/ff.c **** 						mem_cpy(dir + 13, buf + 2, 19);
 9919              		.loc 1 4778 11 is_stmt 0 view .LVU3326
 9920 00b6 129D     		ldr	r5, [sp, #72]
 9921              	.LVL1205:
4779:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
 9922              		.loc 1 4779 7 is_stmt 1 view .LVU3327
 9923 00b8 1322     		movs	r2, #19
 9924 00ba 0DF10E01 		add	r1, sp, #14
 9925 00be 05F10D00 		add	r0, r5, #13
 9926              	.LVL1206:
4779:Middlewares/Third_Party/FatFs/src/ff.c **** 						dir[DIR_Attr] = buf[0] | AM_ARC;
 9927              		.loc 1 4779 7 is_stmt 0 view .LVU3328
 9928 00c2 FFF7FEFF 		bl	mem_cpy
 9929              	.LVL1207:
4780:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 9930              		.loc 1 4780 7 is_stmt 1 view .LVU3329
4780:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 9931              		.loc 1 4780 26 is_stmt 0 view .LVU3330
 9932 00c6 9DF80C30 		ldrb	r3, [sp, #12]	@ zero_extendqisi2
4780:Middlewares/Third_Party/FatFs/src/ff.c **** 						fs->wflag = 1;
 9933              		.loc 1 4780 21 view .LVU3331
 9934 00ca 43F02003 		orr	r3, r3, #32
 9935 00ce EB72     		strb	r3, [r5, #11]
4781:Middlewares/Third_Party/FatFs/src/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
 9936              		.loc 1 4781 7 is_stmt 1 view .LVU3332
4781:Middlewares/Third_Party/FatFs/src/ff.c **** 						if ((dir[DIR_Attr] & AM_DIR) && djo.obj.sclust != djn.obj.sclust) {	/* Update .. entry in the
 9937              		.loc 1 4781 17 is_stmt 0 view .LVU3333
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 331


 9938 00d0 099B     		ldr	r3, [sp, #36]
 9939 00d2 0122     		movs	r2, #1
 9940 00d4 DA70     		strb	r2, [r3, #3]
4782:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(fs, ld_clust(fs, dir));
 9941              		.loc 1 4782 7 is_stmt 1 view .LVU3334
4782:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(fs, ld_clust(fs, dir));
 9942              		.loc 1 4782 15 is_stmt 0 view .LVU3335
 9943 00d6 EB7A     		ldrb	r3, [r5, #11]	@ zero_extendqisi2
4782:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(fs, ld_clust(fs, dir));
 9944              		.loc 1 4782 10 view .LVU3336
 9945 00d8 13F0100F 		tst	r3, #16
 9946 00dc D8D0     		beq	.L716
4782:Middlewares/Third_Party/FatFs/src/ff.c **** 							dw = clust2sect(fs, ld_clust(fs, dir));
 9947              		.loc 1 4782 36 discriminator 1 view .LVU3337
 9948 00de 189A     		ldr	r2, [sp, #96]
 9949 00e0 0C9B     		ldr	r3, [sp, #48]
 9950 00e2 9A42     		cmp	r2, r3
 9951 00e4 D4D0     		beq	.L716
4783:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!dw) {
 9952              		.loc 1 4783 8 is_stmt 1 view .LVU3338
4783:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!dw) {
 9953              		.loc 1 4783 13 is_stmt 0 view .LVU3339
 9954 00e6 099C     		ldr	r4, [sp, #36]
 9955              	.LVL1208:
4783:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!dw) {
 9956              		.loc 1 4783 13 view .LVU3340
 9957 00e8 2946     		mov	r1, r5
 9958 00ea 2046     		mov	r0, r4
 9959 00ec FFF7FEFF 		bl	ld_clust
 9960              	.LVL1209:
 9961 00f0 0146     		mov	r1, r0
4783:Middlewares/Third_Party/FatFs/src/ff.c **** 							if (!dw) {
 9962              		.loc 1 4783 13 discriminator 1 view .LVU3341
 9963 00f2 2046     		mov	r0, r4
 9964 00f4 FFF7FEFF 		bl	clust2sect
 9965              	.LVL1210:
4784:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = FR_INT_ERR;
 9966              		.loc 1 4784 8 is_stmt 1 view .LVU3342
4784:Middlewares/Third_Party/FatFs/src/ff.c **** 								res = FR_INT_ERR;
 9967              		.loc 1 4784 11 is_stmt 0 view .LVU3343
 9968 00f8 0146     		mov	r1, r0
 9969 00fa 08B9     		cbnz	r0, .L724
 9970              	.LVL1211:
4785:Middlewares/Third_Party/FatFs/src/ff.c **** 							} else {
 9971              		.loc 1 4785 13 view .LVU3344
 9972 00fc 0224     		movs	r4, #2
 9973 00fe 8DE7     		b	.L713
 9974              	.LVL1212:
 9975              	.L724:
4788:Middlewares/Third_Party/FatFs/src/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
 9976              		.loc 1 4788 9 is_stmt 1 view .LVU3345
4788:Middlewares/Third_Party/FatFs/src/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
 9977              		.loc 1 4788 15 is_stmt 0 view .LVU3346
 9978 0100 2046     		mov	r0, r4
 9979              	.LVL1213:
4788:Middlewares/Third_Party/FatFs/src/ff.c **** 								dir = fs->win + SZDIRE * 1;	/* Ptr to .. entry */
 9980              		.loc 1 4788 15 view .LVU3347
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 332


 9981 0102 FFF7FEFF 		bl	move_window
 9982              	.LVL1214:
4789:Middlewares/Third_Party/FatFs/src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 9983              		.loc 1 4789 9 is_stmt 1 view .LVU3348
4789:Middlewares/Third_Party/FatFs/src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 9984              		.loc 1 4789 17 is_stmt 0 view .LVU3349
 9985 0106 099B     		ldr	r3, [sp, #36]
4789:Middlewares/Third_Party/FatFs/src/ff.c **** 								if (res == FR_OK && dir[1] == '.') {
 9986              		.loc 1 4789 13 view .LVU3350
 9987 0108 03F15401 		add	r1, r3, #84
 9988              	.LVL1215:
4790:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 9989              		.loc 1 4790 9 is_stmt 1 view .LVU3351
4790:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 9990              		.loc 1 4790 12 is_stmt 0 view .LVU3352
 9991 010c 0446     		mov	r4, r0
 9992 010e 0028     		cmp	r0, #0
 9993 0110 84D1     		bne	.L713
4790:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 9994              		.loc 1 4790 32 discriminator 1 view .LVU3353
 9995 0112 93F85520 		ldrb	r2, [r3, #85]	@ zero_extendqisi2
4790:Middlewares/Third_Party/FatFs/src/ff.c **** 									st_clust(fs, dir, djn.obj.sclust);
 9996              		.loc 1 4790 26 discriminator 1 view .LVU3354
 9997 0116 2E2A     		cmp	r2, #46
 9998 0118 BAD1     		bne	.L716
4791:Middlewares/Third_Party/FatFs/src/ff.c **** 									fs->wflag = 1;
 9999              		.loc 1 4791 10 is_stmt 1 view .LVU3355
 10000 011a 0C9A     		ldr	r2, [sp, #48]
 10001 011c 1846     		mov	r0, r3
 10002              	.LVL1216:
4791:Middlewares/Third_Party/FatFs/src/ff.c **** 									fs->wflag = 1;
 10003              		.loc 1 4791 10 is_stmt 0 view .LVU3356
 10004 011e FFF7FEFF 		bl	st_clust
 10005              	.LVL1217:
4792:Middlewares/Third_Party/FatFs/src/ff.c **** 								}
 10006              		.loc 1 4792 10 is_stmt 1 view .LVU3357
4792:Middlewares/Third_Party/FatFs/src/ff.c **** 								}
 10007              		.loc 1 4792 20 is_stmt 0 view .LVU3358
 10008 0122 099B     		ldr	r3, [sp, #36]
 10009 0124 0122     		movs	r2, #1
 10010 0126 DA70     		strb	r2, [r3, #3]
 10011 0128 B2E7     		b	.L716
 10012              	.LVL1218:
 10013              	.L718:
4792:Middlewares/Third_Party/FatFs/src/ff.c **** 								}
 10014              		.loc 1 4792 20 view .LVU3359
 10015 012a 0624     		movs	r4, #6
 10016 012c 76E7     		b	.L713
 10017              		.cfi_endproc
 10018              	.LFE393:
 10020              		.section	.rodata.f_mkfs.str1.4,"aMS",%progbits,1
 10021              		.align	2
 10022              	.LC1:
 10023 0000 EBFE904D 		.ascii	"\353\376\220MSDOS5.0\000"
 10023      53444F53 
 10023      352E3000 
 10024              		.align	2
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 333


 10025              	.LC2:
 10026 000c 4E4F204E 		.ascii	"NO NAME    FAT32   \000"
 10026      414D4520 
 10026      20202046 
 10026      41543332 
 10026      20202000 
 10027              		.align	2
 10028              	.LC3:
 10029 0020 4E4F204E 		.ascii	"NO NAME    FAT     \000"
 10029      414D4520 
 10029      20202046 
 10029      41542020 
 10029      20202000 
 10030              		.section	.text.f_mkfs,"ax",%progbits
 10031              		.align	1
 10032              		.global	f_mkfs
 10033              		.syntax unified
 10034              		.thumb
 10035              		.thumb_func
 10037              	f_mkfs:
 10038              	.LVL1219:
 10039              	.LFB394:
5308:Middlewares/Third_Party/FatFs/src/ff.c **** 	const UINT n_fats = 1;		/* Number of FATs for FAT12/16/32 volume (1 or 2) */
 10040              		.loc 1 5308 1 is_stmt 1 view -0
 10041              		.cfi_startproc
 10042              		@ args = 4, pretend = 0, frame = 48
 10043              		@ frame_needed = 0, uses_anonymous_args = 0
5308:Middlewares/Third_Party/FatFs/src/ff.c **** 	const UINT n_fats = 1;		/* Number of FATs for FAT12/16/32 volume (1 or 2) */
 10044              		.loc 1 5308 1 is_stmt 0 view .LVU3361
 10045 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 10046              	.LCFI115:
 10047              		.cfi_def_cfa_offset 36
 10048              		.cfi_offset 4, -36
 10049              		.cfi_offset 5, -32
 10050              		.cfi_offset 6, -28
 10051              		.cfi_offset 7, -24
 10052              		.cfi_offset 8, -20
 10053              		.cfi_offset 9, -16
 10054              		.cfi_offset 10, -12
 10055              		.cfi_offset 11, -8
 10056              		.cfi_offset 14, -4
 10057 0004 8DB0     		sub	sp, sp, #52
 10058              	.LCFI116:
 10059              		.cfi_def_cfa_offset 88
 10060 0006 0990     		str	r0, [sp, #36]
 10061 0008 0F46     		mov	r7, r1
 10062 000a 1646     		mov	r6, r2
 10063 000c 0193     		str	r3, [sp, #4]
5309:Middlewares/Third_Party/FatFs/src/ff.c **** 	const UINT n_rootdir = 512;	/* Number of root directory entries for FAT12/16 volume */
 10064              		.loc 1 5309 2 is_stmt 1 view .LVU3362
 10065              	.LVL1220:
5310:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD cst[] = {1, 4, 16, 64, 256, 512, 0};	/* Cluster size boundary for FAT12/16 volum
 10066              		.loc 1 5310 2 view .LVU3363
5311:Middlewares/Third_Party/FatFs/src/ff.c **** 	static const WORD cst32[] = {1, 2, 4, 8, 16, 32, 0};	/* Cluster size boundary for FAT32 volume (12
 10067              		.loc 1 5311 2 view .LVU3364
5312:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE fmt, sys, *buf, *pte, pdrv, part;
 10068              		.loc 1 5312 2 view .LVU3365
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 334


5313:Middlewares/Third_Party/FatFs/src/ff.c **** 	WORD ss;
 10069              		.loc 1 5313 2 view .LVU3366
5314:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD szb_buf, sz_buf, sz_blk, n_clst, pau, sect, nsect, n;
 10070              		.loc 1 5314 2 view .LVU3367
5315:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD b_vol, b_fat, b_data;				/* Base LBA for volume, fat, data */
 10071              		.loc 1 5315 2 view .LVU3368
5316:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD sz_vol, sz_rsv, sz_fat, sz_dir;	/* Size for volume, fat, dir, data */
 10072              		.loc 1 5316 2 view .LVU3369
5317:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i;
 10073              		.loc 1 5317 2 view .LVU3370
5318:Middlewares/Third_Party/FatFs/src/ff.c **** 	int vol;
 10074              		.loc 1 5318 2 view .LVU3371
5319:Middlewares/Third_Party/FatFs/src/ff.c **** 	DSTATUS stat;
 10075              		.loc 1 5319 2 view .LVU3372
5320:Middlewares/Third_Party/FatFs/src/ff.c **** #if _USE_TRIM || _FS_EXFAT
 10076              		.loc 1 5320 2 view .LVU3373
5327:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 10077              		.loc 1 5327 2 view .LVU3374
5327:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 10078              		.loc 1 5327 8 is_stmt 0 view .LVU3375
 10079 000e 09A8     		add	r0, sp, #36
 10080              	.LVL1221:
5327:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (vol < 0) return FR_INVALID_DRIVE;
 10081              		.loc 1 5327 8 view .LVU3376
 10082 0010 FFF7FEFF 		bl	get_ldnumber
 10083              	.LVL1222:
5328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
 10084              		.loc 1 5328 2 is_stmt 1 view .LVU3377
5328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
 10085              		.loc 1 5328 5 is_stmt 0 view .LVU3378
 10086 0014 0028     		cmp	r0, #0
5328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
 10087              		.loc 1 5328 5 view .LVU3379
 10088 0016 C0F20B83 		blt	.L768
5329:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 10089              		.loc 1 5329 2 is_stmt 1 view .LVU3380
5329:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 10090              		.loc 1 5329 11 is_stmt 0 view .LVU3381
 10091 001a 8F4B     		ldr	r3, .L820
 10092 001c 53F82030 		ldr	r3, [r3, r0, lsl #2]
5329:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 10093              		.loc 1 5329 5 view .LVU3382
 10094 0020 0BB1     		cbz	r3, .L727
5329:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 10095              		.loc 1 5329 18 is_stmt 1 discriminator 1 view .LVU3383
5329:Middlewares/Third_Party/FatFs/src/ff.c **** 	pdrv = LD2PD(vol);	/* Physical drive */
 10096              		.loc 1 5329 38 is_stmt 0 discriminator 1 view .LVU3384
 10097 0022 0022     		movs	r2, #0
 10098 0024 1A70     		strb	r2, [r3]
 10099              	.L727:
5330:Middlewares/Third_Party/FatFs/src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:create as new, 1-4:get from partition table) */
 10100              		.loc 1 5330 2 is_stmt 1 view .LVU3385
5330:Middlewares/Third_Party/FatFs/src/ff.c **** 	part = LD2PT(vol);	/* Partition (0:create as new, 1-4:get from partition table) */
 10101              		.loc 1 5330 7 is_stmt 0 view .LVU3386
 10102 0026 C4B2     		uxtb	r4, r0
 10103              	.LVL1223:
5331:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 335


 10104              		.loc 1 5331 2 is_stmt 1 view .LVU3387
5334:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 10105              		.loc 1 5334 2 view .LVU3388
5334:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 10106              		.loc 1 5334 9 is_stmt 0 view .LVU3389
 10107 0028 2046     		mov	r0, r4
 10108              	.LVL1224:
5334:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_NOINIT) return FR_NOT_READY;
 10109              		.loc 1 5334 9 view .LVU3390
 10110 002a FFF7FEFF 		bl	disk_initialize
 10111              	.LVL1225:
5335:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 10112              		.loc 1 5335 2 is_stmt 1 view .LVU3391
5335:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 10113              		.loc 1 5335 5 is_stmt 0 view .LVU3392
 10114 002e 10F0010F 		tst	r0, #1
 10115 0032 40F0FF82 		bne	.L769
5336:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &sz_blk) != RES_OK || !sz_blk || sz_blk > 32768 || (sz_blk & 
 10116              		.loc 1 5336 2 is_stmt 1 view .LVU3393
5336:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &sz_blk) != RES_OK || !sz_blk || sz_blk > 32768 || (sz_blk & 
 10117              		.loc 1 5336 5 is_stmt 0 view .LVU3394
 10118 0036 10F0040F 		tst	r0, #4
 10119 003a 40F0FD82 		bne	.L770
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10120              		.loc 1 5337 2 is_stmt 1 view .LVU3395
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10121              		.loc 1 5337 6 is_stmt 0 view .LVU3396
 10122 003e 0BAA     		add	r2, sp, #44
 10123 0040 0321     		movs	r1, #3
 10124 0042 2046     		mov	r0, r4
 10125              	.LVL1226:
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10126              		.loc 1 5337 6 view .LVU3397
 10127 0044 FFF7FEFF 		bl	disk_ioctl
 10128              	.LVL1227:
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10129              		.loc 1 5337 5 discriminator 1 view .LVU3398
 10130 0048 38B9     		cbnz	r0, .L728
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10131              		.loc 1 5337 61 discriminator 2 view .LVU3399
 10132 004a 0B9B     		ldr	r3, [sp, #44]
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10133              		.loc 1 5337 58 discriminator 2 view .LVU3400
 10134 004c 2BB1     		cbz	r3, .L728
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10135              		.loc 1 5337 69 discriminator 4 view .LVU3401
 10136 004e B3F5004F 		cmp	r3, #32768
 10137 0052 02D8     		bhi	.L728
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10138              		.loc 1 5337 108 discriminator 6 view .LVU3402
 10139 0054 5A1E     		subs	r2, r3, #1
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10140              		.loc 1 5337 87 discriminator 6 view .LVU3403
 10141 0056 1342     		tst	r3, r2
 10142 0058 01D0     		beq	.L729
 10143              	.L728:
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 336


 10144              		.loc 1 5337 115 is_stmt 1 discriminator 7 view .LVU3404
5337:Middlewares/Third_Party/FatFs/src/ff.c **** #if _MAX_SS != _MIN_SS		/* Get sector size of the medium if variable sector size cfg. */
 10145              		.loc 1 5337 122 is_stmt 0 discriminator 7 view .LVU3405
 10146 005a 0123     		movs	r3, #1
 10147 005c 0B93     		str	r3, [sp, #44]
 10148              	.L729:
5342:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 10149              		.loc 1 5342 2 is_stmt 1 view .LVU3406
 10150              	.LVL1228:
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10151              		.loc 1 5344 2 view .LVU3407
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10152              		.loc 1 5344 5 is_stmt 0 view .LVU3408
 10153 005e 3EB1     		cbz	r6, .L730
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10154              		.loc 1 5344 15 discriminator 1 view .LVU3409
 10155 0060 B6F5007F 		cmp	r6, #512
 10156 0064 C0F0EC82 		bcc	.L771
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10157              		.loc 1 5344 27 discriminator 4 view .LVU3410
 10158 0068 B6F1807F 		cmp	r6, #16777216
 10159 006c 00F2EA82 		bhi	.L772
 10160              	.L730:
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10161              		.loc 1 5344 58 discriminator 6 view .LVU3411
 10162 0070 731E     		subs	r3, r6, #1
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 10163              		.loc 1 5344 45 discriminator 6 view .LVU3412
 10164 0072 3340     		ands	r3, r3, r6
 10165 0074 0293     		str	r3, [sp, #8]
 10166 0076 40F0E782 		bne	.L773
5345:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10167              		.loc 1 5345 2 is_stmt 1 view .LVU3413
5345:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10168              		.loc 1 5345 5 is_stmt 0 view .LVU3414
 10169 007a 4FEA5629 		lsr	r9, r6, #9
 10170              	.LVL1229:
5348:Middlewares/Third_Party/FatFs/src/ff.c **** 	sz_buf = len / ss;		/* Size of working buffer (sector) */
 10171              		.loc 1 5348 2 is_stmt 1 view .LVU3415
5349:Middlewares/Third_Party/FatFs/src/ff.c **** 	szb_buf = sz_buf * ss;	/* Size of working buffer (byte) */
 10172              		.loc 1 5349 2 view .LVU3416
5349:Middlewares/Third_Party/FatFs/src/ff.c **** 	szb_buf = sz_buf * ss;	/* Size of working buffer (byte) */
 10173              		.loc 1 5349 9 is_stmt 0 view .LVU3417
 10174 007e 169A     		ldr	r2, [sp, #88]
 10175 0080 520A     		lsrs	r2, r2, #9
 10176 0082 0392     		str	r2, [sp, #12]
 10177              	.LVL1230:
5350:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!szb_buf) return FR_MKFS_ABORTED;
 10178              		.loc 1 5350 2 is_stmt 1 view .LVU3418
5350:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (!szb_buf) return FR_MKFS_ABORTED;
 10179              		.loc 1 5350 10 is_stmt 0 view .LVU3419
 10180 0084 169D     		ldr	r5, [sp, #88]
 10181 0086 6FF30805 		bfc	r5, #0, #9
 10182              	.LVL1231:
5351:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10183              		.loc 1 5351 2 is_stmt 1 view .LVU3420
5351:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 337


 10184              		.loc 1 5351 5 is_stmt 0 view .LVU3421
 10185 008a 002D     		cmp	r5, #0
 10186 008c 00F0DE82 		beq	.L774
5354:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get partition information from partition table in the MBR */
 10187              		.loc 1 5354 2 is_stmt 1 view .LVU3422
5364:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (opt & FM_SFD) ? 0 : 63;		/* Volume start sector */
 10188              		.loc 1 5364 3 view .LVU3423
5364:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (opt & FM_SFD) ? 0 : 63;		/* Volume start sector */
 10189              		.loc 1 5364 7 is_stmt 0 view .LVU3424
 10190 0090 0AAA     		add	r2, sp, #40
 10191              	.LVL1232:
5364:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (opt & FM_SFD) ? 0 : 63;		/* Volume start sector */
 10192              		.loc 1 5364 7 view .LVU3425
 10193 0092 0121     		movs	r1, #1
 10194 0094 2046     		mov	r0, r4
 10195 0096 FFF7FEFF 		bl	disk_ioctl
 10196              	.LVL1233:
5364:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (opt & FM_SFD) ? 0 : 63;		/* Volume start sector */
 10197              		.loc 1 5364 6 discriminator 1 view .LVU3426
 10198 009a 0028     		cmp	r0, #0
 10199 009c 40F0D882 		bne	.L775
5365:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < b_vol) return FR_MKFS_ABORTED;
 10200              		.loc 1 5365 3 is_stmt 1 view .LVU3427
5365:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < b_vol) return FR_MKFS_ABORTED;
 10201              		.loc 1 5365 30 is_stmt 0 view .LVU3428
 10202 00a0 17F00802 		ands	r2, r7, #8
 10203 00a4 0492     		str	r2, [sp, #16]
 10204 00a6 23D0     		beq	.L776
5365:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < b_vol) return FR_MKFS_ABORTED;
 10205              		.loc 1 5365 30 discriminator 1 view .LVU3429
 10206 00a8 DDF808B0 		ldr	fp, [sp, #8]
 10207              	.L731:
 10208              	.LVL1234:
5366:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol -= b_vol;						/* Volume size */
 10209              		.loc 1 5366 3 is_stmt 1 view .LVU3430
5366:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol -= b_vol;						/* Volume size */
 10210              		.loc 1 5366 14 is_stmt 0 view .LVU3431
 10211 00ac 0A99     		ldr	r1, [sp, #40]
5366:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol -= b_vol;						/* Volume size */
 10212              		.loc 1 5366 6 view .LVU3432
 10213 00ae 5945     		cmp	r1, fp
 10214 00b0 C0F0D082 		bcc	.L777
5367:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 10215              		.loc 1 5367 3 is_stmt 1 view .LVU3433
5367:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 10216              		.loc 1 5367 10 is_stmt 0 view .LVU3434
 10217 00b4 A1EB0B01 		sub	r1, r1, fp
 10218 00b8 0A91     		str	r1, [sp, #40]
5369:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10219              		.loc 1 5369 2 is_stmt 1 view .LVU3435
5369:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10220              		.loc 1 5369 5 is_stmt 0 view .LVU3436
 10221 00ba 7F29     		cmp	r1, #127
 10222 00bc 40F2CC82 		bls	.L778
5372:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_EXFAT && (opt & FM_EXFAT)) {	/* exFAT possible? */
 10223              		.loc 1 5372 2 is_stmt 1 view .LVU3437
5373:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((opt & FM_ANY) == FM_EXFAT || sz_vol >= 0x4000000 || au > 128) {	/* exFAT only, vol >= 64Ms 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 338


 10224              		.loc 1 5373 3 view .LVU3438
5378:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (opt & FM_FAT32) {	/* FAT32 possible? */
 10225              		.loc 1 5378 3 view .LVU3439
5378:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (opt & FM_FAT32) {	/* FAT32 possible? */
 10226              		.loc 1 5378 6 is_stmt 0 view .LVU3440
 10227 00c0 B6F5813F 		cmp	r6, #66048
 10228 00c4 80F0CA82 		bcs	.L779
5379:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((opt & FM_ANY) == FM_FAT32 || !(opt & FM_FAT)) {	/* FAT32 only or no-FAT? */
 10229              		.loc 1 5379 3 is_stmt 1 view .LVU3441
5379:Middlewares/Third_Party/FatFs/src/ff.c **** 			if ((opt & FM_ANY) == FM_FAT32 || !(opt & FM_FAT)) {	/* FAT32 only or no-FAT? */
 10230              		.loc 1 5379 6 is_stmt 0 view .LVU3442
 10231 00c8 17F00200 		ands	r0, r7, #2
 10232 00cc 06D0     		beq	.L732
5380:Middlewares/Third_Party/FatFs/src/ff.c **** 				fmt = FS_FAT32; break;
 10233              		.loc 1 5380 4 is_stmt 1 view .LVU3443
5380:Middlewares/Third_Party/FatFs/src/ff.c **** 				fmt = FS_FAT32; break;
 10234              		.loc 1 5380 7 is_stmt 0 view .LVU3444
 10235 00ce 07F00703 		and	r3, r7, #7
 10236 00d2 022B     		cmp	r3, #2
 10237 00d4 0FD0     		beq	.L780
5380:Middlewares/Third_Party/FatFs/src/ff.c **** 				fmt = FS_FAT32; break;
 10238              		.loc 1 5380 35 discriminator 1 view .LVU3445
 10239 00d6 17F0010F 		tst	r7, #1
 10240 00da 12D0     		beq	.L781
 10241              	.L732:
5384:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT16;
 10242              		.loc 1 5384 3 is_stmt 1 view .LVU3446
5384:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT16;
 10243              		.loc 1 5384 6 is_stmt 0 view .LVU3447
 10244 00dc 17F0010F 		tst	r7, #1
 10245 00e0 00F0BE82 		beq	.L782
5385:Middlewares/Third_Party/FatFs/src/ff.c **** 	} while (0);
 10246              		.loc 1 5385 7 view .LVU3448
 10247 00e4 4FF0020A 		mov	r10, #2
 10248 00e8 8E46     		mov	lr, r1
 10249 00ea 4946     		mov	r1, r9
 10250 00ec 0594     		str	r4, [sp, #20]
 10251 00ee 64E0     		b	.L734
 10252              	.LVL1235:
 10253              	.L776:
5365:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < b_vol) return FR_MKFS_ABORTED;
 10254              		.loc 1 5365 30 discriminator 2 view .LVU3449
 10255 00f0 4FF03F0B 		mov	fp, #63
 10256 00f4 DAE7     		b	.L731
 10257              	.LVL1236:
 10258              	.L780:
5381:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10259              		.loc 1 5381 9 view .LVU3450
 10260 00f6 4FF0030A 		mov	r10, #3
 10261 00fa 8E46     		mov	lr, r1
 10262 00fc 4946     		mov	r1, r9
 10263 00fe 0594     		str	r4, [sp, #20]
 10264 0100 5BE0     		b	.L734
 10265              	.L781:
5381:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10266              		.loc 1 5381 9 view .LVU3451
 10267 0102 4FF0030A 		mov	r10, #3
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 339


 10268 0106 8E46     		mov	lr, r1
 10269 0108 4946     		mov	r1, r9
 10270 010a 0594     		str	r4, [sp, #20]
 10271 010c 55E0     		b	.L734
 10272              	.LVL1237:
 10273              	.L788:
5604:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 10274              		.loc 1 5604 10 view .LVU3452
 10275 010e 1946     		mov	r1, r3
 10276              	.LVL1238:
5604:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 10277              		.loc 1 5604 10 view .LVU3453
 10278 0110 53E0     		b	.L734
 10279              	.LVL1239:
 10280              	.L789:
5607:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 10281              		.loc 1 5607 11 view .LVU3454
 10282 0112 4FF0030A 		mov	r10, #3
 10283              	.LVL1240:
5607:Middlewares/Third_Party/FatFs/src/ff.c **** 					}
 10284              		.loc 1 5607 11 view .LVU3455
 10285 0116 50E0     		b	.L734
 10286              	.LVL1241:
 10287              	.L809:
5556:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x20000;	/* Volume size in unit of 128KS */
 10288              		.loc 1 5556 5 is_stmt 1 view .LVU3456
5556:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x20000;	/* Volume size in unit of 128KS */
 10289              		.loc 1 5556 8 is_stmt 0 view .LVU3457
 10290 0118 89B1     		cbz	r1, .L807
5553:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
 10291              		.loc 1 5553 8 view .LVU3458
 10292 011a 0F46     		mov	r7, r1
 10293              	.LVL1242:
 10294              	.L736:
5560:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_fat = (n_clst * 4 + 8 + ss - 1) / ss;	/* FAT size [sector] */
 10295              		.loc 1 5560 5 is_stmt 1 view .LVU3459
5560:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_fat = (n_clst * 4 + 8 + ss - 1) / ss;	/* FAT size [sector] */
 10296              		.loc 1 5560 12 is_stmt 0 view .LVU3460
 10297 011c BEFBF7F2 		udiv	r2, lr, r7
 10298              	.LVL1243:
5561:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 10299              		.loc 1 5561 5 is_stmt 1 view .LVU3461
5561:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 10300              		.loc 1 5561 35 is_stmt 0 view .LVU3462
 10301 0120 9600     		lsls	r6, r2, #2
 10302 0122 06F20726 		addw	r6, r6, #519
5561:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 32;	/* Number of reserved sectors */
 10303              		.loc 1 5561 12 view .LVU3463
 10304 0126 760A     		lsrs	r6, r6, #9
 10305              	.LVL1244:
5562:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = 0;		/* No static directory */
 10306              		.loc 1 5562 5 is_stmt 1 view .LVU3464
5563:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16 || n_clst > MAX_FAT32) return FR_MKFS_ABORTED;
 10307              		.loc 1 5563 5 view .LVU3465
5564:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
 10308              		.loc 1 5564 5 view .LVU3466
5564:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 340


 10309              		.loc 1 5564 29 is_stmt 0 view .LVU3467
 10310 0128 4C4B     		ldr	r3, .L820+4
 10311 012a 1344     		add	r3, r3, r2
5564:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
 10312              		.loc 1 5564 8 view .LVU3468
 10313 012c 4C4A     		ldr	r2, .L820+8
 10314              	.LVL1245:
5564:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
 10315              		.loc 1 5564 8 view .LVU3469
 10316 012e 9342     		cmp	r3, r2
 10317 0130 00F29882 		bhi	.L784
5563:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16 || n_clst > MAX_FAT32) return FR_MKFS_ABORTED;
 10318              		.loc 1 5563 12 view .LVU3470
 10319 0134 DDF80890 		ldr	r9, [sp, #8]
5562:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = 0;		/* No static directory */
 10320              		.loc 1 5562 12 view .LVU3471
 10321 0138 4FF0200C 		mov	ip, #32
 10322 013c 52E0     		b	.L739
 10323              	.LVL1246:
 10324              	.L807:
5557:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst32[i] && cst32[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 10325              		.loc 1 5557 6 is_stmt 1 view .LVU3472
5557:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst32[i] && cst32[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 10326              		.loc 1 5557 8 is_stmt 0 view .LVU3473
 10327 013e 4FEA5E44 		lsr	r4, lr, #17
 10328              	.LVL1247:
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10329              		.loc 1 5558 6 is_stmt 1 view .LVU3474
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10330              		.loc 1 5558 13 is_stmt 0 view .LVU3475
 10331 0142 0A46     		mov	r2, r1
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10332              		.loc 1 5558 22 view .LVU3476
 10333 0144 0127     		movs	r7, #1
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10334              		.loc 1 5558 6 view .LVU3477
 10335 0146 01E0     		b	.L737
 10336              	.LVL1248:
 10337              	.L738:
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10338              		.loc 1 5558 57 is_stmt 1 discriminator 4 view .LVU3478
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10339              		.loc 1 5558 55 is_stmt 0 discriminator 4 view .LVU3479
 10340 0148 0132     		adds	r2, r2, #1
 10341              	.LVL1249:
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10342              		.loc 1 5558 63 discriminator 4 view .LVU3480
 10343 014a 7F00     		lsls	r7, r7, #1
 10344              	.LVL1250:
 10345              	.L737:
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10346              		.loc 1 5558 36 is_stmt 1 discriminator 1 view .LVU3481
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10347              		.loc 1 5558 32 is_stmt 0 discriminator 1 view .LVU3482
 10348 014c 454B     		ldr	r3, .L820+12
 10349 014e 33F81230 		ldrh	r3, [r3, r2, lsl #1]
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 341


 10350              		.loc 1 5558 36 discriminator 1 view .LVU3483
 10351 0152 002B     		cmp	r3, #0
 10352 0154 E2D0     		beq	.L736
5558:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10353              		.loc 1 5558 36 discriminator 3 view .LVU3484
 10354 0156 A342     		cmp	r3, r4
 10355 0158 F6D9     		bls	.L738
 10356 015a DFE7     		b	.L736
 10357              	.LVL1251:
 10358              	.L810:
5567:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst[i] && cst[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 10359              		.loc 1 5567 6 is_stmt 1 view .LVU3485
5567:Middlewares/Third_Party/FatFs/src/ff.c **** 					for (i = 0, pau = 1; cst[i] && cst[i] <= n; i++, pau <<= 1) ;	/* Get from table */
 10360              		.loc 1 5567 8 is_stmt 0 view .LVU3486
 10361 015c 4FEA1E34 		lsr	r4, lr, #12
 10362              	.LVL1252:
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10363              		.loc 1 5568 6 is_stmt 1 view .LVU3487
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10364              		.loc 1 5568 13 is_stmt 0 view .LVU3488
 10365 0160 0A46     		mov	r2, r1
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10366              		.loc 1 5568 22 view .LVU3489
 10367 0162 0127     		movs	r7, #1
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10368              		.loc 1 5568 6 view .LVU3490
 10369 0164 01E0     		b	.L741
 10370              	.LVL1253:
 10371              	.L742:
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10372              		.loc 1 5568 53 is_stmt 1 discriminator 4 view .LVU3491
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10373              		.loc 1 5568 51 is_stmt 0 discriminator 4 view .LVU3492
 10374 0166 0132     		adds	r2, r2, #1
 10375              	.LVL1254:
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10376              		.loc 1 5568 59 discriminator 4 view .LVU3493
 10377 0168 7F00     		lsls	r7, r7, #1
 10378              	.LVL1255:
 10379              	.L741:
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10380              		.loc 1 5568 34 is_stmt 1 discriminator 1 view .LVU3494
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10381              		.loc 1 5568 30 is_stmt 0 discriminator 1 view .LVU3495
 10382 016a 3F4B     		ldr	r3, .L820+16
 10383 016c 33F81230 		ldrh	r3, [r3, r2, lsl #1]
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10384              		.loc 1 5568 34 discriminator 1 view .LVU3496
 10385 0170 4BB3     		cbz	r3, .L740
5568:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10386              		.loc 1 5568 34 discriminator 3 view .LVU3497
 10387 0172 A342     		cmp	r3, r4
 10388 0174 F7D9     		bls	.L742
 10389 0176 26E0     		b	.L740
 10390              	.LVL1256:
 10391              	.L743:
5574:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = (n_clst * 3 + 1) / 2 + 3;	/* FAT size [byte] */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 342


 10392              		.loc 1 5574 6 is_stmt 1 view .LVU3498
5575:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10393              		.loc 1 5575 6 view .LVU3499
5575:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10394              		.loc 1 5575 18 is_stmt 0 view .LVU3500
 10395 0178 03EB4306 		add	r6, r3, r3, lsl #1
5575:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10396              		.loc 1 5575 22 view .LVU3501
 10397 017c 0136     		adds	r6, r6, #1
5575:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10398              		.loc 1 5575 27 view .LVU3502
 10399 017e 7608     		lsrs	r6, r6, #1
5575:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10400              		.loc 1 5575 8 view .LVU3503
 10401 0180 0336     		adds	r6, r6, #3
 10402              	.LVL1257:
5574:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = (n_clst * 3 + 1) / 2 + 3;	/* FAT size [byte] */
 10403              		.loc 1 5574 10 view .LVU3504
 10404 0182 4FF0010A 		mov	r10, #1
 10405 0186 26E0     		b	.L744
 10406              	.LVL1258:
 10407              	.L811:
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* FAT12/16: Expand FAT size */
 10408              		.loc 1 5587 5 is_stmt 1 view .LVU3505
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* FAT12/16: Expand FAT size */
 10409              		.loc 1 5587 12 is_stmt 0 view .LVU3506
 10410 0188 9444     		add	ip, ip, r2
 10411              	.LVL1259:
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* FAT12/16: Expand FAT size */
 10412              		.loc 1 5587 18 is_stmt 1 view .LVU3507
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* FAT12/16: Expand FAT size */
 10413              		.loc 1 5587 24 is_stmt 0 view .LVU3508
 10414 018a 9044     		add	r8, r8, r2
 10415              	.LVL1260:
5587:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {					/* FAT12/16: Expand FAT size */
 10416              		.loc 1 5587 24 view .LVU3509
 10417 018c 39E0     		b	.L746
 10418              	.LVL1261:
 10419              	.L812:
5596:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
 10420              		.loc 1 5596 5 is_stmt 1 view .LVU3510
5596:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
 10421              		.loc 1 5596 8 is_stmt 0 view .LVU3511
 10422 018e 4FF6F572 		movw	r2, #65525
 10423              	.LVL1262:
5596:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau / 2) != 0) continue;	/* Adjust cluster size and retry */
 10424              		.loc 1 5596 8 view .LVU3512
 10425 0192 9342     		cmp	r3, r2
 10426 0194 46D8     		bhi	.L747
5597:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10427              		.loc 1 5597 6 is_stmt 1 view .LVU3513
5597:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10428              		.loc 1 5597 9 is_stmt 0 view .LVU3514
 10429 0196 0029     		cmp	r1, #0
 10430 0198 40F06882 		bne	.L787
5597:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10431              		.loc 1 5597 21 discriminator 1 view .LVU3515
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 343


 10432 019c 7908     		lsrs	r1, r7, #1
 10433              	.LVL1263:
5597:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10434              		.loc 1 5597 14 discriminator 1 view .LVU3516
 10435 019e 012F     		cmp	r7, #1
 10436 01a0 0BD8     		bhi	.L734
5598:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10437              		.loc 1 5598 13 view .LVU3517
 10438 01a2 0E20     		movs	r0, #14
 10439 01a4 49E2     		b	.L726
 10440              	.L750:
5612:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
 10441              		.loc 1 5612 5 is_stmt 1 view .LVU3518
5612:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (au = pau * 2) <= 128) continue;	/* Adjust cluster size and retry */
 10442              		.loc 1 5612 9 is_stmt 0 view .LVU3519
 10443 01a6 40F6F572 		movw	r2, #4085
 10444 01aa 9342     		cmp	r3, r2
 10445 01ac 5ED8     		bhi	.L749
5613:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10446              		.loc 1 5613 6 is_stmt 1 view .LVU3520
5613:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10447              		.loc 1 5613 9 is_stmt 0 view .LVU3521
 10448 01ae 0029     		cmp	r1, #0
 10449 01b0 40F06082 		bne	.L791
5613:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10450              		.loc 1 5613 21 discriminator 1 view .LVU3522
 10451 01b4 7900     		lsls	r1, r7, #1
 10452              	.LVL1264:
5613:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10453              		.loc 1 5613 14 discriminator 1 view .LVU3523
 10454 01b6 8029     		cmp	r1, #128
 10455 01b8 4BD8     		bhi	.L808
 10456              	.LVL1265:
 10457              	.L734:
5372:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (_FS_EXFAT && (opt & FM_EXFAT)) {	/* exFAT possible? */
 10458              		.loc 1 5372 5 is_stmt 1 view .LVU3524
5552:Middlewares/Third_Party/FatFs/src/ff.c **** 			pau = au;
 10459              		.loc 1 5552 3 view .LVU3525
5553:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
 10460              		.loc 1 5553 4 view .LVU3526
5555:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!pau) {	/* au auto-selection */
 10461              		.loc 1 5555 4 view .LVU3527
5555:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (!pau) {	/* au auto-selection */
 10462              		.loc 1 5555 7 is_stmt 0 view .LVU3528
 10463 01ba BAF1030F 		cmp	r10, #3
 10464 01be ABD0     		beq	.L809
5566:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x1000;	/* Volume size in unit of 4KS */
 10465              		.loc 1 5566 5 is_stmt 1 view .LVU3529
5566:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = sz_vol / 0x1000;	/* Volume size in unit of 4KS */
 10466              		.loc 1 5566 8 is_stmt 0 view .LVU3530
 10467 01c0 0029     		cmp	r1, #0
 10468 01c2 CBD0     		beq	.L810
5553:Middlewares/Third_Party/FatFs/src/ff.c **** 			/* Pre-determine number of clusters and FAT sub-type */
 10469              		.loc 1 5553 8 view .LVU3531
 10470 01c4 0F46     		mov	r7, r1
 10471              	.LVL1266:
 10472              	.L740:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 344


5570:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT12) {
 10473              		.loc 1 5570 5 is_stmt 1 view .LVU3532
5570:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT12) {
 10474              		.loc 1 5570 12 is_stmt 0 view .LVU3533
 10475 01c6 BEFBF7F3 		udiv	r3, lr, r7
 10476              	.LVL1267:
5571:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = n_clst * 2 + 4;		/* FAT size [byte] */
 10477              		.loc 1 5571 5 is_stmt 1 view .LVU3534
5571:Middlewares/Third_Party/FatFs/src/ff.c **** 					n = n_clst * 2 + 4;		/* FAT size [byte] */
 10478              		.loc 1 5571 8 is_stmt 0 view .LVU3535
 10479 01ca 40F6F572 		movw	r2, #4085
 10480 01ce 9342     		cmp	r3, r2
 10481 01d0 D2D9     		bls	.L743
5572:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 10482              		.loc 1 5572 6 is_stmt 1 view .LVU3536
5572:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 10483              		.loc 1 5572 21 is_stmt 0 view .LVU3537
 10484 01d2 9E1C     		adds	r6, r3, #2
5572:Middlewares/Third_Party/FatFs/src/ff.c **** 				} else {
 10485              		.loc 1 5572 8 view .LVU3538
 10486 01d4 7600     		lsls	r6, r6, #1
 10487              	.LVL1268:
 10488              	.L744:
5577:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 1;						/* Number of reserved sectors */
 10489              		.loc 1 5577 5 is_stmt 1 view .LVU3539
5577:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 1;						/* Number of reserved sectors */
 10490              		.loc 1 5577 22 is_stmt 0 view .LVU3540
 10491 01d6 06F2FF16 		addw	r6, r6, #511
 10492              	.LVL1269:
5577:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv = 1;						/* Number of reserved sectors */
 10493              		.loc 1 5577 12 view .LVU3541
 10494 01da 760A     		lsrs	r6, r6, #9
 10495              	.LVL1270:
5578:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = (DWORD)n_rootdir * SZDIRE / ss;	/* Rootdir size [sector] */
 10496              		.loc 1 5578 5 is_stmt 1 view .LVU3542
5579:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10497              		.loc 1 5579 5 view .LVU3543
5579:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10498              		.loc 1 5579 12 is_stmt 0 view .LVU3544
 10499 01dc 4FF02009 		mov	r9, #32
5578:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_dir = (DWORD)n_rootdir * SZDIRE / ss;	/* Rootdir size [sector] */
 10500              		.loc 1 5578 12 view .LVU3545
 10501 01e0 4FF0010C 		mov	ip, #1
 10502              	.LVL1271:
 10503              	.L739:
5581:Middlewares/Third_Party/FatFs/src/ff.c **** 			b_data = b_fat + sz_fat * n_fats + sz_dir;	/* Data base */
 10504              		.loc 1 5581 4 is_stmt 1 view .LVU3546
5581:Middlewares/Third_Party/FatFs/src/ff.c **** 			b_data = b_fat + sz_fat * n_fats + sz_dir;	/* Data base */
 10505              		.loc 1 5581 10 is_stmt 0 view .LVU3547
 10506 01e4 0CEB0B08 		add	r8, ip, fp
 10507              	.LVL1272:
5582:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10508              		.loc 1 5582 4 is_stmt 1 view .LVU3548
5582:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10509              		.loc 1 5582 19 is_stmt 0 view .LVU3549
 10510 01e8 06EB0803 		add	r3, r6, r8
5582:Middlewares/Third_Party/FatFs/src/ff.c **** 
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 345


 10511              		.loc 1 5582 11 view .LVU3550
 10512 01ec 4B44     		add	r3, r3, r9
 10513              	.LVL1273:
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
 10514              		.loc 1 5585 4 is_stmt 1 view .LVU3551
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
 10515              		.loc 1 5585 17 is_stmt 0 view .LVU3552
 10516 01ee 0B9C     		ldr	r4, [sp, #44]
 10517 01f0 E218     		adds	r2, r4, r3
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
 10518              		.loc 1 5585 26 view .LVU3553
 10519 01f2 013A     		subs	r2, r2, #1
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
 10520              		.loc 1 5585 33 view .LVU3554
 10521 01f4 6442     		rsbs	r4, r4, #0
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
 10522              		.loc 1 5585 31 view .LVU3555
 10523 01f6 2240     		ands	r2, r2, r4
5585:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {		/* FAT32: Move FAT base */
 10524              		.loc 1 5585 6 view .LVU3556
 10525 01f8 D21A     		subs	r2, r2, r3
 10526              	.LVL1274:
5586:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv += n; b_fat += n;
 10527              		.loc 1 5586 4 is_stmt 1 view .LVU3557
5586:Middlewares/Third_Party/FatFs/src/ff.c **** 				sz_rsv += n; b_fat += n;
 10528              		.loc 1 5586 7 is_stmt 0 view .LVU3558
 10529 01fa BAF1030F 		cmp	r10, #3
 10530 01fe C3D0     		beq	.L811
5589:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10531              		.loc 1 5589 5 is_stmt 1 view .LVU3559
5589:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10532              		.loc 1 5589 12 is_stmt 0 view .LVU3560
 10533 0200 1644     		add	r6, r6, r2
 10534              	.LVL1275:
 10535              	.L746:
5593:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
 10536              		.loc 1 5593 4 is_stmt 1 view .LVU3561
5593:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
 10537              		.loc 1 5593 24 is_stmt 0 view .LVU3562
 10538 0202 03EB0713 		add	r3, r3, r7, lsl #4
 10539              	.LVL1276:
5593:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
 10540              		.loc 1 5593 35 view .LVU3563
 10541 0206 A3EB0B03 		sub	r3, r3, fp
5593:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
 10542              		.loc 1 5593 7 view .LVU3564
 10543 020a 9E45     		cmp	lr, r3
 10544 020c C0F02C82 		bcc	.L786
5594:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10545              		.loc 1 5594 4 is_stmt 1 view .LVU3565
5594:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10546              		.loc 1 5594 21 is_stmt 0 view .LVU3566
 10547 0210 AEEB0C03 		sub	r3, lr, ip
5594:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10548              		.loc 1 5594 30 view .LVU3567
 10549 0214 9B1B     		subs	r3, r3, r6
5594:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 346


 10550              		.loc 1 5594 48 view .LVU3568
 10551 0216 A3EB0903 		sub	r3, r3, r9
5594:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10552              		.loc 1 5594 11 view .LVU3569
 10553 021a B3FBF7F3 		udiv	r3, r3, r7
 10554              	.LVL1277:
5595:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16) {	/* Too few clusters for FAT32 */
 10555              		.loc 1 5595 4 is_stmt 1 view .LVU3570
5595:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst <= MAX_FAT16) {	/* Too few clusters for FAT32 */
 10556              		.loc 1 5595 7 is_stmt 0 view .LVU3571
 10557 021e BAF1030F 		cmp	r10, #3
 10558 0222 B4D0     		beq	.L812
 10559              	.LVL1278:
 10560              	.L747:
5601:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT16) {	/* Too many clusters for FAT16 */
 10561              		.loc 1 5601 4 is_stmt 1 view .LVU3572
5601:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (n_clst > MAX_FAT16) {	/* Too many clusters for FAT16 */
 10562              		.loc 1 5601 7 is_stmt 0 view .LVU3573
 10563 0224 BAF1020F 		cmp	r10, #2
 10564 0228 20D1     		bne	.L749
5602:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (pau * 2) <= 64) {
 10565              		.loc 1 5602 5 is_stmt 1 view .LVU3574
5602:Middlewares/Third_Party/FatFs/src/ff.c **** 					if (!au && (pau * 2) <= 64) {
 10566              		.loc 1 5602 8 is_stmt 0 view .LVU3575
 10567 022a 4FF6F572 		movw	r2, #65525
 10568 022e 9342     		cmp	r3, r2
 10569 0230 B9D9     		bls	.L750
5603:Middlewares/Third_Party/FatFs/src/ff.c **** 						au = pau * 2; continue;		/* Adjust cluster size and retry */
 10570              		.loc 1 5603 6 is_stmt 1 view .LVU3576
5603:Middlewares/Third_Party/FatFs/src/ff.c **** 						au = pau * 2; continue;		/* Adjust cluster size and retry */
 10571              		.loc 1 5603 9 is_stmt 0 view .LVU3577
 10572 0232 19B9     		cbnz	r1, .L751
5603:Middlewares/Third_Party/FatFs/src/ff.c **** 						au = pau * 2; continue;		/* Adjust cluster size and retry */
 10573              		.loc 1 5603 22 discriminator 1 view .LVU3578
 10574 0234 7B00     		lsls	r3, r7, #1
 10575              	.LVL1279:
5603:Middlewares/Third_Party/FatFs/src/ff.c **** 						au = pau * 2; continue;		/* Adjust cluster size and retry */
 10576              		.loc 1 5603 14 discriminator 1 view .LVU3579
 10577 0236 402B     		cmp	r3, #64
 10578 0238 7FF669AF 		bls	.L788
 10579              	.L751:
5606:Middlewares/Third_Party/FatFs/src/ff.c **** 						fmt = FS_FAT32; continue;	/* Switch type to FAT32 and retry */
 10580              		.loc 1 5606 6 is_stmt 1 view .LVU3580
5606:Middlewares/Third_Party/FatFs/src/ff.c **** 						fmt = FS_FAT32; continue;	/* Switch type to FAT32 and retry */
 10581              		.loc 1 5606 9 is_stmt 0 view .LVU3581
 10582 023c 0028     		cmp	r0, #0
 10583 023e 7FF468AF 		bne	.L789
5609:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10584              		.loc 1 5609 6 is_stmt 1 view .LVU3582
5609:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10585              		.loc 1 5609 9 is_stmt 0 view .LVU3583
 10586 0242 0029     		cmp	r1, #0
 10587 0244 40F01482 		bne	.L790
5609:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10588              		.loc 1 5609 21 discriminator 1 view .LVU3584
 10589 0248 7900     		lsls	r1, r7, #1
 10590              	.LVL1280:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 347


5609:Middlewares/Third_Party/FatFs/src/ff.c **** 					return FR_MKFS_ABORTED;
 10591              		.loc 1 5609 14 discriminator 1 view .LVU3585
 10592 024a 8029     		cmp	r1, #128
 10593 024c B5D9     		bls	.L734
5610:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10594              		.loc 1 5610 13 view .LVU3586
 10595 024e 0E20     		movs	r0, #14
 10596 0250 F3E1     		b	.L726
 10597              	.LVL1281:
 10598              	.L808:
5614:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 10599              		.loc 1 5614 13 view .LVU3587
 10600 0252 0E20     		movs	r0, #14
 10601 0254 F1E1     		b	.L726
 10602              	.L821:
 10603 0256 00BF     		.align	2
 10604              	.L820:
 10605 0258 00000000 		.word	FatFs
 10606 025c 0A00FFFF 		.word	-65526
 10607 0260 FFFFFE0F 		.word	268369919
 10608 0264 00000000 		.word	cst32.1
 10609 0268 00000000 		.word	cst.0
 10610              	.L749:
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10611              		.loc 1 5617 24 view .LVU3588
 10612 026c CDF82090 		str	r9, [sp, #32]
 10613 0270 CDF81880 		str	r8, [sp, #24]
 10614 0274 CDF81CC0 		str	ip, [sp, #28]
 10615 0278 059C     		ldr	r4, [sp, #20]
 10616 027a 9846     		mov	r8, r3
 10617              	.LVL1282:
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10618              		.loc 1 5617 4 is_stmt 1 view .LVU3589
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10619              		.loc 1 5617 24 is_stmt 0 view .LVU3590
 10620 027c 40F6F572 		movw	r2, #4085
 10621 0280 BAF1010F 		cmp	r10, #1
 10622 0284 14BF     		ite	ne
 10623 0286 0023     		movne	r3, #0
 10624              	.LVL1283:
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10625              		.loc 1 5617 24 view .LVU3591
 10626 0288 0123     		moveq	r3, #1
 10627 028a 9045     		cmp	r8, r2
 10628 028c 98BF     		it	ls
 10629 028e 0023     		movls	r3, #0
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10630              		.loc 1 5617 7 view .LVU3592
 10631 0290 002B     		cmp	r3, #0
 10632 0292 40F0F181 		bne	.L792
5620:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (1);
 10633              		.loc 1 5620 4 is_stmt 1 view .LVU3593
5628:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(buf + BS_JmpBoot, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code (x86), OEM name */
 10634              		.loc 1 5628 3 view .LVU3594
 10635 0296 4FF40072 		mov	r2, #512
 10636 029a 0021     		movs	r1, #0
 10637              	.LVL1284:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 348


5628:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(buf + BS_JmpBoot, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code (x86), OEM name */
 10638              		.loc 1 5628 3 is_stmt 0 view .LVU3595
 10639 029c DDF80490 		ldr	r9, [sp, #4]
 10640              	.LVL1285:
5628:Middlewares/Third_Party/FatFs/src/ff.c **** 		mem_cpy(buf + BS_JmpBoot, "\xEB\xFE\x90" "MSDOS5.0", 11);/* Boot jump code (x86), OEM name */
 10641              		.loc 1 5628 3 view .LVU3596
 10642 02a0 4846     		mov	r0, r9
 10643 02a2 FFF7FEFF 		bl	mem_set
 10644              	.LVL1286:
5629:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_BytsPerSec, ss);				/* Sector size [byte] */
 10645              		.loc 1 5629 3 is_stmt 1 view .LVU3597
 10646 02a6 0B22     		movs	r2, #11
 10647 02a8 B749     		ldr	r1, .L822
 10648 02aa 4846     		mov	r0, r9
 10649 02ac FFF7FEFF 		bl	mem_cpy
 10650              	.LVL1287:
5630:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_SecPerClus] = (BYTE)pau;				/* Cluster size [sector] */
 10651              		.loc 1 5630 3 view .LVU3598
 10652 02b0 4FF40071 		mov	r1, #512
 10653 02b4 CDF80490 		str	r9, [sp, #4]
 10654              	.LVL1288:
5630:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_SecPerClus] = (BYTE)pau;				/* Cluster size [sector] */
 10655              		.loc 1 5630 3 is_stmt 0 view .LVU3599
 10656 02b8 09F10B00 		add	r0, r9, #11
 10657 02bc FFF7FEFF 		bl	st_word
 10658              	.LVL1289:
5631:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RsvdSecCnt, (WORD)sz_rsv);	/* Size of reserved area */
 10659              		.loc 1 5631 3 is_stmt 1 view .LVU3600
5631:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RsvdSecCnt, (WORD)sz_rsv);	/* Size of reserved area */
 10660              		.loc 1 5631 23 is_stmt 0 view .LVU3601
 10661 02c0 019B     		ldr	r3, [sp, #4]
 10662 02c2 5F73     		strb	r7, [r3, #13]
5632:Middlewares/Third_Party/FatFs/src/ff.c **** 		buf[BPB_NumFATs] = (BYTE)n_fats;				/* Number of FATs */
 10663              		.loc 1 5632 3 is_stmt 1 view .LVU3602
 10664 02c4 BDF81C10 		ldrh	r1, [sp, #28]
 10665 02c8 03F10E00 		add	r0, r3, #14
 10666 02cc FFF7FEFF 		bl	st_word
 10667              	.LVL1290:
5633:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RootEntCnt, (WORD)((fmt == FS_FAT32) ? 0 : n_rootdir));	/* Number of root direc
 10668              		.loc 1 5633 3 view .LVU3603
5633:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_RootEntCnt, (WORD)((fmt == FS_FAT32) ? 0 : n_rootdir));	/* Number of root direc
 10669              		.loc 1 5633 20 is_stmt 0 view .LVU3604
 10670 02d0 0123     		movs	r3, #1
 10671 02d2 019A     		ldr	r2, [sp, #4]
 10672 02d4 1374     		strb	r3, [r2, #16]
5634:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x10000) {
 10673              		.loc 1 5634 3 is_stmt 1 view .LVU3605
 10674 02d6 02F11100 		add	r0, r2, #17
 10675 02da BAF1030F 		cmp	r10, #3
 10676 02de 00F09A80 		beq	.L813
5634:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x10000) {
 10677              		.loc 1 5634 3 is_stmt 0 discriminator 2 view .LVU3606
 10678 02e2 4FF40071 		mov	r1, #512
 10679              	.L752:
5634:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x10000) {
 10680              		.loc 1 5634 3 discriminator 4 view .LVU3607
 10681 02e6 FFF7FEFF 		bl	st_word
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 349


 10682              	.LVL1291:
5635:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_TotSec16, (WORD)sz_vol);	/* Volume size in 16-bit LBA */
 10683              		.loc 1 5635 3 is_stmt 1 view .LVU3608
5635:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_TotSec16, (WORD)sz_vol);	/* Volume size in 16-bit LBA */
 10684              		.loc 1 5635 14 is_stmt 0 view .LVU3609
 10685 02ea 0A99     		ldr	r1, [sp, #40]
5635:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_TotSec16, (WORD)sz_vol);	/* Volume size in 16-bit LBA */
 10686              		.loc 1 5635 6 view .LVU3610
 10687 02ec B1F5803F 		cmp	r1, #65536
 10688 02f0 80F09380 		bcs	.L753
5636:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 10689              		.loc 1 5636 4 is_stmt 1 view .LVU3611
 10690 02f4 89B2     		uxth	r1, r1
 10691 02f6 019B     		ldr	r3, [sp, #4]
 10692 02f8 03F11300 		add	r0, r3, #19
 10693 02fc FFF7FEFF 		bl	st_word
 10694              	.LVL1292:
 10695              	.L754:
5640:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_SecPerTrk, 63);				/* Number of sectors per track (for int13) */
 10696              		.loc 1 5640 3 view .LVU3612
5640:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_SecPerTrk, 63);				/* Number of sectors per track (for int13) */
 10697              		.loc 1 5640 18 is_stmt 0 view .LVU3613
 10698 0300 F823     		movs	r3, #248
 10699 0302 019A     		ldr	r2, [sp, #4]
 10700 0304 5375     		strb	r3, [r2, #21]
5641:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_word(buf + BPB_NumHeads, 255);				/* Number of heads (for int13) */
 10701              		.loc 1 5641 3 is_stmt 1 view .LVU3614
 10702 0306 3F21     		movs	r1, #63
 10703 0308 02F11800 		add	r0, r2, #24
 10704 030c FFF7FEFF 		bl	st_word
 10705              	.LVL1293:
5642:Middlewares/Third_Party/FatFs/src/ff.c **** 		st_dword(buf + BPB_HiddSec, b_vol);				/* Volume offset in the physical drive [sector] */
 10706              		.loc 1 5642 3 view .LVU3615
 10707 0310 FF21     		movs	r1, #255
 10708 0312 019A     		ldr	r2, [sp, #4]
 10709 0314 02F11A00 		add	r0, r2, #26
 10710 0318 FFF7FEFF 		bl	st_word
 10711              	.LVL1294:
5643:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (fmt == FS_FAT32) {
 10712              		.loc 1 5643 3 view .LVU3616
 10713 031c 5946     		mov	r1, fp
 10714 031e 019A     		ldr	r2, [sp, #4]
 10715 0320 02F11C00 		add	r0, r2, #28
 10716 0324 FFF7FEFF 		bl	st_dword
 10717              	.LVL1295:
5644:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BS_VolID32, GET_FATTIME());	/* VSN */
 10718              		.loc 1 5644 3 view .LVU3617
5644:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BS_VolID32, GET_FATTIME());	/* VSN */
 10719              		.loc 1 5644 6 is_stmt 0 view .LVU3618
 10720 0328 BAF1030F 		cmp	r10, #3
 10721 032c 7BD0     		beq	.L814
5654:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FATSz16, (WORD)sz_fat);	/* FAT size [sector] */
 10722              		.loc 1 5654 4 is_stmt 1 view .LVU3619
 10723 032e FFF7FEFF 		bl	get_fattime
 10724              	.LVL1296:
 10725 0332 0146     		mov	r1, r0
5654:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FATSz16, (WORD)sz_fat);	/* FAT size [sector] */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 350


 10726              		.loc 1 5654 4 is_stmt 0 discriminator 1 view .LVU3620
 10727 0334 019A     		ldr	r2, [sp, #4]
 10728 0336 02F12700 		add	r0, r2, #39
 10729 033a FFF7FEFF 		bl	st_dword
 10730              	.LVL1297:
5655:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_DrvNum] = 0x80;						/* Drive number (for int13) */
 10731              		.loc 1 5655 4 is_stmt 1 view .LVU3621
 10732 033e B1B2     		uxth	r1, r6
 10733 0340 019A     		ldr	r2, [sp, #4]
 10734 0342 02F11600 		add	r0, r2, #22
 10735 0346 FFF7FEFF 		bl	st_word
 10736              	.LVL1298:
5656:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig] = 0x29;						/* Extended boot signature */
 10737              		.loc 1 5656 4 view .LVU3622
5656:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig] = 0x29;						/* Extended boot signature */
 10738              		.loc 1 5656 19 is_stmt 0 view .LVU3623
 10739 034a 8023     		movs	r3, #128
 10740 034c 0198     		ldr	r0, [sp, #4]
 10741 034e 80F82430 		strb	r3, [r0, #36]
5657:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
 10742              		.loc 1 5657 4 is_stmt 1 view .LVU3624
5657:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab, "NO NAME    " "FAT     ", 19);	/* Volume label, FAT signature */
 10743              		.loc 1 5657 20 is_stmt 0 view .LVU3625
 10744 0352 2923     		movs	r3, #41
 10745 0354 80F82630 		strb	r3, [r0, #38]
5658:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10746              		.loc 1 5658 4 is_stmt 1 view .LVU3626
 10747 0358 1322     		movs	r2, #19
 10748 035a 8C49     		ldr	r1, .L822+4
 10749 035c 2B30     		adds	r0, r0, #43
 10750 035e FFF7FEFF 		bl	mem_cpy
 10751              	.LVL1299:
 10752              	.L756:
5660:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (disk_write(pdrv, buf, b_vol, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the VBR sector 
 10753              		.loc 1 5660 3 view .LVU3627
 10754 0362 019B     		ldr	r3, [sp, #4]
 10755 0364 03F5FF79 		add	r9, r3, #510
 10756 0368 4AF65521 		movw	r1, #43605
 10757 036c 4846     		mov	r0, r9
 10758 036e FFF7FEFF 		bl	st_word
 10759              	.LVL1300:
5661:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10760              		.loc 1 5661 3 view .LVU3628
5661:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10761              		.loc 1 5661 7 is_stmt 0 view .LVU3629
 10762 0372 0123     		movs	r3, #1
 10763 0374 5A46     		mov	r2, fp
 10764 0376 0199     		ldr	r1, [sp, #4]
 10765 0378 2046     		mov	r0, r4
 10766 037a FFF7FEFF 		bl	disk_write
 10767              	.LVL1301:
5661:Middlewares/Third_Party/FatFs/src/ff.c **** 
 10768              		.loc 1 5661 6 discriminator 1 view .LVU3630
 10769 037e 0028     		cmp	r0, #0
 10770 0380 40F07C81 		bne	.L794
5664:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 6, 1);		/* Write backup VBR (VBR + 6) */
 10771              		.loc 1 5664 3 is_stmt 1 view .LVU3631
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 351


5664:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 6, 1);		/* Write backup VBR (VBR + 6) */
 10772              		.loc 1 5664 6 is_stmt 0 view .LVU3632
 10773 0384 BAF1030F 		cmp	r10, #3
 10774 0388 7AD0     		beq	.L815
 10775              	.LVL1302:
 10776              	.L757:
5677:Middlewares/Third_Party/FatFs/src/ff.c **** 		sect = b_fat;		/* FAT start sector */
 10777              		.loc 1 5677 3 is_stmt 1 view .LVU3633
 10778 038a 2A46     		mov	r2, r5
 10779 038c 0021     		movs	r1, #0
 10780 038e 0198     		ldr	r0, [sp, #4]
 10781 0390 FFF7FEFF 		bl	mem_set
 10782              	.LVL1303:
5678:Middlewares/Third_Party/FatFs/src/ff.c **** 		for (i = 0; i < n_fats; i++) {			/* Initialize FATs each */
 10783              		.loc 1 5678 3 view .LVU3634
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10784              		.loc 1 5679 3 view .LVU3635
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10785              		.loc 1 5679 3 is_stmt 0 view .LVU3636
 10786 0394 DDF81880 		ldr	r8, [sp, #24]
 10787 0398 0597     		str	r7, [sp, #20]
 10788              	.LVL1304:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10789              		.loc 1 5679 3 view .LVU3637
 10790 039a CDF81C90 		str	r9, [sp, #28]
 10791              	.LVL1305:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10792              		.loc 1 5679 3 view .LVU3638
 10793 039e 5D46     		mov	r5, fp
 10794              	.LVL1306:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10795              		.loc 1 5679 3 view .LVU3639
 10796 03a0 DDF80CB0 		ldr	fp, [sp, #12]
 10797              	.LVL1307:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10798              		.loc 1 5679 3 view .LVU3640
 10799 03a4 DDF80490 		ldr	r9, [sp, #4]
 10800              	.LVL1308:
 10801              	.L758:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 10802              		.loc 1 5679 17 is_stmt 1 discriminator 1 view .LVU3641
 10803 03a8 029B     		ldr	r3, [sp, #8]
 10804 03aa 002B     		cmp	r3, #0
 10805 03ac 00F0A280 		beq	.L763
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 10806              		.loc 1 5697 35 is_stmt 0 view .LVU3642
 10807 03b0 CDF81880 		str	r8, [sp, #24]
 10808 03b4 059F     		ldr	r7, [sp, #20]
 10809 03b6 DDF81C90 		ldr	r9, [sp, #28]
 10810 03ba AB46     		mov	fp, r5
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 10811              		.loc 1 5697 3 is_stmt 1 view .LVU3643
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 10812              		.loc 1 5697 35 is_stmt 0 view .LVU3644
 10813 03bc BAF1030F 		cmp	r10, #3
 10814 03c0 00F0D780 		beq	.L816
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 352


 10815              		.loc 1 5697 35 view .LVU3645
 10816 03c4 089E     		ldr	r6, [sp, #32]
 10817              	.LVL1309:
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 10818              		.loc 1 5697 35 view .LVU3646
 10819 03c6 069F     		ldr	r7, [sp, #24]
 10820 03c8 CDF80890 		str	r9, [sp, #8]
 10821              	.LVL1310:
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 10822              		.loc 1 5697 35 view .LVU3647
 10823 03cc DDF80C80 		ldr	r8, [sp, #12]
 10824              	.LVL1311:
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 10825              		.loc 1 5697 35 view .LVU3648
 10826 03d0 DDF80490 		ldr	r9, [sp, #4]
 10827              	.LVL1312:
 10828              	.L765:
5698:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (nsect > sz_buf) ? sz_buf : nsect;
 10829              		.loc 1 5698 3 is_stmt 1 view .LVU3649
5699:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
 10830              		.loc 1 5699 4 view .LVU3650
5699:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
 10831              		.loc 1 5699 6 is_stmt 0 view .LVU3651
 10832 03d4 3546     		mov	r5, r6
 10833 03d6 4645     		cmp	r6, r8
 10834 03d8 28BF     		it	cs
 10835 03da 4546     		movcs	r5, r8
 10836              	.LVL1313:
5700:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
 10837              		.loc 1 5700 4 is_stmt 1 view .LVU3652
5700:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
 10838              		.loc 1 5700 8 is_stmt 0 view .LVU3653
 10839 03dc 2B46     		mov	r3, r5
 10840 03de 3A46     		mov	r2, r7
 10841 03e0 4946     		mov	r1, r9
 10842 03e2 2046     		mov	r0, r4
 10843 03e4 FFF7FEFF 		bl	disk_write
 10844              	.LVL1314:
5700:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
 10845              		.loc 1 5700 7 discriminator 1 view .LVU3654
 10846 03e8 0028     		cmp	r0, #0
 10847 03ea 40F04B81 		bne	.L797
5701:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
 10848              		.loc 1 5701 4 is_stmt 1 view .LVU3655
5701:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
 10849              		.loc 1 5701 9 is_stmt 0 view .LVU3656
 10850 03ee 2F44     		add	r7, r7, r5
 10851              	.LVL1315:
5701:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (nsect);
 10852              		.loc 1 5701 15 is_stmt 1 view .LVU3657
5702:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 10853              		.loc 1 5702 12 view .LVU3658
 10854 03f0 761B     		subs	r6, r6, r5
 10855              	.LVL1316:
5702:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 10856              		.loc 1 5702 12 is_stmt 0 view .LVU3659
 10857 03f2 EFD1     		bne	.L765
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 353


5709:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = 0x0C;		/* FAT32X */
 10858              		.loc 1 5709 6 view .LVU3660
 10859 03f4 DDF80890 		ldr	r9, [sp, #8]
5706:Middlewares/Third_Party/FatFs/src/ff.c **** 		sys = 0x07;			/* HPFS/NTFS/exFAT */
 10860              		.loc 1 5706 2 is_stmt 1 view .LVU3661
5709:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = 0x0C;		/* FAT32X */
 10861              		.loc 1 5709 3 view .LVU3662
5709:Middlewares/Third_Party/FatFs/src/ff.c **** 			sys = 0x0C;		/* FAT32X */
 10862              		.loc 1 5709 6 is_stmt 0 view .LVU3663
 10863 03f8 BAF1030F 		cmp	r10, #3
 10864 03fc 00F0D080 		beq	.L798
5712:Middlewares/Third_Party/FatFs/src/ff.c **** 				sys = 0x06;	/* FAT12/16 (>=64KS) */
 10865              		.loc 1 5712 4 is_stmt 1 view .LVU3664
5712:Middlewares/Third_Party/FatFs/src/ff.c **** 				sys = 0x06;	/* FAT12/16 (>=64KS) */
 10866              		.loc 1 5712 15 is_stmt 0 view .LVU3665
 10867 0400 0A9B     		ldr	r3, [sp, #40]
5712:Middlewares/Third_Party/FatFs/src/ff.c **** 				sys = 0x06;	/* FAT12/16 (>=64KS) */
 10868              		.loc 1 5712 7 view .LVU3666
 10869 0402 B3F5803F 		cmp	r3, #65536
 10870 0406 80F01181 		bcs	.L799
5715:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10871              		.loc 1 5715 5 is_stmt 1 view .LVU3667
5715:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10872              		.loc 1 5715 9 is_stmt 0 view .LVU3668
 10873 040a BAF1020F 		cmp	r10, #2
 10874 040e 00F0B980 		beq	.L817
5715:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10875              		.loc 1 5715 9 discriminator 2 view .LVU3669
 10876 0412 0127     		movs	r7, #1
 10877              	.LVL1317:
5715:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 10878              		.loc 1 5715 9 discriminator 2 view .LVU3670
 10879 0414 C5E0     		b	.L766
 10880              	.LVL1318:
 10881              	.L813:
5634:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (sz_vol < 0x10000) {
 10882              		.loc 1 5634 3 discriminator 1 view .LVU3671
 10883 0416 0021     		movs	r1, #0
 10884 0418 65E7     		b	.L752
 10885              	.L753:
5638:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10886              		.loc 1 5638 4 is_stmt 1 view .LVU3672
 10887 041a 019B     		ldr	r3, [sp, #4]
 10888 041c 03F12000 		add	r0, r3, #32
 10889 0420 FFF7FEFF 		bl	st_dword
 10890              	.LVL1319:
 10891 0424 6CE7     		b	.L754
 10892              	.L814:
5645:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_FATSz32, sz_fat);		/* FAT size [sector] */
 10893              		.loc 1 5645 4 view .LVU3673
 10894 0426 FFF7FEFF 		bl	get_fattime
 10895              	.LVL1320:
 10896 042a 0146     		mov	r1, r0
5645:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_FATSz32, sz_fat);		/* FAT size [sector] */
 10897              		.loc 1 5645 4 is_stmt 0 discriminator 1 view .LVU3674
 10898 042c 019A     		ldr	r2, [sp, #4]
 10899 042e 02F14300 		add	r0, r2, #67
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 354


 10900 0432 FFF7FEFF 		bl	st_dword
 10901              	.LVL1321:
5646:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + BPB_RootClus32, 2);			/* Root directory cluster # (2) */
 10902              		.loc 1 5646 4 is_stmt 1 view .LVU3675
 10903 0436 3146     		mov	r1, r6
 10904 0438 019A     		ldr	r2, [sp, #4]
 10905 043a 02F12400 		add	r0, r2, #36
 10906 043e FFF7FEFF 		bl	st_dword
 10907              	.LVL1322:
5647:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_FSInfo32, 1);				/* Offset of FSINFO sector (VBR + 1) */
 10908              		.loc 1 5647 4 view .LVU3676
 10909 0442 0221     		movs	r1, #2
 10910 0444 019A     		ldr	r2, [sp, #4]
 10911 0446 02F12C00 		add	r0, r2, #44
 10912 044a FFF7FEFF 		bl	st_dword
 10913              	.LVL1323:
5648:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BPB_BkBootSec32, 6);			/* Offset of backup VBR (VBR + 6) */
 10914              		.loc 1 5648 4 view .LVU3677
 10915 044e 0121     		movs	r1, #1
 10916 0450 019A     		ldr	r2, [sp, #4]
 10917 0452 02F13000 		add	r0, r2, #48
 10918 0456 FFF7FEFF 		bl	st_word
 10919              	.LVL1324:
5649:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_DrvNum32] = 0x80;					/* Drive number (for int13) */
 10920              		.loc 1 5649 4 view .LVU3678
 10921 045a 0621     		movs	r1, #6
 10922 045c 019A     		ldr	r2, [sp, #4]
 10923 045e 02F13200 		add	r0, r2, #50
 10924 0462 FFF7FEFF 		bl	st_word
 10925              	.LVL1325:
5650:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig32] = 0x29;					/* Extended boot signature */
 10926              		.loc 1 5650 4 view .LVU3679
5650:Middlewares/Third_Party/FatFs/src/ff.c **** 			buf[BS_BootSig32] = 0x29;					/* Extended boot signature */
 10927              		.loc 1 5650 21 is_stmt 0 view .LVU3680
 10928 0466 8023     		movs	r3, #128
 10929 0468 0198     		ldr	r0, [sp, #4]
 10930 046a 80F84030 		strb	r3, [r0, #64]
5651:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 10931              		.loc 1 5651 4 is_stmt 1 view .LVU3681
5651:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_cpy(buf + BS_VolLab32, "NO NAME    " "FAT32   ", 19);	/* Volume label, FAT signature */
 10932              		.loc 1 5651 22 is_stmt 0 view .LVU3682
 10933 046e 2923     		movs	r3, #41
 10934 0470 80F84230 		strb	r3, [r0, #66]
5652:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 10935              		.loc 1 5652 4 is_stmt 1 view .LVU3683
 10936 0474 1322     		movs	r2, #19
 10937 0476 4649     		ldr	r1, .L822+8
 10938 0478 4730     		adds	r0, r0, #71
 10939 047a FFF7FEFF 		bl	mem_cpy
 10940              	.LVL1326:
 10941 047e 70E7     		b	.L756
 10942              	.L815:
5665:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
 10943              		.loc 1 5665 4 view .LVU3684
 10944 0480 0123     		movs	r3, #1
 10945 0482 0BF10602 		add	r2, fp, #6
 10946 0486 0199     		ldr	r1, [sp, #4]
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 355


 10947 0488 2046     		mov	r0, r4
 10948 048a FFF7FEFF 		bl	disk_write
 10949              	.LVL1327:
5666:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_LeadSig, 0x41615252);
 10950              		.loc 1 5666 4 view .LVU3685
 10951 048e 4FF40072 		mov	r2, #512
 10952 0492 0021     		movs	r1, #0
 10953 0494 0198     		ldr	r0, [sp, #4]
 10954 0496 FFF7FEFF 		bl	mem_set
 10955              	.LVL1328:
5667:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_StrucSig, 0x61417272);
 10956              		.loc 1 5667 4 view .LVU3686
 10957 049a 3E49     		ldr	r1, .L822+12
 10958 049c 0198     		ldr	r0, [sp, #4]
 10959 049e FFF7FEFF 		bl	st_dword
 10960              	.LVL1329:
5668:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_Free_Count, n_clst - 1);	/* Number of free clusters */
 10961              		.loc 1 5668 4 view .LVU3687
 10962 04a2 3D49     		ldr	r1, .L822+16
 10963 04a4 019B     		ldr	r3, [sp, #4]
 10964 04a6 03F5F270 		add	r0, r3, #484
 10965 04aa FFF7FEFF 		bl	st_dword
 10966              	.LVL1330:
5669:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(buf + FSI_Nxt_Free, 2);			/* Last allocated cluster# */
 10967              		.loc 1 5669 4 view .LVU3688
 10968 04ae 08F1FF31 		add	r1, r8, #-1
 10969 04b2 019B     		ldr	r3, [sp, #4]
 10970 04b4 03F5F470 		add	r0, r3, #488
 10971 04b8 FFF7FEFF 		bl	st_dword
 10972              	.LVL1331:
5670:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);
 10973              		.loc 1 5670 4 view .LVU3689
 10974 04bc 0221     		movs	r1, #2
 10975 04be 019B     		ldr	r3, [sp, #4]
 10976 04c0 03F5F670 		add	r0, r3, #492
 10977 04c4 FFF7FEFF 		bl	st_dword
 10978              	.LVL1332:
5671:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 7, 1);		/* Write backup FSINFO (VBR + 7) */
 10979              		.loc 1 5671 4 view .LVU3690
 10980 04c8 4AF65521 		movw	r1, #43605
 10981 04cc 4846     		mov	r0, r9
 10982 04ce FFF7FEFF 		bl	st_word
 10983              	.LVL1333:
5672:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 1, 1);		/* Write original FSINFO (VBR + 1) */
 10984              		.loc 1 5672 4 view .LVU3691
 10985 04d2 0123     		movs	r3, #1
 10986 04d4 0BF10702 		add	r2, fp, #7
 10987 04d8 DDF80480 		ldr	r8, [sp, #4]
 10988              	.LVL1334:
5672:Middlewares/Third_Party/FatFs/src/ff.c **** 			disk_write(pdrv, buf, b_vol + 1, 1);		/* Write original FSINFO (VBR + 1) */
 10989              		.loc 1 5672 4 is_stmt 0 view .LVU3692
 10990 04dc 4146     		mov	r1, r8
 10991 04de 2046     		mov	r0, r4
 10992 04e0 FFF7FEFF 		bl	disk_write
 10993              	.LVL1335:
5673:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 10994              		.loc 1 5673 4 is_stmt 1 view .LVU3693
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 356


 10995 04e4 0123     		movs	r3, #1
 10996 04e6 0BEB0302 		add	r2, fp, r3
 10997 04ea 4146     		mov	r1, r8
 10998 04ec 2046     		mov	r0, r4
 10999 04ee FFF7FEFF 		bl	disk_write
 11000              	.LVL1336:
 11001 04f2 4AE7     		b	.L757
 11002              	.LVL1337:
 11003              	.L763:
5680:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 0, 0xFFFFFFF8);	/* Entry 0 */
 11004              		.loc 1 5680 4 view .LVU3694
5680:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 0, 0xFFFFFFF8);	/* Entry 0 */
 11005              		.loc 1 5680 7 is_stmt 0 view .LVU3695
 11006 04f4 BAF1030F 		cmp	r10, #3
 11007 04f8 27D0     		beq	.L818
5685:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 11008              		.loc 1 5685 5 is_stmt 1 view .LVU3696
 11009 04fa BAF1010F 		cmp	r10, #1
 11010 04fe 36D0     		beq	.L819
5685:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 11011              		.loc 1 5685 5 is_stmt 0 discriminator 2 view .LVU3697
 11012 0500 6FF00701 		mvn	r1, #7
 11013              	.L761:
5685:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 11014              		.loc 1 5685 5 discriminator 4 view .LVU3698
 11015 0504 4846     		mov	r0, r9
 11016 0506 FFF7FEFF 		bl	st_dword
 11017              	.LVL1338:
 11018              	.L760:
5685:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 11019              		.loc 1 5685 5 discriminator 2 view .LVU3699
 11020 050a 3746     		mov	r7, r6
 11021 050c CDF818A0 		str	r10, [sp, #24]
 11022              	.L762:
 11023              	.LVL1339:
5688:Middlewares/Third_Party/FatFs/src/ff.c **** 				n = (nsect > sz_buf) ? sz_buf : nsect;
 11024              		.loc 1 5688 4 is_stmt 1 view .LVU3700
5689:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
 11025              		.loc 1 5689 5 view .LVU3701
5689:Middlewares/Third_Party/FatFs/src/ff.c **** 				if (disk_write(pdrv, buf, sect, (UINT)n) != RES_OK) return FR_DISK_ERR;
 11026              		.loc 1 5689 7 is_stmt 0 view .LVU3702
 11027 0510 BA46     		mov	r10, r7
 11028 0512 5F45     		cmp	r7, fp
 11029 0514 28BF     		it	cs
 11030 0516 DA46     		movcs	r10, fp
 11031              	.LVL1340:
5690:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(buf, 0, ss);
 11032              		.loc 1 5690 5 is_stmt 1 view .LVU3703
5690:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(buf, 0, ss);
 11033              		.loc 1 5690 9 is_stmt 0 view .LVU3704
 11034 0518 5346     		mov	r3, r10
 11035 051a 4246     		mov	r2, r8
 11036 051c 4946     		mov	r1, r9
 11037 051e 2046     		mov	r0, r4
 11038 0520 FFF7FEFF 		bl	disk_write
 11039              	.LVL1341:
5690:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(buf, 0, ss);
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 357


 11040              		.loc 1 5690 8 discriminator 1 view .LVU3705
 11041 0524 0028     		cmp	r0, #0
 11042 0526 40F0AB80 		bne	.L796
5691:Middlewares/Third_Party/FatFs/src/ff.c **** 				sect += n; nsect -= n;
 11043              		.loc 1 5691 5 is_stmt 1 view .LVU3706
 11044 052a 4FF40072 		mov	r2, #512
 11045 052e 0021     		movs	r1, #0
 11046 0530 4846     		mov	r0, r9
 11047 0532 FFF7FEFF 		bl	mem_set
 11048              	.LVL1342:
5692:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (nsect);
 11049              		.loc 1 5692 5 view .LVU3707
5692:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (nsect);
 11050              		.loc 1 5692 10 is_stmt 0 view .LVU3708
 11051 0536 D044     		add	r8, r8, r10
 11052              	.LVL1343:
5692:Middlewares/Third_Party/FatFs/src/ff.c **** 			} while (nsect);
 11053              		.loc 1 5692 16 is_stmt 1 view .LVU3709
5693:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 11054              		.loc 1 5693 13 view .LVU3710
 11055 0538 B7EB0A07 		subs	r7, r7, r10
 11056              	.LVL1344:
5693:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 11057              		.loc 1 5693 13 is_stmt 0 view .LVU3711
 11058 053c E8D1     		bne	.L762
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 11059              		.loc 1 5679 28 discriminator 2 view .LVU3712
 11060 053e DDF818A0 		ldr	r10, [sp, #24]
 11061              	.LVL1345:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 11062              		.loc 1 5679 28 is_stmt 1 discriminator 2 view .LVU3713
 11063 0542 029B     		ldr	r3, [sp, #8]
 11064 0544 0133     		adds	r3, r3, #1
 11065 0546 0293     		str	r3, [sp, #8]
 11066              	.LVL1346:
5679:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (fmt == FS_FAT32) {
 11067              		.loc 1 5679 28 is_stmt 0 discriminator 2 view .LVU3714
 11068 0548 2EE7     		b	.L758
 11069              	.LVL1347:
 11070              	.L818:
5681:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 4, 0xFFFFFFFF);	/* Entry 1 */
 11071              		.loc 1 5681 5 is_stmt 1 view .LVU3715
 11072 054a 6FF00701 		mvn	r1, #7
 11073 054e 4846     		mov	r0, r9
 11074 0550 FFF7FEFF 		bl	st_dword
 11075              	.LVL1348:
5682:Middlewares/Third_Party/FatFs/src/ff.c **** 				st_dword(buf + 8, 0x0FFFFFFF);	/* Entry 2 (root directory) */
 11076              		.loc 1 5682 5 view .LVU3716
 11077 0554 4FF0FF31 		mov	r1, #-1
 11078 0558 09F10400 		add	r0, r9, #4
 11079 055c FFF7FEFF 		bl	st_dword
 11080              	.LVL1349:
5683:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 11081              		.loc 1 5683 5 view .LVU3717
 11082 0560 6FF07041 		mvn	r1, #-268435456
 11083 0564 09F10800 		add	r0, r9, #8
 11084 0568 FFF7FEFF 		bl	st_dword
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 358


 11085              	.LVL1350:
 11086 056c CDE7     		b	.L760
 11087              	.LVL1351:
 11088              	.L819:
5685:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 11089              		.loc 1 5685 5 is_stmt 0 discriminator 1 view .LVU3718
 11090 056e 0B49     		ldr	r1, .L822+20
 11091 0570 C8E7     		b	.L761
 11092              	.L816:
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 11093              		.loc 1 5697 35 discriminator 1 view .LVU3719
 11094 0572 3E46     		mov	r6, r7
 11095              	.LVL1352:
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 11096              		.loc 1 5697 35 discriminator 1 view .LVU3720
 11097 0574 4746     		mov	r7, r8
 11098 0576 CDF80890 		str	r9, [sp, #8]
 11099 057a DDF80C80 		ldr	r8, [sp, #12]
 11100              	.LVL1353:
5697:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 11101              		.loc 1 5697 35 discriminator 1 view .LVU3721
 11102 057e DDF80490 		ldr	r9, [sp, #4]
 11103 0582 27E7     		b	.L765
 11104              	.LVL1354:
 11105              	.L817:
5715:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 11106              		.loc 1 5715 9 discriminator 1 view .LVU3722
 11107 0584 0427     		movs	r7, #4
 11108              	.LVL1355:
5715:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
 11109              		.loc 1 5715 9 discriminator 1 view .LVU3723
 11110 0586 0CE0     		b	.L766
 11111              	.L823:
 11112              		.align	2
 11113              	.L822:
 11114 0588 00000000 		.word	.LC1
 11115 058c 20000000 		.word	.LC3
 11116 0590 0C000000 		.word	.LC2
 11117 0594 52526141 		.word	1096897106
 11118 0598 72724161 		.word	1631679090
 11119 059c F8FFFF00 		.word	16777208
 11120              	.LVL1356:
 11121              	.L798:
5710:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
 11122              		.loc 1 5710 8 view .LVU3724
 11123 05a0 0C27     		movs	r7, #12
 11124              	.LVL1357:
 11125              	.L766:
5721:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Update system ID in the partition table */
 11126              		.loc 1 5721 2 is_stmt 1 view .LVU3725
5727:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
 11127              		.loc 1 5727 3 view .LVU3726
5727:Middlewares/Third_Party/FatFs/src/ff.c **** 			mem_set(buf, 0, ss);
 11128              		.loc 1 5727 6 is_stmt 0 view .LVU3727
 11129 05a2 049B     		ldr	r3, [sp, #16]
 11130 05a4 D3BB     		cbnz	r3, .L767
5728:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);		/* MBR signature */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 359


 11131              		.loc 1 5728 4 is_stmt 1 view .LVU3728
 11132 05a6 4FF40072 		mov	r2, #512
 11133 05aa 0021     		movs	r1, #0
 11134 05ac 019E     		ldr	r6, [sp, #4]
 11135              	.LVL1358:
5728:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_word(buf + BS_55AA, 0xAA55);		/* MBR signature */
 11136              		.loc 1 5728 4 is_stmt 0 view .LVU3729
 11137 05ae 3046     		mov	r0, r6
 11138 05b0 FFF7FEFF 		bl	mem_set
 11139              	.LVL1359:
5729:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte = buf + MBR_Table;				/* Create partition table for single partition in the drive */
 11140              		.loc 1 5729 4 is_stmt 1 view .LVU3730
 11141 05b4 4AF65521 		movw	r1, #43605
 11142 05b8 4846     		mov	r0, r9
 11143 05ba FFF7FEFF 		bl	st_word
 11144              	.LVL1360:
5730:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_Boot] = 0;					/* Boot indicator */
 11145              		.loc 1 5730 4 view .LVU3731
5731:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StHead] = 1;				/* Start head */
 11146              		.loc 1 5731 4 view .LVU3732
5731:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StHead] = 1;				/* Start head */
 11147              		.loc 1 5731 18 is_stmt 0 view .LVU3733
 11148 05be 0025     		movs	r5, #0
 11149              	.LVL1361:
5731:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StHead] = 1;				/* Start head */
 11150              		.loc 1 5731 18 view .LVU3734
 11151 05c0 3146     		mov	r1, r6
 11152 05c2 86F8BE51 		strb	r5, [r6, #446]
5732:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StSec] = 1;					/* Start sector */
 11153              		.loc 1 5732 4 is_stmt 1 view .LVU3735
5732:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StSec] = 1;					/* Start sector */
 11154              		.loc 1 5732 20 is_stmt 0 view .LVU3736
 11155 05c6 0126     		movs	r6, #1
 11156              	.LVL1362:
5732:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StSec] = 1;					/* Start sector */
 11157              		.loc 1 5732 20 view .LVU3737
 11158 05c8 81F8BF61 		strb	r6, [r1, #447]
5733:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StCyl] = 0;					/* Start cylinder */
 11159              		.loc 1 5733 4 is_stmt 1 view .LVU3738
5733:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_StCyl] = 0;					/* Start cylinder */
 11160              		.loc 1 5733 19 is_stmt 0 view .LVU3739
 11161 05cc 81F8C061 		strb	r6, [r1, #448]
5734:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_System] = sys;				/* System type */
 11162              		.loc 1 5734 4 is_stmt 1 view .LVU3740
5734:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_System] = sys;				/* System type */
 11163              		.loc 1 5734 19 is_stmt 0 view .LVU3741
 11164 05d0 81F8C151 		strb	r5, [r1, #449]
5735:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (b_vol + sz_vol) / (63 * 255);	/* (End CHS may be invalid) */
 11165              		.loc 1 5735 4 is_stmt 1 view .LVU3742
5735:Middlewares/Third_Party/FatFs/src/ff.c **** 			n = (b_vol + sz_vol) / (63 * 255);	/* (End CHS may be invalid) */
 11166              		.loc 1 5735 20 is_stmt 0 view .LVU3743
 11167 05d4 81F8C271 		strb	r7, [r1, #450]
5736:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdHead] = 254;				/* End head */
 11168              		.loc 1 5736 4 is_stmt 1 view .LVU3744
5736:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdHead] = 254;				/* End head */
 11169              		.loc 1 5736 15 is_stmt 0 view .LVU3745
 11170 05d8 0A9B     		ldr	r3, [sp, #40]
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 360


 11171 05da 5B44     		add	r3, r3, fp
5736:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdHead] = 254;				/* End head */
 11172              		.loc 1 5736 6 view .LVU3746
 11173 05dc 43F6C162 		movw	r2, #16065
 11174 05e0 B3FBF2F3 		udiv	r3, r3, r2
 11175              	.LVL1363:
5737:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdSec] = (BYTE)(n >> 2 | 63);	/* End sector */
 11176              		.loc 1 5737 4 is_stmt 1 view .LVU3747
5737:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdSec] = (BYTE)(n >> 2 | 63);	/* End sector */
 11177              		.loc 1 5737 20 is_stmt 0 view .LVU3748
 11178 05e4 FE22     		movs	r2, #254
 11179 05e6 81F8C321 		strb	r2, [r1, #451]
5738:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdCyl] = (BYTE)n;			/* End cylinder */
 11180              		.loc 1 5738 4 is_stmt 1 view .LVU3749
5738:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdCyl] = (BYTE)n;			/* End cylinder */
 11181              		.loc 1 5738 30 is_stmt 0 view .LVU3750
 11182 05ea 9A08     		lsrs	r2, r3, #2
5738:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdCyl] = (BYTE)n;			/* End cylinder */
 11183              		.loc 1 5738 21 view .LVU3751
 11184 05ec 42F03F02 		orr	r2, r2, #63
5738:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdCyl] = (BYTE)n;			/* End cylinder */
 11185              		.loc 1 5738 19 view .LVU3752
 11186 05f0 0F46     		mov	r7, r1
 11187              	.LVL1364:
5738:Middlewares/Third_Party/FatFs/src/ff.c **** 			pte[PTE_EdCyl] = (BYTE)n;			/* End cylinder */
 11188              		.loc 1 5738 19 view .LVU3753
 11189 05f2 81F8C421 		strb	r2, [r1, #452]
5739:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_StLba, b_vol);	/* Start offset in LBA */
 11190              		.loc 1 5739 4 is_stmt 1 view .LVU3754
5739:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_StLba, b_vol);	/* Start offset in LBA */
 11191              		.loc 1 5739 19 is_stmt 0 view .LVU3755
 11192 05f6 81F8C531 		strb	r3, [r1, #453]
5740:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_SizLba, sz_vol);	/* Size in sectors */
 11193              		.loc 1 5740 4 is_stmt 1 view .LVU3756
 11194 05fa 5946     		mov	r1, fp
 11195              	.LVL1365:
5740:Middlewares/Third_Party/FatFs/src/ff.c **** 			st_dword(pte + PTE_SizLba, sz_vol);	/* Size in sectors */
 11196              		.loc 1 5740 4 is_stmt 0 view .LVU3757
 11197 05fc 07F5E370 		add	r0, r7, #454
 11198 0600 FFF7FEFF 		bl	st_dword
 11199              	.LVL1366:
5741:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (disk_write(pdrv, buf, 0, 1) != RES_OK) return FR_DISK_ERR;	/* Write it to the MBR */
 11200              		.loc 1 5741 4 is_stmt 1 view .LVU3758
 11201 0604 0A99     		ldr	r1, [sp, #40]
 11202 0606 07F5E570 		add	r0, r7, #458
 11203 060a FFF7FEFF 		bl	st_dword
 11204              	.LVL1367:
5742:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 11205              		.loc 1 5742 4 view .LVU3759
5742:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 11206              		.loc 1 5742 8 is_stmt 0 view .LVU3760
 11207 060e 3346     		mov	r3, r6
 11208 0610 2A46     		mov	r2, r5
 11209 0612 3946     		mov	r1, r7
 11210 0614 2046     		mov	r0, r4
 11211 0616 FFF7FEFF 		bl	disk_write
 11212              	.LVL1368:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 361


5742:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 11213              		.loc 1 5742 7 discriminator 1 view .LVU3761
 11214 061a A8BB     		cbnz	r0, .L801
 11215              	.LVL1369:
 11216              	.L767:
5746:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11217              		.loc 1 5746 2 is_stmt 1 view .LVU3762
5746:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11218              		.loc 1 5746 6 is_stmt 0 view .LVU3763
 11219 061c 0022     		movs	r2, #0
 11220 061e 1146     		mov	r1, r2
 11221 0620 2046     		mov	r0, r4
 11222 0622 FFF7FEFF 		bl	disk_ioctl
 11223              	.LVL1370:
5746:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11224              		.loc 1 5746 5 discriminator 1 view .LVU3764
 11225 0626 40B1     		cbz	r0, .L726
5746:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11226              		.loc 1 5746 55 discriminator 1 view .LVU3765
 11227 0628 0120     		movs	r0, #1
 11228 062a 06E0     		b	.L726
 11229              	.LVL1371:
 11230              	.L799:
5713:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 11231              		.loc 1 5713 9 view .LVU3766
 11232 062c 0627     		movs	r7, #6
 11233              	.LVL1372:
5713:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {
 11234              		.loc 1 5713 9 view .LVU3767
 11235 062e B8E7     		b	.L766
 11236              	.LVL1373:
 11237              	.L768:
5328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
 11238              		.loc 1 5328 22 discriminator 1 view .LVU3768
 11239 0630 0B20     		movs	r0, #11
 11240              	.LVL1374:
5328:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (FatFs[vol]) FatFs[vol]->fs_type = 0;	/* Clear the volume */
 11241              		.loc 1 5328 22 discriminator 1 view .LVU3769
 11242 0632 02E0     		b	.L726
 11243              	.LVL1375:
 11244              	.L769:
5335:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 11245              		.loc 1 5335 32 discriminator 1 view .LVU3770
 11246 0634 0320     		movs	r0, #3
 11247              	.LVL1376:
5335:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (stat & STA_PROTECT) return FR_WRITE_PROTECTED;
 11248              		.loc 1 5335 32 discriminator 1 view .LVU3771
 11249 0636 00E0     		b	.L726
 11250              	.LVL1377:
 11251              	.L770:
5336:Middlewares/Third_Party/FatFs/src/ff.c **** 	if (disk_ioctl(pdrv, GET_BLOCK_SIZE, &sz_blk) != RES_OK || !sz_blk || sz_blk > 32768 || (sz_blk & 
 11252              		.loc 1 5336 33 discriminator 1 view .LVU3772
 11253 0638 0A20     		movs	r0, #10
 11254              	.LVL1378:
 11255              	.L726:
5749:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11256              		.loc 1 5749 1 view .LVU3773
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 362


 11257 063a 0DB0     		add	sp, sp, #52
 11258              	.LCFI117:
 11259              		.cfi_remember_state
 11260              		.cfi_def_cfa_offset 36
 11261              		@ sp needed
 11262 063c BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 11263              	.LVL1379:
 11264              	.L771:
 11265              	.LCFI118:
 11266              		.cfi_restore_state
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 11267              		.loc 1 5344 72 discriminator 7 view .LVU3774
 11268 0640 1320     		movs	r0, #19
 11269 0642 FAE7     		b	.L726
 11270              	.L772:
 11271 0644 1320     		movs	r0, #19
 11272 0646 F8E7     		b	.L726
 11273              	.L773:
5344:Middlewares/Third_Party/FatFs/src/ff.c **** 	au /= ss;	/* Cluster size in unit of sector */
 11274              		.loc 1 5344 72 discriminator 7 view .LVU3775
 11275 0648 1320     		movs	r0, #19
 11276 064a F6E7     		b	.L726
 11277              	.LVL1380:
 11278              	.L774:
5351:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11279              		.loc 1 5351 23 discriminator 1 view .LVU3776
 11280 064c 0E20     		movs	r0, #14
 11281 064e F4E7     		b	.L726
 11282              	.LVL1381:
 11283              	.L775:
5364:Middlewares/Third_Party/FatFs/src/ff.c **** 		b_vol = (opt & FM_SFD) ? 0 : 63;		/* Volume start sector */
 11284              		.loc 1 5364 69 discriminator 1 view .LVU3777
 11285 0650 0120     		movs	r0, #1
 11286 0652 F2E7     		b	.L726
 11287              	.LVL1382:
 11288              	.L777:
5366:Middlewares/Third_Party/FatFs/src/ff.c **** 		sz_vol -= b_vol;						/* Volume size */
 11289              		.loc 1 5366 30 discriminator 1 view .LVU3778
 11290 0654 0E20     		movs	r0, #14
 11291 0656 F0E7     		b	.L726
 11292              	.L778:
5369:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11293              		.loc 1 5369 27 discriminator 1 view .LVU3779
 11294 0658 0E20     		movs	r0, #14
 11295 065a EEE7     		b	.L726
 11296              	.L779:
5378:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (opt & FM_FAT32) {	/* FAT32 possible? */
 11297              		.loc 1 5378 24 discriminator 1 view .LVU3780
 11298 065c 1320     		movs	r0, #19
 11299 065e ECE7     		b	.L726
 11300              	.L782:
5384:Middlewares/Third_Party/FatFs/src/ff.c **** 		fmt = FS_FAT16;
 11301              		.loc 1 5384 31 discriminator 1 view .LVU3781
 11302 0660 1320     		movs	r0, #19
 11303 0662 EAE7     		b	.L726
 11304              	.LVL1383:
 11305              	.L784:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 363


5564:Middlewares/Third_Party/FatFs/src/ff.c **** 			} else {				/* FAT12/16 volume */
 11306              		.loc 1 5564 59 discriminator 1 view .LVU3782
 11307 0664 0E20     		movs	r0, #14
 11308 0666 E8E7     		b	.L726
 11309              	.LVL1384:
 11310              	.L786:
5593:Middlewares/Third_Party/FatFs/src/ff.c **** 			n_clst = (sz_vol - sz_rsv - sz_fat * n_fats - sz_dir) / pau;
 11311              		.loc 1 5593 51 discriminator 1 view .LVU3783
 11312 0668 0E20     		movs	r0, #14
 11313 066a E6E7     		b	.L726
 11314              	.LVL1385:
 11315              	.L787:
5598:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 11316              		.loc 1 5598 13 view .LVU3784
 11317 066c 0E20     		movs	r0, #14
 11318 066e E4E7     		b	.L726
 11319              	.LVL1386:
 11320              	.L790:
5610:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 11321              		.loc 1 5610 13 view .LVU3785
 11322 0670 0E20     		movs	r0, #14
 11323 0672 E2E7     		b	.L726
 11324              	.LVL1387:
 11325              	.L791:
5614:Middlewares/Third_Party/FatFs/src/ff.c **** 				}
 11326              		.loc 1 5614 13 view .LVU3786
 11327 0674 0E20     		movs	r0, #14
 11328 0676 E0E7     		b	.L726
 11329              	.LVL1388:
 11330              	.L792:
5617:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11331              		.loc 1 5617 54 discriminator 1 view .LVU3787
 11332 0678 0E20     		movs	r0, #14
 11333 067a DEE7     		b	.L726
 11334              	.LVL1389:
 11335              	.L794:
5661:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11336              		.loc 1 5661 57 discriminator 1 view .LVU3788
 11337 067c 0120     		movs	r0, #1
 11338 067e DCE7     		b	.L726
 11339              	.LVL1390:
 11340              	.L796:
5690:Middlewares/Third_Party/FatFs/src/ff.c **** 				mem_set(buf, 0, ss);
 11341              		.loc 1 5690 64 discriminator 1 view .LVU3789
 11342 0680 0120     		movs	r0, #1
 11343 0682 DAE7     		b	.L726
 11344              	.LVL1391:
 11345              	.L797:
5700:Middlewares/Third_Party/FatFs/src/ff.c **** 			sect += n; nsect -= n;
 11346              		.loc 1 5700 63 discriminator 1 view .LVU3790
 11347 0684 0120     		movs	r0, #1
 11348 0686 D8E7     		b	.L726
 11349              	.LVL1392:
 11350              	.L801:
5742:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 11351              		.loc 1 5742 54 discriminator 1 view .LVU3791
 11352 0688 0120     		movs	r0, #1
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 364


 11353 068a D6E7     		b	.L726
 11354              		.cfi_endproc
 11355              	.LFE394:
 11357              		.section	.text.f_gets,"ax",%progbits
 11358              		.align	1
 11359              		.global	f_gets
 11360              		.syntax unified
 11361              		.thumb
 11362              		.thumb_func
 11364              	f_gets:
 11365              	.LVL1393:
 11366              	.LFB395:
5835:Middlewares/Third_Party/FatFs/src/ff.c **** 	int n = 0;
 11367              		.loc 1 5835 1 is_stmt 1 view -0
 11368              		.cfi_startproc
 11369              		@ args = 0, pretend = 0, frame = 8
 11370              		@ frame_needed = 0, uses_anonymous_args = 0
5835:Middlewares/Third_Party/FatFs/src/ff.c **** 	int n = 0;
 11371              		.loc 1 5835 1 is_stmt 0 view .LVU3793
 11372 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 11373              	.LCFI119:
 11374              		.cfi_def_cfa_offset 24
 11375              		.cfi_offset 4, -24
 11376              		.cfi_offset 5, -20
 11377              		.cfi_offset 6, -16
 11378              		.cfi_offset 7, -12
 11379              		.cfi_offset 8, -8
 11380              		.cfi_offset 14, -4
 11381 0004 82B0     		sub	sp, sp, #8
 11382              	.LCFI120:
 11383              		.cfi_def_cfa_offset 32
 11384 0006 8046     		mov	r8, r0
 11385 0008 0E46     		mov	r6, r1
 11386 000a 1746     		mov	r7, r2
5836:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, *p = buff;
 11387              		.loc 1 5836 2 is_stmt 1 view .LVU3794
 11388              	.LVL1394:
5837:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s[2];
 11389              		.loc 1 5837 2 view .LVU3795
5838:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT rc;
 11390              		.loc 1 5838 2 view .LVU3796
5839:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11391              		.loc 1 5839 2 view .LVU3797
5842:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
 11392              		.loc 1 5842 2 view .LVU3798
5837:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE s[2];
 11393              		.loc 1 5837 12 is_stmt 0 view .LVU3799
 11394 000c 0446     		mov	r4, r0
5836:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, *p = buff;
 11395              		.loc 1 5836 6 view .LVU3800
 11396 000e 0025     		movs	r5, #0
5842:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
 11397              		.loc 1 5842 8 view .LVU3801
 11398 0010 01E0     		b	.L825
 11399              	.LVL1395:
 11400              	.L830:
5842:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 365


 11401              		.loc 1 5842 8 view .LVU3802
 11402 0012 A446     		mov	ip, r4
 11403              	.LVL1396:
 11404              	.L827:
5842:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
 11405              		.loc 1 5842 8 view .LVU3803
 11406 0014 6446     		mov	r4, ip
 11407              	.LVL1397:
 11408              	.L825:
5842:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
 11409              		.loc 1 5842 11 is_stmt 1 view .LVU3804
5842:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
 11410              		.loc 1 5842 17 is_stmt 0 view .LVU3805
 11411 0016 731E     		subs	r3, r6, #1
5842:Middlewares/Third_Party/FatFs/src/ff.c **** #if _LFN_UNICODE
 11412              		.loc 1 5842 11 view .LVU3806
 11413 0018 AB42     		cmp	r3, r5
 11414 001a 13DD     		ble	.L826
5887:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (rc != 1) break;
 11415              		.loc 1 5887 3 is_stmt 1 view .LVU3807
 11416 001c 6B46     		mov	r3, sp
 11417 001e 0122     		movs	r2, #1
 11418 0020 01A9     		add	r1, sp, #4
 11419 0022 3846     		mov	r0, r7
 11420 0024 FFF7FEFF 		bl	f_read
 11421              	.LVL1398:
5888:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
 11422              		.loc 1 5888 3 view .LVU3808
5888:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
 11423              		.loc 1 5888 10 is_stmt 0 view .LVU3809
 11424 0028 009B     		ldr	r3, [sp]
5888:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = s[0];
 11425              		.loc 1 5888 6 view .LVU3810
 11426 002a 012B     		cmp	r3, #1
 11427 002c 0AD1     		bne	.L826
5889:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 11428              		.loc 1 5889 3 is_stmt 1 view .LVU3811
5889:Middlewares/Third_Party/FatFs/src/ff.c **** #endif
 11429              		.loc 1 5889 5 is_stmt 0 view .LVU3812
 11430 002e 9DF80430 		ldrb	r3, [sp, #4]	@ zero_extendqisi2
 11431              	.LVL1399:
5891:Middlewares/Third_Party/FatFs/src/ff.c **** 		*p++ = c;
 11432              		.loc 1 5891 3 is_stmt 1 view .LVU3813
5891:Middlewares/Third_Party/FatFs/src/ff.c **** 		*p++ = c;
 11433              		.loc 1 5891 6 is_stmt 0 view .LVU3814
 11434 0032 0D2B     		cmp	r3, #13
 11435 0034 EDD0     		beq	.L830
5892:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
 11436              		.loc 1 5892 3 is_stmt 1 view .LVU3815
5892:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
 11437              		.loc 1 5892 5 is_stmt 0 view .LVU3816
 11438 0036 A446     		mov	ip, r4
 11439              	.LVL1400:
5892:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
 11440              		.loc 1 5892 8 view .LVU3817
 11441 0038 0CF8013B 		strb	r3, [ip], #1
 11442              	.LVL1401:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 366


5893:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
 11443              		.loc 1 5893 3 is_stmt 1 view .LVU3818
5893:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '\n') break;		/* Break on EOL */
 11444              		.loc 1 5893 4 is_stmt 0 view .LVU3819
 11445 003c 0135     		adds	r5, r5, #1
 11446              	.LVL1402:
5894:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 11447              		.loc 1 5894 3 is_stmt 1 view .LVU3820
5894:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
 11448              		.loc 1 5894 6 is_stmt 0 view .LVU3821
 11449 003e 0A2B     		cmp	r3, #10
 11450 0040 E8D1     		bne	.L827
5892:Middlewares/Third_Party/FatFs/src/ff.c **** 		n++;
 11451              		.loc 1 5892 5 view .LVU3822
 11452 0042 6446     		mov	r4, ip
 11453              	.LVL1403:
 11454              	.L826:
5896:Middlewares/Third_Party/FatFs/src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
 11455              		.loc 1 5896 2 is_stmt 1 view .LVU3823
5896:Middlewares/Third_Party/FatFs/src/ff.c **** 	return n ? buff : 0;			/* When no data read (eof or error), return with error. */
 11456              		.loc 1 5896 5 is_stmt 0 view .LVU3824
 11457 0044 0023     		movs	r3, #0
 11458 0046 2370     		strb	r3, [r4]
5897:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11459              		.loc 1 5897 2 is_stmt 1 view .LVU3825
5897:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11460              		.loc 1 5897 18 is_stmt 0 view .LVU3826
 11461 0048 1DB1     		cbz	r5, .L832
5897:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11462              		.loc 1 5897 18 discriminator 1 view .LVU3827
 11463 004a 4046     		mov	r0, r8
 11464              	.L824:
5898:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11465              		.loc 1 5898 1 view .LVU3828
 11466 004c 02B0     		add	sp, sp, #8
 11467              	.LCFI121:
 11468              		.cfi_remember_state
 11469              		.cfi_def_cfa_offset 24
 11470              		@ sp needed
 11471 004e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 11472              	.LVL1404:
 11473              	.L832:
 11474              	.LCFI122:
 11475              		.cfi_restore_state
5897:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11476              		.loc 1 5897 18 discriminator 2 view .LVU3829
 11477 0052 0020     		movs	r0, #0
5897:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11478              		.loc 1 5897 18 view .LVU3830
 11479 0054 FAE7     		b	.L824
 11480              		.cfi_endproc
 11481              	.LFE395:
 11483              		.section	.text.f_putc,"ax",%progbits
 11484              		.align	1
 11485              		.global	f_putc
 11486              		.syntax unified
 11487              		.thumb
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 367


 11488              		.thumb_func
 11490              	f_putc:
 11491              	.LVL1405:
 11492              	.LFB399:
5995:Middlewares/Third_Party/FatFs/src/ff.c **** 
5996:Middlewares/Third_Party/FatFs/src/ff.c **** 
5997:Middlewares/Third_Party/FatFs/src/ff.c **** 
5998:Middlewares/Third_Party/FatFs/src/ff.c **** int f_putc (
5999:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c,	/* A character to be output */
6000:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp		/* Pointer to the file object */
6001:Middlewares/Third_Party/FatFs/src/ff.c **** )
6002:Middlewares/Third_Party/FatFs/src/ff.c **** {
 11493              		.loc 1 6002 1 is_stmt 1 view -0
 11494              		.cfi_startproc
 11495              		@ args = 0, pretend = 0, frame = 80
 11496              		@ frame_needed = 0, uses_anonymous_args = 0
 11497              		.loc 1 6002 1 is_stmt 0 view .LVU3832
 11498 0000 10B5     		push	{r4, lr}
 11499              	.LCFI123:
 11500              		.cfi_def_cfa_offset 8
 11501              		.cfi_offset 4, -8
 11502              		.cfi_offset 14, -4
 11503 0002 94B0     		sub	sp, sp, #80
 11504              	.LCFI124:
 11505              		.cfi_def_cfa_offset 88
 11506 0004 0446     		mov	r4, r0
6003:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
 11507              		.loc 1 6003 2 is_stmt 1 view .LVU3833
6004:Middlewares/Third_Party/FatFs/src/ff.c **** 
6005:Middlewares/Third_Party/FatFs/src/ff.c **** 
6006:Middlewares/Third_Party/FatFs/src/ff.c **** 	putc_init(&pb, fp);
 11508              		.loc 1 6006 2 view .LVU3834
 11509 0006 01A8     		add	r0, sp, #4
 11510              	.LVL1406:
 11511              		.loc 1 6006 2 is_stmt 0 view .LVU3835
 11512 0008 FFF7FEFF 		bl	putc_init
 11513              	.LVL1407:
6007:Middlewares/Third_Party/FatFs/src/ff.c **** 	putc_bfd(&pb, c);	/* Put the character */
 11514              		.loc 1 6007 2 is_stmt 1 view .LVU3836
 11515 000c 2146     		mov	r1, r4
 11516 000e 01A8     		add	r0, sp, #4
 11517 0010 FFF7FEFF 		bl	putc_bfd
 11518              	.LVL1408:
6008:Middlewares/Third_Party/FatFs/src/ff.c **** 	return putc_flush(&pb);
 11519              		.loc 1 6008 2 view .LVU3837
 11520              		.loc 1 6008 9 is_stmt 0 view .LVU3838
 11521 0014 01A8     		add	r0, sp, #4
 11522 0016 FFF7FEFF 		bl	putc_flush
 11523              	.LVL1409:
6009:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11524              		.loc 1 6009 1 view .LVU3839
 11525 001a 14B0     		add	sp, sp, #80
 11526              	.LCFI125:
 11527              		.cfi_def_cfa_offset 8
 11528              		@ sp needed
 11529 001c 10BD     		pop	{r4, pc}
 11530              		.loc 1 6009 1 view .LVU3840
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 368


 11531              		.cfi_endproc
 11532              	.LFE399:
 11534              		.section	.text.f_puts,"ax",%progbits
 11535              		.align	1
 11536              		.global	f_puts
 11537              		.syntax unified
 11538              		.thumb
 11539              		.thumb_func
 11541              	f_puts:
 11542              	.LVL1410:
 11543              	.LFB400:
6010:Middlewares/Third_Party/FatFs/src/ff.c **** 
6011:Middlewares/Third_Party/FatFs/src/ff.c **** 
6012:Middlewares/Third_Party/FatFs/src/ff.c **** 
6013:Middlewares/Third_Party/FatFs/src/ff.c **** 
6014:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
6015:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a string to the file                                              */
6016:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
6017:Middlewares/Third_Party/FatFs/src/ff.c **** 
6018:Middlewares/Third_Party/FatFs/src/ff.c **** int f_puts (
6019:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* str,	/* Pointer to the string to be output */
6020:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp				/* Pointer to the file object */
6021:Middlewares/Third_Party/FatFs/src/ff.c **** )
6022:Middlewares/Third_Party/FatFs/src/ff.c **** {
 11544              		.loc 1 6022 1 is_stmt 1 view -0
 11545              		.cfi_startproc
 11546              		@ args = 0, pretend = 0, frame = 80
 11547              		@ frame_needed = 0, uses_anonymous_args = 0
 11548              		.loc 1 6022 1 is_stmt 0 view .LVU3842
 11549 0000 10B5     		push	{r4, lr}
 11550              	.LCFI126:
 11551              		.cfi_def_cfa_offset 8
 11552              		.cfi_offset 4, -8
 11553              		.cfi_offset 14, -4
 11554 0002 94B0     		sub	sp, sp, #80
 11555              	.LCFI127:
 11556              		.cfi_def_cfa_offset 88
 11557 0004 0446     		mov	r4, r0
6023:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
 11558              		.loc 1 6023 2 is_stmt 1 view .LVU3843
6024:Middlewares/Third_Party/FatFs/src/ff.c **** 
6025:Middlewares/Third_Party/FatFs/src/ff.c **** 
6026:Middlewares/Third_Party/FatFs/src/ff.c **** 	putc_init(&pb, fp);
 11559              		.loc 1 6026 2 view .LVU3844
 11560 0006 01A8     		add	r0, sp, #4
 11561              	.LVL1411:
 11562              		.loc 1 6026 2 is_stmt 0 view .LVU3845
 11563 0008 FFF7FEFF 		bl	putc_init
 11564              	.LVL1412:
6027:Middlewares/Third_Party/FatFs/src/ff.c **** 	while (*str) putc_bfd(&pb, *str++);		/* Put the string */
 11565              		.loc 1 6027 2 is_stmt 1 view .LVU3846
 11566              		.loc 1 6027 8 is_stmt 0 view .LVU3847
 11567 000c 03E0     		b	.L837
 11568              	.L838:
 11569              		.loc 1 6027 15 is_stmt 1 discriminator 2 view .LVU3848
 11570              		.loc 1 6027 33 is_stmt 0 discriminator 2 view .LVU3849
 11571 000e 0134     		adds	r4, r4, #1
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 369


 11572              	.LVL1413:
 11573              		.loc 1 6027 15 discriminator 2 view .LVU3850
 11574 0010 01A8     		add	r0, sp, #4
 11575 0012 FFF7FEFF 		bl	putc_bfd
 11576              	.LVL1414:
 11577              	.L837:
 11578              		.loc 1 6027 9 is_stmt 1 discriminator 1 view .LVU3851
 11579 0016 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 11580 0018 0029     		cmp	r1, #0
 11581 001a F8D1     		bne	.L838
6028:Middlewares/Third_Party/FatFs/src/ff.c **** 	return putc_flush(&pb);
 11582              		.loc 1 6028 2 view .LVU3852
 11583              		.loc 1 6028 9 is_stmt 0 view .LVU3853
 11584 001c 01A8     		add	r0, sp, #4
 11585 001e FFF7FEFF 		bl	putc_flush
 11586              	.LVL1415:
6029:Middlewares/Third_Party/FatFs/src/ff.c **** }
 11587              		.loc 1 6029 1 view .LVU3854
 11588 0022 14B0     		add	sp, sp, #80
 11589              	.LCFI128:
 11590              		.cfi_def_cfa_offset 8
 11591              		@ sp needed
 11592 0024 10BD     		pop	{r4, pc}
 11593              		.loc 1 6029 1 view .LVU3855
 11594              		.cfi_endproc
 11595              	.LFE400:
 11597              		.section	.text.f_printf,"ax",%progbits
 11598              		.align	1
 11599              		.global	f_printf
 11600              		.syntax unified
 11601              		.thumb
 11602              		.thumb_func
 11604              	f_printf:
 11605              	.LVL1416:
 11606              	.LFB401:
6030:Middlewares/Third_Party/FatFs/src/ff.c **** 
6031:Middlewares/Third_Party/FatFs/src/ff.c **** 
6032:Middlewares/Third_Party/FatFs/src/ff.c **** 
6033:Middlewares/Third_Party/FatFs/src/ff.c **** 
6034:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
6035:Middlewares/Third_Party/FatFs/src/ff.c **** /* Put a formatted string to the file                                    */
6036:Middlewares/Third_Party/FatFs/src/ff.c **** /*-----------------------------------------------------------------------*/
6037:Middlewares/Third_Party/FatFs/src/ff.c **** 
6038:Middlewares/Third_Party/FatFs/src/ff.c **** int f_printf (
6039:Middlewares/Third_Party/FatFs/src/ff.c **** 	FIL* fp,			/* Pointer to the file object */
6040:Middlewares/Third_Party/FatFs/src/ff.c **** 	const TCHAR* fmt,	/* Pointer to the format string */
6041:Middlewares/Third_Party/FatFs/src/ff.c **** 	...					/* Optional arguments... */
6042:Middlewares/Third_Party/FatFs/src/ff.c **** )
6043:Middlewares/Third_Party/FatFs/src/ff.c **** {
 11607              		.loc 1 6043 1 is_stmt 1 view -0
 11608              		.cfi_startproc
 11609              		@ args = 4, pretend = 12, frame = 112
 11610              		@ frame_needed = 0, uses_anonymous_args = 1
 11611              		.loc 1 6043 1 is_stmt 0 view .LVU3857
 11612 0000 0EB4     		push	{r1, r2, r3}
 11613              	.LCFI129:
 11614              		.cfi_def_cfa_offset 12
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 370


 11615              		.cfi_offset 1, -12
 11616              		.cfi_offset 2, -8
 11617              		.cfi_offset 3, -4
 11618 0002 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 11619              	.LCFI130:
 11620              		.cfi_def_cfa_offset 44
 11621              		.cfi_offset 4, -44
 11622              		.cfi_offset 5, -40
 11623              		.cfi_offset 6, -36
 11624              		.cfi_offset 7, -32
 11625              		.cfi_offset 8, -28
 11626              		.cfi_offset 9, -24
 11627              		.cfi_offset 10, -20
 11628              		.cfi_offset 14, -16
 11629 0006 9DB0     		sub	sp, sp, #116
 11630              	.LCFI131:
 11631              		.cfi_def_cfa_offset 160
 11632 0008 0146     		mov	r1, r0
 11633 000a 25AC     		add	r4, sp, #148
 11634 000c 54F8045B 		ldr	r5, [r4], #4
6044:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_list arp;
 11635              		.loc 1 6044 2 is_stmt 1 view .LVU3858
6045:Middlewares/Third_Party/FatFs/src/ff.c **** 	putbuff pb;
 11636              		.loc 1 6045 2 view .LVU3859
6046:Middlewares/Third_Party/FatFs/src/ff.c **** 	BYTE f, r;
 11637              		.loc 1 6046 2 view .LVU3860
6047:Middlewares/Third_Party/FatFs/src/ff.c **** 	UINT i, j, w;
 11638              		.loc 1 6047 2 view .LVU3861
6048:Middlewares/Third_Party/FatFs/src/ff.c **** 	DWORD v;
 11639              		.loc 1 6048 2 view .LVU3862
6049:Middlewares/Third_Party/FatFs/src/ff.c **** 	TCHAR c, d, str[32], *p;
 11640              		.loc 1 6049 2 view .LVU3863
6050:Middlewares/Third_Party/FatFs/src/ff.c **** 
6051:Middlewares/Third_Party/FatFs/src/ff.c **** 
6052:Middlewares/Third_Party/FatFs/src/ff.c **** 	putc_init(&pb, fp);
 11641              		.loc 1 6052 2 view .LVU3864
 11642 0010 08A8     		add	r0, sp, #32
 11643              	.LVL1417:
 11644              		.loc 1 6052 2 is_stmt 0 view .LVU3865
 11645 0012 FFF7FEFF 		bl	putc_init
 11646              	.LVL1418:
6053:Middlewares/Third_Party/FatFs/src/ff.c **** 
6054:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_start(arp, fmt);
 11647              		.loc 1 6054 2 is_stmt 1 view .LVU3866
 11648 0016 1B94     		str	r4, [sp, #108]
 11649              	.LVL1419:
 11650              	.L841:
6055:Middlewares/Third_Party/FatFs/src/ff.c **** 
6056:Middlewares/Third_Party/FatFs/src/ff.c **** 	for (;;) {
 11651              		.loc 1 6056 2 view .LVU3867
6057:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
 11652              		.loc 1 6057 3 view .LVU3868
 11653              		.loc 1 6057 11 is_stmt 0 view .LVU3869
 11654 0018 2C46     		mov	r4, r5
 11655              	.LVL1420:
 11656              		.loc 1 6057 5 view .LVU3870
 11657 001a 14F8011B 		ldrb	r1, [r4], #1	@ zero_extendqisi2
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 371


 11658              	.LVL1421:
6058:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
 11659              		.loc 1 6058 3 is_stmt 1 view .LVU3871
 11660              		.loc 1 6058 6 is_stmt 0 view .LVU3872
 11661 001e 0029     		cmp	r1, #0
 11662 0020 00F00881 		beq	.L842
6059:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c != '%') {				/* Non escape character */
 11663              		.loc 1 6059 3 is_stmt 1 view .LVU3873
 11664              		.loc 1 6059 6 is_stmt 0 view .LVU3874
 11665 0024 2529     		cmp	r1, #37
 11666 0026 04D0     		beq	.L843
6060:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, c);
 11667              		.loc 1 6060 4 is_stmt 1 view .LVU3875
 11668 0028 08A8     		add	r0, sp, #32
 11669 002a FFF7FEFF 		bl	putc_bfd
 11670              	.LVL1422:
6061:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
 11671              		.loc 1 6061 4 view .LVU3876
6057:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 0) break;			/* End of string */
 11672              		.loc 1 6057 11 is_stmt 0 view .LVU3877
 11673 002e 2546     		mov	r5, r4
 11674              		.loc 1 6061 4 view .LVU3878
 11675 0030 F2E7     		b	.L841
 11676              	.LVL1423:
 11677              	.L843:
6062:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6063:Middlewares/Third_Party/FatFs/src/ff.c **** 		w = f = 0;
 11678              		.loc 1 6063 3 is_stmt 1 view .LVU3879
6064:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
 11679              		.loc 1 6064 3 view .LVU3880
 11680              		.loc 1 6064 11 is_stmt 0 view .LVU3881
 11681 0032 AB1C     		adds	r3, r5, #2
 11682              	.LVL1424:
 11683              		.loc 1 6064 5 view .LVU3882
 11684 0034 2178     		ldrb	r1, [r4]	@ zero_extendqisi2
 11685              	.LVL1425:
6065:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '0') {				/* Flag: '0' padding */
 11686              		.loc 1 6065 3 is_stmt 1 view .LVU3883
 11687              		.loc 1 6065 6 is_stmt 0 view .LVU3884
 11688 0036 3029     		cmp	r1, #48
 11689 0038 05D0     		beq	.L892
6066:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
6067:Middlewares/Third_Party/FatFs/src/ff.c **** 		} else {
6068:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (c == '-') {			/* Flag: left justified */
 11690              		.loc 1 6068 4 is_stmt 1 view .LVU3885
 11691              		.loc 1 6068 7 is_stmt 0 view .LVU3886
 11692 003a 2D29     		cmp	r1, #45
 11693 003c 07D0     		beq	.L893
6064:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == '0') {				/* Flag: '0' padding */
 11694              		.loc 1 6064 11 view .LVU3887
 11695 003e 1D46     		mov	r5, r3
6063:Middlewares/Third_Party/FatFs/src/ff.c **** 		c = *fmt++;
 11696              		.loc 1 6063 9 view .LVU3888
 11697 0040 0026     		movs	r6, #0
 11698              	.LVL1426:
 11699              	.L846:
6066:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 372


 11700              		.loc 1 6066 6 view .LVU3889
 11701 0042 0024     		movs	r4, #0
 11702 0044 0EE0     		b	.L847
 11703              	.LVL1427:
 11704              	.L892:
6066:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
 11705              		.loc 1 6066 4 is_stmt 1 view .LVU3890
6066:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
 11706              		.loc 1 6066 11 view .LVU3891
6066:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
 11707              		.loc 1 6066 19 is_stmt 0 view .LVU3892
 11708 0046 0335     		adds	r5, r5, #3
 11709              	.LVL1428:
6066:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
 11710              		.loc 1 6066 13 view .LVU3893
 11711 0048 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 11712              	.LVL1429:
6066:Middlewares/Third_Party/FatFs/src/ff.c **** 			f = 1; c = *fmt++;
 11713              		.loc 1 6066 6 view .LVU3894
 11714 004a 0126     		movs	r6, #1
 11715 004c F9E7     		b	.L846
 11716              	.LVL1430:
 11717              	.L893:
6069:Middlewares/Third_Party/FatFs/src/ff.c **** 				f = 2; c = *fmt++;
 11718              		.loc 1 6069 5 is_stmt 1 view .LVU3895
 11719              		.loc 1 6069 12 view .LVU3896
 11720              		.loc 1 6069 20 is_stmt 0 view .LVU3897
 11721 004e 0335     		adds	r5, r5, #3
 11722              	.LVL1431:
 11723              		.loc 1 6069 14 view .LVU3898
 11724 0050 6178     		ldrb	r1, [r4, #1]	@ zero_extendqisi2
 11725              	.LVL1432:
 11726              		.loc 1 6069 7 view .LVU3899
 11727 0052 0226     		movs	r6, #2
 11728 0054 F5E7     		b	.L846
 11729              	.LVL1433:
 11730              	.L848:
6070:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
6071:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6072:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (IsDigit(c)) {		/* Precision */
6073:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = w * 10 + c - '0';
 11731              		.loc 1 6073 4 is_stmt 1 view .LVU3900
 11732              		.loc 1 6073 10 is_stmt 0 view .LVU3901
 11733 0056 04EB8404 		add	r4, r4, r4, lsl #2
 11734              	.LVL1434:
 11735              		.loc 1 6073 15 view .LVU3902
 11736 005a 01EB4404 		add	r4, r1, r4, lsl #1
 11737              		.loc 1 6073 6 view .LVU3903
 11738 005e 303C     		subs	r4, r4, #48
 11739              	.LVL1435:
6074:Middlewares/Third_Party/FatFs/src/ff.c **** 			c = *fmt++;
 11740              		.loc 1 6074 4 is_stmt 1 view .LVU3904
 11741              		.loc 1 6074 6 is_stmt 0 view .LVU3905
 11742 0060 15F8011B 		ldrb	r1, [r5], #1	@ zero_extendqisi2
 11743              	.LVL1436:
 11744              	.L847:
6072:Middlewares/Third_Party/FatFs/src/ff.c **** 			w = w * 10 + c - '0';
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 373


 11745              		.loc 1 6072 10 is_stmt 1 view .LVU3906
 11746 0064 A1F13003 		sub	r3, r1, #48
 11747 0068 DBB2     		uxtb	r3, r3
 11748 006a 092B     		cmp	r3, #9
 11749 006c F3D9     		bls	.L848
6075:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6076:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (c == 'l' || c == 'L') {	/* Prefix: Size is long int */
 11750              		.loc 1 6076 3 view .LVU3907
 11751              		.loc 1 6076 6 is_stmt 0 view .LVU3908
 11752 006e 4C29     		cmp	r1, #76
 11753 0070 18BF     		it	ne
 11754 0072 6C29     		cmpne	r1, #108
 11755 0074 03D1     		bne	.L849
6077:Middlewares/Third_Party/FatFs/src/ff.c **** 			f |= 4; c = *fmt++;
 11756              		.loc 1 6077 4 is_stmt 1 view .LVU3909
 11757              		.loc 1 6077 6 is_stmt 0 view .LVU3910
 11758 0076 46F00406 		orr	r6, r6, #4
 11759              	.LVL1437:
 11760              		.loc 1 6077 12 is_stmt 1 view .LVU3911
 11761              		.loc 1 6077 14 is_stmt 0 view .LVU3912
 11762 007a 15F8011B 		ldrb	r1, [r5], #1	@ zero_extendqisi2
 11763              	.LVL1438:
 11764              	.L849:
6078:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6079:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (!c) break;
 11765              		.loc 1 6079 3 is_stmt 1 view .LVU3913
 11766              		.loc 1 6079 6 is_stmt 0 view .LVU3914
 11767 007e 0029     		cmp	r1, #0
 11768 0080 00F0D880 		beq	.L842
6080:Middlewares/Third_Party/FatFs/src/ff.c **** 		d = c;
 11769              		.loc 1 6080 3 is_stmt 1 view .LVU3915
 11770              	.LVL1439:
6081:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (IsLower(d)) d -= 0x20;
 11771              		.loc 1 6081 3 view .LVU3916
 11772              		.loc 1 6081 7 is_stmt 0 view .LVU3917
 11773 0084 A1F16103 		sub	r3, r1, #97
 11774 0088 DBB2     		uxtb	r3, r3
 11775              		.loc 1 6081 6 view .LVU3918
 11776 008a 192B     		cmp	r3, #25
 11777 008c 14D8     		bhi	.L885
 11778              		.loc 1 6081 19 is_stmt 1 discriminator 1 view .LVU3919
 11779              		.loc 1 6081 21 is_stmt 0 discriminator 1 view .LVU3920
 11780 008e A1F12003 		sub	r3, r1, #32
 11781 0092 DBB2     		uxtb	r3, r3
 11782              	.LVL1440:
 11783              	.L850:
6082:Middlewares/Third_Party/FatFs/src/ff.c **** 		switch (d) {				/* Type is... */
 11784              		.loc 1 6082 3 is_stmt 1 view .LVU3921
 11785 0094 A3F14202 		sub	r2, r3, #66
 11786 0098 162A     		cmp	r2, #22
 11787 009a 5DD8     		bhi	.L851
 11788 009c DFE802F0 		tbb	[pc, r2]
 11789              	.L853:
 11790 00a0 60       		.byte	(.L858-.L853)/2
 11791 00a1 3D       		.byte	(.L857-.L853)/2
 11792 00a2 45       		.byte	(.L854-.L853)/2
 11793 00a3 5C       		.byte	(.L851-.L853)/2
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 374


 11794 00a4 5C       		.byte	(.L851-.L853)/2
 11795 00a5 5C       		.byte	(.L851-.L853)/2
 11796 00a6 5C       		.byte	(.L851-.L853)/2
 11797 00a7 5C       		.byte	(.L851-.L853)/2
 11798 00a8 5C       		.byte	(.L851-.L853)/2
 11799 00a9 5C       		.byte	(.L851-.L853)/2
 11800 00aa 5C       		.byte	(.L851-.L853)/2
 11801 00ab 5C       		.byte	(.L851-.L853)/2
 11802 00ac 5C       		.byte	(.L851-.L853)/2
 11803 00ad 62       		.byte	(.L886-.L853)/2
 11804 00ae 5C       		.byte	(.L851-.L853)/2
 11805 00af 5C       		.byte	(.L851-.L853)/2
 11806 00b0 5C       		.byte	(.L851-.L853)/2
 11807 00b1 0E       		.byte	(.L855-.L853)/2
 11808 00b2 5C       		.byte	(.L851-.L853)/2
 11809 00b3 45       		.byte	(.L854-.L853)/2
 11810 00b4 5C       		.byte	(.L851-.L853)/2
 11811 00b5 5C       		.byte	(.L851-.L853)/2
 11812 00b6 5A       		.byte	(.L852-.L853)/2
 11813              	.LVL1441:
 11814 00b7 00       		.p2align 1
 11815              	.L885:
6080:Middlewares/Third_Party/FatFs/src/ff.c **** 		d = c;
 11816              		.loc 1 6080 5 is_stmt 0 view .LVU3922
 11817 00b8 0B46     		mov	r3, r1
 11818 00ba EBE7     		b	.L850
 11819              	.LVL1442:
 11820              	.L855:
6083:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'S' :					/* String */
6084:Middlewares/Third_Party/FatFs/src/ff.c **** 			p = va_arg(arp, TCHAR*);
 11821              		.loc 1 6084 4 is_stmt 1 view .LVU3923
 11822              		.loc 1 6084 6 is_stmt 0 view .LVU3924
 11823 00bc 1B9B     		ldr	r3, [sp, #108]
 11824              	.LVL1443:
 11825              		.loc 1 6084 6 view .LVU3925
 11826 00be 1A1D     		adds	r2, r3, #4
 11827              	.LVL1444:
 11828              		.loc 1 6084 6 view .LVU3926
 11829 00c0 1B92     		str	r2, [sp, #108]
 11830 00c2 D3F80080 		ldr	r8, [r3]
6085:Middlewares/Third_Party/FatFs/src/ff.c **** 			for (j = 0; p[j]; j++) ;
 11831              		.loc 1 6085 4 is_stmt 1 view .LVU3927
 11832              	.LVL1445:
 11833              		.loc 1 6085 11 is_stmt 0 view .LVU3928
 11834 00c6 0027     		movs	r7, #0
 11835              		.loc 1 6085 4 view .LVU3929
 11836 00c8 00E0     		b	.L859
 11837              	.LVL1446:
 11838              	.L860:
 11839              		.loc 1 6085 23 is_stmt 1 discriminator 3 view .LVU3930
 11840 00ca 0137     		adds	r7, r7, #1
 11841              	.LVL1447:
 11842              	.L859:
 11843              		.loc 1 6085 16 discriminator 1 view .LVU3931
 11844              		.loc 1 6085 17 is_stmt 0 discriminator 1 view .LVU3932
 11845 00cc 18F80730 		ldrb	r3, [r8, r7]	@ zero_extendqisi2
 11846              		.loc 1 6085 16 discriminator 1 view .LVU3933
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 375


 11847 00d0 002B     		cmp	r3, #0
 11848 00d2 FAD1     		bne	.L860
6086:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (!(f & 2)) {
 11849              		.loc 1 6086 4 is_stmt 1 view .LVU3934
 11850              		.loc 1 6086 7 is_stmt 0 view .LVU3935
 11851 00d4 16F0020F 		tst	r6, #2
 11852 00d8 10D1     		bne	.L864
 11853 00da 05E0     		b	.L861
 11854              	.LVL1448:
 11855              	.L863:
6087:Middlewares/Third_Party/FatFs/src/ff.c **** 				while (j++ < w) putc_bfd(&pb, ' ');
 11856              		.loc 1 6087 21 is_stmt 1 discriminator 2 view .LVU3936
 11857 00dc 2021     		movs	r1, #32
 11858 00de 0DEB0100 		add	r0, sp, r1
 11859 00e2 FFF7FEFF 		bl	putc_bfd
 11860              	.LVL1449:
 11861              		.loc 1 6087 13 is_stmt 0 discriminator 1 view .LVU3937
 11862 00e6 3746     		mov	r7, r6
 11863              	.LVL1450:
 11864              	.L861:
 11865              		.loc 1 6087 16 is_stmt 1 discriminator 1 view .LVU3938
 11866              		.loc 1 6087 13 is_stmt 0 discriminator 1 view .LVU3939
 11867 00e8 7E1C     		adds	r6, r7, #1
 11868              	.LVL1451:
 11869              		.loc 1 6087 16 discriminator 1 view .LVU3940
 11870 00ea A742     		cmp	r7, r4
 11871 00ec F6D3     		bcc	.L863
 11872              		.loc 1 6087 13 discriminator 1 view .LVU3941
 11873 00ee 3746     		mov	r7, r6
 11874 00f0 04E0     		b	.L864
 11875              	.LVL1452:
 11876              	.L865:
6088:Middlewares/Third_Party/FatFs/src/ff.c **** 			}
6089:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (*p) putc_bfd(&pb, *p++);
 11877              		.loc 1 6089 15 is_stmt 1 discriminator 2 view .LVU3942
 11878              		.loc 1 6089 31 is_stmt 0 discriminator 2 view .LVU3943
 11879 00f2 08F10108 		add	r8, r8, #1
 11880              	.LVL1453:
 11881              		.loc 1 6089 15 discriminator 2 view .LVU3944
 11882 00f6 08A8     		add	r0, sp, #32
 11883 00f8 FFF7FEFF 		bl	putc_bfd
 11884              	.LVL1454:
 11885              	.L864:
 11886              		.loc 1 6089 11 is_stmt 1 discriminator 1 view .LVU3945
 11887 00fc 98F80010 		ldrb	r1, [r8]	@ zero_extendqisi2
 11888 0100 0029     		cmp	r1, #0
 11889 0102 F6D1     		bne	.L865
 11890              		.loc 1 6089 11 is_stmt 0 discriminator 1 view .LVU3946
 11891 0104 05E0     		b	.L866
 11892              	.LVL1455:
 11893              	.L867:
6090:Middlewares/Third_Party/FatFs/src/ff.c **** 			while (j++ < w) putc_bfd(&pb, ' ');
 11894              		.loc 1 6090 20 is_stmt 1 discriminator 2 view .LVU3947
 11895 0106 2021     		movs	r1, #32
 11896 0108 0DEB0100 		add	r0, sp, r1
 11897 010c FFF7FEFF 		bl	putc_bfd
 11898              	.LVL1456:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 376


 11899              		.loc 1 6090 12 is_stmt 0 discriminator 1 view .LVU3948
 11900 0110 3746     		mov	r7, r6
 11901              	.LVL1457:
 11902              	.L866:
 11903              		.loc 1 6090 15 is_stmt 1 discriminator 1 view .LVU3949
 11904              		.loc 1 6090 12 is_stmt 0 discriminator 1 view .LVU3950
 11905 0112 7E1C     		adds	r6, r7, #1
 11906              	.LVL1458:
 11907              		.loc 1 6090 15 discriminator 1 view .LVU3951
 11908 0114 A742     		cmp	r7, r4
 11909 0116 F6D3     		bcc	.L867
 11910 0118 7EE7     		b	.L841
 11911              	.LVL1459:
 11912              	.L857:
6091:Middlewares/Third_Party/FatFs/src/ff.c **** 			continue;
6092:Middlewares/Third_Party/FatFs/src/ff.c **** 
6093:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'C' :					/* Character */
6094:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, (TCHAR)va_arg(arp, int)); continue;
 11913              		.loc 1 6094 4 is_stmt 1 view .LVU3952
 11914              		.loc 1 6094 25 is_stmt 0 view .LVU3953
 11915 011a 1B9B     		ldr	r3, [sp, #108]
 11916              	.LVL1460:
 11917              		.loc 1 6094 25 view .LVU3954
 11918 011c 1A1D     		adds	r2, r3, #4
 11919              	.LVL1461:
 11920              		.loc 1 6094 25 view .LVU3955
 11921 011e 1B92     		str	r2, [sp, #108]
 11922              		.loc 1 6094 4 discriminator 1 view .LVU3956
 11923 0120 1978     		ldrb	r1, [r3]	@ zero_extendqisi2
 11924              	.LVL1462:
 11925              		.loc 1 6094 4 discriminator 1 view .LVU3957
 11926 0122 08A8     		add	r0, sp, #32
 11927 0124 FFF7FEFF 		bl	putc_bfd
 11928              	.LVL1463:
 11929              		.loc 1 6094 44 is_stmt 1 discriminator 2 view .LVU3958
 11930              		.loc 1 6094 44 is_stmt 0 view .LVU3959
 11931 0128 76E7     		b	.L841
 11932              	.LVL1464:
 11933              	.L854:
6095:Middlewares/Third_Party/FatFs/src/ff.c **** 
6096:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'B' :					/* Binary */
6097:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 2; break;
6098:Middlewares/Third_Party/FatFs/src/ff.c **** 
6099:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'O' :					/* Octal */
6100:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 8; break;
6101:Middlewares/Third_Party/FatFs/src/ff.c **** 
6102:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'D' :					/* Signed decimal */
6103:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'U' :					/* Unsigned decimal */
6104:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 10; break;
 11934              		.loc 1 6104 4 is_stmt 1 view .LVU3960
 11935              		.loc 1 6104 12 view .LVU3961
 11936              		.loc 1 6104 6 is_stmt 0 view .LVU3962
 11937 012a 0A20     		movs	r0, #10
 11938              	.LVL1465:
 11939              	.L856:
6105:Middlewares/Third_Party/FatFs/src/ff.c **** 
6106:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'X' :					/* Hexdecimal */
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 377


6107:Middlewares/Third_Party/FatFs/src/ff.c **** 			r = 16; break;
6108:Middlewares/Third_Party/FatFs/src/ff.c **** 
6109:Middlewares/Third_Party/FatFs/src/ff.c **** 		default:					/* Unknown type (pass-through) */
6110:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, c); continue;
6111:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6112:Middlewares/Third_Party/FatFs/src/ff.c **** 
6113:Middlewares/Third_Party/FatFs/src/ff.c **** 		/* Get an argument and put it in numeral */
6114:Middlewares/Third_Party/FatFs/src/ff.c **** 		v = (f & 4) ? (DWORD)va_arg(arp, long) : ((d == 'D') ? (DWORD)(long)va_arg(arp, int) : (DWORD)va_
 11940              		.loc 1 6114 3 is_stmt 1 view .LVU3963
 11941              		.loc 1 6114 42 is_stmt 0 view .LVU3964
 11942 012c 16F0040F 		tst	r6, #4
 11943 0130 1AD0     		beq	.L868
 11944              		.loc 1 6114 24 discriminator 1 view .LVU3965
 11945 0132 1B9A     		ldr	r2, [sp, #108]
 11946 0134 171D     		adds	r7, r2, #4
 11947 0136 1B97     		str	r7, [sp, #108]
 11948 0138 1268     		ldr	r2, [r2]
 11949              	.L869:
 11950              	.LVL1466:
6115:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 11951              		.loc 1 6115 3 is_stmt 1 view .LVU3966
 11952              		.loc 1 6115 16 is_stmt 0 view .LVU3967
 11953 013a D70F     		lsrs	r7, r2, #31
 11954 013c 442B     		cmp	r3, #68
 11955 013e 14BF     		ite	ne
 11956 0140 0027     		movne	r7, #0
 11957 0142 07F00107 		andeq	r7, r7, #1
 11958              		.loc 1 6115 6 view .LVU3968
 11959 0146 17B1     		cbz	r7, .L871
6116:Middlewares/Third_Party/FatFs/src/ff.c **** 			v = 0 - v;
 11960              		.loc 1 6116 4 is_stmt 1 view .LVU3969
 11961              		.loc 1 6116 6 is_stmt 0 view .LVU3970
 11962 0148 5242     		rsbs	r2, r2, #0
 11963              	.LVL1467:
6117:Middlewares/Third_Party/FatFs/src/ff.c **** 			f |= 8;
 11964              		.loc 1 6117 4 is_stmt 1 view .LVU3971
 11965              		.loc 1 6117 6 is_stmt 0 view .LVU3972
 11966 014a 46F00806 		orr	r6, r6, #8
 11967              	.LVL1468:
 11968              	.L871:
6118:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
6119:Middlewares/Third_Party/FatFs/src/ff.c **** 		i = 0;
 11969              		.loc 1 6119 3 is_stmt 1 view .LVU3973
 11970              		.loc 1 6119 5 is_stmt 0 view .LVU3974
 11971 014e 4FF0000C 		mov	ip, #0
 11972 0152 28E0     		b	.L874
 11973              	.LVL1469:
 11974              	.L852:
6107:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11975              		.loc 1 6107 4 is_stmt 1 view .LVU3975
6107:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11976              		.loc 1 6107 12 view .LVU3976
6107:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11977              		.loc 1 6107 6 is_stmt 0 view .LVU3977
 11978 0154 1020     		movs	r0, #16
6107:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11979              		.loc 1 6107 12 view .LVU3978
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 378


 11980 0156 E9E7     		b	.L856
 11981              	.LVL1470:
 11982              	.L851:
6110:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 11983              		.loc 1 6110 4 is_stmt 1 view .LVU3979
 11984 0158 08A8     		add	r0, sp, #32
 11985 015a FFF7FEFF 		bl	putc_bfd
 11986              	.LVL1471:
6110:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 11987              		.loc 1 6110 22 discriminator 1 view .LVU3980
6110:Middlewares/Third_Party/FatFs/src/ff.c **** 		}
 11988              		.loc 1 6110 22 is_stmt 0 view .LVU3981
 11989 015e 5BE7     		b	.L841
 11990              	.LVL1472:
 11991              	.L858:
6082:Middlewares/Third_Party/FatFs/src/ff.c **** 		case 'S' :					/* String */
 11992              		.loc 1 6082 3 view .LVU3982
 11993 0160 0220     		movs	r0, #2
 11994 0162 E3E7     		b	.L856
 11995              	.L886:
6100:Middlewares/Third_Party/FatFs/src/ff.c **** 
 11996              		.loc 1 6100 6 view .LVU3983
 11997 0164 0820     		movs	r0, #8
 11998 0166 E1E7     		b	.L856
 11999              	.LVL1473:
 12000              	.L868:
6114:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 12001              		.loc 1 6114 88 discriminator 2 view .LVU3984
 12002 0168 442B     		cmp	r3, #68
 12003 016a 04D0     		beq	.L894
6114:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 12004              		.loc 1 6114 88 discriminator 5 view .LVU3985
 12005 016c 1B9A     		ldr	r2, [sp, #108]
 12006 016e 171D     		adds	r7, r2, #4
 12007 0170 1B97     		str	r7, [sp, #108]
 12008 0172 1268     		ldr	r2, [r2]
 12009 0174 E1E7     		b	.L869
 12010              	.L894:
6114:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (d == 'D' && (v & 0x80000000)) {
 12011              		.loc 1 6114 71 discriminator 4 view .LVU3986
 12012 0176 1B9A     		ldr	r2, [sp, #108]
 12013 0178 171D     		adds	r7, r2, #4
 12014 017a 1B97     		str	r7, [sp, #108]
 12015 017c 1268     		ldr	r2, [r2]
 12016 017e DCE7     		b	.L869
 12017              	.LVL1474:
 12018              	.L895:
6120:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
6121:Middlewares/Third_Party/FatFs/src/ff.c **** 			d = (TCHAR)(v % r); v /= r;
6122:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 12019              		.loc 1 6122 17 discriminator 2 view .LVU3987
 12020 0180 2727     		movs	r7, #39
 12021              	.L873:
 12022              		.loc 1 6122 17 discriminator 5 view .LVU3988
 12023 0182 3B44     		add	r3, r3, r7
 12024              	.LVL1475:
 12025              		.loc 1 6122 17 discriminator 5 view .LVU3989
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 379


 12026 0184 DBB2     		uxtb	r3, r3
 12027              	.LVL1476:
 12028              	.L872:
6123:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 12029              		.loc 1 6123 4 is_stmt 1 view .LVU3990
 12030              		.loc 1 6123 9 is_stmt 0 view .LVU3991
 12031 0186 0CF10107 		add	r7, ip, #1
 12032              	.LVL1477:
 12033              		.loc 1 6123 17 view .LVU3992
 12034 018a 3033     		adds	r3, r3, #48
 12035              	.LVL1478:
 12036              		.loc 1 6123 13 view .LVU3993
 12037 018c 0CF17009 		add	r9, ip, #112
 12038 0190 E944     		add	r9, sp, r9
 12039 0192 09F8703C 		strb	r3, [r9, #-112]
6124:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (v && i < sizeof str / sizeof str[0]);
 12040              		.loc 1 6124 14 is_stmt 1 view .LVU3994
 12041              		.loc 1 6124 19 is_stmt 0 view .LVU3995
 12042 0196 1F2F     		cmp	r7, #31
 12043 0198 8CBF     		ite	hi
 12044 019a 0023     		movhi	r3, #0
 12045              	.LVL1479:
 12046              		.loc 1 6124 19 view .LVU3996
 12047 019c 0123     		movls	r3, #1
 12048              		.loc 1 6124 14 view .LVU3997
 12049 019e C645     		cmp	lr, r8
 12050 01a0 0FD8     		bhi	.L890
 12051 01a2 73B1     		cbz	r3, .L890
6123:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 12052              		.loc 1 6123 9 view .LVU3998
 12053 01a4 BC46     		mov	ip, r7
 12054              	.LVL1480:
 12055              	.L874:
6120:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 12056              		.loc 1 6120 3 is_stmt 1 view .LVU3999
6121:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 12057              		.loc 1 6121 4 view .LVU4000
6121:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 12058              		.loc 1 6121 18 is_stmt 0 view .LVU4001
 12059 01a6 8646     		mov	lr, r0
 12060 01a8 B2FBF0F7 		udiv	r7, r2, r0
 12061 01ac 00FB1723 		mls	r3, r0, r7, r2
6121:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 12062              		.loc 1 6121 6 view .LVU4002
 12063 01b0 DBB2     		uxtb	r3, r3
 12064              	.LVL1481:
6121:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 12065              		.loc 1 6121 24 is_stmt 1 view .LVU4003
 12066 01b2 9046     		mov	r8, r2
6121:Middlewares/Third_Party/FatFs/src/ff.c **** 			if (d > 9) d += (c == 'x') ? 0x27 : 0x07;
 12067              		.loc 1 6121 26 is_stmt 0 view .LVU4004
 12068 01b4 3A46     		mov	r2, r7
 12069              	.LVL1482:
6122:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 12070              		.loc 1 6122 4 is_stmt 1 view .LVU4005
6122:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 12071              		.loc 1 6122 7 is_stmt 0 view .LVU4006
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 380


 12072 01b6 092B     		cmp	r3, #9
 12073 01b8 E5D9     		bls	.L872
6122:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 12074              		.loc 1 6122 15 is_stmt 1 discriminator 1 view .LVU4007
6122:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 12075              		.loc 1 6122 17 is_stmt 0 discriminator 1 view .LVU4008
 12076 01ba 7829     		cmp	r1, #120
 12077 01bc E0D0     		beq	.L895
6122:Middlewares/Third_Party/FatFs/src/ff.c **** 			str[i++] = d + '0';
 12078              		.loc 1 6122 17 discriminator 3 view .LVU4009
 12079 01be 0727     		movs	r7, #7
 12080 01c0 DFE7     		b	.L873
 12081              	.LVL1483:
 12082              	.L890:
6125:Middlewares/Third_Party/FatFs/src/ff.c **** 		if (f & 8) str[i++] = '-';
 12083              		.loc 1 6125 3 is_stmt 1 view .LVU4010
 12084              		.loc 1 6125 6 is_stmt 0 view .LVU4011
 12085 01c2 16F0080F 		tst	r6, #8
 12086 01c6 08D0     		beq	.L876
 12087              		.loc 1 6125 14 is_stmt 1 discriminator 1 view .LVU4012
 12088              	.LVL1484:
 12089              		.loc 1 6125 23 is_stmt 0 discriminator 1 view .LVU4013
 12090 01c8 07F17003 		add	r3, r7, #112
 12091 01cc 0DEB0307 		add	r7, sp, r3
 12092 01d0 2D23     		movs	r3, #45
 12093 01d2 07F8703C 		strb	r3, [r7, #-112]
 12094              		.loc 1 6125 19 discriminator 1 view .LVU4014
 12095 01d6 0CF10207 		add	r7, ip, #2
 12096              	.LVL1485:
 12097              	.L876:
6126:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 12098              		.loc 1 6126 3 is_stmt 1 view .LVU4015
 12099              		.loc 1 6126 10 view .LVU4016
 12100              		.loc 1 6126 12 is_stmt 0 view .LVU4017
 12101 01da 16F0010F 		tst	r6, #1
 12102 01de 03D0     		beq	.L889
 12103              		.loc 1 6126 12 discriminator 1 view .LVU4018
 12104 01e0 4FF0300A 		mov	r10, #48
 12105              	.L877:
 12106              	.LVL1486:
6127:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (!(f & 2) && j++ < w) putc_bfd(&pb, d);
 12107              		.loc 1 6127 3 is_stmt 1 view .LVU4019
6126:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 12108              		.loc 1 6126 5 is_stmt 0 view .LVU4020
 12109 01e4 B846     		mov	r8, r7
 12110              		.loc 1 6127 9 view .LVU4021
 12111 01e6 07E0     		b	.L878
 12112              	.LVL1487:
 12113              	.L889:
6126:Middlewares/Third_Party/FatFs/src/ff.c **** 		j = i; d = (f & 1) ? '0' : ' ';
 12114              		.loc 1 6126 12 discriminator 2 view .LVU4022
 12115 01e8 4FF0200A 		mov	r10, #32
 12116 01ec FAE7     		b	.L877
 12117              	.LVL1488:
 12118              	.L880:
 12119              		.loc 1 6127 31 is_stmt 1 discriminator 3 view .LVU4023
 12120 01ee 5146     		mov	r1, r10
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 381


 12121 01f0 08A8     		add	r0, sp, #32
 12122 01f2 FFF7FEFF 		bl	putc_bfd
 12123              	.LVL1489:
 12124              		.loc 1 6127 23 is_stmt 0 discriminator 2 view .LVU4024
 12125 01f6 C846     		mov	r8, r9
 12126              	.LVL1490:
 12127              	.L878:
 12128              		.loc 1 6127 19 is_stmt 1 discriminator 1 view .LVU4025
 12129 01f8 16F0020F 		tst	r6, #2
 12130 01fc 04D1     		bne	.L881
 12131              		.loc 1 6127 23 is_stmt 0 discriminator 2 view .LVU4026
 12132 01fe 08F10109 		add	r9, r8, #1
 12133              	.LVL1491:
 12134              		.loc 1 6127 19 discriminator 2 view .LVU4027
 12135 0202 A045     		cmp	r8, r4
 12136 0204 F3D3     		bcc	.L880
 12137              		.loc 1 6127 23 discriminator 2 view .LVU4028
 12138 0206 C846     		mov	r8, r9
 12139              	.LVL1492:
 12140              	.L881:
6128:Middlewares/Third_Party/FatFs/src/ff.c **** 		do {
 12141              		.loc 1 6128 3 is_stmt 1 view .LVU4029
6129:Middlewares/Third_Party/FatFs/src/ff.c **** 			putc_bfd(&pb, str[--i]);
 12142              		.loc 1 6129 4 view .LVU4030
 12143 0208 013F     		subs	r7, r7, #1
 12144              	.LVL1493:
 12145              		.loc 1 6129 4 is_stmt 0 view .LVU4031
 12146 020a 07F17003 		add	r3, r7, #112
 12147 020e 6B44     		add	r3, sp, r3
 12148 0210 13F8701C 		ldrb	r1, [r3, #-112]	@ zero_extendqisi2
 12149 0214 08A8     		add	r0, sp, #32
 12150 0216 FFF7FEFF 		bl	putc_bfd
 12151              	.LVL1494:
6130:Middlewares/Third_Party/FatFs/src/ff.c **** 		} while (i);
 12152              		.loc 1 6130 12 is_stmt 1 discriminator 1 view .LVU4032
 12153 021a 002F     		cmp	r7, #0
 12154 021c F4D1     		bne	.L881
 12155              	.LVL1495:
 12156              	.L882:
6131:Middlewares/Third_Party/FatFs/src/ff.c **** 		while (j++ < w) putc_bfd(&pb, d);
 12157              		.loc 1 6131 14 discriminator 1 view .LVU4033
 12158              		.loc 1 6131 11 is_stmt 0 discriminator 1 view .LVU4034
 12159 021e 08F10106 		add	r6, r8, #1
 12160              	.LVL1496:
 12161              		.loc 1 6131 14 discriminator 1 view .LVU4035
 12162 0222 A045     		cmp	r8, r4
 12163 0224 BFF4F8AE 		bcs	.L841
 12164              		.loc 1 6131 19 is_stmt 1 discriminator 2 view .LVU4036
 12165 0228 5146     		mov	r1, r10
 12166 022a 08A8     		add	r0, sp, #32
 12167 022c FFF7FEFF 		bl	putc_bfd
 12168              	.LVL1497:
 12169              		.loc 1 6131 11 is_stmt 0 discriminator 1 view .LVU4037
 12170 0230 B046     		mov	r8, r6
 12171 0232 F4E7     		b	.L882
 12172              	.LVL1498:
 12173              	.L842:
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 382


6132:Middlewares/Third_Party/FatFs/src/ff.c **** 	}
6133:Middlewares/Third_Party/FatFs/src/ff.c **** 
6134:Middlewares/Third_Party/FatFs/src/ff.c **** 	va_end(arp);
 12174              		.loc 1 6134 2 is_stmt 1 view .LVU4038
6135:Middlewares/Third_Party/FatFs/src/ff.c **** 
6136:Middlewares/Third_Party/FatFs/src/ff.c **** 	return putc_flush(&pb);
 12175              		.loc 1 6136 2 view .LVU4039
 12176              		.loc 1 6136 9 is_stmt 0 view .LVU4040
 12177 0234 08A8     		add	r0, sp, #32
 12178 0236 FFF7FEFF 		bl	putc_flush
 12179              	.LVL1499:
6137:Middlewares/Third_Party/FatFs/src/ff.c **** }
 12180              		.loc 1 6137 1 view .LVU4041
 12181 023a 1DB0     		add	sp, sp, #116
 12182              	.LCFI132:
 12183              		.cfi_def_cfa_offset 44
 12184              		@ sp needed
 12185 023c BDE8F047 		pop	{r4, r5, r6, r7, r8, r9, r10, lr}
 12186              	.LCFI133:
 12187              		.cfi_restore 14
 12188              		.cfi_restore 10
 12189              		.cfi_restore 9
 12190              		.cfi_restore 8
 12191              		.cfi_restore 7
 12192              		.cfi_restore 6
 12193              		.cfi_restore 5
 12194              		.cfi_restore 4
 12195              		.cfi_def_cfa_offset 12
 12196 0240 03B0     		add	sp, sp, #12
 12197              	.LCFI134:
 12198              		.cfi_restore 3
 12199              		.cfi_restore 2
 12200              		.cfi_restore 1
 12201              		.cfi_def_cfa_offset 0
 12202 0242 7047     		bx	lr
 12203              		.cfi_endproc
 12204              	.LFE401:
 12206              		.section	.rodata.cst.0,"a"
 12207              		.align	2
 12210              	cst.0:
 12211 0000 0100     		.short	1
 12212 0002 0400     		.short	4
 12213 0004 1000     		.short	16
 12214 0006 4000     		.short	64
 12215 0008 0001     		.short	256
 12216 000a 0002     		.short	512
 12217 000c 0000     		.short	0
 12218              		.section	.rodata.cst32.1,"a"
 12219              		.align	2
 12222              	cst32.1:
 12223 0000 0100     		.short	1
 12224 0002 0200     		.short	2
 12225 0004 0400     		.short	4
 12226 0006 0800     		.short	8
 12227 0008 1000     		.short	16
 12228 000a 2000     		.short	32
 12229 000c 0000     		.short	0
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 383


 12230              		.section	.rodata.ExCvt,"a"
 12231              		.align	2
 12234              	ExCvt:
 12235 0000 43554541 		.ascii	"CUEAAAACEEEIIIAAE\222\222OOOUUYOUO\234O\236\237AIOU"
 12235      41414143 
 12235      45454549 
 12235      49494141 
 12235      4592924F 
 12236 0024 A5A5A6A7 		.ascii	"\245\245\246\247\250\251\252\253\254\255\256\257\260"
 12236      A8A9AAAB 
 12236      ACADAEAF 
 12236      B0
 12237 0031 B1B2B3B4 		.ascii	"\261\262\263\264AAA\270\271\272\273\274\275\276\277"
 12237      414141B8 
 12237      B9BABBBC 
 12237      BDBEBF
 12238 0040 C0C1C2C3 		.ascii	"\300\301\302\303\304\305AA\310\311\312\313\314\315\316"
 12238      C4C54141 
 12238      C8C9CACB 
 12238      CCCDCE
 12239 004f CFD1D145 		.ascii	"\317\321\321EEEIIII\331\332\333\334\335I\337O\341OO"
 12239      45454949 
 12239      4949D9DA 
 12239      DBDCDD49 
 12239      DF4FE14F 
 12240 0064 4F4FE6E8 		.ascii	"OO\346\350\350UUUYY\356\357\360\361\362\363\364\365"
 12240      E8555555 
 12240      5959EEEF 
 12240      F0F1F2F3 
 12240      F4F5
 12241 0076 F6F7F8F9 		.ascii	"\366\367\370\371\372\373\374\375\376\377"
 12241      FAFBFCFD 
 12241      FEFF
 12242              		.section	.bss.Files,"aw",%nobits
 12243              		.align	2
 12246              	Files:
 12247 0000 00000000 		.space	32
 12247      00000000 
 12247      00000000 
 12247      00000000 
 12247      00000000 
 12248              		.section	.bss.Fsid,"aw",%nobits
 12249              		.align	1
 12252              	Fsid:
 12253 0000 0000     		.space	2
 12254              		.section	.bss.FatFs,"aw",%nobits
 12255              		.align	2
 12258              	FatFs:
 12259 0000 00000000 		.space	4
 12260              		.text
 12261              	.Letext0:
 12262              		.file 2 "Middlewares/Third_Party/FatFs/src/integer.h"
 12263              		.file 3 "D:/armtoolchain/arm-gnu-toolchain-13.3.rel1-mingw-w64-i686-arm-none-eabi/arm-none-eabi/in
 12264              		.file 4 "D:/armtoolchain/arm-gnu-toolchain-13.3.rel1-mingw-w64-i686-arm-none-eabi/arm-none-eabi/in
 12265              		.file 5 "Middlewares/Third_Party/FreeRTOS/Source/include/queue.h"
 12266              		.file 6 "Middlewares/Third_Party/FreeRTOS/Source/include/semphr.h"
 12267              		.file 7 "Middlewares/Third_Party/FreeRTOS/Source/CMSIS_RTOS/cmsis_os.h"
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 384


 12268              		.file 8 "Middlewares/Third_Party/FatFs/src/ff.h"
 12269              		.file 9 "Middlewares/Third_Party/FatFs/src/diskio.h"
 12270              		.file 10 "D:/armtoolchain/arm-gnu-toolchain-13.3.rel1-mingw-w64-i686-arm-none-eabi/lib/gcc/arm-non
 12271              		.file 11 "<built-in>"
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 385


DEFINED SYMBOLS
                            *ABS*:00000000 ff.c
C:\usertemp\ccTKhvO9.s:20     .text.ld_word:00000000 $t
C:\usertemp\ccTKhvO9.s:25     .text.ld_word:00000000 ld_word
C:\usertemp\ccTKhvO9.s:52     .text.ld_dword:00000000 $t
C:\usertemp\ccTKhvO9.s:57     .text.ld_dword:00000000 ld_dword
C:\usertemp\ccTKhvO9.s:96     .text.st_word:00000000 $t
C:\usertemp\ccTKhvO9.s:101    .text.st_word:00000000 st_word
C:\usertemp\ccTKhvO9.s:125    .text.st_dword:00000000 $t
C:\usertemp\ccTKhvO9.s:130    .text.st_dword:00000000 st_dword
C:\usertemp\ccTKhvO9.s:169    .text.mem_cpy:00000000 $t
C:\usertemp\ccTKhvO9.s:174    .text.mem_cpy:00000000 mem_cpy
C:\usertemp\ccTKhvO9.s:214    .text.mem_set:00000000 $t
C:\usertemp\ccTKhvO9.s:219    .text.mem_set:00000000 mem_set
C:\usertemp\ccTKhvO9.s:246    .text.mem_cmp:00000000 $t
C:\usertemp\ccTKhvO9.s:251    .text.mem_cmp:00000000 mem_cmp
C:\usertemp\ccTKhvO9.s:294    .text.chk_chr:00000000 $t
C:\usertemp\ccTKhvO9.s:299    .text.chk_chr:00000000 chk_chr
C:\usertemp\ccTKhvO9.s:335    .text.chk_lock:00000000 $t
C:\usertemp\ccTKhvO9.s:340    .text.chk_lock:00000000 chk_lock
C:\usertemp\ccTKhvO9.s:477    .text.chk_lock:00000078 $d
C:\usertemp\ccTKhvO9.s:12246  .bss.Files:00000000 Files
C:\usertemp\ccTKhvO9.s:482    .text.enq_lock:00000000 $t
C:\usertemp\ccTKhvO9.s:487    .text.enq_lock:00000000 enq_lock
C:\usertemp\ccTKhvO9.s:531    .text.enq_lock:0000001c $d
C:\usertemp\ccTKhvO9.s:536    .text.inc_lock:00000000 $t
C:\usertemp\ccTKhvO9.s:541    .text.inc_lock:00000000 inc_lock
C:\usertemp\ccTKhvO9.s:711    .text.inc_lock:0000009c $d
C:\usertemp\ccTKhvO9.s:716    .text.dec_lock:00000000 $t
C:\usertemp\ccTKhvO9.s:721    .text.dec_lock:00000000 dec_lock
C:\usertemp\ccTKhvO9.s:802    .text.dec_lock:0000003c $d
C:\usertemp\ccTKhvO9.s:807    .text.clear_lock:00000000 $t
C:\usertemp\ccTKhvO9.s:812    .text.clear_lock:00000000 clear_lock
C:\usertemp\ccTKhvO9.s:889    .text.clear_lock:00000038 $d
C:\usertemp\ccTKhvO9.s:894    .text.clust2sect:00000000 $t
C:\usertemp\ccTKhvO9.s:899    .text.clust2sect:00000000 clust2sect
C:\usertemp\ccTKhvO9.s:939    .text.clmt_clust:00000000 $t
C:\usertemp\ccTKhvO9.s:944    .text.clmt_clust:00000000 clmt_clust
C:\usertemp\ccTKhvO9.s:1012   .text.ld_clust:00000000 $t
C:\usertemp\ccTKhvO9.s:1017   .text.ld_clust:00000000 ld_clust
C:\usertemp\ccTKhvO9.s:1073   .text.st_clust:00000000 $t
C:\usertemp\ccTKhvO9.s:1078   .text.st_clust:00000000 st_clust
C:\usertemp\ccTKhvO9.s:1127   .text.get_fileinfo:00000000 $t
C:\usertemp\ccTKhvO9.s:1132   .text.get_fileinfo:00000000 get_fileinfo
C:\usertemp\ccTKhvO9.s:1272   .rodata.create_name.str1.4:00000000 $d
C:\usertemp\ccTKhvO9.s:1276   .text.create_name:00000000 $t
C:\usertemp\ccTKhvO9.s:1281   .text.create_name:00000000 create_name
C:\usertemp\ccTKhvO9.s:1513   .text.create_name:000000c8 $d
C:\usertemp\ccTKhvO9.s:12234  .rodata.ExCvt:00000000 ExCvt
C:\usertemp\ccTKhvO9.s:1519   .text.get_ldnumber:00000000 $t
C:\usertemp\ccTKhvO9.s:1524   .text.get_ldnumber:00000000 get_ldnumber
C:\usertemp\ccTKhvO9.s:1625   .text.putc_init:00000000 $t
C:\usertemp\ccTKhvO9.s:1630   .text.putc_init:00000000 putc_init
C:\usertemp\ccTKhvO9.s:1653   .text.lock_fs:00000000 $t
C:\usertemp\ccTKhvO9.s:1658   .text.lock_fs:00000000 lock_fs
C:\usertemp\ccTKhvO9.s:1702   .text.sync_window:00000000 $t
C:\usertemp\ccTKhvO9.s:1707   .text.sync_window:00000000 sync_window
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 386


C:\usertemp\ccTKhvO9.s:1814   .text.move_window:00000000 $t
C:\usertemp\ccTKhvO9.s:1819   .text.move_window:00000000 move_window
C:\usertemp\ccTKhvO9.s:1891   .text.check_fs:00000000 $t
C:\usertemp\ccTKhvO9.s:1896   .text.check_fs:00000000 check_fs
C:\usertemp\ccTKhvO9.s:1992   .text.check_fs:0000006c $d
C:\usertemp\ccTKhvO9.s:1999   .text.find_volume:00000000 $t
C:\usertemp\ccTKhvO9.s:2004   .text.find_volume:00000000 find_volume
C:\usertemp\ccTKhvO9.s:2685   .text.find_volume:00000300 $d
C:\usertemp\ccTKhvO9.s:12258  .bss.FatFs:00000000 FatFs
C:\usertemp\ccTKhvO9.s:12252  .bss.Fsid:00000000 Fsid
C:\usertemp\ccTKhvO9.s:2693   .text.put_fat:00000000 $t
C:\usertemp\ccTKhvO9.s:2698   .text.put_fat:00000000 put_fat
C:\usertemp\ccTKhvO9.s:2944   .text.get_fat:00000000 $t
C:\usertemp\ccTKhvO9.s:2949   .text.get_fat:00000000 get_fat
C:\usertemp\ccTKhvO9.s:3166   .text.dir_sdi:00000000 $t
C:\usertemp\ccTKhvO9.s:3171   .text.dir_sdi:00000000 dir_sdi
C:\usertemp\ccTKhvO9.s:3368   .text.create_chain:00000000 $t
C:\usertemp\ccTKhvO9.s:3373   .text.create_chain:00000000 create_chain
C:\usertemp\ccTKhvO9.s:3609   .text.remove_chain:00000000 $t
C:\usertemp\ccTKhvO9.s:3614   .text.remove_chain:00000000 remove_chain
C:\usertemp\ccTKhvO9.s:3775   .text.dir_remove:00000000 $t
C:\usertemp\ccTKhvO9.s:3780   .text.dir_remove:00000000 dir_remove
C:\usertemp\ccTKhvO9.s:3831   .text.dir_next:00000000 $t
C:\usertemp\ccTKhvO9.s:3836   .text.dir_next:00000000 dir_next
C:\usertemp\ccTKhvO9.s:4134   .text.dir_find:00000000 $t
C:\usertemp\ccTKhvO9.s:4139   .text.dir_find:00000000 dir_find
C:\usertemp\ccTKhvO9.s:4247   .text.follow_path:00000000 $t
C:\usertemp\ccTKhvO9.s:4252   .text.follow_path:00000000 follow_path
C:\usertemp\ccTKhvO9.s:4416   .text.dir_alloc:00000000 $t
C:\usertemp\ccTKhvO9.s:4421   .text.dir_alloc:00000000 dir_alloc
C:\usertemp\ccTKhvO9.s:4532   .text.dir_register:00000000 $t
C:\usertemp\ccTKhvO9.s:4537   .text.dir_register:00000000 dir_register
C:\usertemp\ccTKhvO9.s:4611   .text.dir_read:00000000 $t
C:\usertemp\ccTKhvO9.s:4616   .text.dir_read:00000000 dir_read
C:\usertemp\ccTKhvO9.s:4738   .text.unlock_fs:00000000 $t
C:\usertemp\ccTKhvO9.s:4743   .text.unlock_fs:00000000 unlock_fs
C:\usertemp\ccTKhvO9.s:4796   .text.validate:00000000 $t
C:\usertemp\ccTKhvO9.s:4801   .text.validate:00000000 validate
C:\usertemp\ccTKhvO9.s:4926   .text.sync_fs:00000000 $t
C:\usertemp\ccTKhvO9.s:4931   .text.sync_fs:00000000 sync_fs
C:\usertemp\ccTKhvO9.s:5045   .text.sync_fs:00000084 $d
C:\usertemp\ccTKhvO9.s:5051   .text.f_mount:00000000 $t
C:\usertemp\ccTKhvO9.s:5057   .text.f_mount:00000000 f_mount
C:\usertemp\ccTKhvO9.s:5213   .text.f_mount:00000084 $d
C:\usertemp\ccTKhvO9.s:5218   .text.f_open:00000000 $t
C:\usertemp\ccTKhvO9.s:5224   .text.f_open:00000000 f_open
C:\usertemp\ccTKhvO9.s:5779   .text.f_read:00000000 $t
C:\usertemp\ccTKhvO9.s:5785   .text.f_read:00000000 f_read
C:\usertemp\ccTKhvO9.s:6267   .text.f_write:00000000 $t
C:\usertemp\ccTKhvO9.s:6273   .text.f_write:00000000 f_write
C:\usertemp\ccTKhvO9.s:6797   .text.putc_bfd:00000000 $t
C:\usertemp\ccTKhvO9.s:6802   .text.putc_bfd:00000000 putc_bfd
C:\usertemp\ccTKhvO9.s:6914   .text.putc_flush:00000000 $t
C:\usertemp\ccTKhvO9.s:6919   .text.putc_flush:00000000 putc_flush
C:\usertemp\ccTKhvO9.s:6998   .text.f_sync:00000000 $t
C:\usertemp\ccTKhvO9.s:7004   .text.f_sync:00000000 f_sync
C:\usertemp\ccTKhvO9.s:7178   .text.f_close:00000000 $t
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 387


C:\usertemp\ccTKhvO9.s:7184   .text.f_close:00000000 f_close
C:\usertemp\ccTKhvO9.s:7268   .text.f_lseek:00000000 $t
C:\usertemp\ccTKhvO9.s:7274   .text.f_lseek:00000000 f_lseek
C:\usertemp\ccTKhvO9.s:8090   .text.f_opendir:00000000 $t
C:\usertemp\ccTKhvO9.s:8096   .text.f_opendir:00000000 f_opendir
C:\usertemp\ccTKhvO9.s:8283   .text.f_closedir:00000000 $t
C:\usertemp\ccTKhvO9.s:8289   .text.f_closedir:00000000 f_closedir
C:\usertemp\ccTKhvO9.s:8365   .text.f_readdir:00000000 $t
C:\usertemp\ccTKhvO9.s:8371   .text.f_readdir:00000000 f_readdir
C:\usertemp\ccTKhvO9.s:8482   .text.f_stat:00000000 $t
C:\usertemp\ccTKhvO9.s:8488   .text.f_stat:00000000 f_stat
C:\usertemp\ccTKhvO9.s:8587   .text.f_getfree:00000000 $t
C:\usertemp\ccTKhvO9.s:8593   .text.f_getfree:00000000 f_getfree
C:\usertemp\ccTKhvO9.s:8885   .text.f_truncate:00000000 $t
C:\usertemp\ccTKhvO9.s:8891   .text.f_truncate:00000000 f_truncate
C:\usertemp\ccTKhvO9.s:9112   .text.f_unlink:00000000 $t
C:\usertemp\ccTKhvO9.s:9118   .text.f_unlink:00000000 f_unlink
C:\usertemp\ccTKhvO9.s:9346   .text.f_mkdir:00000000 $t
C:\usertemp\ccTKhvO9.s:9352   .text.f_mkdir:00000000 f_mkdir
C:\usertemp\ccTKhvO9.s:9722   .text.f_rename:00000000 $t
C:\usertemp\ccTKhvO9.s:9728   .text.f_rename:00000000 f_rename
C:\usertemp\ccTKhvO9.s:10021  .rodata.f_mkfs.str1.4:00000000 $d
C:\usertemp\ccTKhvO9.s:10031  .text.f_mkfs:00000000 $t
C:\usertemp\ccTKhvO9.s:10037  .text.f_mkfs:00000000 f_mkfs
C:\usertemp\ccTKhvO9.s:10605  .text.f_mkfs:00000258 $d
C:\usertemp\ccTKhvO9.s:12222  .rodata.cst32.1:00000000 cst32.1
C:\usertemp\ccTKhvO9.s:12210  .rodata.cst.0:00000000 cst.0
C:\usertemp\ccTKhvO9.s:10612  .text.f_mkfs:0000026c $t
C:\usertemp\ccTKhvO9.s:11114  .text.f_mkfs:00000588 $d
C:\usertemp\ccTKhvO9.s:11123  .text.f_mkfs:000005a0 $t
C:\usertemp\ccTKhvO9.s:11358  .text.f_gets:00000000 $t
C:\usertemp\ccTKhvO9.s:11364  .text.f_gets:00000000 f_gets
C:\usertemp\ccTKhvO9.s:11484  .text.f_putc:00000000 $t
C:\usertemp\ccTKhvO9.s:11490  .text.f_putc:00000000 f_putc
C:\usertemp\ccTKhvO9.s:11535  .text.f_puts:00000000 $t
C:\usertemp\ccTKhvO9.s:11541  .text.f_puts:00000000 f_puts
C:\usertemp\ccTKhvO9.s:11598  .text.f_printf:00000000 $t
C:\usertemp\ccTKhvO9.s:11604  .text.f_printf:00000000 f_printf
C:\usertemp\ccTKhvO9.s:11790  .text.f_printf:000000a0 $d
C:\usertemp\ccTKhvO9.s:12207  .rodata.cst.0:00000000 $d
C:\usertemp\ccTKhvO9.s:12219  .rodata.cst32.1:00000000 $d
C:\usertemp\ccTKhvO9.s:12231  .rodata.ExCvt:00000000 $d
C:\usertemp\ccTKhvO9.s:12243  .bss.Files:00000000 $d
C:\usertemp\ccTKhvO9.s:12249  .bss.Fsid:00000000 $d
C:\usertemp\ccTKhvO9.s:12255  .bss.FatFs:00000000 $d
C:\usertemp\ccTKhvO9.s:11814  .text.f_printf:000000b7 $d
C:\usertemp\ccTKhvO9.s:11814  .text.f_printf:000000b8 $t

UNDEFINED SYMBOLS
ff_req_grant
disk_write
disk_read
disk_status
disk_initialize
ff_rel_grant
disk_ioctl
ff_del_syncobj
ARM GAS  C:\usertemp\ccTKhvO9.s 			page 388


ff_cre_syncobj
get_fattime
